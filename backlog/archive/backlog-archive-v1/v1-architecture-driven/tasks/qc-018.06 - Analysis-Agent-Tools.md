---
id: QC-018.06
title: Analysis Agent Tools
status: To Do
assignee: []
created_date: '2026-01-29 16:42'
labels:
  - application
  - analysis
  - agent-tools
  - P0
dependencies: []
parent_task_id: QC-018
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Agent tools: get_code_frequency (AUTONOMOUS), get_co_occurrence (AUTONOMOUS), query_codes (AUTONOMOUS), search_text (AUTONOMOUS). Enable AI analytical questions.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->

### Agent Tool Schemas (All AUTONOMOUS - read-only analysis)
- [ ] #1 `get_code_frequency` tool:
  - Input: filters (code_ids, source_ids, case_ids optional)
  - Output: frequencies (list of code, count, percentage)
  - Trust: **AUTONOMOUS** (read-only)

- [ ] #2 `get_co_occurrence` tool:
  - Input: filters, mode (overlapping|edge_connected)
  - Output: matrix (code pairs with counts)
  - Trust: **AUTONOMOUS**

- [ ] #3 `query_codes` tool:
  - Input: filters, include_segments (bool)
  - Output: codes with optional segment details
  - Trust: **AUTONOMOUS**

- [ ] #4 `search_text` tool:
  - Input: query (text), mode (exact|regex|fuzzy)
  - Output: matches (source_id, position, context)
  - Trust: **AUTONOMOUS**

- [ ] #5 `compare_coders` tool:
  - Input: coder_a, coder_b, filters
  - Output: kappa_score, agreements, disagreements
  - Trust: **AUTONOMOUS**

### AI-Enabled Questions
- [ ] #6 Agent can answer: "How many segments coded with X?"
- [ ] #7 Agent can answer: "Which codes appear together most often?"
- [ ] #8 Agent can answer: "What is the inter-rater reliability?"
- [ ] #9 Agent can answer: "Find all mentions of 'keyword'"

### Schema Structure
- [ ] #10 Each schema: name, description, inputSchema (JSON Schema), trust_level
- [ ] #11 Resource URIs: `qualcoder://analysis/tools/{tool_name}`

### Controller Integration
- [ ] #12 Tools invoke AnalysisController query methods
- [ ] #13 Returns data as JSON for agent processing

<!-- AC:END -->

## Implementation Notes

**For MCP (Model Context Protocol):**
- Schemas follow MCP Tool Schema specification
- All tools are read-only (AUTONOMOUS trust level)
