---
id: QC-004.03
title: Segment Importance Event
status: To Do
assignee: []
created_date: '2026-01-29 16:38'
labels:
  - domain
  - coding
  - P1
dependencies: []
parent_task_id: QC-004
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Add domain event for segment importance changes. Enables UI to update bold formatting when importance toggled.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
### Event (frozen dataclass extending DomainEvent)
- [ ] #1 `SegmentImportanceChanged` event with payload: segment_id, code_id, old_importance (0|1), new_importance (0|1)
- [ ] #2 Event includes standard fields: event_id, occurred_at, caused_by (coder_id)

### Value Object Update
- [ ] #3 `Importance` value object or type alias: constrained to 0 (normal) or 1 (important)

### Invariants (pure predicate functions)
- [ ] #4 `is_valid_importance(value: int) -> bool` - value in {0, 1}
- [ ] #5 `is_importance_change_valid(old: int, new: int) -> bool` - values differ

### Integration
- [ ] #6 Event added to `SegmentEvent` union type: SegmentCoded | SegmentUncoded | SegmentMemoUpdated | **SegmentImportanceChanged**
- [ ] #7 Event registered in Coding context event catalog
<!-- AC:END -->
