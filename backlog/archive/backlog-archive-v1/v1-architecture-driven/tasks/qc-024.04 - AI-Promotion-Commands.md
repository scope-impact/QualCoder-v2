---
id: QC-024.04
title: AI Promotion Commands
status: To Do
assignee: []
created_date: '2026-01-29 16:44'
labels:
  - application
  - collaboration
  - P1
dependencies: []
parent_task_id: QC-024
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Commands: PromoteAICoding (transfer AI codings to human coder), ToggleAIVisibility (show/hide AI codings in view).
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
### Controller Commands (Imperative Shell)
- [ ] #1 `promote_ai_coding(segment_ids, to_coder_id) -> Result[AICodePromoted, Error]`
- [ ] #2 `promote_all_ai_codings(to_coder_id) -> Result[AICodePromoted, Error]`
- [ ] #3 `toggle_ai_visibility(visible: bool) -> Result[AIVisibilityToggled, Error]`

### Promotion Logic
- [ ] #4 Transfers ownership from AI coder to specified human coder
- [ ] #5 Preserves all segment data (code, position, memo, importance)
- [ ] #6 Batch operation for efficiency

### Visibility Toggle
- [ ] #7 `is_ai_visible() -> bool` - current visibility state
- [ ] #8 When hidden: AI codings excluded from UI display
- [ ] #9 When visible: AI codings shown with AI badge
- [ ] #10 Persisted per-project setting

### Deriver Functions (Pure)
- [ ] #11 `derive_promotion(ai_segments, target_coder) -> PromotionPlan`
- [ ] #12 `validate_promotion(segments, target) -> Result[None, Error]`

### Event Publishing
- [ ] #13 `AICodePromoted` event: segment_ids, from_coder (AI), to_coder
- [ ] #14 `AIVisibilityToggled` event: visible, affected_segments_count

### Invariants
- [ ] #15 `is_ai_coder(coder_id) -> bool` - validate source is AI
- [ ] #16 `is_human_coder(coder_id) -> bool` - validate target is human
<!-- AC:END -->
