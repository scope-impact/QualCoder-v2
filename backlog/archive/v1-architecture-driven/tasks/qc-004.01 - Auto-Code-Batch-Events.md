---
id: QC-004.01
title: Auto-Code Batch Events
status: To Do
assignee: []
created_date: '2026-01-29 16:38'
labels:
  - domain
  - coding
  - P1
dependencies: []
parent_task_id: QC-004
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Add domain events for auto-coding batch operations. Enables tracking batches for undo and progress reporting.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
### Events (frozen dataclasses extending DomainEvent)
- [ ] #1 `AutoCodeBatchStarted` event with payload: batch_id, code_id, source_id, pattern, match_type (exact/startswith/contains/regex)
- [ ] #2 `AutoCodeBatchCompleted` event with payload: batch_id, segments_created (list of segment_ids), total_matches
- [ ] #3 `AutoCodeBatchUndone` event with payload: batch_id, segments_removed (list of segment_ids)

### Value Objects (frozen dataclasses)
- [ ] #4 `AutoCodeBatch` value object: batch_id, code_id, pattern, match_type, segment_ids, created_at
- [ ] #5 `MatchType` enum: EXACT, STARTS_WITH, CONTAINS, ENDS_WITH, REGEX

### Invariants (pure predicate functions)
- [ ] #6 `is_valid_regex(pattern: str) -> bool` - validates regex patterns
- [ ] #7 `is_batch_undoable(batch: AutoCodeBatch, segments: List[Segment]) -> bool` - all segments still exist

### Integration
- [ ] #8 Events registered in Coding context event catalog
- [ ] #9 Events follow standard structure: event_id, event_type, aggregate_id, occurred_at, caused_by, payload
<!-- AC:END -->
