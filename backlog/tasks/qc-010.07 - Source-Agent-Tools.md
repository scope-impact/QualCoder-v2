---
id: QC-010.07
title: Source Agent Tools
status: To Do
assignee: []
created_date: '2026-01-29 16:41'
labels:
  - application
  - sources
  - agent-tools
  - P1
dependencies: []
parent_task_id: QC-010
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Agent tools: import_file (NOTIFY), rename_source (NOTIFY), delete_source (REQUIRE), detect_speakers (SUGGEST), import_survey (REQUIRE). Register with agent server.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->

### Agent Tool Schemas
- [ ] #1 `import_file` tool schema:
  - Input: path (str), copy (bool, default true)
  - Output: source_id, source_type, name
  - Trust Level: **NOTIFY** (executes, user notified)

- [ ] #2 `rename_source` tool schema:
  - Input: source_id, new_name
  - Output: success (bool), old_name, new_name
  - Trust Level: **NOTIFY**

- [ ] #3 `delete_source` tool schema:
  - Input: source_id
  - Output: success (bool), deleted_segments_count
  - Trust Level: **REQUIRE** (requires explicit approval - destructive)

- [ ] #4 `detect_speakers` tool schema:
  - Input: source_id, format (auto|colon|bracket|brace)
  - Output: speakers (list of names), count
  - Trust Level: **SUGGEST** (proposes action, user approves)

- [ ] #5 `import_survey` tool schema:
  - Input: path, delimiter, has_header, column_mappings
  - Output: sources_created, cases_created, rows_processed
  - Trust Level: **REQUIRE** (bulk operation, needs approval)

### Read-Only Tools (AUTONOMOUS)
- [ ] #6 `list_sources` tool: filter by type, return source list
- [ ] #7 `get_source_text` tool: return source content for analysis
- [ ] #8 Trust Level: **AUTONOMOUS** (read-only, no approval needed)

### Schema Structure
- [ ] #9 Each schema defines: name, description, inputSchema (JSON Schema), trust_level
- [ ] #10 Schemas registered with agent server on startup
- [ ] #11 Resource URIs: `qualcoder://sources/tools/{tool_name}`

### Controller Integration
- [ ] #12 Each agent tool invokes corresponding Controller command
- [ ] #13 Controller returns Result[Event, Failure] â†’ tool returns success/error
- [ ] #14 Agent actions emit same domain events as UI actions

<!-- AC:END -->

## Implementation Notes

**For MCP (Model Context Protocol):**
- Schemas follow MCP Tool Schema specification
- Registered via MCP server's tool registration API
