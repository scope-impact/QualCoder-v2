---
id: QC-002.02
title: PySide6 + Qt-Material Migration
status: Done
milestone: M-001
layer: Design System
created_date: '2026-01-30'
completed_date: '2026-01-30'
labels: [design-system, P1, enhancement, refactor]
dependencies: [QC-002.01]
---

## Description

Migrate the design system from PyQt6 to PySide6 and integrate qt-material theme for modern Material Design styling. This provides LGPL licensing (free for commercial use) and consistent Material Design aesthetics.

**Key Changes:**
- Replace PyQt6 with PySide6 (99.9% API compatible)
- Add qt-material theme integration
- Create Qt compatibility layer for future flexibility
- Update token system to leverage qt-material colors

## Rationale

1. **Licensing**: PySide6 uses LGPL (free for commercial), PyQt6 requires paid license for closed-source
2. **Modern Look**: qt-material provides polished Material Design out of the box
3. **Maintainability**: Qt Company maintains PySide6 directly
4. **Compatibility**: Both use identical Qt6 APIs

## Acceptance Criteria

- [x] Qt compatibility layer (`qt_compat.py`) allows switching between PyQt6/PySide6
- [x] All design system imports use compatibility layer
- [x] qt-material theme integrated with `setup_theme()` function
- [x] Token system updated to use qt-material color palette
- [x] Signal/pyqtSignal â†’ Signal migration complete
- [x] pyproject.toml updated with PySide6 + qt-material dependencies
- [x] Storybook runs with new theme
- [x] All existing tests pass

## Subtasks

| ID | Subtask | Status |
|----|---------|--------|
| 1 | Create Qt compatibility layer (`design_system/qt_compat.py`) | Done |
| 2 | Create theme integration (`design_system/theme.py`) | Done |
| 3 | Migrate design system imports (~30 files) | Done |
| 4 | Migrate src/application imports (signal_bridge) | Done |
| 5 | Migrate src/presentation imports | Done |
| 6 | Update pyproject.toml dependencies | Done |
| 7 | Update tests to use PySide6 | Done |

## Implementation

### Files Created
- `design_system/qt_compat.py` - Compatibility layer (PySide6 first, PyQt6 fallback)
- `design_system/theme.py` - qt-material integration with `setup_theme()` and `MaterialPalette`

### Files Modified
- All `design_system/*.py` - Updated to use `from .qt_compat import ...`
- `src/application/signal_bridge/*.py` - Updated with PySide6/PyQt6 fallback
- `src/presentation/**/*.py` - Updated to use `from design_system.qt_compat import ...`
- `design_system/pyproject.toml` - Changed to PySide6 + qt-material
- `pyproject.toml` - Added PySide6 dependency
- All test files - Updated with try/except for PySide6/PyQt6

### Import Migration Pattern

```python
# Before (PyQt6)
from PyQt6.QtWidgets import QWidget, QPushButton
from PyQt6.QtCore import pyqtSignal, Qt

# After (using compatibility layer)
from design_system.qt_compat import QWidget, QPushButton, Signal, Qt
```

### Theme Setup Pattern

```python
from design_system import setup_theme
from design_system.qt_compat import QApplication

app = QApplication(sys.argv)
palette = setup_theme(app, theme='dark_teal')  # or 'light_teal'
```

## Technical Notes

- PySide6 uses `Signal` instead of `pyqtSignal`
- PySide6 uses `Slot` instead of `pyqtSlot`
- Property decorators work identically
- qt-material themes: dark_teal, light_teal, dark_amber, dark_blue, dark_purple
- Fallback stylesheet provided when qt-material is unavailable

## Dependencies

- QC-002.01 (Visualization Components) - Complete
