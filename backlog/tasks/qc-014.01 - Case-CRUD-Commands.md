---
id: QC-014.01
title: Case CRUD Commands
status: To Do
assignee: []
created_date: '2026-01-29 16:41'
labels:
  - application
  - cases
  - P0
dependencies: []
parent_task_id: QC-014
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Commands: CreateCase, RenameCase, DeleteCase, BulkDeleteCases, UpdateCaseMemo. Validate unique names, emit domain events.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
### Controller Commands (Imperative Shell)
- [ ] #1 `create_case(name: str, memo: Optional[str]) -> Result[CaseCreated, CreateError]`
- [ ] #2 `rename_case(case_id, new_name) -> Result[CaseRenamed, RenameError]`
- [ ] #3 `delete_case(case_id) -> Result[CaseDeleted, DeleteError]`
- [ ] #4 `bulk_delete_cases(case_ids: List[CaseId]) -> Result[BulkDeleteCompleted, DeleteError]`
- [ ] #5 `update_case_memo(case_id, memo) -> Result[CaseMemoUpdated, UpdateError]`

### Deriver Functions (Pure, in Functional Core)
- [ ] #6 `derive_create_case(name, memo, existing_names, owner) -> Result[Case, CreateError]`
- [ ] #7 `derive_rename_case(case, new_name, existing_names) -> Result[CaseRenamed, RenameError]`
- [ ] #8 `derive_delete_case(case, member_count) -> Result[CaseDeleted, DeleteError]`

### Invariants
- [ ] #9 `is_case_name_unique(name, existing_names) -> bool`
- [ ] #10 `is_case_name_valid(name) -> bool` - non-empty, reasonable length
- [ ] #11 `is_case_deletable(case_id, members) -> bool` - warns if has members

### Controller Flow (per fDDD pattern)
- [ ] #12 Controller: validate → call deriver → persist → publish event → return Result
- [ ] #13 On deriver failure, return Failure without side effects

### Event Publishing
- [ ] #14 On success: emit CaseCreated/CaseRenamed/CaseDeleted/CaseMemoUpdated
- [ ] #15 Events published to EventBus for cross-context notification
<!-- AC:END -->
