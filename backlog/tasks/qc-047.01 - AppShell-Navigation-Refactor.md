---
id: QC-047.01
title: AppShell Navigation Refactor
status: To Do
parent: QC-047
layer: Presentation
created_date: '2026-02-04'
labels: [presentation, coding, refactor, P1]
dependencies: []
---

## Description

Refactor AppShell from two-level navigation (menu bar + tab bar) to a single unified horizontal navigation bar matching the target design.

**Current Structure:**
```
Title Bar → Menu Bar → Tab Bar → Toolbar → Content
```

**Target Structure:**
```
Single Nav Bar: QUALCODER | Project | Files | Coding | Reports | AI
```

**Effort Estimate:** 8-16 hours (Medium)

## Acceptance Criteria

- [ ] Single horizontal navigation bar replaces menu bar + tab bar
- [ ] Navigation items: QUALCODER logo, Project, Files, Coding, Reports, AI
- [ ] Active screen highlighted in navigation (e.g., "Coding" when on TextCodingScreen)
- [ ] Screen switching works correctly via navigation clicks
- [ ] "Files and Cases" renamed to just "Files"
- [ ] "Help" menu moved to logo dropdown or removed
- [ ] Secondary navigation (Coding|Reports|Manage|ActionLog tabs) eliminated or moved
- [ ] Keyboard shortcuts for navigation preserved (if any exist)
- [ ] No regression in existing screen routing

## Implementation

### Files to Modify

1. **`src/shared/presentation/templates/app_shell.py`** (~450 lines)
   - Remove `MenuBar` component
   - Remove `TabBar` component
   - Create new `UnifiedNavBar` component
   - Update `AppShell.set_active_screen()` to highlight nav item

2. **`src/main.py`** (navigation wiring)
   - Update screen routing to work with new nav structure
   - Remove tab-based navigation logic

### New Components Needed

```python
class UnifiedNavBar(QFrame):
    """Single horizontal navigation bar"""

    navigation_clicked = Signal(str)  # Emits: "project", "files", "coding", etc.

    def __init__(self, colors: ColorPalette, parent=None):
        # Logo section (QUALCODER)
        # Nav items: Project | Files | Coding | Reports | AI
        # Active item highlighting

    def set_active(self, screen_id: str):
        """Highlight the active navigation item"""
```

### Navigation Mapping

| Nav Item | Screen | Notes |
|----------|--------|-------|
| Project | ProjectScreen | Project selection/creation |
| Files | FileManagerScreen | Source file management |
| Coding | TextCodingScreen | Main coding interface |
| Reports | (future) | Reports screen |
| AI | (future) | AI assistant screen |

### Design Tokens to Use

From `design_system/tokens.py`:
- `SPACING.lg` for nav item padding
- `colors.primary` for active item indicator
- `colors.surface` for nav background
- `TYPOGRAPHY["body"]` for nav text

## Technical Notes

### Signal Flow

```
UnifiedNavBar.navigation_clicked("coding")
    ↓
AppShell._on_navigation_clicked("coding")
    ↓
AppShell.switch_to_screen("coding")
    ↓
QualCoderApp handles screen transition
```

### Breaking Changes

- Tab bar removal affects any code referencing `TAB_ITEMS`
- Menu bar removal affects any code using `MENU_ITEMS`
- Screen IDs must remain stable for routing

### Migration Steps

1. Create `UnifiedNavBar` component
2. Add to `AppShell` layout
3. Wire navigation signals
4. Remove old `MenuBar` and `TabBar`
5. Update `MENU_ITEMS` and `TAB_ITEMS` constants
6. Test all screen transitions
