---
id: QC-003.04
title: Project Migration
status: To Do
assignee: []
created_date: '2026-01-30'
labels:
  - infrastructure
  - foundation
  - P1
dependencies: []
parent_task_id: QC-003
---

## Description

Implement migration tooling to convert QualCoder v1 projects to v2 format. Critical for user adoption.

## Original QualCoder Reference

- Database: SQLite `.qda` file
- Additional files: `pseudonyms.json`, media files in subdirectories

## Acceptance Criteria

### Schema Migration Engine
- [ ] #1 `detect_schema_version(project_path) -> SchemaVersion`
- [ ] #2 `migrate(project_path, target_version) -> Result[MigrationReport, MigrationError]`
- [ ] #3 Incremental migrations (v1.0 → v1.1 → v2.0)
- [ ] #4 Rollback support for failed migrations

### Data Migrations
- [ ] #5 Core tables (source, code_name, code_text, code_image, code_av)
- [ ] #6 Cases and attributes
- [ ] #7 Journals and project settings
- [ ] #8 File path updates if needed

### Backup & Safety
- [ ] #9 Create timestamped backup before migration
- [ ] #10 Verify data integrity after migration
- [ ] #11 `MigrationReport`: changes made, warnings, errors

### UI Integration
- [ ] #12 Show migration dialog when opening v1 project
- [ ] #13 Progress indicator during migration
- [ ] #14 Display migration report on completion

## Implementation

- `src/infrastructure/migration/migrator.py`
- `src/infrastructure/migration/schema_detector.py`
- `src/infrastructure/migration/backup.py`
- `src/presentation/dialogs/migration_dialog.py`
