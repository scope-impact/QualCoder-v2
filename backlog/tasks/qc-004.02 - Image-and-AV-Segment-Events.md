---
id: QC-004.02
title: Image and AV Segment Events
status: To Do
assignee: []
created_date: '2026-01-29 16:38'
labels:
  - domain
  - coding
  - image-coding
  - av-coding
  - P1
dependencies: []
parent_task_id: QC-004
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Add domain events for image region and audio/video time range coding. Enables UI observation of media segment operations.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
### Image Segment Events (frozen dataclasses extending DomainEvent)
- [ ] #1 `ImageSegmentCoded` event with payload: segment_id, code_id, source_id, region (ImageRegion), owner (coder_id)
- [ ] #2 `ImageSegmentUncoded` event with payload: segment_id, code_id, source_id

### AV Segment Events (frozen dataclasses extending DomainEvent)
- [ ] #3 `AVSegmentCoded` event with payload: segment_id, code_id, source_id, time_range (TimeRange), transcript (optional)
- [ ] #4 `AVSegmentUncoded` event with payload: segment_id, code_id, source_id

### Value Objects (frozen dataclasses, compared by value)
- [ ] #5 `ImageRegion` value object: x, y, width, height with methods: area(), intersects(other), contains_point(x, y)
- [ ] #6 `TimeRange` value object: start_ms, end_ms with methods: duration_ms(), overlaps(other), contains(ms)

### Invariants (pure predicate functions)
- [ ] #7 `is_region_within_image(region: ImageRegion, source: ImageSource) -> bool`
- [ ] #8 `is_time_range_valid(time_range: TimeRange, source: AVSource) -> bool`

### Integration
- [ ] #9 Events extend base `SegmentEvent` union type
- [ ] #10 Events registered in Coding context event catalog
<!-- AC:END -->
