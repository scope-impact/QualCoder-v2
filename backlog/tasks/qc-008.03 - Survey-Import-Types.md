---
id: QC-008.03
title: Survey Import Types
status: To Do
assignee: []
created_date: '2026-01-29 16:40'
labels:
  - domain
  - sources
  - P2
dependencies: []
parent_task_id: QC-008
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Value objects for survey import: SurveyColumn, SurveyConfig, DelimiterType. Support CSV column mapping and text collation options.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
### DelimiterType Enum
- [ ] #1 `DelimiterType` enum: COMMA, TAB, SEMICOLON, PIPE, AUTO
- [ ] #2 `char() -> str` method returns actual delimiter character
- [ ] #3 `detect(sample: str) -> DelimiterType` static method for auto-detection

### SurveyColumn Value Object (frozen dataclass)
- [ ] #4 `SurveyColumn` value object: index (int), name (str), column_type (ColumnType), sample_values (List[str])
- [ ] #5 `ColumnType` enum: TEXT, NUMERIC, DATE, IDENTIFIER, SKIP

### SurveyConfig Value Object (frozen dataclass)
- [ ] #6 `SurveyConfig`: delimiter, has_header (bool), columns (List[SurveyColumn]), collation_mode
- [ ] #7 `CollationMode` enum: PER_COLUMN (each column → source), PER_ROW (each row → source), SINGLE (all → one source)

### ColumnMapping Value Object
- [ ] #8 `ColumnMapping`: column_index, target_type (SOURCE_TEXT | CASE_ATTRIBUTE | SKIP)
- [ ] #9 For CASE_ATTRIBUTE: attribute_name, attribute_type

### Pure Functions
- [ ] #10 `parse_csv_preview(content: str, config: SurveyConfig, rows: int = 5) -> List[List[str]]`
- [ ] #11 `infer_column_types(samples: List[List[str]]) -> List[ColumnType]` - auto-detect types
- [ ] #12 `validate_config(config: SurveyConfig) -> Result[SurveyConfig, ConfigError]`

### Invariants
- [ ] #13 `is_valid_column_index(index: int, columns: List) -> bool`
- [ ] #14 `has_text_columns(config: SurveyConfig) -> bool` - at least one text column required
<!-- AC:END -->
