---
id: QC-023.02
title: Kappa Calculator
status: To Do
assignee: []
created_date: '2026-01-29 16:44'
labels:
  - infrastructure
  - collaboration
  - P1
dependencies: []
parent_task_id: QC-023
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
KappaCalculator: compute Cohen's Kappa, Fleiss' Kappa (multi-rater), per-code Kappa breakdown. Pure statistical functions.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
### KappaCalculator (Pure Functions - Infrastructure)
- [ ] #1 `calculate_cohens_kappa(matrix: AgreementMatrix) -> KappaResult` - two coders
- [ ] #2 `calculate_fleiss_kappa(ratings: List[List[int]]) -> KappaResult` - multi-rater
- [ ] #3 `calculate_per_code_kappa(matrix, code_id) -> float` - single code Kappa

### Agreement Matrix Builder
- [ ] #4 `build_agreement_matrix(coder_a_segments, coder_b_segments) -> AgreementMatrix`
- [ ] #5 Pure function - computes matrix from segment lists
- [ ] #6 Handles partial overlaps correctly

### Statistical Helpers (Pure)
- [ ] #7 `calculate_observed_agreement(matrix) -> float`
- [ ] #8 `calculate_expected_agreement(matrix) -> float`
- [ ] #9 `calculate_standard_error(kappa, n) -> float`

### Confidence Interval
- [ ] #10 `calculate_confidence_interval(kappa, se, confidence=0.95) -> Tuple[float, float]`
- [ ] #11 Returns (lower_bound, upper_bound)

### Edge Cases
- [ ] #12 Handle perfect agreement (kappa = 1.0)
- [ ] #13 Handle chance agreement only (kappa = 0.0)
- [ ] #14 Handle negative kappa (worse than chance)
<!-- AC:END -->
