---
id: QC-006.04
title: Signal Bridge
status: To Do
assignee: []
created_date: '2026-01-29 16:38'
labels:
  - application
  - coding
  - P0
dependencies: [QC-003.01]
parent_task_id: QC-006
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Bridge between domain events and Qt signals. Enables UI to observe domain changes from both UI and Agent actions.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
### CodingSignalBridge Class (QObject)
- [ ] #1 `CodingSignalBridge(QObject)` - bridges domain events to Qt signal system
- [ ] #2 Singleton instance accessible via `CodingSignalBridge.instance()`

### Qt Signals (PyQt6 pyqtSignal)
- [ ] #3 `code_created = pyqtSignal(object)` - emits CodeCreated event
- [ ] #4 `code_renamed = pyqtSignal(object)` - emits CodeRenamed event
- [ ] #5 `code_deleted = pyqtSignal(object)` - emits CodeDeleted event
- [ ] #6 `code_color_changed = pyqtSignal(object)` - emits CodeColorChanged event
- [ ] #7 `segment_coded = pyqtSignal(object)` - emits SegmentCoded event
- [ ] #8 `segment_uncoded = pyqtSignal(object)` - emits SegmentUncoded event
- [ ] #9 `category_created = pyqtSignal(object)` - emits CategoryCreated event
- [ ] #10 `category_deleted = pyqtSignal(object)` - emits CategoryDeleted event

### Event Bus Subscription
- [ ] #11 Subscribe to all Coding context events on EventBus
- [ ] #12 Event handler maps event type → corresponding Qt signal emission
- [ ] #13 `_on_domain_event(event: DomainEvent)` dispatcher method

### Thread Safety
- [ ] #14 Use `QMetaObject.invokeMethod` with `Qt.QueuedConnection` for cross-thread emission
- [ ] #15 Agent operations (from MCP thread) safely emit to Qt main thread
- [ ] #16 UI operations (from main thread) emit directly

### Architecture Pattern
- [ ] #17 Bridge is in Application layer (not Presentation) - decouples UI from Event Bus
- [ ] #18 UI widgets connect to bridge signals, not directly to EventBus
- [ ] #19 Both UI actions and Agent actions trigger same domain events → same signals
<!-- AC:END -->
