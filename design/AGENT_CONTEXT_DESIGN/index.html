
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Developer documentation for QualCoder v2 - architecture, tutorials, and component library">
      
      
      
        <link rel="canonical" href="https://qualcoder.dev/docs/design/AGENT_CONTEXT_DESIGN/">
      
      
        <link rel="prev" href="../FUNCTIONAL_DDD_DESIGN/">
      
      
        <link rel="next" href="../../backlog/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Agent Context - QualCoder v2 Developer Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#qualcoder-agent-context-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="QualCoder v2 Developer Guide" class="md-header__button md-logo" aria-label="QualCoder v2 Developer Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QualCoder v2 Developer Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Agent Context
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/scope-impact/qualcoder-v2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    qualcoder-v2
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-manual/" class="md-tabs__link">
          
  
  
    
  
  User Manual

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ARCHITECTURE/" class="md-tabs__link">
          
  
  
    
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/" class="md-tabs__link">
          
  
  
    
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/" class="md-tabs__link">
          
  
  
    
  
  Design System

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../FUNCTIONAL_DDD_DESIGN/" class="md-tabs__link">
          
  
  
    
  
  Design Documents

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../backlog/" class="md-tabs__link">
          
  
  
    
  
  Backlog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ai/" class="md-tabs__link">
          
  
  
    
  
  AI Plans (Historical)

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../archive/" class="md-tabs__link">
          
  
  
    
  
  Archive (Historical)

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../test-reports/" class="md-tabs__link">
          
  
  
    
  
  Test Reports

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="QualCoder v2 Developer Guide" class="md-nav__button md-logo" aria-label="QualCoder v2 Developer Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    QualCoder v2 Developer Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/scope-impact/qualcoder-v2" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    qualcoder-v2
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../user-manual/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    User Manual
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Manual
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-manual/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-manual/sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing Sources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-manual/codes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing Codes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-manual/coding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coding Text
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-manual/ai-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tutorials/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/00-big-picture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Big Picture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/01-first-invariant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Your First Invariant
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/02-first-deriver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Your First Deriver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/03-result-type/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Result Type
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/04-event-flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Events Flow Through
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/05-signal-bridge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SignalBridge Payloads
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/06-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Without Mocks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/07-complete-flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complete Flow Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Appendices
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Appendices
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/appendices/A-common-patterns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Common Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/appendices/B-when-to-create/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    When to Create
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Design System
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Design System
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/getting-started/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/getting-started/quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/tokens/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Design Tokens
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Design Tokens
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tokens/colors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Colors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tokens/spacing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spacing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tokens/typography/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Typography
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/tokens/layout-animation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layout & Animation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/components/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Components
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Components
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/icons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Icons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/layout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Layout
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/forms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Forms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/navigation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Navigation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/data-display/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Display
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/media/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Media
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/chat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chat & AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/document/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/feedback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feedback
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/visualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visualization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/pickers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pickers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/components/advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/patterns/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Patterns
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/patterns/signals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Signals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/patterns/theming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Theming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/patterns/composition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Composition
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/reference/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/reference/dependencies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Design Documents
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Design Documents
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FUNCTIONAL_DDD_DESIGN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functional DDD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Agent Context
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Context
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ai-first-interface-architecture-for-qualitative-research" class="md-nav__link">
    <span class="md-ellipsis">
      
        AI-First Interface Architecture for Qualitative Research
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executive-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executive Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Architecture Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 High-Level Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-interaction-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Interaction Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-design-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Design Philosophy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Design Philosophy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-core-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Core Principles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-comparison-traditional-vs-agent-first" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Comparison: Traditional vs Agent-First
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Benefits
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-agent-context-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Agent Context Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Agent Context Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-component-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Component Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-component-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Component Responsibilities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-component-interactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Component Interactions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-protocol-adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Protocol Adapters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Protocol Adapters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-supported-protocols" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Supported Protocols
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-mcp-server-design-for-claude-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 MCP Server Design (for Claude Code)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-protocol-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Protocol Comparison
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-rest-api-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4 REST API Design
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-capability-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Capability Registry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Capability Registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-tool-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Tool Definitions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 Tool Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-coding-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.1 Coding Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-source-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.2 Source Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-case-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.3 Case Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#514-analysis-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.4 Analysis Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#515-search-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.5 Search Tools
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-resource-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Resource Definitions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-resource-schema-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Resource Schema Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 Resource Schema Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#project-briefing-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Project Briefing Resource
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codes-list-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Codes List Resource
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-prompt-templates" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Prompt Templates
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-event-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Event Streaming
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Event Streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-event-flow-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Event Flow Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-event-categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Event Categories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-event-subscription-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Event Subscription Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-event-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 Event Schema
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-event-delivery-guarantees" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.5 Event Delivery Guarantees
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-session-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Session Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Session Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-session-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Session Lifecycle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-session-data-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Session Data Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-multi-session-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Multi-Session Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-conflict-resolution-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 Conflict Resolution Strategy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-security-and-trust" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Security and Trust
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Security and Trust">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-trust-level-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Trust Level Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-default-trust-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Default Trust Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-approval-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.3 Approval Workflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#84-security-boundaries" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.4 Security Boundaries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#85-rate-limiting" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.5 Rate Limiting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-integration-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Integration Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Integration Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-claude-code-integration-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Claude Code Integration (MCP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-mcp-server-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 MCP Server Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#93-gemini-cli-integration-rest" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.3 Gemini CLI Integration (REST)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#94-local-model-integration-ollama" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.4 Local Model Integration (Ollama)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#95-hybrid-mode-multiple-ais" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.5 Hybrid Mode (Multiple AIs)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-deployment-modes" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Deployment Modes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Deployment Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-mode-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Mode Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-desktop-mode-gui-primary" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Desktop Mode (GUI Primary)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103-headless-mode-ai-primary" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3 Headless Mode (AI Primary)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104-hybrid-mode-gui-as-observer" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.4 Hybrid Mode (GUI as Observer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#105-startup-sequences" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.5 Startup Sequences
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-real-time-ui-observation" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Real-Time UI Observation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11. Real-Time UI Observation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-core-principle-ui-as-event-subscriber" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1 Core Principle: UI as Event Subscriber
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-signal-bridge-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2 Signal Bridge Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113-event-to-signal-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3 Event-to-Signal Mapping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114-main-window-layout-with-agent-observation" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.4 Main Window Layout with Agent Observation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#115-agent-activity-panel-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.5 Agent Activity Panel Design
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.5 Agent Activity Panel Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activity-item-visual-states" class="md-nav__link">
    <span class="md-ellipsis">
      
        Activity Item Visual States
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#116-source-view-live-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.6 Source View Live Updates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.6 Source View Live Updates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#highlight-animation-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Highlight Animation Sequence
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#117-code-tree-real-time-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.7 Code Tree Real-Time Updates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.7 Code Tree Real-Time Updates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-tree-update-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code Tree Update Behavior
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#118-approval-workflow-ux" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.8 Approval Workflow UX
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.8 Approval Workflow UX">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inline-approval-activity-panel" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inline Approval (Activity Panel)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modal-approval-dialog-high-risk-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modal Approval Dialog (High-Risk Actions)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approval-flow-state-machine" class="md-nav__link">
    <span class="md-ellipsis">
      
        Approval Flow State Machine
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#119-control-panel-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.9 Control Panel Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1110-visual-indicators-ai-vs-human" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.10 Visual Indicators: AI vs Human
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.10 Visual Indicators: AI vs Human">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#indicator-placement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Indicator Placement
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1111-interaction-modes" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.11 Interaction Modes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.11 Interaction Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mode-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mode Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1112-notification-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.12 Notification System
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.12 Notification System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toast-notification-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Toast Notification Examples
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1113-undoredo-for-ai-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.13 Undo/Redo for AI Actions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.13 Undo/Redo for AI Actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#undo-stack-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Undo Stack Behavior
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1114-session-handoff" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.14 Session Handoff
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1115-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.15 Performance Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1116-accessibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.16 Accessibility
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a-mcp-tool-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix A: MCP Tool Schemas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix A: MCP Tool Schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create_code-tool" class="md-nav__link">
    <span class="md-ellipsis">
      
        create_code Tool
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply_code-tool" class="md-nav__link">
    <span class="md-ellipsis">
      
        apply_code Tool
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-b-event-type-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix B: Event Type Reference
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-c-configuration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix C: Configuration Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix C: Configuration Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-context-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Agent Context Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-d-ui-signal-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix D: UI Signal Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix D: UI Signal Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qt-signals-for-agent-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Qt Signals for Agent Events
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signal-connection-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Signal Connection Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../backlog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Backlog
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Backlog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/BACKLOG_RESTRUCTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Restructure Plan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/DEPENDENCY_ANALYSIS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Decisions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Decisions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/decisions/decision-001%20design-system-visualization-libraries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design System Visualization Libraries
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/decisions/decision-002%20library-alternatives-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library Alternatives Analysis for Custom Infrastructure
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/decisions/decision-003%20localization-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Localization Framework Selection
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/decisions/decision-004%20design-system-visualization-libraries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design System Visualization Libraries
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/decisions/decision-005%20mcp-transport-http-over-stdio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Transport - HTTP over Stdio
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../backlog/tasks/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_5" id="__nav_7_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-026%20-%20Open-Navigate-Project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Open & Navigate Project
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-027%20-%20Manage-Sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manage Sources
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-028%20-%20Manage-Codes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manage Codes
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--In Progress"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-029%20-%20Apply-Codes-to-Text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apply Codes to Text
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--In Progress"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-030%20-%20Apply-Codes-to-Images/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apply Codes to Images
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-031%20-%20Apply-Codes-to-Audio-Video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apply Codes to Audio Video
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-032%20-%20Auto-Code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auto-Code
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Done"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-033%20-%20Search-and-Find/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search and Find
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-034%20-%20Manage-Cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manage Cases
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-035%20-%20Generate-Reports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generate Reports
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-036%20-%20Collaborate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Collaborate
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-037%20-%20Chat-with-Agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chat with Agent
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-038%20-%20Settings-and-Preferences/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings and Preferences
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Done"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-039%20-%20Import-Export-Formats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Import Export Formats
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-040%20-%20Data-Privacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Privacy
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-041%20-%20References-and-Bibliography/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    References and Bibliography
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-042%20-%20Apply-Codes-to-PDF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Apply Codes to PDF
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-043%20-%20Journals-and-Memos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Journals and Memos
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-044%20-%20Visualizations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Visualizations
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-045%20-%20Complete-Coding-Context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complete Coding Context
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--To Do"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backlog/tasks/qc-046%20-%20Remove-premature-v1%E2%86%92v2-migration-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remove premature v1v2 migration code
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Done"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ai/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    AI Plans (Historical)
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI Plans (Historical)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../archive/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Archive (Historical)
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archive (Historical)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../test-reports/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Test Reports
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Test Reports
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ai-first-interface-architecture-for-qualitative-research" class="md-nav__link">
    <span class="md-ellipsis">
      
        AI-First Interface Architecture for Qualitative Research
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executive-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executive Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Architecture Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 High-Level Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-interaction-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Interaction Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-design-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Design Philosophy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Design Philosophy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-core-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Core Principles
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-comparison-traditional-vs-agent-first" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Comparison: Traditional vs Agent-First
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Benefits
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-agent-context-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Agent Context Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Agent Context Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-component-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Component Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-component-responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Component Responsibilities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-component-interactions" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Component Interactions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-protocol-adapters" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Protocol Adapters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Protocol Adapters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-supported-protocols" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Supported Protocols
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-mcp-server-design-for-claude-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 MCP Server Design (for Claude Code)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-protocol-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Protocol Comparison
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-rest-api-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.4 REST API Design
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-capability-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Capability Registry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Capability Registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-tool-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Tool Definitions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 Tool Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-coding-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.1 Coding Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-source-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.2 Source Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-case-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.3 Case Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#514-analysis-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.4 Analysis Tools
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#515-search-tools" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1.5 Search Tools
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-resource-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Resource Definitions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-resource-schema-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Resource Schema Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 Resource Schema Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#project-briefing-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Project Briefing Resource
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#codes-list-resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        Codes List Resource
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-prompt-templates" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Prompt Templates
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-event-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Event Streaming
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Event Streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-event-flow-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Event Flow Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-event-categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Event Categories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-event-subscription-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Event Subscription Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-event-schema" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 Event Schema
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65-event-delivery-guarantees" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.5 Event Delivery Guarantees
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-session-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Session Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Session Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-session-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Session Lifecycle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-session-data-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Session Data Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-multi-session-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Multi-Session Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74-conflict-resolution-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 Conflict Resolution Strategy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-security-and-trust" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Security and Trust
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Security and Trust">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-trust-level-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Trust Level Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-default-trust-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Default Trust Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-approval-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.3 Approval Workflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#84-security-boundaries" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.4 Security Boundaries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#85-rate-limiting" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.5 Rate Limiting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-integration-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Integration Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Integration Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-claude-code-integration-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Claude Code Integration (MCP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-mcp-server-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 MCP Server Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#93-gemini-cli-integration-rest" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.3 Gemini CLI Integration (REST)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#94-local-model-integration-ollama" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.4 Local Model Integration (Ollama)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#95-hybrid-mode-multiple-ais" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.5 Hybrid Mode (Multiple AIs)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-deployment-modes" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Deployment Modes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Deployment Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-mode-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Mode Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-desktop-mode-gui-primary" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Desktop Mode (GUI Primary)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103-headless-mode-ai-primary" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3 Headless Mode (AI Primary)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#104-hybrid-mode-gui-as-observer" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.4 Hybrid Mode (GUI as Observer)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#105-startup-sequences" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.5 Startup Sequences
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-real-time-ui-observation" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Real-Time UI Observation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11. Real-Time UI Observation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-core-principle-ui-as-event-subscriber" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1 Core Principle: UI as Event Subscriber
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-signal-bridge-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2 Signal Bridge Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#113-event-to-signal-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.3 Event-to-Signal Mapping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#114-main-window-layout-with-agent-observation" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.4 Main Window Layout with Agent Observation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#115-agent-activity-panel-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.5 Agent Activity Panel Design
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.5 Agent Activity Panel Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activity-item-visual-states" class="md-nav__link">
    <span class="md-ellipsis">
      
        Activity Item Visual States
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#116-source-view-live-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.6 Source View Live Updates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.6 Source View Live Updates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#highlight-animation-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Highlight Animation Sequence
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#117-code-tree-real-time-updates" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.7 Code Tree Real-Time Updates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.7 Code Tree Real-Time Updates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-tree-update-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Code Tree Update Behavior
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#118-approval-workflow-ux" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.8 Approval Workflow UX
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.8 Approval Workflow UX">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inline-approval-activity-panel" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inline Approval (Activity Panel)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modal-approval-dialog-high-risk-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modal Approval Dialog (High-Risk Actions)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approval-flow-state-machine" class="md-nav__link">
    <span class="md-ellipsis">
      
        Approval Flow State Machine
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#119-control-panel-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.9 Control Panel Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1110-visual-indicators-ai-vs-human" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.10 Visual Indicators: AI vs Human
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.10 Visual Indicators: AI vs Human">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#indicator-placement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Indicator Placement
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1111-interaction-modes" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.11 Interaction Modes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.11 Interaction Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mode-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mode Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1112-notification-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.12 Notification System
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.12 Notification System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toast-notification-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Toast Notification Examples
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1113-undoredo-for-ai-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.13 Undo/Redo for AI Actions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11.13 Undo/Redo for AI Actions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#undo-stack-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Undo Stack Behavior
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1114-session-handoff" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.14 Session Handoff
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1115-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.15 Performance Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1116-accessibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.16 Accessibility
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-a-mcp-tool-schemas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix A: MCP Tool Schemas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix A: MCP Tool Schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create_code-tool" class="md-nav__link">
    <span class="md-ellipsis">
      
        create_code Tool
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply_code-tool" class="md-nav__link">
    <span class="md-ellipsis">
      
        apply_code Tool
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-b-event-type-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix B: Event Type Reference
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-c-configuration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix C: Configuration Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix C: Configuration Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-context-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Agent Context Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-d-ui-signal-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix D: UI Signal Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix D: UI Signal Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qt-signals-for-agent-events" class="md-nav__link">
    <span class="md-ellipsis">
      
        Qt Signals for Agent Events
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signal-connection-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Signal Connection Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="qualcoder-agent-context-design">QualCoder: Agent Context Design<a class="headerlink" href="#qualcoder-agent-context-design" title="Permanent link">&para;</a></h1>
<h2 id="ai-first-interface-architecture-for-qualitative-research">AI-First Interface Architecture for Qualitative Research<a class="headerlink" href="#ai-first-interface-architecture-for-qualitative-research" title="Permanent link">&para;</a></h2>
<hr />
<h2 id="executive-summary">Executive Summary<a class="headerlink" href="#executive-summary" title="Permanent link">&para;</a></h2>
<p>This document describes the <strong>Agent Context</strong> - an interface layer that exposes QualCoder's capabilities to external AI systems. Rather than embedding AI inside QualCoder, this architecture makes QualCoder a <strong>tool provider</strong> that any AI system can operate.</p>
<p><strong>Key Principle</strong>: The researcher's AI assistant (Claude Code, Gemini CLI, etc.) becomes the primary interface, with QualCoder providing the domain-specific tools and state management.</p>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-architecture-overview">Architecture Overview</a></li>
<li><a href="#2-design-philosophy">Design Philosophy</a></li>
<li><a href="#3-agent-context-components">Agent Context Components</a></li>
<li><a href="#4-protocol-adapters">Protocol Adapters</a></li>
<li><a href="#5-capability-registry">Capability Registry</a></li>
<li><a href="#6-event-streaming">Event Streaming</a></li>
<li><a href="#7-session-management">Session Management</a></li>
<li><a href="#8-security-and-trust">Security and Trust</a></li>
<li><a href="#9-integration-patterns">Integration Patterns</a></li>
<li><a href="#10-deployment-modes">Deployment Modes</a></li>
<li><a href="#11-real-time-ui-observation">Real-Time UI Observation</a></li>
</ol>
<hr />
<h2 id="1-architecture-overview">1. Architecture Overview<a class="headerlink" href="#1-architecture-overview" title="Permanent link">&para;</a></h2>
<h3 id="11-high-level-architecture">1.1 High-Level Architecture<a class="headerlink" href="#11-high-level-architecture" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "External AI Layer"
        CLAUDE[Claude Code&lt;br/&gt;OAuth/Subscription]
        GEMINI[Gemini CLI&lt;br/&gt;OAuth/Subscription]
        CHATGPT[ChatGPT CLI&lt;br/&gt;OAuth/Subscription]
        LOCAL[Local Model&lt;br/&gt;Ollama/LMStudio]
    end

    subgraph "Agent Context Layer"
        MCP[MCP Server]
        REST[REST API]
        WS[WebSocket]

        MCP --&gt; SR[Session Registry]
        REST --&gt; SR
        WS --&gt; SR

        SR --&gt; CR[Capability Registry]
        CR --&gt; CD[Command Dispatcher]
        CR --&gt; EB[Event Broadcaster]
    end

    subgraph "Domain Layer"
        CODING[Coding Context]
        SOURCE[Source Context]
        CASE[Case Context]
        ANALYSIS[Analysis Context]

        CODING --&gt; BUS[Event Bus]
        SOURCE --&gt; BUS
        CASE --&gt; BUS
        ANALYSIS --&gt; BUS
    end

    subgraph "Infrastructure Layer"
        DB[(SQLite)]
        FS[File System]
    end

    CLAUDE --&gt;|MCP Protocol| MCP
    GEMINI --&gt;|HTTP/gRPC| REST
    CHATGPT --&gt;|HTTP| REST
    LOCAL --&gt;|HTTP| REST

    CD --&gt; CODING
    CD --&gt; SOURCE
    CD --&gt; CASE
    CD --&gt; ANALYSIS

    BUS --&gt; EB

    CODING --&gt; DB
    SOURCE --&gt; DB
    SOURCE --&gt; FS

    style MCP fill:#90EE90
    style REST fill:#90EE90
    style WS fill:#90EE90</code></pre>
<h3 id="12-interaction-flow">1.2 Interaction Flow<a class="headerlink" href="#12-interaction-flow" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant AI as AI CLI (Claude/Gemini)
    participant AC as Agent Context
    participant Domain as Domain Layer
    participant DB as SQLite

    User-&gt;&gt;AI: "Help me code these interviews"

    AI-&gt;&gt;AC: list_resources("sources")
    AC-&gt;&gt;Domain: query sources
    Domain-&gt;&gt;DB: SELECT * FROM source
    DB--&gt;&gt;Domain: source rows
    Domain--&gt;&gt;AC: Source entities
    AC--&gt;&gt;AI: [source1, source2, ...]

    AI-&gt;&gt;AC: read_resource("sources/1/content")
    AC--&gt;&gt;AI: Full transcript text

    Note over AI: AI analyzes text,&lt;br/&gt;identifies themes

    AI-&gt;&gt;AC: call_tool("create_code", {name: "Anxiety"})
    AC-&gt;&gt;Domain: CreateCode command
    Domain-&gt;&gt;Domain: Deriver validates
    Domain-&gt;&gt;DB: INSERT INTO code_name
    Domain-&gt;&gt;Domain: Emit CodeCreated event
    Domain--&gt;&gt;AC: Success + event
    AC--&gt;&gt;AI: {code_id: 42}
    AC--)User: [Event notification if GUI open]

    AI-&gt;&gt;AC: call_tool("apply_code", {...})
    AC-&gt;&gt;Domain: ApplyCode command
    Domain--&gt;&gt;AC: Success + SegmentCoded event
    AC--&gt;&gt;AI: {segment_id: 101}

    AI-&gt;&gt;User: "I've created the code 'Anxiety' and&lt;br/&gt;applied it to 3 segments..."</code></pre>
<hr />
<h2 id="2-design-philosophy">2. Design Philosophy<a class="headerlink" href="#2-design-philosophy" title="Permanent link">&para;</a></h2>
<h3 id="21-core-principles">2.1 Core Principles<a class="headerlink" href="#21-core-principles" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Principle</th>
<th>Description</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AI as Primary Interface</strong></td>
<td>Users interact through their preferred AI tool</td>
<td>QualCoder exposes capabilities, doesn't embed AI</td>
</tr>
<tr>
<td><strong>Protocol Agnostic</strong></td>
<td>Support multiple AI integration protocols</td>
<td>MCP, REST, WebSocket, gRPC adapters</td>
</tr>
<tr>
<td><strong>Subscription Friendly</strong></td>
<td>No API keys required if user has AI subscription</td>
<td>OAuth delegated to external AI tools</td>
</tr>
<tr>
<td><strong>Event-Driven</strong></td>
<td>AI receives real-time updates about system state</td>
<td>Domain events streamed to subscribers</td>
</tr>
<tr>
<td><strong>Trust Configurable</strong></td>
<td>Users control what AI can do autonomously</td>
<td>Per-tool permission levels</td>
</tr>
<tr>
<td><strong>Stateless Interface</strong></td>
<td>Agent Context doesn't hold business state</td>
<td>All state in Domain Layer</td>
</tr>
</tbody>
</table>
<h3 id="22-comparison-traditional-vs-agent-first">2.2 Comparison: Traditional vs Agent-First<a class="headerlink" href="#22-comparison-traditional-vs-agent-first" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph LR
    subgraph "Traditional: AI as Feature"
        U1[User] --&gt; UI1[QualCoder UI]
        UI1 --&gt; AI1[Embedded AI]
        AI1 --&gt; API1[API Key Required]
    end

    subgraph "Agent-First: AI as Interface"
        U2[User] --&gt; AI2[AI CLI]
        AI2 --&gt; AC2[Agent Context]
        AC2 --&gt; QC2[QualCoder Domain]
        AI2 -.-&gt; OAUTH[OAuth/Subscription]
    end

    style AI2 fill:#90EE90
    style AC2 fill:#90EE90</code></pre>
<h3 id="23-benefits">2.3 Benefits<a class="headerlink" href="#23-benefits" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>mindmap
  root((Agent-First&lt;br/&gt;Architecture))
    Cost Efficiency
      Use existing AI subscriptions
      No per-token API costs
      Local model option
    Flexibility
      Choose preferred AI
      Switch AI providers freely
      Multiple AIs simultaneously
    Natural Interface
      Conversational interaction
      Context-aware assistance
      Research methodology guidance
    Extensibility
      New AI tools integrate easily
      Standard protocols MCP/REST
      Plugin ecosystem possible
    Transparency
      AI actions visible in UI
      Audit trail of all operations
      User maintains control</code></pre>
<hr />
<h2 id="3-agent-context-components">3. Agent Context Components<a class="headerlink" href="#3-agent-context-components" title="Permanent link">&para;</a></h2>
<h3 id="31-component-overview">3.1 Component Overview<a class="headerlink" href="#31-component-overview" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Agent Context"
        subgraph "Protocol Layer"
            MCP[MCP Server]
            REST[REST API]
            WS[WebSocket Server]
            GRPC[gRPC Server]
        end

        subgraph "Core Components"
            SM[Session Manager]
            CR[Capability Registry]
            CD[Command Dispatcher]
            EB[Event Broadcaster]
            TL[Trust Layer]
        end

        subgraph "Support Components"
            CTX[Context Builder]
            CACHE[State Cache]
            LOG[Audit Logger]
        end
    end

    MCP --&gt; SM
    REST --&gt; SM
    WS --&gt; SM
    GRPC --&gt; SM

    SM --&gt; CR
    SM --&gt; TL
    CR --&gt; CD
    CR --&gt; EB
    CD --&gt; CTX
    EB --&gt; CACHE
    CD --&gt; LOG
    EB --&gt; LOG</code></pre>
<h3 id="32-component-responsibilities">3.2 Component Responsibilities<a class="headerlink" href="#32-component-responsibilities" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Responsibility</th>
<th>Key Operations</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Session Manager</strong></td>
<td>Track connected AI clients</td>
<td>create_session, destroy_session, get_session</td>
</tr>
<tr>
<td><strong>Capability Registry</strong></td>
<td>Define available tools/resources</td>
<td>register_tool, register_resource, list_capabilities</td>
</tr>
<tr>
<td><strong>Command Dispatcher</strong></td>
<td>Route tool calls to domain</td>
<td>dispatch_command, validate_command</td>
</tr>
<tr>
<td><strong>Event Broadcaster</strong></td>
<td>Stream events to subscribers</td>
<td>subscribe, unsubscribe, broadcast</td>
</tr>
<tr>
<td><strong>Trust Layer</strong></td>
<td>Enforce permission policies</td>
<td>check_permission, require_approval</td>
</tr>
<tr>
<td><strong>Context Builder</strong></td>
<td>Prepare context for AI consumption</td>
<td>build_project_briefing, build_state_summary</td>
</tr>
<tr>
<td><strong>State Cache</strong></td>
<td>Cache frequently accessed state</td>
<td>cache_codes, cache_sources, invalidate</td>
</tr>
<tr>
<td><strong>Audit Logger</strong></td>
<td>Record all AI operations</td>
<td>log_tool_call, log_event, get_audit_trail</td>
</tr>
</tbody>
</table>
<h3 id="33-component-interactions">3.3 Component Interactions<a class="headerlink" href="#33-component-interactions" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant Proto as Protocol Adapter
    participant SM as Session Manager
    participant TL as Trust Layer
    participant CR as Capability Registry
    participant CD as Command Dispatcher
    participant Domain as Domain Layer

    Proto-&gt;&gt;SM: Incoming request
    SM-&gt;&gt;SM: Validate session
    SM-&gt;&gt;CR: Get capability definition
    CR--&gt;&gt;SM: Tool/Resource definition
    SM-&gt;&gt;TL: Check permission

    alt Permission Denied
        TL--&gt;&gt;SM: Denied
        SM--&gt;&gt;Proto: Error: Unauthorized
    else Requires Approval
        TL--&gt;&gt;SM: Requires approval
        SM-&gt;&gt;SM: Queue for user approval
        SM--&gt;&gt;Proto: Pending approval
    else Permitted
        TL--&gt;&gt;SM: Permitted
        SM-&gt;&gt;CD: Dispatch command
        CD-&gt;&gt;Domain: Execute
        Domain--&gt;&gt;CD: Result + Events
        CD--&gt;&gt;SM: Result
        SM--&gt;&gt;Proto: Response
    end</code></pre>
<hr />
<h2 id="4-protocol-adapters">4. Protocol Adapters<a class="headerlink" href="#4-protocol-adapters" title="Permanent link">&para;</a></h2>
<h3 id="41-supported-protocols">4.1 Supported Protocols<a class="headerlink" href="#41-supported-protocols" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Protocol Adapters"
        subgraph "MCP Adapter"
            MCP_TOOLS[Tools Handler]
            MCP_RES[Resources Handler]
            MCP_PROMPT[Prompts Handler]
            MCP_NOTIFY[Notifications]
        end

        subgraph "REST Adapter"
            REST_CMD[POST /commands/*]
            REST_STATE[GET /state/*]
            REST_EVENTS[GET /events SSE]
        end

        subgraph "WebSocket Adapter"
            WS_BIDIR[Bidirectional Channel]
            WS_SUB[Event Subscriptions]
        end

        subgraph "CLI Adapter"
            CLI_STDIN[Stdin Commands]
            CLI_STDOUT[Stdout Responses]
            CLI_STDERR[Stderr Events]
        end
    end</code></pre>
<h3 id="42-mcp-server-design-for-claude-code">4.2 MCP Server Design (for Claude Code)<a class="headerlink" href="#42-mcp-server-design-for-claude-code" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "MCP Server Implementation"
        INIT[Server Initialization]

        subgraph "Handlers"
            TOOLS[tools/list&lt;br/&gt;tools/call]
            RES[resources/list&lt;br/&gt;resources/read]
            PROMPTS[prompts/list&lt;br/&gt;prompts/get]
            NOTIFY[notifications/send]
        end

        subgraph "Tool Categories"
            T_CODING[Coding Tools]
            T_SOURCE[Source Tools]
            T_CASE[Case Tools]
            T_ANALYSIS[Analysis Tools]
            T_SEARCH[Search Tools]
        end

        subgraph "Resource Categories"
            R_PROJECT[Project State]
            R_CODES[Code Resources]
            R_SOURCES[Source Resources]
            R_SEGMENTS[Segment Resources]
        end
    end

    INIT --&gt; TOOLS
    INIT --&gt; RES
    INIT --&gt; PROMPTS
    INIT --&gt; NOTIFY

    TOOLS --&gt; T_CODING
    TOOLS --&gt; T_SOURCE
    TOOLS --&gt; T_CASE
    TOOLS --&gt; T_ANALYSIS
    TOOLS --&gt; T_SEARCH

    RES --&gt; R_PROJECT
    RES --&gt; R_CODES
    RES --&gt; R_SOURCES
    RES --&gt; R_SEGMENTS</code></pre>
<h3 id="43-protocol-comparison">4.3 Protocol Comparison<a class="headerlink" href="#43-protocol-comparison" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>MCP</th>
<th>REST</th>
<th>WebSocket</th>
<th>gRPC</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Primary Use</strong></td>
<td>Claude Code</td>
<td>Generic AI</td>
<td>Real-time apps</td>
<td>High performance</td>
</tr>
<tr>
<td><strong>Communication</strong></td>
<td>Stdio/HTTP</td>
<td>HTTP</td>
<td>Persistent</td>
<td>HTTP/2</td>
</tr>
<tr>
<td><strong>Events</strong></td>
<td>Notifications</td>
<td>SSE</td>
<td>Native push</td>
<td>Streaming</td>
</tr>
<tr>
<td><strong>Schema</strong></td>
<td>JSON Schema</td>
<td>OpenAPI</td>
<td>Custom</td>
<td>Protobuf</td>
</tr>
<tr>
<td><strong>Auth</strong></td>
<td>Session-based</td>
<td>Token/OAuth</td>
<td>Token</td>
<td>mTLS</td>
</tr>
</tbody>
</table>
<h3 id="44-rest-api-design">4.4 REST API Design<a class="headerlink" href="#44-rest-api-design" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph LR
    subgraph "REST Endpoints"
        subgraph "Commands POST"
            C1[/commands/coding/apply_code]
            C2[/commands/coding/create_code]
            C3[/commands/coding/merge_codes]
            C4[/commands/source/import]
            C5[/commands/case/create]
            C6[/commands/analysis/generate_report]
        end

        subgraph "State GET"
            S1[/state/project]
            S2[/state/codes]
            S3[/state/codes/:id]
            S4[/state/sources]
            S5[/state/sources/:id/content]
            S6[/state/segments?filter=...]
            S7[/state/cases]
        end

        subgraph "Events"
            E1[/events/stream SSE]
            E2[/events/history]
        end

        subgraph "Session"
            SS1[/session/create]
            SS2[/session/destroy]
            SS3[/session/heartbeat]
        end
    end</code></pre>
<hr />
<h2 id="5-capability-registry">5. Capability Registry<a class="headerlink" href="#5-capability-registry" title="Permanent link">&para;</a></h2>
<h3 id="51-tool-definitions">5.1 Tool Definitions<a class="headerlink" href="#51-tool-definitions" title="Permanent link">&para;</a></h3>
<h4 id="511-coding-tools">5.1.1 Coding Tools<a class="headerlink" href="#511-coding-tools" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Tool Name</th>
<th>Description</th>
<th>Parameters</th>
<th>Returns</th>
<th>Trust Level</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>create_code</code></td>
<td>Create a new code in codebook</td>
<td>name, color?, memo?, category_id?</td>
<td>code_id</td>
<td>Suggest</td>
</tr>
<tr>
<td><code>rename_code</code></td>
<td>Rename existing code</td>
<td>code_id, new_name</td>
<td>success</td>
<td>Suggest</td>
</tr>
<tr>
<td><code>delete_code</code></td>
<td>Delete a code</td>
<td>code_id</td>
<td>success</td>
<td>Require</td>
</tr>
<tr>
<td><code>merge_codes</code></td>
<td>Merge source into target code</td>
<td>source_code_id, target_code_id</td>
<td>success</td>
<td>Require</td>
</tr>
<tr>
<td><code>apply_code</code></td>
<td>Apply code to segment</td>
<td>code_id, source_id, start, end, memo?</td>
<td>segment_id</td>
<td>Notify</td>
</tr>
<tr>
<td><code>remove_code</code></td>
<td>Remove code from segment</td>
<td>segment_id</td>
<td>success</td>
<td>Notify</td>
</tr>
<tr>
<td><code>create_category</code></td>
<td>Create code category</td>
<td>name, parent_id?, memo?</td>
<td>category_id</td>
<td>Suggest</td>
</tr>
<tr>
<td><code>move_code</code></td>
<td>Move code to category</td>
<td>code_id, category_id</td>
<td>success</td>
<td>Notify</td>
</tr>
</tbody>
</table>
<h4 id="512-source-tools">5.1.2 Source Tools<a class="headerlink" href="#512-source-tools" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Tool Name</th>
<th>Description</th>
<th>Parameters</th>
<th>Returns</th>
<th>Trust Level</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>import_source</code></td>
<td>Import file as source</td>
<td>file_path, name?</td>
<td>source_id</td>
<td>Suggest</td>
</tr>
<tr>
<td><code>import_text</code></td>
<td>Import text content directly</td>
<td>content, name</td>
<td>source_id</td>
<td>Suggest</td>
</tr>
<tr>
<td><code>rename_source</code></td>
<td>Rename source</td>
<td>source_id, new_name</td>
<td>success</td>
<td>Notify</td>
</tr>
<tr>
<td><code>delete_source</code></td>
<td>Delete source</td>
<td>source_id</td>
<td>success</td>
<td>Require</td>
</tr>
<tr>
<td><code>update_memo</code></td>
<td>Update source memo</td>
<td>source_id, memo</td>
<td>success</td>
<td>Auto</td>
</tr>
</tbody>
</table>
<h4 id="513-case-tools">5.1.3 Case Tools<a class="headerlink" href="#513-case-tools" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Tool Name</th>
<th>Description</th>
<th>Parameters</th>
<th>Returns</th>
<th>Trust Level</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>create_case</code></td>
<td>Create research case</td>
<td>name, memo?</td>
<td>case_id</td>
<td>Suggest</td>
</tr>
<tr>
<td><code>delete_case</code></td>
<td>Delete case</td>
<td>case_id</td>
<td>success</td>
<td>Require</td>
</tr>
<tr>
<td><code>add_source_to_case</code></td>
<td>Add full source to case</td>
<td>case_id, source_id</td>
<td>success</td>
<td>Notify</td>
</tr>
<tr>
<td><code>add_segment_to_case</code></td>
<td>Add segment to case</td>
<td>case_id, source_id, start, end</td>
<td>success</td>
<td>Notify</td>
</tr>
<tr>
<td><code>set_case_attribute</code></td>
<td>Set attribute value</td>
<td>case_id, attribute_name, value</td>
<td>success</td>
<td>Notify</td>
</tr>
</tbody>
</table>
<h4 id="514-analysis-tools">5.1.4 Analysis Tools<a class="headerlink" href="#514-analysis-tools" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Tool Name</th>
<th>Description</th>
<th>Parameters</th>
<th>Returns</th>
<th>Trust Level</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>generate_frequency_report</code></td>
<td>Code frequency analysis</td>
<td>filters?</td>
<td>job_id</td>
<td>Auto</td>
</tr>
<tr>
<td><code>generate_cooccurrence_report</code></td>
<td>Code co-occurrence matrix</td>
<td>filters?</td>
<td>job_id</td>
<td>Auto</td>
</tr>
<tr>
<td><code>generate_coder_comparison</code></td>
<td>Inter-rater reliability</td>
<td>coder_ids, filters?</td>
<td>job_id</td>
<td>Auto</td>
</tr>
<tr>
<td><code>export_report</code></td>
<td>Export report to file</td>
<td>report_id, format</td>
<td>file_path</td>
<td>Auto</td>
</tr>
</tbody>
</table>
<h4 id="515-search-tools">5.1.5 Search Tools<a class="headerlink" href="#515-search-tools" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Tool Name</th>
<th>Description</th>
<th>Parameters</th>
<th>Returns</th>
<th>Trust Level</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>search_text</code></td>
<td>Full-text search in sources</td>
<td>query, filters?</td>
<td>matches[]</td>
<td>Auto</td>
</tr>
<tr>
<td><code>search_semantic</code></td>
<td>Semantic similarity search</td>
<td>query, k?, filters?</td>
<td>matches[]</td>
<td>Auto</td>
</tr>
<tr>
<td><code>search_codes</code></td>
<td>Search code names/memos</td>
<td>query</td>
<td>codes[]</td>
<td>Auto</td>
</tr>
<tr>
<td><code>find_similar_segments</code></td>
<td>Find similar coded segments</td>
<td>segment_id, k?</td>
<td>segments[]</td>
<td>Auto</td>
</tr>
</tbody>
</table>
<h3 id="52-resource-definitions">5.2 Resource Definitions<a class="headerlink" href="#52-resource-definitions" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Resource URIs"
        subgraph "Project Resources"
            P1[qualcoder://project/state]
            P2[qualcoder://project/briefing]
            P3[qualcoder://project/statistics]
            P4[qualcoder://project/settings]
        end

        subgraph "Code Resources"
            C1[qualcoder://codes]
            C2[qualcoder://codes/:id]
            C3[qualcoder://codes/:id/segments]
            C4[qualcoder://categories]
            C5[qualcoder://categories/:id]
        end

        subgraph "Source Resources"
            S1[qualcoder://sources]
            S2[qualcoder://sources/:id]
            S3[qualcoder://sources/:id/content]
            S4[qualcoder://sources/:id/segments]
            S5[qualcoder://sources/:id/annotations]
        end

        subgraph "Segment Resources"
            SEG1[qualcoder://segments?code_id=X]
            SEG2[qualcoder://segments?source_id=X]
            SEG3[qualcoder://segments?case_id=X]
            SEG4[qualcoder://segments/:id]
        end

        subgraph "Case Resources"
            CS1[qualcoder://cases]
            CS2[qualcoder://cases/:id]
            CS3[qualcoder://cases/:id/members]
            CS4[qualcoder://cases/:id/attributes]
        end

        subgraph "Report Resources"
            R1[qualcoder://reports]
            R2[qualcoder://reports/:id]
            R3[qualcoder://reports/:id/data]
        end
    end</code></pre>
<h3 id="53-resource-schema-examples">5.3 Resource Schema Examples<a class="headerlink" href="#53-resource-schema-examples" title="Permanent link">&para;</a></h3>
<h4 id="project-briefing-resource">Project Briefing Resource<a class="headerlink" href="#project-briefing-resource" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>URI: qualcoder://project/briefing
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Returns:
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>{
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  &quot;project_name&quot;: &quot;Healthcare Experience Study&quot;,
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  &quot;description&quot;: &quot;Qualitative analysis of patient interviews...&quot;,
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>  &quot;research_questions&quot;: [
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    &quot;How do patients experience chronic pain management?&quot;,
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    &quot;What role does family support play in recovery?&quot;
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>  ],
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>  &quot;methodology&quot;: &quot;Grounded Theory&quot;,
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>  &quot;coding_progress&quot;: {
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    &quot;total_sources&quot;: 15,
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    &quot;coded_sources&quot;: 8,
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    &quot;total_codes&quot;: 47,
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    &quot;total_segments&quot;: 312
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>  },
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>  &quot;code_summary&quot;: {
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    &quot;top_codes&quot;: [
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>      {&quot;name&quot;: &quot;Pain Management&quot;, &quot;count&quot;: 45},
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>      {&quot;name&quot;: &quot;Family Support&quot;, &quot;count&quot;: 38},
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>      {&quot;name&quot;: &quot;Healthcare Access&quot;, &quot;count&quot;: 31}
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    ],
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    &quot;recent_codes&quot;: [&quot;Coping Strategies&quot;, &quot;Medication Concerns&quot;]
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>  },
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>  &quot;recent_activity&quot;: [
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>    {&quot;action&quot;: &quot;coded&quot;, &quot;source&quot;: &quot;Interview_P05&quot;, &quot;timestamp&quot;: &quot;...&quot;},
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>    {&quot;action&quot;: &quot;created_code&quot;, &quot;code&quot;: &quot;Emotional Impact&quot;, &quot;timestamp&quot;: &quot;...&quot;}
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>  ]
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>}
</span></code></pre></div>
<h4 id="codes-list-resource">Codes List Resource<a class="headerlink" href="#codes-list-resource" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>URI: qualcoder://codes
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>Returns:
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>{
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  &quot;codes&quot;: [
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    {
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>      &quot;code_id&quot;: 42,
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>      &quot;name&quot;: &quot;Pain Management&quot;,
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>      &quot;color&quot;: &quot;#FF6B6B&quot;,
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>      &quot;memo&quot;: &quot;Experiences and strategies for managing chronic pain&quot;,
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>      &quot;category&quot;: {&quot;id&quot;: 5, &quot;name&quot;: &quot;Health Experiences&quot;},
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>      &quot;segment_count&quot;: 45,
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>      &quot;created_at&quot;: &quot;2024-01-15T10:30:00Z&quot;,
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>      &quot;owner&quot;: &quot;researcher1&quot;
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    },
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    ...
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>  ],
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>  &quot;categories&quot;: [
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    {
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>      &quot;category_id&quot;: 5,
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>      &quot;name&quot;: &quot;Health Experiences&quot;,
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>      &quot;parent_id&quot;: null,
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>      &quot;code_count&quot;: 12
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>    },
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>    ...
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>  ]
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>}
</span></code></pre></div>
<h3 id="54-prompt-templates">5.4 Prompt Templates<a class="headerlink" href="#54-prompt-templates" title="Permanent link">&para;</a></h3>
<p>Pre-built prompts for common research tasks that AI can use:</p>
<table>
<thead>
<tr>
<th>Prompt Name</th>
<th>Description</th>
<th>Context Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>grounded_theory_open_coding</code></td>
<td>Guide for initial open coding</td>
<td>source content, existing codes</td>
</tr>
<tr>
<td><code>thematic_analysis</code></td>
<td>Thematic analysis approach</td>
<td>source content, research questions</td>
</tr>
<tr>
<td><code>axial_coding</code></td>
<td>Connect categories in grounded theory</td>
<td>codes, segments, categories</td>
</tr>
<tr>
<td><code>selective_coding</code></td>
<td>Identify core category</td>
<td>codes, relationships</td>
</tr>
<tr>
<td><code>summarize_code</code></td>
<td>Generate summary of coded content</td>
<td>code, all segments</td>
</tr>
<tr>
<td><code>compare_cases</code></td>
<td>Compare coding across cases</td>
<td>cases, segments</td>
</tr>
<tr>
<td><code>identify_patterns</code></td>
<td>Find patterns in coded data</td>
<td>codes, co-occurrences</td>
</tr>
<tr>
<td><code>write_memo</code></td>
<td>Generate analytical memo</td>
<td>code/category, segments</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="6-event-streaming">6. Event Streaming<a class="headerlink" href="#6-event-streaming" title="Permanent link">&para;</a></h2>
<h3 id="61-event-flow-architecture">6.1 Event Flow Architecture<a class="headerlink" href="#61-event-flow-architecture" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Domain Layer"
        DC[Domain Controllers]
        DC --&gt; |emit| EB[Event Bus]
    end

    subgraph "Agent Context"
        EB --&gt; EF[Event Filter]
        EF --&gt; |per session| ES[Event Serializer]
        ES --&gt; EP[Event Publisher]

        subgraph "Subscribers"
            S1[Session 1: Claude]
            S2[Session 2: Gemini]
            S3[Session 3: Local UI]
        end

        EP --&gt; S1
        EP --&gt; S2
        EP --&gt; S3
    end

    subgraph "Event Store"
        EB --&gt; STORE[(Event Log)]
    end</code></pre>
<h3 id="62-event-categories">6.2 Event Categories<a class="headerlink" href="#62-event-categories" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Domain Events"
        subgraph "Coding Events"
            CE1[CodeCreated]
            CE2[CodeRenamed]
            CE3[CodeDeleted]
            CE4[CodesMerged]
            CE5[SegmentCoded]
            CE6[SegmentUncoded]
            CE7[CategoryCreated]
            CE8[CategoryDeleted]
        end

        subgraph "Source Events"
            SE1[SourceImported]
            SE2[SourceRenamed]
            SE3[SourceDeleted]
            SE4[TextExtracted]
        end

        subgraph "Case Events"
            CSE1[CaseCreated]
            CSE2[CaseDeleted]
            CSE3[MemberAdded]
            CSE4[AttributeSet]
        end

        subgraph "Analysis Events"
            AE1[ReportStarted]
            AE2[ReportCompleted]
            AE3[ReportFailed]
        end

        subgraph "System Events"
            SYS1[ProjectOpened]
            SYS2[ProjectClosed]
            SYS3[SessionConnected]
            SYS4[SessionDisconnected]
        end
    end</code></pre>
<h3 id="63-event-subscription-model">6.3 Event Subscription Model<a class="headerlink" href="#63-event-subscription-model" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant AI as AI Client
    participant AC as Agent Context
    participant EB as Event Bus

    AI-&gt;&gt;AC: subscribe(["coding.*", "source.imported"])
    AC-&gt;&gt;AC: Register subscription for session
    AC--&gt;&gt;AI: subscription_id

    Note over EB: Domain event occurs

    EB-&gt;&gt;AC: CodeCreated event
    AC-&gt;&gt;AC: Check subscriptions
    AC-&gt;&gt;AC: Session matches "coding.*"
    AC-&gt;&gt;AI: Push: CodeCreated event

    EB-&gt;&gt;AC: CaseCreated event
    AC-&gt;&gt;AC: Check subscriptions
    AC-&gt;&gt;AC: No match for this session
    Note over AC: Event not sent to this AI

    AI-&gt;&gt;AC: unsubscribe(subscription_id)
    AC--&gt;&gt;AI: OK</code></pre>
<h3 id="64-event-schema">6.4 Event Schema<a class="headerlink" href="#64-event-schema" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>Event Structure:
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>{
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>  &quot;event_id&quot;: &quot;evt_abc123&quot;,
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>  &quot;event_type&quot;: &quot;coding.segment_coded&quot;,
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>  &quot;timestamp&quot;: &quot;2024-01-15T10:30:00.123Z&quot;,
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>  &quot;aggregate_type&quot;: &quot;Segment&quot;,
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>  &quot;aggregate_id&quot;: &quot;seg_456&quot;,
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>  &quot;caused_by&quot;: {
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    &quot;session_id&quot;: &quot;sess_789&quot;,
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    &quot;client_type&quot;: &quot;claude_code&quot;,
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    &quot;user&quot;: &quot;researcher1&quot;
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>  },
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>  &quot;payload&quot;: {
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    &quot;segment_id&quot;: &quot;seg_456&quot;,
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    &quot;code_id&quot;: 42,
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>    &quot;code_name&quot;: &quot;Pain Management&quot;,
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>    &quot;source_id&quot;: 1,
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>    &quot;source_name&quot;: &quot;Interview_P01.txt&quot;,
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>    &quot;start_pos&quot;: 1250,
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>    &quot;end_pos&quot;: 1380,
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>    &quot;selected_text&quot;: &quot;The pain was constant...&quot;
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>  },
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>  &quot;metadata&quot;: {
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>    &quot;correlation_id&quot;: &quot;corr_xyz&quot;,
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>    &quot;sequence_number&quot;: 1547
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>  }
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>}
</span></code></pre></div>
<h3 id="65-event-delivery-guarantees">6.5 Event Delivery Guarantees<a class="headerlink" href="#65-event-delivery-guarantees" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Guarantee</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>At-least-once</strong></td>
<td>Events persisted before acknowledgment</td>
</tr>
<tr>
<td><strong>Ordering</strong></td>
<td>Per-aggregate ordering via sequence numbers</td>
</tr>
<tr>
<td><strong>Replay</strong></td>
<td>Event store supports replay from sequence</td>
</tr>
<tr>
<td><strong>Filtering</strong></td>
<td>Server-side filtering by subscription</td>
</tr>
<tr>
<td><strong>Backpressure</strong></td>
<td>Client acknowledgment, buffering limits</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="7-session-management">7. Session Management<a class="headerlink" href="#7-session-management" title="Permanent link">&para;</a></h2>
<h3 id="71-session-lifecycle">7.1 Session Lifecycle<a class="headerlink" href="#71-session-lifecycle" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Connecting: Client connects

    Connecting --&gt; Authenticating: Protocol handshake
    Authenticating --&gt; Failed: Auth failed
    Authenticating --&gt; Active: Auth success

    Failed --&gt; [*]

    Active --&gt; Active: Tool calls, events
    Active --&gt; Idle: No activity
    Idle --&gt; Active: New activity
    Idle --&gt; Expired: Timeout

    Active --&gt; Disconnecting: Client disconnect
    Idle --&gt; Disconnecting: Client disconnect
    Expired --&gt; Disconnecting: Force cleanup

    Disconnecting --&gt; [*]: Cleanup complete</code></pre>
<h3 id="72-session-data-model">7.2 Session Data Model<a class="headerlink" href="#72-session-data-model" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>classDiagram
    class Session {
        +session_id: str
        +client_type: ClientType
        +client_name: str
        +created_at: datetime
        +last_activity: datetime
        +status: SessionStatus
        +subscriptions: List~Subscription~
        +context: SessionContext
    }

    class ClientType {
        &lt;&lt;enumeration&gt;&gt;
        CLAUDE_CODE
        GEMINI_CLI
        REST_CLIENT
        LOCAL_UI
        CUSTOM
    }

    class SessionStatus {
        &lt;&lt;enumeration&gt;&gt;
        CONNECTING
        ACTIVE
        IDLE
        DISCONNECTING
    }

    class Subscription {
        +subscription_id: str
        +event_patterns: List~str~
        +created_at: datetime
    }

    class SessionContext {
        +project_id: str
        +user_id: str
        +trust_level: TrustLevel
        +preferences: Dict
    }

    Session --&gt; ClientType
    Session --&gt; SessionStatus
    Session --&gt; "*" Subscription
    Session --&gt; SessionContext</code></pre>
<h3 id="73-multi-session-handling">7.3 Multi-Session Handling<a class="headerlink" href="#73-multi-session-handling" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Concurrent Sessions"
        S1[Session 1&lt;br/&gt;Claude Code&lt;br/&gt;User: Alice]
        S2[Session 2&lt;br/&gt;Gemini CLI&lt;br/&gt;User: Alice]
        S3[Session 3&lt;br/&gt;Local UI&lt;br/&gt;User: Alice]
        S4[Session 4&lt;br/&gt;Claude Code&lt;br/&gt;User: Bob]
    end

    subgraph "Session Manager"
        SM[Session Registry]
        LOCK[Conflict Detection]
        SYNC[State Sync]
    end

    subgraph "Conflict Scenarios"
        C1[Same entity modified&lt;br/&gt;by multiple sessions]
        C2[Concurrent deletes]
        C3[Interleaved operations]
    end

    S1 --&gt; SM
    S2 --&gt; SM
    S3 --&gt; SM
    S4 --&gt; SM

    SM --&gt; LOCK
    SM --&gt; SYNC

    LOCK --&gt; C1
    LOCK --&gt; C2
    LOCK --&gt; C3</code></pre>
<h3 id="74-conflict-resolution-strategy">7.4 Conflict Resolution Strategy<a class="headerlink" href="#74-conflict-resolution-strategy" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Strategy</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Same code renamed by two sessions</td>
<td>Last-write-wins</td>
<td>Version number check</td>
</tr>
<tr>
<td>Code deleted while being applied</td>
<td>Reject late operation</td>
<td>Optimistic locking</td>
</tr>
<tr>
<td>Concurrent segment creation</td>
<td>Allow both</td>
<td>No conflict (different IDs)</td>
</tr>
<tr>
<td>Same segment modified</td>
<td>Last-write-wins with notification</td>
<td>Event to other sessions</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="8-security-and-trust">8. Security and Trust<a class="headerlink" href="#8-security-and-trust" title="Permanent link">&para;</a></h2>
<h3 id="81-trust-level-model">8.1 Trust Level Model<a class="headerlink" href="#81-trust-level-model" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Trust Levels"
        AUTO[Autonomous&lt;br/&gt;Execute immediately]
        NOTIFY[Notify&lt;br/&gt;Execute + inform user]
        SUGGEST[Suggest&lt;br/&gt;Queue for approval]
        REQUIRE[Require&lt;br/&gt;Block until approved]
    end

    subgraph "Tool Risk Categories"
        LOW[Low Risk&lt;br/&gt;Read operations&lt;br/&gt;Search, reports]
        MEDIUM[Medium Risk&lt;br/&gt;Create operations&lt;br/&gt;Add codes, segments]
        HIGH[High Risk&lt;br/&gt;Modify operations&lt;br/&gt;Rename, move]
        CRITICAL[Critical Risk&lt;br/&gt;Destroy operations&lt;br/&gt;Delete, merge]
    end

    LOW --&gt; AUTO
    MEDIUM --&gt; NOTIFY
    HIGH --&gt; SUGGEST
    CRITICAL --&gt; REQUIRE</code></pre>
<h3 id="82-default-trust-configuration">8.2 Default Trust Configuration<a class="headerlink" href="#82-default-trust-configuration" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Tool Category</th>
<th>Default Trust</th>
<th>Can Override To</th>
</tr>
</thead>
<tbody>
<tr>
<td>Read/Query</td>
<td>Autonomous</td>
<td>-</td>
</tr>
<tr>
<td>Search</td>
<td>Autonomous</td>
<td>-</td>
</tr>
<tr>
<td>Report Generation</td>
<td>Autonomous</td>
<td>Notify</td>
</tr>
<tr>
<td>Create Code</td>
<td>Suggest</td>
<td>Notify, Autonomous</td>
</tr>
<tr>
<td>Apply Code</td>
<td>Notify</td>
<td>Suggest, Autonomous</td>
</tr>
<tr>
<td>Rename</td>
<td>Suggest</td>
<td>Notify</td>
</tr>
<tr>
<td>Delete</td>
<td>Require</td>
<td>Suggest</td>
</tr>
<tr>
<td>Merge</td>
<td>Require</td>
<td>Suggest</td>
</tr>
<tr>
<td>Bulk Operations</td>
<td>Require</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="83-approval-workflow">8.3 Approval Workflow<a class="headerlink" href="#83-approval-workflow" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant AI as AI Client
    participant AC as Agent Context
    participant UI as QualCoder UI
    participant User

    AI-&gt;&gt;AC: call_tool("delete_code", {code_id: 42})
    AC-&gt;&gt;AC: Check trust level: REQUIRE

    AC-&gt;&gt;UI: Queue approval request
    AC--&gt;&gt;AI: {status: "pending_approval", request_id: "req_123"}

    UI-&gt;&gt;User: Show approval dialog
    Note over UI: "Claude wants to delete&lt;br/&gt;code 'Pain Management'&lt;br/&gt;[Approve] [Reject]"

    alt User Approves
        User-&gt;&gt;UI: Click Approve
        UI-&gt;&gt;AC: approve(request_id)
        AC-&gt;&gt;AC: Execute delete_code
        AC--&gt;&gt;AI: Event: ApprovalGranted
        AC--&gt;&gt;AI: Event: CodeDeleted
    else User Rejects
        User-&gt;&gt;UI: Click Reject
        UI-&gt;&gt;AC: reject(request_id, reason?)
        AC--&gt;&gt;AI: Event: ApprovalDenied
    end</code></pre>
<h3 id="84-security-boundaries">8.4 Security Boundaries<a class="headerlink" href="#84-security-boundaries" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "External AI"
        AI[AI Client]
    end

    subgraph "Agent Context Security"
        AUTH[Authentication]
        AUTHZ[Authorization]
        RATE[Rate Limiting]
        AUDIT[Audit Logging]
        VALID[Input Validation]
    end

    subgraph "Protected Domain"
        DOMAIN[Domain Layer]
        DATA[(Database)]
    end

    AI --&gt; AUTH
    AUTH --&gt; AUTHZ
    AUTHZ --&gt; RATE
    RATE --&gt; VALID
    VALID --&gt; DOMAIN
    DOMAIN --&gt; DATA

    AUDIT -.-&gt; AUTH
    AUDIT -.-&gt; AUTHZ
    AUDIT -.-&gt; VALID
    AUDIT -.-&gt; DOMAIN</code></pre>
<h3 id="85-rate-limiting">8.5 Rate Limiting<a class="headerlink" href="#85-rate-limiting" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Limit Type</th>
<th>Default</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Requests/minute</td>
<td>60</td>
<td>Prevent runaway AI</td>
</tr>
<tr>
<td>Tool calls/minute</td>
<td>30</td>
<td>Limit mutations</td>
</tr>
<tr>
<td>Events/second</td>
<td>100</td>
<td>Backpressure</td>
</tr>
<tr>
<td>Pending approvals</td>
<td>10</td>
<td>Prevent queue overflow</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="9-integration-patterns">9. Integration Patterns<a class="headerlink" href="#9-integration-patterns" title="Permanent link">&para;</a></h2>
<h3 id="91-claude-code-integration-mcp">9.1 Claude Code Integration (MCP)<a class="headerlink" href="#91-claude-code-integration-mcp" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant Claude as Claude Code CLI
    participant MCP as QualCoder MCP Server
    participant QC as QualCoder Domain

    Note over User,Claude: User starts Claude Code&lt;br/&gt;with QualCoder MCP configured

    Claude-&gt;&gt;MCP: Initialize connection (stdio)
    MCP--&gt;&gt;Claude: Server capabilities

    Claude-&gt;&gt;MCP: tools/list
    MCP--&gt;&gt;Claude: Available tools

    Claude-&gt;&gt;MCP: resources/list
    MCP--&gt;&gt;Claude: Available resources

    User-&gt;&gt;Claude: "What codes do I have?"
    Claude-&gt;&gt;MCP: resources/read "qualcoder://codes"
    MCP-&gt;&gt;QC: Query codes
    QC--&gt;&gt;MCP: Code list
    MCP--&gt;&gt;Claude: Code data
    Claude-&gt;&gt;User: "You have 47 codes including..."

    User-&gt;&gt;Claude: "Apply 'Anxiety' to line 45-50 in Interview 1"
    Claude-&gt;&gt;MCP: tools/call "apply_code" {...}
    MCP-&gt;&gt;QC: ApplyCode command
    QC--&gt;&gt;MCP: Success + SegmentCoded event
    MCP--&gt;&gt;Claude: Result
    Claude-&gt;&gt;User: "Done! Applied 'Anxiety' to that segment."</code></pre>
<h3 id="92-mcp-server-configuration">9.2 MCP Server Configuration<a class="headerlink" href="#92-mcp-server-configuration" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a># claude_code_config.json (user&#39;s Claude Code config)
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>{
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>  &quot;mcpServers&quot;: {
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    &quot;qualcoder&quot;: {
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>      &quot;command&quot;: &quot;python&quot;,
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>      &quot;args&quot;: [&quot;-m&quot;, &quot;qualcoder.agent_context.mcp_server&quot;],
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>      &quot;env&quot;: {
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>        &quot;QUALCODER_PROJECT&quot;: &quot;/path/to/project.qda&quot;
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>      }
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    }
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>  }
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>}
</span></code></pre></div>
<h3 id="93-gemini-cli-integration-rest">9.3 Gemini CLI Integration (REST)<a class="headerlink" href="#93-gemini-cli-integration-rest" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant Gemini as Gemini CLI
    participant REST as QualCoder REST API
    participant QC as QualCoder Domain

    Note over User,REST: QualCoder runs REST server&lt;br/&gt;Gemini configured with endpoint

    Gemini-&gt;&gt;REST: POST /session/create
    REST--&gt;&gt;Gemini: {session_id, capabilities}

    User-&gt;&gt;Gemini: "Show me uncoded sources"
    Gemini-&gt;&gt;REST: GET /state/sources?coded=false
    REST-&gt;&gt;QC: Query
    QC--&gt;&gt;REST: Sources
    REST--&gt;&gt;Gemini: Source list
    Gemini-&gt;&gt;User: "3 sources haven't been coded..."

    User-&gt;&gt;Gemini: "Start coding the first one"
    Gemini-&gt;&gt;REST: GET /state/sources/1/content
    REST--&gt;&gt;Gemini: Content

    Note over Gemini: Analyzes content...

    Gemini-&gt;&gt;REST: POST /commands/coding/create_code
    REST-&gt;&gt;QC: CreateCode command
    QC--&gt;&gt;REST: Success
    REST--&gt;&gt;Gemini: {code_id: 42}

    Gemini-&gt;&gt;REST: POST /commands/coding/apply_code
    REST--&gt;&gt;Gemini: Success</code></pre>
<h3 id="94-local-model-integration-ollama">9.4 Local Model Integration (Ollama)<a class="headerlink" href="#94-local-model-integration-ollama" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "User's Machine"
        subgraph "QualCoder"
            QC[QualCoder App]
            AC[Agent Context]
            EA[Embedded Agent]
        end

        subgraph "Local AI"
            OLLAMA[Ollama Server]
            MODEL[llama3.2 / codellama]
        end
    end

    QC --&gt; AC
    AC --&gt; EA
    EA --&gt;|HTTP localhost:11434| OLLAMA
    OLLAMA --&gt; MODEL

    Note1[No internet required]
    Note2[No API costs]
    Note3[Data stays local]</code></pre>
<h3 id="95-hybrid-mode-multiple-ais">9.5 Hybrid Mode (Multiple AIs)<a class="headerlink" href="#95-hybrid-mode-multiple-ais" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "AI Clients"
        C1[Claude Code&lt;br/&gt;Primary coding]
        C2[Local Ollama&lt;br/&gt;Quick queries]
        C3[Gemini&lt;br/&gt;Analysis]
    end

    subgraph "Agent Context"
        SM[Session Manager]

        S1[Session 1]
        S2[Session 2]
        S3[Session 3]
    end

    subgraph "QualCoder Domain"
        DOMAIN[Shared State]
    end

    C1 --&gt; S1
    C2 --&gt; S2
    C3 --&gt; S3

    S1 --&gt; SM
    S2 --&gt; SM
    S3 --&gt; SM

    SM --&gt; DOMAIN</code></pre>
<hr />
<h2 id="10-deployment-modes">10. Deployment Modes<a class="headerlink" href="#10-deployment-modes" title="Permanent link">&para;</a></h2>
<h3 id="101-mode-overview">10.1 Mode Overview<a class="headerlink" href="#101-mode-overview" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Mode 1: Desktop with GUI"
        M1_GUI[PyQt6 GUI]
        M1_AC[Agent Context]
        M1_DOMAIN[Domain]
        M1_DB[(SQLite)]

        M1_GUI --&gt; M1_DOMAIN
        M1_AC --&gt; M1_DOMAIN
        M1_DOMAIN --&gt; M1_DB
    end

    subgraph "Mode 2: Headless Server"
        M2_AC[Agent Context&lt;br/&gt;REST/MCP/WS]
        M2_DOMAIN[Domain]
        M2_DB[(SQLite)]

        M2_AC --&gt; M2_DOMAIN
        M2_DOMAIN --&gt; M2_DB
    end

    subgraph "Mode 3: Hybrid"
        M3_GUI[PyQt6 GUI&lt;br/&gt;Optional viewer]
        M3_AC[Agent Context]
        M3_DOMAIN[Domain]
        M3_DB[(SQLite)]

        M3_GUI -.-&gt; M3_DOMAIN
        M3_AC --&gt; M3_DOMAIN
        M3_DOMAIN --&gt; M3_DB
    end</code></pre>
<h3 id="102-desktop-mode-gui-primary">10.2 Desktop Mode (GUI Primary)<a class="headerlink" href="#102-desktop-mode-gui-primary" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>            QualCoder Desktop            
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>      
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>           PyQt6 GUI                   
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>     (Primary interaction mode)        
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>      
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>                                        
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>                                        
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>      
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>         Agent Context                 
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    (Optional AI assistance)           
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>     MCP server on localhost          
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>     User can connect Claude Code     
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>      
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>                                        
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>                                        
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>      
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>         Domain Layer                  
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>      
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>Use case: Traditional researcher who sometimes
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>wants AI help but primarily uses GUI
</span></code></pre></div>
<h3 id="103-headless-mode-ai-primary">10.3 Headless Mode (AI Primary)<a class="headerlink" href="#103-headless-mode-ai-primary" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>         QualCoder Server                
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>      
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>         Agent Context                 
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>     (Primary interaction mode)        
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>     MCP server (stdio/HTTP)          
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>     REST API                         
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>     WebSocket for events             
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>      
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>                                        
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>                                        
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>      
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>         Domain Layer                  
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>      
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>Started via:
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>$ qualcoder-server --project /path/to/project.qda
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>Use case: Researcher works entirely through
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>Claude Code or other AI interface
</span></code></pre></div>
<h3 id="104-hybrid-mode-gui-as-observer">10.4 Hybrid Mode (GUI as Observer)<a class="headerlink" href="#104-hybrid-mode-gui-as-observer" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>        QualCoder Hybrid                 
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>      
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>           PyQt6 GUI                   
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>     (Observer/approval mode)          
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>     Shows AI actions in real-time    
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>     Approval dialogs                 
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>     Can intervene/override           
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>      
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>                                        
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>                                        
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>      
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>         Agent Context                 
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>     (Primary interaction mode)        
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>      
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>                                        
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>                                        
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>      
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>         Domain Layer                  
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>      
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>Use case: Researcher uses AI but wants to
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>watch and approve actions, maintaining control
</span></code></pre></div>
<h3 id="105-startup-sequences">10.5 Startup Sequences<a class="headerlink" href="#105-startup-sequences" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant QC as QualCoder
    participant AC as Agent Context
    participant AI as AI CLI

    rect rgb(200, 230, 200)
        Note over User,AI: Desktop Mode Startup
        User-&gt;&gt;QC: Launch QualCoder
        QC-&gt;&gt;QC: Start GUI
        QC-&gt;&gt;AC: Start Agent Context (background)
        AC-&gt;&gt;AC: Listen on localhost:PORT
        Note over User: User works with GUI,&lt;br/&gt;optionally connects AI later
    end

    rect rgb(200, 200, 230)
        Note over User,AI: Headless Mode Startup
        User-&gt;&gt;QC: $ qualcoder-server --project X
        QC-&gt;&gt;AC: Start Agent Context (foreground)
        AC-&gt;&gt;AC: Listen on configured interfaces
        User-&gt;&gt;AI: Start AI CLI with QualCoder config
        AI-&gt;&gt;AC: Connect
        Note over User: User works entirely through AI
    end

    rect rgb(230, 200, 200)
        Note over User,AI: Hybrid Mode Startup
        User-&gt;&gt;QC: Launch QualCoder --ai-primary
        QC-&gt;&gt;AC: Start Agent Context
        QC-&gt;&gt;QC: Start GUI in observer mode
        User-&gt;&gt;AI: Start AI CLI
        AI-&gt;&gt;AC: Connect
        Note over User: AI is primary, GUI shows activity
    end</code></pre>
<hr />
<h2 id="11-real-time-ui-observation">11. Real-Time UI Observation<a class="headerlink" href="#11-real-time-ui-observation" title="Permanent link">&para;</a></h2>
<p>This section describes how the PyQt6 GUI stays synchronized with AI agent activity, enabling users to observe, intervene, and approve AI actions in real-time.</p>
<h3 id="111-core-principle-ui-as-event-subscriber">11.1 Core Principle: UI as Event Subscriber<a class="headerlink" href="#111-core-principle-ui-as-event-subscriber" title="Permanent link">&para;</a></h3>
<p>The PyQt6 UI is architecturally identical to external AI clients - it's just another subscriber to the domain event bus. This ensures perfect consistency between what AI sees and what the user sees.</p>
<pre class="mermaid"><code>graph TB
    subgraph "Domain Layer"
        CMD[Command Execution]
        CMD --&gt; EVT[Domain Event]
        EVT --&gt; BUS[Event Bus]
    end

    subgraph "Subscribers - All Equal"
        BUS --&gt; AI[AI Client&lt;br/&gt;Claude/Gemini]
        BUS --&gt; UI[PyQt6 UI&lt;br/&gt;Local Observer]
        BUS --&gt; LOG[Audit Logger]
        BUS --&gt; CACHE[State Cache]
    end

    style AI fill:#90EE90
    style UI fill:#90EE90</code></pre>
<h3 id="112-signal-bridge-architecture">11.2 Signal Bridge Architecture<a class="headerlink" href="#112-signal-bridge-architecture" title="Permanent link">&para;</a></h3>
<p>The Signal Bridge translates domain events into PyQt6 signals for thread-safe UI updates.</p>
<pre class="mermaid"><code>graph TB
    subgraph "Domain Layer"
        EB[Event Bus]
    end

    subgraph "Signal Bridge"
        RECV[Event Receiver&lt;br/&gt;Background Thread]
        CONV[Signal Converter]
        EMIT[Qt Signal Emitter]

        EB --&gt; RECV
        RECV --&gt; CONV
        CONV --&gt; EMIT
    end

    subgraph "PyQt6 UI Thread"
        subgraph "Signal Slots"
            S1[on_code_created]
            S2[on_segment_coded]
            S3[on_source_imported]
            S4[on_approval_requested]
        end

        subgraph "UI Updates"
            U1[Update Code Tree]
            U2[Highlight Segment]
            U3[Refresh Source List]
            U4[Show Approval Dialog]
        end
    end

    EMIT --&gt; S1
    EMIT --&gt; S2
    EMIT --&gt; S3
    EMIT --&gt; S4

    S1 --&gt; U1
    S2 --&gt; U2
    S3 --&gt; U3
    S4 --&gt; U4</code></pre>
<h3 id="113-event-to-signal-mapping">11.3 Event-to-Signal Mapping<a class="headerlink" href="#113-event-to-signal-mapping" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Domain Event</th>
<th>Qt Signal</th>
<th>UI Handler</th>
<th>Visual Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CodeCreated</code></td>
<td><code>code_created(code_data)</code></td>
<td><code>on_code_created()</code></td>
<td>Add to code tree with AI badge</td>
</tr>
<tr>
<td><code>CodeDeleted</code></td>
<td><code>code_deleted(code_id)</code></td>
<td><code>on_code_deleted()</code></td>
<td>Remove from code tree</td>
</tr>
<tr>
<td><code>SegmentCoded</code></td>
<td><code>segment_coded(segment_data)</code></td>
<td><code>on_segment_coded()</code></td>
<td>Highlight text, update counts</td>
</tr>
<tr>
<td><code>SegmentUncoded</code></td>
<td><code>segment_uncoded(segment_id)</code></td>
<td><code>on_segment_uncoded()</code></td>
<td>Remove highlight</td>
</tr>
<tr>
<td><code>SourceImported</code></td>
<td><code>source_imported(source_data)</code></td>
<td><code>on_source_imported()</code></td>
<td>Add to source list</td>
</tr>
<tr>
<td><code>ApprovalRequested</code></td>
<td><code>approval_requested(request)</code></td>
<td><code>on_approval_requested()</code></td>
<td>Show approval dialog</td>
</tr>
<tr>
<td><code>SessionConnected</code></td>
<td><code>agent_connected(session)</code></td>
<td><code>on_agent_connected()</code></td>
<td>Update status bar</td>
</tr>
<tr>
<td><code>SessionDisconnected</code></td>
<td><code>agent_disconnected(session)</code></td>
<td><code>on_agent_disconnected()</code></td>
<td>Update status bar</td>
</tr>
</tbody>
</table>
<h3 id="114-main-window-layout-with-agent-observation">11.4 Main Window Layout with Agent Observation<a class="headerlink" href="#114-main-window-layout-with-agent-observation" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  QualCoder - Healthcare Study                    [Agent:  Claude Connected]
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>  File  Edit  View  Coding  Cases  Reports  AI  Help                         
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>                                                                             
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>      
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>       Code Tree                       Source View                      
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>                                                                        
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>     Health Themes        Interview_P01.txt                           
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>       Pain Mgmt            
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>       Anxiety   AI                                                  
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>       Coping            &quot;When I first got the diagnosis, I felt     
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>     Support               completely overwhelmed. [The anxiety was   
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>       Family             constant]Anxiety, keeping me up at       
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>                            night and making it hard to focus...&quot;      
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>                                                      
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>    Codes: 47                     [AI just highlighted this]           
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>    AI-created: 12                                                      
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>      
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>                                                                             
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>     
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>    Agent Activity                               [Filter ] [ Pause]     
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>       
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>     10:32:15  Claude  Created code &quot;Anxiety&quot; (Health Themes)            
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>     10:32:18  Claude  Applied &quot;Anxiety&quot; to Interview_P01 (pos 127)      
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>     10:32:21  Claude  Applied &quot;Anxiety&quot; to Interview_P01 (pos 892)      
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>     10:32:24  Claude  [PENDING] Create code &quot;Sleep Disruption&quot;          
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>                                      [ Approve] [ Reject] [ Edit]     
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a>     10:32:25  Claude  [QUEUED] Apply &quot;Sleep Disruption&quot; to 3 segments   
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>     
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a>                                                                             
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a>  Claude: 3 actions/min  Pending: 1  Trust: Suggest  [ Settings]        
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a>
</span></code></pre></div>
<h3 id="115-agent-activity-panel-design">11.5 Agent Activity Panel Design<a class="headerlink" href="#115-agent-activity-panel-design" title="Permanent link">&para;</a></h3>
<p>The Agent Activity Panel is a dockable widget showing real-time AI operations.</p>
<pre class="mermaid"><code>classDiagram
    class AgentActivityPanel {
        +activity_list: QListWidget
        +filter_combo: QComboBox
        +pause_button: QPushButton
        +settings_button: QPushButton
        +is_paused: bool
        +max_items: int
        +add_activity(activity: ActivityItem)
        +filter_by_type(event_type: str)
        +pause_resume()
        +clear_history()
    }

    class ActivityItem {
        +timestamp: datetime
        +session_id: str
        +client_name: str
        +event_type: str
        +description: str
        +status: ActivityStatus
        +payload: dict
        +request_id: Optional~str~
    }

    class ActivityStatus {
        &lt;&lt;enumeration&gt;&gt;
        COMPLETED
        PENDING_APPROVAL
        QUEUED
        REJECTED
        FAILED
    }

    class ActivityItemWidget {
        +icon: QLabel
        +timestamp_label: QLabel
        +client_label: QLabel
        +description_label: QLabel
        +action_buttons: QWidget
        +approve_btn: QPushButton
        +reject_btn: QPushButton
        +edit_btn: QPushButton
    }

    AgentActivityPanel --&gt; "*" ActivityItem
    ActivityItem --&gt; ActivityStatus
    AgentActivityPanel --&gt; "*" ActivityItemWidget</code></pre>
<h4 id="activity-item-visual-states">Activity Item Visual States<a class="headerlink" href="#activity-item-visual-states" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph LR
    subgraph "Activity Status Icons"
        C[ Completed&lt;br/&gt;Green]
        P[ Pending&lt;br/&gt;Yellow/Pulse]
        Q[ Queued&lt;br/&gt;Gray]
        R[ Rejected&lt;br/&gt;Red]
        F[ Failed&lt;br/&gt;Orange]
    end</code></pre>
<table>
<thead>
<tr>
<th>Status</th>
<th>Icon</th>
<th>Color</th>
<th>Animation</th>
<th>User Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>Completed</td>
<td></td>
<td>Green</td>
<td>None</td>
<td>Click to see details</td>
</tr>
<tr>
<td>Pending Approval</td>
<td></td>
<td>Yellow</td>
<td>Pulse</td>
<td>Approve/Reject/Edit buttons</td>
</tr>
<tr>
<td>Queued</td>
<td></td>
<td>Gray</td>
<td>None</td>
<td>Depends on pending item</td>
</tr>
<tr>
<td>Rejected</td>
<td></td>
<td>Red</td>
<td>None</td>
<td>Can retry if desired</td>
</tr>
<tr>
<td>Failed</td>
<td></td>
<td>Orange</td>
<td>None</td>
<td>Click to see error</td>
</tr>
</tbody>
</table>
<h3 id="116-source-view-live-updates">11.6 Source View Live Updates<a class="headerlink" href="#116-source-view-live-updates" title="Permanent link">&para;</a></h3>
<p>When an AI applies a code to a segment, the Source View updates in real-time.</p>
<pre class="mermaid"><code>sequenceDiagram
    participant AI as AI Client
    participant AC as Agent Context
    participant Domain as Domain Layer
    participant Bridge as Signal Bridge
    participant SV as Source View Widget

    AI-&gt;&gt;AC: apply_code(code_id, source_id, start, end)
    AC-&gt;&gt;Domain: ApplyCode command
    Domain-&gt;&gt;Domain: Create segment
    Domain-&gt;&gt;Domain: Emit SegmentCoded event

    Domain--&gt;&gt;Bridge: SegmentCoded event
    Bridge-&gt;&gt;Bridge: Convert to Qt signal
    Bridge-&gt;&gt;SV: segment_coded.emit(segment_data)

    SV-&gt;&gt;SV: Check if source is currently displayed
    alt Source is displayed
        SV-&gt;&gt;SV: highlight_range(start, end, code_color)
        SV-&gt;&gt;SV: add_margin_marker(code_name)
        SV-&gt;&gt;SV: scroll_to_visible(start)
        SV-&gt;&gt;SV: flash_highlight(duration=500ms)
    else Source not displayed
        SV-&gt;&gt;SV: queue_update(source_id, segment)
    end

    Note over SV: User sees text highlight&lt;br/&gt;appear with brief flash</code></pre>
<h4 id="highlight-animation-sequence">Highlight Animation Sequence<a class="headerlink" href="#highlight-animation-sequence" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Time 0ms:    Normal text
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Time 50ms:   Highlight appears (code color, 40% opacity)
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Time 100ms:  Flash bright (code color, 80% opacity)
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>Time 300ms:  Settle to normal (code color, 40% opacity)
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>Time 500ms:  Animation complete, stable highlight
</span></code></pre></div>
<h3 id="117-code-tree-real-time-updates">11.7 Code Tree Real-Time Updates<a class="headerlink" href="#117-code-tree-real-time-updates" title="Permanent link">&para;</a></h3>
<p>The Code Tree reflects AI-created codes with visual distinction.</p>
<pre class="mermaid"><code>graph TB
    subgraph "Code Tree Visual Elements"
        subgraph "Human-Created Code"
            HC[Pain Management]
            HC_ICON[ Standard icon]
            HC_COUNT[(45)]
        end

        subgraph "AI-Created Code"
            AC[Anxiety]
            AC_ICON[AI Badge icon]
            AC_COUNT[(12)]
            AC_NEW[NEW indicator]
        end

        subgraph "Category"
            CAT[ Health Themes]
        end
    end

    CAT --&gt; HC
    CAT --&gt; AC</code></pre>
<h4 id="code-tree-update-behavior">Code Tree Update Behavior<a class="headerlink" href="#code-tree-update-behavior" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Event</th>
<th>Tree Update</th>
<th>Animation</th>
</tr>
</thead>
<tbody>
<tr>
<td>AI creates code</td>
<td>Insert node with AI badge</td>
<td>Slide-in + highlight</td>
</tr>
<tr>
<td>AI deletes code</td>
<td>Remove node</td>
<td>Fade-out</td>
</tr>
<tr>
<td>AI renames code</td>
<td>Update label</td>
<td>Brief highlight</td>
</tr>
<tr>
<td>AI applies code</td>
<td>Increment count badge</td>
<td>Count pulse</td>
</tr>
<tr>
<td>AI moves code</td>
<td>Relocate in tree</td>
<td>Slide animation</td>
</tr>
</tbody>
</table>
<h3 id="118-approval-workflow-ux">11.8 Approval Workflow UX<a class="headerlink" href="#118-approval-workflow-ux" title="Permanent link">&para;</a></h3>
<h4 id="inline-approval-activity-panel">Inline Approval (Activity Panel)<a class="headerlink" href="#inline-approval-activity-panel" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>   10:32:24  Claude  [PENDING] Create code &quot;Sleep Disruption&quot;       
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>              Category: Health Themes                                 
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>              Memo: &quot;Instances where participants describe sleep...&quot;  
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>                                                                      
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>              [ Approve]  [ Reject]  [ Edit Before Approve]       
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
</span></code></pre></div>
<h4 id="modal-approval-dialog-high-risk-actions">Modal Approval Dialog (High-Risk Actions)<a class="headerlink" href="#modal-approval-dialog-high-risk-actions" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TB
    subgraph "Approval Dialog"
        TITLE[Claude wants to delete code 'Outdated Theme']

        subgraph "Impact Analysis"
            I1[This will remove 23 coded segments]
            I2[Segments will become uncoded]
            I3[This action cannot be undone]
        end

        subgraph "Actions"
            A1[Cancel]
            A2[Reject with Reason]
            A3[Approve]
        end
    end

    TITLE --&gt; I1
    I1 --&gt; I2
    I2 --&gt; I3
    I3 --&gt; A1
    I3 --&gt; A2
    I3 --&gt; A3</code></pre>
<h4 id="approval-flow-state-machine">Approval Flow State Machine<a class="headerlink" href="#approval-flow-state-machine" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Requested: AI requests action

    Requested --&gt; DialogShown: UI displays approval
    DialogShown --&gt; Approved: User clicks Approve
    DialogShown --&gt; Rejected: User clicks Reject
    DialogShown --&gt; Editing: User clicks Edit
    DialogShown --&gt; Timeout: No response (5 min)

    Editing --&gt; Approved: User saves &amp; approves
    Editing --&gt; Cancelled: User cancels edit

    Approved --&gt; Executing: Agent Context executes
    Executing --&gt; Completed: Success
    Executing --&gt; Failed: Error

    Completed --&gt; [*]
    Failed --&gt; [*]
    Rejected --&gt; [*]
    Cancelled --&gt; [*]
    Timeout --&gt; Rejected: Auto-reject</code></pre>
<h3 id="119-control-panel-design">11.9 Control Panel Design<a class="headerlink" href="#119-control-panel-design" title="Permanent link">&para;</a></h3>
<p>The Control Panel provides user control over AI behavior.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>                        Agent Control Panel                          
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>                                                                     
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>  Connected Agents                                                   
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>     
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>     Claude Code    Active    3/min    [Pause] [Disconnect]      
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>     Gemini CLI     Idle      0/min    [Pause] [Disconnect]      
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>     
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>                                                                     
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>  Trust Level                              [?]                       
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>     
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>     Autonomous - AI acts freely (read-only still safe)          
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>     Notify - AI acts, you&#39;re notified                           
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>     Suggest - AI proposes, you approve (Recommended)            
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>     Require - All actions need approval                         
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>     
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>                                                                     
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>  Per-Tool Overrides                       [Expand ]               
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>     
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>    create_code:    [Suggest ]                                   
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>    apply_code:     [Notify ]                                    
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>    delete_code:    [Require ] (locked)                          
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>    merge_codes:    [Require ] (locked)                          
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>     
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a>                                                                     
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>  Rate Limiting                                                      
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a>     
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a>    Actions per minute:  [30____] (current: 3)                    
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a>    Max pending approvals: [10____] (current: 1)                  
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a>     
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a>                                                                     
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a>  [Pause All Agents]  [Resume All]  [Disconnect All]                
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a>                                                                     
</span><span id="__span-10-35"><a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a>
</span></code></pre></div>
<h3 id="1110-visual-indicators-ai-vs-human">11.10 Visual Indicators: AI vs Human<a class="headerlink" href="#1110-visual-indicators-ai-vs-human" title="Permanent link">&para;</a></h3>
<p>Clear visual distinction between AI-created and human-created items.</p>
<pre class="mermaid"><code>graph TB
    subgraph "Visual Indicator System"
        subgraph "Badges"
            B1[AI - Small badge on icon]
            B2[Human - No badge/default]
        end

        subgraph "Colors"
            C1[AI actions - Subtle blue tint]
            C2[Human actions - Standard colors]
        end

        subgraph "Icons"
            I1[ Robot icon for AI session]
            I2[ Person icon for human]
        end

        subgraph "Tooltips"
            T1[Created by Claude at 10:32:15]
            T2[Created by researcher1 at 09:15:00]
        end
    end</code></pre>
<h4 id="indicator-placement">Indicator Placement<a class="headerlink" href="#indicator-placement" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Element</th>
<th>AI Indicator</th>
<th>Human Indicator</th>
</tr>
</thead>
<tbody>
<tr>
<td>Code in tree</td>
<td><code>AI</code> badge suffix</td>
<td>No badge</td>
</tr>
<tr>
<td>Segment highlight</td>
<td>Blue-tinted border</td>
<td>Standard border</td>
</tr>
<tr>
<td>Activity feed</td>
<td>Robot icon + client name</td>
<td>Person icon + "You"</td>
</tr>
<tr>
<td>Memo</td>
<td>"AI-generated" prefix</td>
<td>No prefix</td>
</tr>
<tr>
<td>Tooltip</td>
<td>"Created by {AI name}"</td>
<td>"Created by {username}"</td>
</tr>
</tbody>
</table>
<h3 id="1111-interaction-modes">11.11 Interaction Modes<a class="headerlink" href="#1111-interaction-modes" title="Permanent link">&para;</a></h3>
<p>Users can choose how they want to work with AI.</p>
<pre class="mermaid"><code>graph TB
    subgraph "Mode: Watch"
        W1[See all AI actions]
        W2[No intervention]
        W3[AI fully autonomous]
    end

    subgraph "Mode: Collaborate"
        C1[Work alongside AI]
        C2[Both make changes]
        C3[See each other's work]
    end

    subgraph "Mode: Supervise"
        S1[AI proposes everything]
        S2[User approves each action]
        S3[Full control retained]
    end

    subgraph "Mode: Review"
        R1[AI works in background]
        R2[User reviews batch later]
        R3[Accept/reject in bulk]
    end</code></pre>
<h4 id="mode-configuration">Mode Configuration<a class="headerlink" href="#mode-configuration" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Trust Level</th>
<th>Activity Panel</th>
<th>Approval Flow</th>
</tr>
</thead>
<tbody>
<tr>
<td>Watch</td>
<td>Autonomous</td>
<td>Read-only log</td>
<td>None</td>
</tr>
<tr>
<td>Collaborate</td>
<td>Notify</td>
<td>Interactive</td>
<td>Notifications only</td>
</tr>
<tr>
<td>Supervise</td>
<td>Suggest/Require</td>
<td>Interactive</td>
<td>Per-action approval</td>
</tr>
<tr>
<td>Review</td>
<td>Autonomous</td>
<td>Batch view</td>
<td>Batch approval</td>
</tr>
</tbody>
</table>
<h3 id="1112-notification-system">11.12 Notification System<a class="headerlink" href="#1112-notification-system" title="Permanent link">&para;</a></h3>
<p>Non-intrusive notifications for AI activity when user is focused elsewhere.</p>
<pre class="mermaid"><code>graph TB
    subgraph "Notification Types"
        N1[Toast - Brief, auto-dismiss]
        N2[Badge - Count on panel tab]
        N3[Sound - Optional audio cue]
        N4[System - OS notification]
    end

    subgraph "Notification Triggers"
        T1[Action completed]
        T2[Approval needed]
        T3[Error occurred]
        T4[AI connected/disconnected]
    end

    T1 --&gt; N1
    T1 --&gt; N2
    T2 --&gt; N1
    T2 --&gt; N2
    T2 --&gt; N3
    T2 --&gt; N4
    T3 --&gt; N1
    T3 --&gt; N3
    T4 --&gt; N1</code></pre>
<h4 id="toast-notification-examples">Toast Notification Examples<a class="headerlink" href="#toast-notification-examples" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>  Claude applied &quot;Anxiety&quot; to     
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    Interview_P01 (3 segments)       
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>                        [View] []   
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>  Claude needs approval to        
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>    delete code &quot;Outdated Theme&quot;     
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>                      [Review] []   
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
</span></code></pre></div>
<h3 id="1113-undoredo-for-ai-actions">11.13 Undo/Redo for AI Actions<a class="headerlink" href="#1113-undoredo-for-ai-actions" title="Permanent link">&para;</a></h3>
<p>Users can undo AI actions just like their own.</p>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant UI as QualCoder UI
    participant AC as Agent Context
    participant Domain as Domain Layer

    Note over User,Domain: AI creates a code

    User-&gt;&gt;UI: Press Ctrl+Z (Undo)
    UI-&gt;&gt;UI: Check undo stack
    UI-&gt;&gt;UI: Find last action (AI's CodeCreated)
    UI-&gt;&gt;AC: Undo request (action_id)
    AC-&gt;&gt;Domain: DeleteCode command (compensating)
    Domain--&gt;&gt;AC: CodeDeleted event
    AC--&gt;&gt;UI: Undo complete

    UI-&gt;&gt;UI: Update code tree (remove code)
    UI-&gt;&gt;UI: Add to redo stack

    Note over User: User sees AI's code removed,&lt;br/&gt;can redo if desired</code></pre>
<h4 id="undo-stack-behavior">Undo Stack Behavior<a class="headerlink" href="#undo-stack-behavior" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Undo Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>AI creates code</td>
<td>Delete the code</td>
</tr>
<tr>
<td>AI applies code to segment</td>
<td>Remove the segment coding</td>
</tr>
<tr>
<td>AI merges codes</td>
<td>Cannot undo (destructive)</td>
</tr>
<tr>
<td>AI deletes code</td>
<td>Cannot undo (requires backup)</td>
</tr>
</tbody>
</table>
<h3 id="1114-session-handoff">11.14 Session Handoff<a class="headerlink" href="#1114-session-handoff" title="Permanent link">&para;</a></h3>
<p>When user switches from AI to manual (or vice versa).</p>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant UI as QualCoder UI
    participant AI as Claude Code

    Note over User,AI: User working in UI

    User-&gt;&gt;UI: Working manually on Interview_P02

    AI-&gt;&gt;UI: Wants to work on Interview_P02
    UI-&gt;&gt;UI: Detect conflict (same source)
    UI-&gt;&gt;User: "Claude wants to code Interview_P02.&lt;br/&gt;Allow? [Yes, I'll watch] [No, I'm working]"

    alt User allows
        User-&gt;&gt;UI: Click "Yes, I'll watch"
        UI-&gt;&gt;AI: Source unlocked for AI
        UI-&gt;&gt;UI: Switch to observer mode for this source
    else User declines
        User-&gt;&gt;UI: Click "No, I'm working"
        UI-&gt;&gt;AI: Source busy, work on another
        AI-&gt;&gt;AI: Choose different source
    end</code></pre>
<h3 id="1115-performance-considerations">11.15 Performance Considerations<a class="headerlink" href="#1115-performance-considerations" title="Permanent link">&para;</a></h3>
<p>Ensuring smooth UI performance during high AI activity.</p>
<table>
<thead>
<tr>
<th>Concern</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>High event rate</td>
<td>Batch UI updates (16ms frame budget)</td>
</tr>
<tr>
<td>Large activity log</td>
<td>Virtual scrolling, limit to 1000 items</td>
</tr>
<tr>
<td>Many highlights</td>
<td>Lazy rendering, viewport-only updates</td>
</tr>
<tr>
<td>Approval queue</td>
<td>Max 10 pending, queue rest invisibly</td>
</tr>
<tr>
<td>Memory usage</td>
<td>Prune old activity items periodically</td>
</tr>
</tbody>
</table>
<pre class="mermaid"><code>graph TB
    subgraph "Event Throttling"
        E1[Domain Events&lt;br/&gt;100/sec possible]
        E2[Batch Buffer&lt;br/&gt;Collect for 16ms]
        E3[UI Update&lt;br/&gt;Single repaint]
    end

    E1 --&gt; E2
    E2 --&gt; E3</code></pre>
<h3 id="1116-accessibility">11.16 Accessibility<a class="headerlink" href="#1116-accessibility" title="Permanent link">&para;</a></h3>
<p>Ensuring AI observation features are accessible.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Accessibility Support</th>
</tr>
</thead>
<tbody>
<tr>
<td>Activity feed</td>
<td>Screen reader announces new items</td>
</tr>
<tr>
<td>Approval dialogs</td>
<td>Keyboard navigable, focus trapped</td>
</tr>
<tr>
<td>Visual indicators</td>
<td>Color + icon (not color alone)</td>
</tr>
<tr>
<td>Toast notifications</td>
<td>ARIA live regions</td>
</tr>
<tr>
<td>Status changes</td>
<td>Audio cues (optional)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="appendix-a-mcp-tool-schemas">Appendix A: MCP Tool Schemas<a class="headerlink" href="#appendix-a-mcp-tool-schemas" title="Permanent link">&para;</a></h2>
<h3 id="create_code-tool">create_code Tool<a class="headerlink" href="#create_code-tool" title="Permanent link">&para;</a></h3>
<div class="language-json highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">{</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;create_code&quot;</span><span class="p">,</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Create a new code in the project codebook. Use this to define a new theme, concept, or category for coding qualitative data.&quot;</span><span class="p">,</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="nt">&quot;inputSchema&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Name of the code (must be unique)&quot;</span><span class="p">,</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">        </span><span class="nt">&quot;minLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">        </span><span class="nt">&quot;maxLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">      </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hex color for the code (e.g., &#39;#FF6B6B&#39;)&quot;</span><span class="p">,</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="w">        </span><span class="nt">&quot;pattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^#[0-9A-Fa-f]{6}$&quot;</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="w">      </span><span class="nt">&quot;memo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Description or definition of what this code represents&quot;</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="w">      </span><span class="nt">&quot;category_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID of parent category (optional)&quot;</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a><span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="apply_code-tool">apply_code Tool<a class="headerlink" href="#apply_code-tool" title="Permanent link">&para;</a></h3>
<div class="language-json highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">{</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;apply_code&quot;</span><span class="p">,</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Apply an existing code to a segment of text in a source document. This creates a coded segment that associates the selected text with the code&#39;s meaning.&quot;</span><span class="p">,</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">  </span><span class="nt">&quot;inputSchema&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">      </span><span class="nt">&quot;code_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID of the code to apply&quot;</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">      </span><span class="nt">&quot;source_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ID of the source document&quot;</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">      </span><span class="nt">&quot;start_position&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Character position where the segment starts&quot;</span><span class="p">,</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="w">        </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="w">      </span><span class="nt">&quot;end_position&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Character position where the segment ends&quot;</span><span class="p">,</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="w">        </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span class="w">      </span><span class="nt">&quot;memo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Optional note about why this code was applied here&quot;</span>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-13-29"><a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a><span class="w">      </span><span class="nt">&quot;importance&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-13-30"><a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="__span-13-31"><a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a><span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Importance level (0-2, where 2 is most important)&quot;</span><span class="p">,</span>
</span><span id="__span-13-32"><a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a><span class="w">        </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-13-33"><a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a><span class="w">        </span><span class="nt">&quot;maximum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
</span><span id="__span-13-34"><a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a><span class="w">        </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-13-35"><a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-13-36"><a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-13-37"><a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a><span class="w">    </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;code_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;source_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;start_position&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;end_position&quot;</span><span class="p">]</span>
</span><span id="__span-13-38"><a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-13-39"><a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a><span class="p">}</span>
</span></code></pre></div>
<hr />
<h2 id="appendix-b-event-type-reference">Appendix B: Event Type Reference<a class="headerlink" href="#appendix-b-event-type-reference" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Event Type</th>
<th>Payload Fields</th>
<th>Triggered By</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>coding.code_created</code></td>
<td>code_id, name, color, memo, category_id</td>
<td>create_code tool</td>
</tr>
<tr>
<td><code>coding.code_renamed</code></td>
<td>code_id, old_name, new_name</td>
<td>rename_code tool</td>
</tr>
<tr>
<td><code>coding.code_deleted</code></td>
<td>code_id, name, segment_count</td>
<td>delete_code tool</td>
</tr>
<tr>
<td><code>coding.codes_merged</code></td>
<td>source_code_id, target_code_id, segments_moved</td>
<td>merge_codes tool</td>
</tr>
<tr>
<td><code>coding.segment_coded</code></td>
<td>segment_id, code_id, source_id, start, end, text</td>
<td>apply_code tool</td>
</tr>
<tr>
<td><code>coding.segment_uncoded</code></td>
<td>segment_id, code_id, source_id</td>
<td>remove_code tool</td>
</tr>
<tr>
<td><code>coding.category_created</code></td>
<td>category_id, name, parent_id</td>
<td>create_category tool</td>
</tr>
<tr>
<td><code>source.imported</code></td>
<td>source_id, name, type, size</td>
<td>import_source tool</td>
</tr>
<tr>
<td><code>source.deleted</code></td>
<td>source_id, name</td>
<td>delete_source tool</td>
</tr>
<tr>
<td><code>case.created</code></td>
<td>case_id, name</td>
<td>create_case tool</td>
</tr>
<tr>
<td><code>case.member_added</code></td>
<td>case_id, source_id, segment_range</td>
<td>add_to_case tools</td>
</tr>
<tr>
<td><code>analysis.report_started</code></td>
<td>job_id, report_type, filters</td>
<td>generate_report tools</td>
</tr>
<tr>
<td><code>analysis.report_completed</code></td>
<td>job_id, report_type, result_uri</td>
<td>(async completion)</td>
</tr>
<tr>
<td><code>session.connected</code></td>
<td>session_id, client_type</td>
<td>Client connection</td>
</tr>
<tr>
<td><code>session.disconnected</code></td>
<td>session_id, reason</td>
<td>Client disconnect</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="appendix-c-configuration-reference">Appendix C: Configuration Reference<a class="headerlink" href="#appendix-c-configuration-reference" title="Permanent link">&para;</a></h2>
<h3 id="agent-context-configuration">Agent Context Configuration<a class="headerlink" href="#agent-context-configuration" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># qualcoder_agent.yaml</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="nt">agent_context</span><span class="p">:</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">  </span><span class="c1"># Protocol settings</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">  </span><span class="nt">protocols</span><span class="p">:</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="nt">mcp</span><span class="p">:</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">      </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stdio</span><span class="w">  </span><span class="c1"># or http</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3000</span><span class="w">       </span><span class="c1"># if http</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="nt">rest</span><span class="p">:</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">    </span><span class="nt">websocket</span><span class="p">:</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8081</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="w">  </span><span class="c1"># Session settings</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="w">  </span><span class="nt">sessions</span><span class="p">:</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="w">    </span><span class="nt">timeout_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="w">    </span><span class="nt">max_concurrent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="w">    </span><span class="nt">heartbeat_interval_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="w">  </span><span class="c1"># Trust settings</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="w">  </span><span class="nt">trust</span><span class="p">:</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="w">    </span><span class="nt">default_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">suggest</span><span class="w">  </span><span class="c1"># auto, notify, suggest, require</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">    </span><span class="nt">overrides</span><span class="p">:</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">      </span><span class="nt">apply_code</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">notify</span>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="w">      </span><span class="nt">delete_code</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">require</span>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="w">      </span><span class="nt">search_*</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a>
</span><span id="__span-14-32"><a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="w">  </span><span class="c1"># Rate limiting</span>
</span><span id="__span-14-33"><a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="w">  </span><span class="nt">rate_limits</span><span class="p">:</span>
</span><span id="__span-14-34"><a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="w">    </span><span class="nt">requests_per_minute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
</span><span id="__span-14-35"><a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="w">    </span><span class="nt">mutations_per_minute</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</span><span id="__span-14-36"><a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a>
</span><span id="__span-14-37"><a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="w">  </span><span class="c1"># Event streaming</span>
</span><span id="__span-14-38"><a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a><span class="w">  </span><span class="nt">events</span><span class="p">:</span>
</span><span id="__span-14-39"><a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="w">    </span><span class="nt">buffer_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
</span><span id="__span-14-40"><a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="w">    </span><span class="nt">batch_interval_ms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span><span id="__span-14-41"><a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="w">    </span><span class="nt">default_subscriptions</span><span class="p">:</span>
</span><span id="__span-14-42"><a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;coding.*&quot;</span>
</span><span id="__span-14-43"><a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;source.*&quot;</span>
</span><span id="__span-14-44"><a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;analysis.*&quot;</span>
</span><span id="__span-14-45"><a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a>
</span><span id="__span-14-46"><a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="w">  </span><span class="c1"># Logging</span>
</span><span id="__span-14-47"><a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a><span class="w">  </span><span class="nt">audit</span><span class="p">:</span>
</span><span id="__span-14-48"><a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-14-49"><a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a><span class="w">    </span><span class="nt">log_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~/.qualcoder/agent_audit.log</span>
</span><span id="__span-14-50"><a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a><span class="w">    </span><span class="nt">include_payload</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<hr />
<h2 id="appendix-d-ui-signal-reference">Appendix D: UI Signal Reference<a class="headerlink" href="#appendix-d-ui-signal-reference" title="Permanent link">&para;</a></h2>
<h3 id="qt-signals-for-agent-events">Qt Signals for Agent Events<a class="headerlink" href="#qt-signals-for-agent-events" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Parameters</th>
<th>Emitted When</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agent_connected</code></td>
<td><code>session_id, client_type, client_name</code></td>
<td>AI client connects</td>
</tr>
<tr>
<td><code>agent_disconnected</code></td>
<td><code>session_id, reason</code></td>
<td>AI client disconnects</td>
</tr>
<tr>
<td><code>code_created</code></td>
<td><code>code_id, name, color, category_id, session_id</code></td>
<td>Code created (AI or human)</td>
</tr>
<tr>
<td><code>code_deleted</code></td>
<td><code>code_id, session_id</code></td>
<td>Code deleted</td>
</tr>
<tr>
<td><code>code_renamed</code></td>
<td><code>code_id, old_name, new_name, session_id</code></td>
<td>Code renamed</td>
</tr>
<tr>
<td><code>segment_coded</code></td>
<td><code>segment_id, code_id, source_id, start, end, session_id</code></td>
<td>Segment coded</td>
</tr>
<tr>
<td><code>segment_uncoded</code></td>
<td><code>segment_id, session_id</code></td>
<td>Segment uncoded</td>
</tr>
<tr>
<td><code>approval_requested</code></td>
<td><code>request_id, action_type, description, payload</code></td>
<td>AI needs approval</td>
</tr>
<tr>
<td><code>approval_resolved</code></td>
<td><code>request_id, approved, reason</code></td>
<td>Approval granted/denied</td>
</tr>
<tr>
<td><code>activity_logged</code></td>
<td><code>activity_item</code></td>
<td>Any AI action for activity feed</td>
</tr>
</tbody>
</table>
<h3 id="signal-connection-example">Signal Connection Example<a class="headerlink" href="#signal-connection-example" title="Permanent link">&para;</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># In MainWindow.__init__</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="bp">self</span><span class="o">.</span><span class="n">signal_bridge</span><span class="o">.</span><span class="n">agent_connected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_agent_connected</span><span class="p">)</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="bp">self</span><span class="o">.</span><span class="n">signal_bridge</span><span class="o">.</span><span class="n">segment_coded</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_view</span><span class="o">.</span><span class="n">on_segment_coded</span><span class="p">)</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="bp">self</span><span class="o">.</span><span class="n">signal_bridge</span><span class="o">.</span><span class="n">approval_requested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">activity_panel</span><span class="o">.</span><span class="n">on_approval_requested</span><span class="p">)</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="c1"># Handler example</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="k">def</span><span class="w"> </span><span class="nf">on_segment_coded</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment_id</span><span class="p">,</span> <span class="n">code_id</span><span class="p">,</span> <span class="n">source_id</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">session_id</span><span class="p">):</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    <span class="k">if</span> <span class="n">source_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_source_id</span><span class="p">:</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">source_view</span><span class="o">.</span><span class="n">highlight_segment</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_code_color</span><span class="p">(</span><span class="n">code_id</span><span class="p">))</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">source_view</span><span class="o">.</span><span class="n">flash_highlight</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">code_tree</span><span class="o">.</span><span class="n">increment_count</span><span class="p">(</span><span class="n">code_id</span><span class="p">)</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>    <span class="k">if</span> <span class="n">session_id</span> <span class="o">!=</span> <span class="s2">&quot;local&quot;</span><span class="p">:</span>  <span class="c1"># AI action</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">activity_panel</span><span class="o">.</span><span class="n">add_activity</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span></code></pre></div>
<hr />
<p><em>Document Version: 1.1</em>
<em>Last Updated: 2026-01-29</em>
<em>Changes: Added Section 11 (Real-Time UI Observation) and Appendix D</em>
<em>Companion to: FUNCTIONAL_DDD_DESIGN.md</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/scope-impact/qualcoder-v2" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "toc.follow", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>