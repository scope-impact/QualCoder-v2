{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"QualCoder v2 Developer Guide","text":"<p>Welcome to the QualCoder v2 developer documentation.</p>"},{"location":"#what-is-qualcoder-v2","title":"What is QualCoder v2?","text":"<p>QualCoder v2 is a desktop qualitative data analysis (QDA) tool for researchers. It enables applying semantic codes to research data (text, audio, video, images, PDFs) and generating insights through analysis.</p>"},{"location":"#system-overview","title":"System Overview","text":"<pre><code>graph TB\n    Researcher([Researcher]) --&gt;|Mouse/Keyboard| QC\n    Agent([AI Agent]) --&gt;|MCP Protocol| QC\n\n    subgraph QC[QualCoder v2]\n        UI[Desktop UI&lt;br/&gt;PySide6]\n        Domain[Domain Core&lt;br/&gt;Pure Python]\n        App[Application Shell&lt;br/&gt;EventBus + SignalBridge]\n    end\n\n    QC --&gt;|Chat API| LLM([LLM Provider&lt;br/&gt;OpenAI / Anthropic / Ollama])\n    QC --&gt;|File I/O| FS[(File System)]\n    QC --&gt;|SQLite| DB[(Project Database)]</code></pre> <p>Actors:</p> <ul> <li>Researcher \u2014 Qualitative researcher applying codes to research data</li> <li>AI Agent \u2014 Automated agent (Claude Code, Gemini CLI) suggesting codes and generating insights</li> </ul> <p>External Systems:</p> <ul> <li>LLM Provider \u2014 AI service for code suggestions and analysis</li> <li>File System \u2014 Local storage for project files and media</li> <li>Project Database \u2014 SQLite database for codes, segments, and metadata</li> </ul>"},{"location":"#documentation","title":"Documentation","text":"Section Description Architecture C4 model, bounded contexts, data flow, design decisions Tutorials Hands-on fDDD onboarding through a practical example Design System 180+ PySide6 components, tokens, and patterns Design Documents Detailed specs (Functional DDD, Agent Context) AI Plans AI-generated planning documents (historical reference) Archive Historical planning documents"},{"location":"#bounded-contexts","title":"Bounded Contexts","text":"Context Purpose Coding Apply semantic codes to data (includes AI suggestions) Sources Manage documents, audio, video files Cases Group and categorize by participant Projects Project lifecycle management Settings User preferences (theme, font, language) Folders Organize sources in folders"},{"location":"#quick-start","title":"Quick Start","text":"<p>New to the project?</p> <ol> <li>Read the Architecture Overview</li> <li>Complete the Onboarding Tutorial</li> <li>Explore the Design System</li> </ol> <p>Adding a feature?</p> <ol> <li>Identify the Bounded Context</li> <li>Follow fDDD patterns: Invariants \u2192 Derivers \u2192 Events</li> <li>Use Design System components for UI</li> </ol>"},{"location":"#technology-stack","title":"Technology Stack","text":"Layer Technology UI PySide6 (Qt 6) Database SQLite Vector Store ChromaDB AI OpenAI / Anthropic / Ollama Icons qtawesome (mdi6) Charts pyqtgraph"},{"location":"#building-the-docs","title":"Building the Docs","text":"<pre><code>uv sync --group docs\nuv run mkdocs serve\n</code></pre>"},{"location":"ARCHITECTURE/","title":"QualCoder v2 System Architecture","text":"<p>Status: <code>DRAFT</code> Owner: <code>QualCoder Core Team</code> Version: <code>v2.0</code></p> <p>This document provides a C4 model architecture overview of QualCoder v2. For hands-on learning with code examples, see the Onboarding Tutorials.</p>"},{"location":"ARCHITECTURE/#1-system-context-c4-level-1","title":"1. System Context (C4 Level 1)","text":"<p>Scope: QualCoder v2 is a desktop qualitative data analysis tool for researchers to apply semantic codes to research data and generate insights.</p> Actor / System Type Description Researcher Person Qualitative researcher applying codes to research data AI Agent Person Automated agent suggesting codes and generating insights QualCoder v2 System The Scope - Desktop QDA tool with AI assistance LLM Provider System External AI service (OpenAI, Anthropic, local Ollama) File System System Local storage for project files, media, exports"},{"location":"ARCHITECTURE/#context-diagram","title":"Context Diagram","text":"<pre><code>graph TD\n    Researcher(Researcher) -- \"Mouse/Keyboard / Qt Events\" --&gt; QC(QualCoder v2)\n    Agent(AI Agent) -- \"tool_call / MCP JSON-RPC\" --&gt; QC\n    QC -- \"chat/completions / HTTPS\" --&gt; LLM(LLM Provider)\n    QC -- \"open/read/write / File I/O\" --&gt; FS(File System)\n    QC -- \"SELECT/INSERT / SQLite\" --&gt; DB[(Project DB)]</code></pre>"},{"location":"ARCHITECTURE/#2-container-inventory-c4-level-2","title":"2. Container Inventory (C4 Level 2)","text":"<p>Definition: A \"Container\" is a runnable application or data store.</p> ID Container Name Technology Responsibility Type C1 Desktop Application Python 3.10+ / PySide6 Main GUI, user interaction Desktop App C2 Domain Core Python / Pure Functions Business logic, invariants, derivers Library C3 Application Shell Python / EventBus + SignalBridge Orchestration, event routing Library C4 Project Database SQLite 3 Stores codes, segments, sources Database C5 Agent Context Python / MCP Protocol Exposes domain to AI agents via HTTP API C6 Vector Store ChromaDB (embedded) Stores embeddings for search Database"},{"location":"ARCHITECTURE/#container-diagram","title":"Container Diagram","text":"<pre><code>graph TB\n    subgraph QualCoder v2 System Boundary\n        UI[Desktop App - PySide6]\n        DOMAIN[Domain Core - Pure Python]\n        APP[Application Shell - EventBus + SignalBridge]\n        AGENT[Agent Context - MCP Protocol]\n\n        UI -- \"Command DTOs / Python\" --&gt; APP\n        APP -- \"Function calls / Python\" --&gt; DOMAIN\n        DOMAIN -- \"DomainEvent / Python\" --&gt; APP\n        APP -- \"pyqtSignal / Qt\" --&gt; UI\n        AGENT -- \"MCP tool_call / JSON-RPC\" --&gt; APP\n    end\n\n    subgraph Data Stores\n        DB[(Project DB - SQLite)]\n        VEC[(Vector Store - ChromaDB)]\n    end\n\n    APP -- \"SQL / sqlite3\" --&gt; DB\n    AGENT -- \"Embeddings / Python API\" --&gt; VEC\n\n    LLM(LLM Provider)\n    AGENT -- \"Chat API / HTTPS\" --&gt; LLM</code></pre>"},{"location":"ARCHITECTURE/#3-component-view-c4-level-3","title":"3. Component View (C4 Level 3)","text":""},{"location":"ARCHITECTURE/#domain-core-components-c2","title":"Domain Core Components (C2)","text":"<p>Organized by Bounded Contexts - each context is a cohesive business capability.</p> <pre><code>graph TB\n    subgraph Core Domain\n        COD[CODING&lt;br&gt;Codes, Categories, Segments&lt;br&gt;Apply codes to research data&lt;br&gt;+ AI suggestions]\n    end\n\n    subgraph Supporting Domain\n        SRC[SOURCES&lt;br&gt;Documents, Audio, Video&lt;br&gt;Manage research materials]\n        CAS[CASES&lt;br&gt;Grouping, Attributes&lt;br&gt;Organize by participant]\n        PRJ[PROJECTS&lt;br&gt;Settings, Lifecycle&lt;br&gt;Project management]\n        FLD[FOLDERS&lt;br&gt;Organization&lt;br&gt;Group sources]\n        SET[SETTINGS&lt;br&gt;Preferences&lt;br&gt;Theme, font, language]\n    end\n\n    SRC --&gt;|\"SourceImported / DomainEvent\"| COD\n    CAS --&gt;|\"CaseLinked / DomainEvent\"| COD\n    FLD --&gt;|\"SourceMoved / DomainEvent\"| SRC</code></pre>"},{"location":"ARCHITECTURE/#bounded-context-summary","title":"Bounded Context Summary","text":"Context Entities Key Operations Coding Code, Category, Segment, AISuggestion Create code, apply to text, merge codes, AI suggestions Sources Source, Folder Import files, manage folders Cases Case, CaseAttribute Link sources, assign attributes Projects Project Open, close, manage lifecycle Settings Settings Configure preferences (theme, font, language) Folders Folder Organize sources in folders"},{"location":"ARCHITECTURE/#application-shell-components-c3","title":"Application Shell Components (C3)","text":"<pre><code>graph LR\n    subgraph Application Shell\n        EB[EventBus]\n        SB[SignalBridge]\n        CTRL[Controllers]\n        QRY[Queries]\n    end\n\n    CTRL -- \"publish(DomainEvent)\" --&gt; EB\n    EB -- \"callback(DomainEvent)\" --&gt; SB\n    SB -- \"pyqtSignal.emit(Payload)\" --&gt; UI[Qt Widgets]</code></pre>"},{"location":"ARCHITECTURE/#4-functional-core-imperative-shell","title":"4. Functional Core / Imperative Shell","text":"<p>QualCoder v2 follows the Functional Core / Imperative Shell pattern:</p> <pre><code>graph TB\n    subgraph Functional Core - Pure\n        INV[Invariants]\n        DER[Derivers]\n        EVT[Events]\n    end\n\n    subgraph Imperative Shell - Side Effects\n        CTRL[Controllers]\n        REPO[Repositories]\n        BUS[EventBus]\n        SB[SignalBridge]\n    end\n\n    subgraph Presentation\n        QT[Qt Widgets]\n    end\n\n    INV -- \"bool predicates\" --&gt; DER\n    DER -- \"Result[Event, Failure]\" --&gt; EVT\n    EVT -- \"DomainEvent\" --&gt; CTRL\n    CTRL -- \"save() / SQL\" --&gt; REPO\n    CTRL -- \"publish(event)\" --&gt; BUS\n    BUS -- \"callback(event)\" --&gt; SB\n    SB -- \"pyqtSignal.emit()\" --&gt; QT</code></pre>"},{"location":"ARCHITECTURE/#the-5-building-blocks","title":"The 5 Building Blocks","text":"Block Layer Purpose Naming Invariants Domain Pure predicates - \"Is this allowed?\" <code>is_*</code>, <code>can_*</code> Derivers Domain Pure functions - \"What happened?\" <code>derive_*</code> Events Domain Immutable records of changes <code>*Created</code>, <code>*Deleted</code> EventBus Application Pub/sub event distribution <code>subscribe</code>, <code>publish</code> SignalBridge Application Thread-safe domain to Qt bridge <code>*_signal</code> <p>See Onboarding Tutorials for hands-on examples.</p>"},{"location":"ARCHITECTURE/#5-data-flow","title":"5. Data Flow","text":""},{"location":"ARCHITECTURE/#success-flow-apply-code-to-text","title":"Success Flow: Apply Code to Text","text":"<pre><code>sequenceDiagram\n    participant User\n    participant UI as Qt Widget\n    participant Ctrl as Controller\n    participant Der as Deriver\n    participant Repo as Repository\n    participant EB as EventBus\n    participant SB as SignalBridge\n\n    User-&gt;&gt;UI: Select text, click Apply Code\n    UI-&gt;&gt;Ctrl: apply_code(code_id, source_id, position)\n\n    Note over Ctrl,Repo: Build State\n    Ctrl-&gt;&gt;Repo: get_all()\n    Repo--&gt;&gt;Ctrl: existing data\n\n    Note over Ctrl,Der: Pure Domain Logic\n    Ctrl-&gt;&gt;Der: derive_apply_code(...)\n\n    Note over Der: Validates invariants\n    Der--&gt;&gt;Ctrl: Success(SegmentCoded)\n\n    Note over Ctrl,Repo: Persist\n    Ctrl-&gt;&gt;Repo: save(event)\n\n    Note over Ctrl,SB: Notify\n    Ctrl-&gt;&gt;EB: publish(event)\n    EB-&gt;&gt;SB: handle(event)\n    SB-&gt;&gt;UI: segment_coded.emit(payload)\n\n    Note over UI: Updates in real-time</code></pre>"},{"location":"ARCHITECTURE/#failure-flow","title":"Failure Flow","text":"<pre><code>sequenceDiagram\n    participant UI as Qt Widget\n    participant Ctrl as Controller\n    participant Der as Deriver\n\n    UI-&gt;&gt;Ctrl: create_code(Anxiety)\n    Ctrl-&gt;&gt;Der: derive_create_code(Anxiety, state)\n\n    Note over Der: is_code_name_unique = False\n    Der--&gt;&gt;Ctrl: Failure(DuplicateName)\n\n    Note over Ctrl: No database write, No event published\n    Ctrl--&gt;&gt;UI: Show error message</code></pre>"},{"location":"ARCHITECTURE/#6-perspectives-overlay","title":"6. Perspectives Overlay","text":""},{"location":"ARCHITECTURE/#security-perspective","title":"Security Perspective","text":"Container Security Controls C1 Desktop App Local execution, no network auth required C4 Project DB File-level permissions, optional encryption C5 Agent Context MCP protocol validation, localhost-only HTTP server, tool schema enforcement LLM Provider API key storage in OS keychain, HTTPS only"},{"location":"ARCHITECTURE/#ownership-perspective","title":"Ownership Perspective","text":"Team / Role Owns Core Team Domain Core (C2), Application Shell (C3) UI Team Desktop Application (C1), Presentation components AI Team Agent Context (C5), AI Services bounded context"},{"location":"ARCHITECTURE/#technology-perspective","title":"Technology Perspective","text":"Layer Technology Why UI Framework PySide6 Qt bindings, cross-platform, mature Database SQLite Embedded, portable projects, no server Vector Store ChromaDB Embedded, Python-native, simple API Event System Custom EventBus Need subscribe_all, history, type-based Result Type Custom Minimal (~50 lines), no dependency"},{"location":"ARCHITECTURE/#7-deployment-mapping","title":"7. Deployment Mapping","text":"<p>Definition: How Containers (Level 2) map to Infrastructure.</p> Container Infrastructure Environment Desktop Application Native executable (PyInstaller) User's machine Project Database SQLite file in project folder User's file system Vector Store ChromaDB files in project folder User's file system LLM Provider Cloud API or local (Ollama) External / Local"},{"location":"ARCHITECTURE/#distribution","title":"Distribution","text":"<pre><code>QualCoder v2\n\u251c\u2500\u2500 macOS: .dmg installer (arm64, x86_64)\n\u251c\u2500\u2500 Windows: .msi installer\n\u251c\u2500\u2500 Linux: .deb, .rpm, AppImage\n\u2514\u2500\u2500 PyPI: pip install qualcoder-v2\n</code></pre>"},{"location":"ARCHITECTURE/#8-directory-structure","title":"8. Directory Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 contexts/                   # Bounded Contexts (vertical slices)\n\u2502   \u251c\u2500\u2500 coding/                 # Coding Context (includes AI coding)\n\u2502   \u2502   \u251c\u2500\u2500 core/               # Domain (Pure)\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 entities.py     # Code, Category, Segment\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 ai_entities.py  # AI-specific entities\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 events.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 commandHandlers/  # Use cases\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 tests/\n\u2502   \u2502   \u251c\u2500\u2500 infra/              # Repositories, AI providers\n\u2502   \u2502   \u251c\u2500\u2500 interface/          # Signal bridges, MCP tools\n\u2502   \u2502   \u2514\u2500\u2500 presentation/       # Context-specific UI\n\u2502   \u251c\u2500\u2500 sources/                # Source file management\n\u2502   \u251c\u2500\u2500 cases/                  # Case/participant management\n\u2502   \u251c\u2500\u2500 projects/               # Project lifecycle\n\u2502   \u251c\u2500\u2500 settings/               # User settings\n\u2502   \u2514\u2500\u2500 folders/                # Folder organization\n\u2502\n\u251c\u2500\u2500 shared/                     # Cross-cutting concerns\n\u2502   \u251c\u2500\u2500 common/                 # Shared types\n\u2502   \u2502   \u251c\u2500\u2500 types.py            # DomainEvent, typed IDs\n\u2502   \u2502   \u251c\u2500\u2500 operation_result.py # OperationResult pattern\n\u2502   \u2502   \u2514\u2500\u2500 failure_events.py   # Base failure types\n\u2502   \u251c\u2500\u2500 core/                   # Shared domain logic\n\u2502   \u2502   \u2514\u2500\u2500 sync_handlers.py    # Cross-context sync\n\u2502   \u251c\u2500\u2500 infra/                  # Shared infrastructure\n\u2502   \u2502   \u251c\u2500\u2500 event_bus.py        # Pub/sub infrastructure\n\u2502   \u2502   \u251c\u2500\u2500 signal_bridge/      # Thread-safe Qt bridge\n\u2502   \u2502   \u251c\u2500\u2500 app_context/        # Application context, factories\n\u2502   \u2502   \u251c\u2500\u2500 lifecycle.py        # Project lifecycle\n\u2502   \u2502   \u2514\u2500\u2500 state.py            # Project state cache\n\u2502   \u2514\u2500\u2500 presentation/           # Shared UI components\n\u2502       \u251c\u2500\u2500 organisms/          # Reusable complex widgets\n\u2502       \u251c\u2500\u2500 molecules/          # Small composite widgets\n\u2502       \u251c\u2500\u2500 templates/          # Page layouts, app shell\n\u2502       \u2514\u2500\u2500 services/           # Dialog service, etc.\n\u2502\n\u251c\u2500\u2500 tests/                      # E2E tests\n\u2502   \u2514\u2500\u2500 e2e/\n\u2502\n\u2514\u2500\u2500 main.py                     # Application entry point\n\ndesign_system/                  # Reusable UI components, tokens\n</code></pre>"},{"location":"ARCHITECTURE/#9-bounded-contexts","title":"9. Bounded Contexts","text":""},{"location":"ARCHITECTURE/#implemented-contexts","title":"Implemented Contexts","text":"Context Purpose Key Events Integration Pattern Coding Apply semantic codes to data CodeCreated, SegmentCoded Core - others depend on it Sources Manage documents, media SourceImported, SourceDeleted Open Host Service Cases Group and categorize CaseCreated, SourceLinked Conformist to Coding Projects Lifecycle management ProjectOpened, ProjectClosed Anti-Corruption Layer Settings User preferences SettingsUpdated Independent Folders Folder organization FolderCreated, SourceMoved Supporting"},{"location":"ARCHITECTURE/#planned-contexts-future","title":"Planned Contexts (Future)","text":"Context Purpose Key Events Integration Pattern Analysis Generate insights ReportGenerated Subscribes to Coding events Collaboration Multi-coder workflows CoderSwitched, CodingsMerged Published Language Export Reports, charts ReportExported Downstream consumer <p>Note: AI coding capabilities are integrated within the Coding context (<code>ai_entities.py</code>, <code>ai_derivers.py</code>, etc.) rather than as a separate AI Services context.</p>"},{"location":"ARCHITECTURE/#10-design-decisions","title":"10. Design Decisions","text":""},{"location":"ARCHITECTURE/#why-functional-ddd","title":"Why Functional DDD?","text":"Concern Traditional OOP Functional DDD Testing Mocks required Pure functions, no mocks Side effects Hidden in methods Explicit via events State Mutable objects Immutable data Debugging Stack traces Event replay"},{"location":"ARCHITECTURE/#why-custom-components","title":"Why Custom Components?","text":"Component Why Custom Alternative EventBus Need subscribe_all, history Blinker, PyPubSub SignalBridge No library for domain to Qt threading None available Result Type Minimal, no dependency returns library"},{"location":"ARCHITECTURE/#11-further-reading","title":"11. Further Reading","text":""},{"location":"ARCHITECTURE/#tutorials-hands-on-learning","title":"Tutorials (Hands-on Learning)","text":"<p>Start with the Onboarding Tutorial - a progressive guide using a toy example (adding \"priority\" to Codes).</p> Part Topic Part 0 The Big Picture Part 1 Your First Invariant Part 2 Your First Deriver Part 3 The Result Type Part 4 Events Flow Through Part 5 SignalBridge Payloads Part 6 Testing Without Mocks Part 7 Complete Flow Reference"},{"location":"ARCHITECTURE/#reference-documents","title":"Reference Documents","text":"<ul> <li>Common Patterns and Recipes</li> <li>When to Create New Patterns</li> <li>MCP Setup Guide - Connect AI assistants to QualCoder</li> <li>MCP API Reference - Technical API documentation</li> </ul>"},{"location":"ARCHITECTURE/#c4-model-references","title":"C4 Model References","text":"<ul> <li>C4 Model Official</li> <li>Simon Brown - Software Architecture for Developers</li> </ul> <p>Architecture documentation for QualCoder v2. Last updated: 2026-01.</p>"},{"location":"DOC_COVERAGE/","title":"Documentation Coverage Matrix","text":"<p>This file tracks which features have documentation and screenshots.</p>"},{"location":"DOC_COVERAGE/#legend","title":"Legend","text":"Status Meaning :white_check_mark: Documented with screenshots :construction: Partial documentation :x: Missing documentation"},{"location":"DOC_COVERAGE/#feature-coverage","title":"Feature Coverage","text":""},{"location":"DOC_COVERAGE/#qc-027-manage-sources","title":"QC-027 Manage Sources","text":"ID Story Doc Page Screenshots Status QC-027.01 Import Text Document sources.md file-manager-empty.png, file-manager-with-sources.png :white_check_mark: QC-027.02 Import PDF Document sources.md - :construction: QC-027.03 Import Image sources.md image-viewer.png :white_check_mark: QC-027.04 Import Audio/Video sources.md media-player.png :white_check_mark:"},{"location":"DOC_COVERAGE/#qc-028-manage-codes","title":"QC-028 Manage Codes","text":"ID Story Doc Page Screenshots Status QC-028.01 Create New Code codes.md create-code-dialog.png :white_check_mark: QC-028.02 Delete Code codes.md delete-code-simple.png, delete-code-warning.png, delete-code-segments-checked.png :white_check_mark: QC-028.03 Color Picker codes.md color-picker-presets.png, color-picker-custom-hex.png, color-picker-selected.png :white_check_mark: QC-028.04 Create Category codes.md create-category-initial.png, create-category-name.png, create-category-parent.png, create-category-filled.png :white_check_mark: QC-028.05 Find Duplicate Codes codes.md duplicate-codes-empty.png, duplicate-codes-list.png, duplicate-codes-similarity.png :white_check_mark:"},{"location":"DOC_COVERAGE/#qc-029-text-coding","title":"QC-029 Text Coding","text":"ID Story Doc Page Screenshots Status QC-029.01 Quick Mark (Q key) coding.md coding-screen-with-codes.png :white_check_mark: QC-029.02 Create Code (N key) coding.md create-code-dialog.png :white_check_mark: QC-029.03 In-Vivo Coding (V key) coding.md - :construction: QC-029.04 Unmark (U key) coding.md - :construction: QC-029.05 Text Selection coding.md coding-screen-selected.png :white_check_mark: QC-029.06 Multiple Codes coding.md coding-multiple-codes.png :white_check_mark: QC-029.07 Segment Memos coding.md memos-panel.png :white_check_mark:"},{"location":"DOC_COVERAGE/#qc-030-ai-features","title":"QC-030 AI Features","text":"ID Story Doc Page Screenshots Status QC-030.01 Code Suggestions ai-features.md code-suggestions-empty.png, code-suggestions-list.png, code-suggestions-details.png :white_check_mark: QC-030.02 Semantic Search ai-features.md - :x: QC-030.03 Auto-coding ai-features.md auto-code-pattern.png, auto-code-preview.png :white_check_mark:"},{"location":"DOC_COVERAGE/#qc-034-cases","title":"QC-034 Cases","text":"ID Story Doc Page Screenshots Status QC-034.01 View Cases cases.md case-manager-empty.png, case-manager-list.png :white_check_mark: QC-034.02 Create Case cases.md - :construction: QC-034.03 Case Attributes cases.md - :construction:"},{"location":"DOC_COVERAGE/#qc-038-settings","title":"QC-038 Settings","text":"ID Story Doc Page Screenshots Status QC-038.01 Theme Settings settings.md settings-default-theme.png, settings-dark-theme.png :white_check_mark: QC-038.02 Font Settings settings.md settings-navigation.png :white_check_mark: QC-038.03 All Settings settings.md settings-full.png :white_check_mark: QC-038.04 MCP Server Settings mcp-setup.md - :construction:"},{"location":"DOC_COVERAGE/#image-inventory","title":"Image Inventory","text":"<p>All images in <code>docs/user-manual/images/</code>:</p>"},{"location":"DOC_COVERAGE/#file-manager","title":"File Manager","text":"<ul> <li>[x] <code>file-manager-empty.png</code></li> <li>[x] <code>file-manager-with-sources.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#coding-screen","title":"Coding Screen","text":"<ul> <li>[x] <code>coding-screen-with-codes.png</code></li> <li>[x] <code>coding-screen-selected.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#create-code-dialog","title":"Create Code Dialog","text":"<ul> <li>[x] <code>create-code-dialog.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#delete-code","title":"Delete Code","text":"<ul> <li>[x] <code>delete-code-simple.png</code></li> <li>[x] <code>delete-code-warning.png</code></li> <li>[x] <code>delete-code-segments-checked.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#color-picker","title":"Color Picker","text":"<ul> <li>[x] <code>color-picker-presets.png</code></li> <li>[x] <code>color-picker-custom-hex.png</code></li> <li>[x] <code>color-picker-selected.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#categories","title":"Categories","text":"<ul> <li>[x] <code>create-category-initial.png</code></li> <li>[x] <code>create-category-name.png</code></li> <li>[x] <code>create-category-parent.png</code></li> <li>[x] <code>create-category-filled.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#duplicate-codes","title":"Duplicate Codes","text":"<ul> <li>[x] <code>duplicate-codes-empty.png</code></li> <li>[x] <code>duplicate-codes-list.png</code></li> <li>[x] <code>duplicate-codes-similarity.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#ai-features","title":"AI Features","text":"<ul> <li>[x] <code>code-suggestions-empty.png</code></li> <li>[x] <code>code-suggestions-list.png</code></li> <li>[x] <code>code-suggestions-details.png</code></li> <li>[x] <code>auto-code-pattern.png</code></li> <li>[x] <code>auto-code-preview.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#settings","title":"Settings","text":"<ul> <li>[x] <code>settings-default-theme.png</code></li> <li>[x] <code>settings-dark-theme.png</code></li> <li>[x] <code>settings-navigation.png</code></li> <li>[x] <code>settings-full.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#cases","title":"Cases","text":"<ul> <li>[x] <code>case-manager-empty.png</code></li> <li>[x] <code>case-manager-list.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#media-viewers","title":"Media Viewers","text":"<ul> <li>[x] <code>image-viewer.png</code></li> <li>[x] <code>media-player.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#main-window","title":"Main Window","text":"<ul> <li>[x] <code>main-window-startup.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#memos","title":"Memos","text":"<ul> <li>[x] <code>memos-panel.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#additional-coding","title":"Additional Coding","text":"<ul> <li>[x] <code>coding-multiple-codes.png</code></li> </ul>"},{"location":"DOC_COVERAGE/#how-to-update-this-file","title":"How to Update This File","text":"<ol> <li>After E2E tests pass, check which <code>@allure.story</code> tags were tested</li> <li>Update the corresponding row in the coverage matrix</li> <li>Add new screenshots to the Image Inventory section</li> <li>Change status emoji as appropriate</li> </ol>"},{"location":"DOC_COVERAGE/#adding-a-new-feature","title":"Adding a New Feature","text":"<pre><code>| QC-XXX.YY | Feature Name | [page.md](user-manual/page.md) | screenshot-name.png | :white_check_mark: |\n</code></pre>"},{"location":"DOC_COVERAGE/#marking-as-complete","title":"Marking as Complete","text":"<p>Change <code>:x:</code> or <code>:construction:</code> to <code>:white_check_mark:</code> when: - [ ] Feature is tested with <code>@allure.story</code> - [ ] Documentation page exists and is accurate - [ ] Screenshots are captured and referenced - [ ] All image files exist in <code>docs/user-manual/images/</code></p>"},{"location":"ai/","title":"AI-Generated Plans","text":"<p>These documents were generated by AI assistants during development to plan and track refactoring work.</p>"},{"location":"ai/#status","title":"Status","text":"Document Status REFACTORING_PLAN.md COMPLETED - OperationResult migration, domain completion DDD_WORKSHOP_ALIGNMENT_PLAN.md Reference - ddd-workshop pattern alignment DDD_WORKSHOP_REFACTOR_PLAN.md Reference - Bounded context migration steps REFACTOR_COORDINATOR_TO_APPCONTEXT.md Reference - AppContext pattern migration"},{"location":"ai/#purpose","title":"Purpose","text":"<p>These plans capture: - Gap analysis against architectural guidelines - Step-by-step migration instructions - Implementation decisions and rationale</p> <p>For current architecture reference, see ARCHITECTURE.md.</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/","title":"DDD Workshop Alignment Plan for QualCoder-v2","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#executive-summary","title":"Executive Summary","text":"<p>This plan aligns QualCoder-v2 with ddd-workshop patterns through four key initiatives:</p> Initiative Priority Scope Breaking Changes 1. Explicit Failure Events High Domain + Application Low (backwards-compatible) 2. Policy Pattern High Application None (additive) 3. Repository Mappers Medium Infrastructure None (internal refactor) 4. Bounded Context Restructure High All layers High (all imports change) <p>Implementation order: 1 \u2192 2 \u2192 3 \u2192 4</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#initiative-1-explicit-failure-events","title":"Initiative 1: Explicit Failure Events","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#goal","title":"Goal","text":"<p>Replace <code>Failure(reason)</code> pattern with first-class failure events that can be published and trigger policies.</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#current-pattern-qualcoder","title":"Current Pattern (QualCoder)","text":"<pre><code>def derive_create_project(...) -&gt; ProjectCreated | Failure:\n    if not is_valid_project_name(name):\n        return Failure(EmptyProjectName())  # Not publishable\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#target-pattern-ddd-workshop","title":"Target Pattern (ddd-workshop)","text":"<pre><code>def derive_create_project(...) -&gt; ProjectCreated | ProjectNotCreated:\n    if not is_valid_project_name(name):\n        return ProjectNotCreated.empty_name()  # Publishable event\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#implementation-steps","title":"Implementation Steps","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-11-create-base-failureevent-class","title":"Step 1.1: Create Base FailureEvent Class","text":"<p>File: <code>src/domain/shared/failure_events.py</code></p> <pre><code>@dataclass(frozen=True)\nclass FailureEvent:\n    \"\"\"Base class for publishable failure events.\"\"\"\n    event_id: str\n    occurred_at: datetime\n    event_type: str  # e.g., \"PROJECT_NOT_CREATED/EMPTY_NAME\"\n\n    @property\n    def is_failure(self) -&gt; bool:\n        return True\n\n    @property\n    def operation(self) -&gt; str:\n        return self.event_type.split(\"/\")[0]\n\n    @property\n    def reason(self) -&gt; str:\n        parts = self.event_type.split(\"/\")\n        return parts[1] if len(parts) &gt; 1 else \"\"\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-12-create-failure-events-per-context","title":"Step 1.2: Create Failure Events per Context","text":"<p>File: <code>src/domain/projects/failure_events.py</code></p> <pre><code>@dataclass(frozen=True)\nclass ProjectNotCreated(FailureEvent):\n    name: str | None = None\n    path: Path | None = None\n\n    @classmethod\n    def empty_name(cls) -&gt; \"ProjectNotCreated\":\n        return cls(\n            event_id=cls._generate_id(),\n            occurred_at=cls._now(),\n            event_type=\"PROJECT_NOT_CREATED/EMPTY_NAME\",\n        )\n\n    @classmethod\n    def already_exists(cls, path: Path) -&gt; \"ProjectNotCreated\":\n        return cls(\n            event_id=cls._generate_id(),\n            occurred_at=cls._now(),\n            event_type=\"PROJECT_NOT_CREATED/ALREADY_EXISTS\",\n            path=path,\n        )\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-13-update-derivers","title":"Step 1.3: Update Derivers","text":"<p>File: <code>src/domain/projects/derivers.py</code></p> <pre><code># BEFORE\ndef derive_create_project(...) -&gt; ProjectCreated | Failure:\n    if not is_valid_project_name(name):\n        return Failure(EmptyProjectName())\n\n# AFTER\ndef derive_create_project(...) -&gt; ProjectCreated | ProjectNotCreated:\n    if not is_valid_project_name(name):\n        return ProjectNotCreated.empty_name()\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-14-update-use-cases-to-publish-failures","title":"Step 1.4: Update Use Cases to Publish Failures","text":"<pre><code>result = derive_create_project(...)\n\nif isinstance(result, FailureEvent):\n    event_bus.publish(result)  # Now publishable!\n    return Failure(result.event_type)  # Backwards compatible\n\nevent_bus.publish(result)\nreturn Success(...)\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#files-to-modify","title":"Files to Modify","text":"<ul> <li><code>src/domain/shared/failure_events.py</code> (new)</li> <li><code>src/domain/projects/failure_events.py</code> (new)</li> <li><code>src/domain/projects/derivers.py</code></li> <li><code>src/domain/coding/failure_events.py</code> (new)</li> <li><code>src/domain/coding/derivers.py</code></li> <li><code>src/application/projects/usecases/*.py</code></li> <li><code>src/application/coding/usecases/*.py</code></li> </ul>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#event-naming-convention","title":"Event Naming Convention","text":"<p>Format: <code>{ENTITY}_NOT_{OPERATION}/{REASON}</code></p> <p>Examples: - <code>PROJECT_NOT_CREATED/EMPTY_NAME</code> - <code>PROJECT_NOT_CREATED/ALREADY_EXISTS</code> - <code>SOURCE_NOT_ADDED/DUPLICATE_NAME</code> - <code>FOLDER_NOT_DELETED/NOT_EMPTY</code> - <code>CODE_NOT_CREATED/INVALID_COLOR</code></p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#initiative-2-policy-pattern","title":"Initiative 2: Policy Pattern","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#goal_1","title":"Goal","text":"<p>Replace ad-hoc event subscriptions with declarative policy declarations for cross-context reactions.</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#current-pattern-qualcoder_1","title":"Current Pattern (QualCoder)","text":"<pre><code># In SourceSyncHandler - imperative subscriptions\nself._event_bus.subscribe(\"projects.source_removed\", self._on_source_removed)\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#target-pattern-ddd-workshop_1","title":"Target Pattern (ddd-workshop)","text":"<pre><code>configure_policy(\n    event_type=SourceRemoved,\n    actions={\n        \"DELETE_SEGMENTS\": remove_source_segments,\n        \"UNLINK_CASES\": unlink_source_from_cases,\n    },\n    description=\"Cleanup when a source is removed\"\n)\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#implementation-steps_1","title":"Implementation Steps","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-21-create-policy-infrastructure","title":"Step 2.1: Create Policy Infrastructure","text":"<p>Directory: <code>src/application/policies/</code></p> <pre><code>src/application/policies/\n    __init__.py           # configure_policy, PolicyExecutor exports\n    base.py               # PolicyDefinition, PolicyAction types\n    registry.py           # PolicyRegistry singleton\n    executor.py           # PolicyExecutor (EventBus integration)\n    projects_policies.py  # Source, folder policies\n    coding_policies.py    # Code, category policies\n    tests/\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-22-core-policy-api","title":"Step 2.2: Core Policy API","text":"<p>File: <code>src/application/policies/__init__.py</code></p> <pre><code>def configure_policy(\n    event_type: type[E],\n    actions: dict[str, PolicyAction],\n    description: str = \"\",\n) -&gt; PolicyDefinition[E]:\n    \"\"\"\n    Configure a declarative policy for a domain event.\n\n    Args:\n        event_type: The domain event class to react to\n        actions: Dict mapping action names to async functions\n        description: Human-readable description\n    \"\"\"\n    definition = PolicyDefinition(event_type, actions, description)\n    get_policy_registry().register(definition)\n    return definition\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-23-policyexecutor","title":"Step 2.3: PolicyExecutor","text":"<p>File: <code>src/application/policies/executor.py</code></p> <pre><code>class PolicyExecutor:\n    \"\"\"Executes policy actions in response to domain events.\"\"\"\n\n    def __init__(self, event_bus: EventBus, registry: PolicyRegistry | None = None):\n        self._event_bus = event_bus\n        self._registry = registry or get_policy_registry()\n\n    def start(self) -&gt; None:\n        self._subscription = self._event_bus.subscribe_all(self._handle_event)\n\n    def _handle_event(self, event: Any) -&gt; None:\n        actions = self._registry.get_actions(event.event_type)\n        for action_name, action_fn in actions:\n            try:\n                action_fn(event)\n            except Exception as e:\n                logger.error(f\"Policy '{action_name}' failed: {e}\")\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-24-define-context-policies","title":"Step 2.4: Define Context Policies","text":"<p>File: <code>src/application/policies/projects_policies.py</code></p> <pre><code>def configure_projects_policies() -&gt; None:\n    configure_policy(\n        event_type=SourceRemoved,\n        actions={\n            \"DELETE_SEGMENTS\": sync_segment_source_name_on_remove,\n            \"UNLINK_CASES\": unlink_cases_on_source_remove,\n        },\n        description=\"Cleanup when a source is removed\"\n    )\n\n    configure_policy(\n        event_type=SourceRenamed,\n        actions={\n            \"SYNC_SEGMENT_NAME\": sync_segment_source_name_on_rename,\n            \"SYNC_CASE_LINK_NAME\": sync_case_link_source_name_on_rename,\n        },\n        description=\"Sync denormalized names when source renamed\"\n    )\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-25-wire-to-applicationcoordinator","title":"Step 2.5: Wire to ApplicationCoordinator","text":"<p>File: <code>src/application/coordinator.py</code></p> <pre><code>def __init__(self, ...):\n    # Configure policies\n    configure_projects_policies()\n    configure_coding_policies()\n\n    # Create executor\n    self._policy_executor = PolicyExecutor(self._event_bus)\n\ndef start(self) -&gt; None:\n    self._policy_executor.start()\n    # Remove old: self._source_sync_handler.start()\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#identified-policies-to-implement","title":"Identified Policies to Implement","text":"Event Policy Actions Current Location <code>SourceRemoved</code> DELETE_SEGMENTS, UNLINK_CASES SourceSyncHandler, use case <code>SourceRenamed</code> SYNC_SEGMENT_NAME, SYNC_CASE_LINK_NAME SourceSyncHandler <code>CodeDeleted</code> (cascade handled in use case) use case <code>CategoryDeleted</code> ORPHAN_CODES to be implemented <code>FolderDeleted</code> ORPHAN_FOLDER_SOURCES to be implemented"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#files-to-createmodify","title":"Files to Create/Modify","text":"<ul> <li><code>src/application/policies/__init__.py</code> (new)</li> <li><code>src/application/policies/base.py</code> (new)</li> <li><code>src/application/policies/registry.py</code> (new)</li> <li><code>src/application/policies/executor.py</code> (new)</li> <li><code>src/application/policies/projects_policies.py</code> (new)</li> <li><code>src/application/policies/coding_policies.py</code> (new)</li> <li><code>src/application/coordinator.py</code> (modify)</li> <li><code>src/application/sync/source_sync_handler.py</code> (eventually remove)</li> </ul>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#initiative-3-repository-mapper-pattern","title":"Initiative 3: Repository Mapper Pattern","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#goal_2","title":"Goal","text":"<p>Enforce explicit mapper functions between domain entities and database schemas.</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#current-pattern-mixed","title":"Current Pattern (Mixed)","text":"<p>Some repositories inline mapping, others don't have clear separation.</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#target-pattern-ddd-workshop_2","title":"Target Pattern (ddd-workshop)","text":"<pre><code>def _to_code(row: Row) -&gt; Code:\n    \"\"\"Map database row to domain entity.\"\"\"\n    return Code(\n        id=CodeId(row.cod_id),\n        name=row.cod_name,\n        color=row.cod_color,\n        ...\n    )\n\ndef _to_code_data(code: Code) -&gt; dict:\n    \"\"\"Map domain entity to database format.\"\"\"\n    return {\n        \"cod_id\": code.id.value,\n        \"cod_name\": code.name,\n        \"cod_color\": code.color,\n        ...\n    }\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#implementation-steps_2","title":"Implementation Steps","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-31-audit-current-repositories","title":"Step 3.1: Audit Current Repositories","text":"<ul> <li><code>src/infrastructure/coding/repositories.py</code></li> <li><code>src/infrastructure/projects/project_repository.py</code></li> <li><code>src/infrastructure/cases/case_repository.py</code></li> </ul>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-32-extract-mapper-functions","title":"Step 3.2: Extract Mapper Functions","text":"<p>For each repository, create explicit <code>_to_{entity}</code> and <code>_to_{entity}_data</code> functions.</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-33-validate-on-boundary","title":"Step 3.3: Validate on Boundary","text":"<p>Mappers should call entity constructors which enforce invariants.</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#files-to-modify_1","title":"Files to Modify","text":"<ul> <li><code>src/infrastructure/coding/repositories.py</code></li> <li><code>src/infrastructure/projects/project_repository.py</code></li> <li><code>src/infrastructure/cases/</code> (if exists)</li> <li><code>src/infrastructure/sources/source_repository.py</code></li> </ul>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#initiative-4-bounded-context-restructure","title":"Initiative 4: Bounded Context Restructure","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#goal_3","title":"Goal","text":"<p>Co-locate domain and infrastructure by bounded context instead of by layer.</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#current-structure","title":"Current Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 coding/\n\u2502   \u251c\u2500\u2500 projects/\n\u2502   \u251c\u2500\u2500 cases/\n\u2502   \u251c\u2500\u2500 settings/\n\u2502   \u2514\u2500\u2500 shared/\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 coding/\n\u2502   \u251c\u2500\u2500 projects/\n\u2502   \u251c\u2500\u2500 cases/\n\u2502   \u251c\u2500\u2500 settings/\n\u2502   \u2514\u2500\u2500 sources/\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#target-structure","title":"Target Structure","text":"<pre><code>src/contexts/\n\u251c\u2500\u2500 coding/\n\u2502   \u251c\u2500\u2500 __init__.py      # Public API exports\n\u2502   \u251c\u2500\u2500 core/            # Domain layer\n\u2502   \u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u2502   \u251c\u2500\u2500 events.py\n\u2502   \u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u2502   \u2514\u2500\u2500 tests/\n\u2502   \u2514\u2500\u2500 infra/           # Infrastructure layer\n\u2502       \u251c\u2500\u2500 repositories.py\n\u2502       \u251c\u2500\u2500 schema.py\n\u2502       \u2514\u2500\u2500 tests/\n\u251c\u2500\u2500 projects/\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2514\u2500\u2500 infra/\n\u251c\u2500\u2500 cases/\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2514\u2500\u2500 infra/\n\u251c\u2500\u2500 settings/\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2514\u2500\u2500 infra/\n\u251c\u2500\u2500 sources/\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2514\u2500\u2500 infra/\n\u2514\u2500\u2500 shared/              # Shared kernel\n    \u251c\u2500\u2500 core/\n    \u2502   \u251c\u2500\u2500 types.py\n    \u2502   \u251c\u2500\u2500 validation.py\n    \u2502   \u251c\u2500\u2500 failure_events.py  # Base FailureEvent\n    \u2502   \u2514\u2500\u2500 agent.py\n    \u2514\u2500\u2500 infra/\n        \u2514\u2500\u2500 protocols.py\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#implementation-steps_3","title":"Implementation Steps","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-41-create-directory-structure","title":"Step 4.1: Create Directory Structure","text":"<pre><code>mkdir -p src/contexts/{coding,projects,cases,settings,sources,shared}/{core,infra}\nmkdir -p src/contexts/{coding,projects,cases,settings,sources}/core/tests\nmkdir -p src/contexts/{coding,projects,cases,settings,sources}/infra/tests\nmkdir -p src/contexts/shared/core/tests\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-42-migrate-shared-kernel-first","title":"Step 4.2: Migrate Shared Kernel First","text":"<p>Move shared types (lowest dependencies): - <code>src/domain/shared/types.py</code> \u2192 <code>src/contexts/shared/core/types.py</code> - <code>src/domain/shared/validation.py</code> \u2192 <code>src/contexts/shared/core/validation.py</code> - <code>src/domain/shared/agent.py</code> \u2192 <code>src/contexts/shared/core/agent.py</code> - <code>src/infrastructure/protocols.py</code> \u2192 <code>src/contexts/shared/infra/protocols.py</code></p> <p>Create backward-compatible re-exports: <pre><code># src/domain/shared/__init__.py\nfrom src.contexts.shared.core.types import *\nfrom src.contexts.shared.core.validation import *\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-43-migrate-coding-context-pilot","title":"Step 4.3: Migrate Coding Context (Pilot)","text":"<p>Domain files: - <code>src/domain/coding/entities.py</code> \u2192 <code>src/contexts/coding/core/entities.py</code> - <code>src/domain/coding/events.py</code> \u2192 <code>src/contexts/coding/core/events.py</code> - <code>src/domain/coding/derivers.py</code> \u2192 <code>src/contexts/coding/core/derivers.py</code> - <code>src/domain/coding/invariants.py</code> \u2192 <code>src/contexts/coding/core/invariants.py</code> - <code>src/domain/coding/tests/</code> \u2192 <code>src/contexts/coding/core/tests/</code></p> <p>Infrastructure files: - <code>src/infrastructure/coding/repositories.py</code> \u2192 <code>src/contexts/coding/infra/repositories.py</code> - <code>src/infrastructure/coding/schema.py</code> \u2192 <code>src/contexts/coding/infra/schema.py</code> - <code>src/infrastructure/coding/tests/</code> \u2192 <code>src/contexts/coding/infra/tests/</code></p> <p>Create public API: <pre><code># src/contexts/coding/__init__.py\n\"\"\"Coding bounded context - public API.\"\"\"\nfrom src.contexts.coding.core.entities import Code, Category, TextSegment\nfrom src.contexts.coding.core.events import CodeCreated, CodeDeleted\nfrom src.contexts.coding.infra.repositories import SQLiteCodeRepository\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-44-migrate-remaining-contexts","title":"Step 4.4: Migrate Remaining Contexts","text":"<p>Order by dependency (least to most): 1. <code>cases</code> - minimal dependencies 2. <code>settings</code> - depends on projects entities 3. <code>sources</code> - depends on projects, has extractors 4. <code>projects</code> - most dependencies, schema coordination</p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-45-update-all-imports","title":"Step 4.5: Update All Imports","text":"<p>Use automated tools to update imports: <pre><code># Find and replace imports\nfind src -name \"*.py\" -exec sed -i '' \\\n  's/from src.domain.coding/from src.contexts.coding.core/g' {} +\nfind src -name \"*.py\" -exec sed -i '' \\\n  's/from src.infrastructure.coding/from src.contexts.coding.infra/g' {} +\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-46-handle-cross-context-dependencies","title":"Step 4.6: Handle Cross-Context Dependencies","text":"<p>For <code>sources</code> context which uses <code>projects</code> entities: <pre><code># src/contexts/sources/core/entities.py\nfrom src.contexts.projects.core.entities import Source, Folder\n</code></pre></p> <p>For schema coordination in <code>projects</code>: <pre><code># src/contexts/projects/infra/schema.py\nfrom src.contexts.coding.infra.schema import metadata as coding_metadata\nfrom src.contexts.cases.infra.schema import metadata as cases_metadata\n# ... unified schema creation\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-47-create-context-level-initpy-files","title":"Step 4.7: Create Context-Level init.py Files","text":"<p>Each context exposes a clean public API: <pre><code># src/contexts/projects/__init__.py\n\"\"\"Projects bounded context - public API.\"\"\"\n\n# Core (Domain)\nfrom src.contexts.projects.core.entities import Project, Source, Folder\nfrom src.contexts.projects.core.events import (\n    ProjectCreated, SourceAdded, SourceRemoved, FolderCreated\n)\nfrom src.contexts.projects.core.derivers import (\n    derive_create_project, derive_add_source\n)\nfrom src.contexts.projects.core.failure_events import (\n    ProjectNotCreated, SourceNotAdded\n)\n\n# Infra\nfrom src.contexts.projects.infra.repositories import SQLiteProjectRepository\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#step-48-remove-old-directories","title":"Step 4.8: Remove Old Directories","text":"<p>After all tests pass: <pre><code>rm -rf src/domain/\nrm -rf src/infrastructure/coding/\nrm -rf src/infrastructure/projects/\n# etc.\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#import-convention-after-migration","title":"Import Convention After Migration","text":"<pre><code># From application layer\nfrom src.contexts.coding import Code, CodeCreated, SQLiteCodeRepository\nfrom src.contexts.projects import Project, derive_create_project\n\n# Direct access when needed\nfrom src.contexts.coding.core.derivers import derive_create_code\nfrom src.contexts.coding.infra.schema import codes_table\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#verification-plan","title":"Verification Plan","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#running-tests","title":"Running Tests","text":"<pre><code># Full test suite\nQT_QPA_PLATFORM=offscreen make test-all\n\n# Specific layer tests\nQT_QPA_PLATFORM=offscreen uv run pytest src/domain/ -v\nQT_QPA_PLATFORM=offscreen uv run pytest src/application/ -v\nQT_QPA_PLATFORM=offscreen uv run pytest src/infrastructure/ -v\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#manual-verification","title":"Manual Verification","text":"<ol> <li>Create a new project</li> <li>Add sources, create folders</li> <li>Create codes and segments</li> <li>Delete a source \u2192 verify segments are cleaned up (policy test)</li> <li>Rename a source \u2192 verify denormalized names update</li> <li>Close and reopen project \u2192 verify state consistency</li> </ol>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#type-checking","title":"Type Checking","text":"<pre><code>uv run mypy src/\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#implementation-order","title":"Implementation Order","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#phase-1-failure-events","title":"Phase 1: Failure Events","text":"<ol> <li>Create <code>FailureEvent</code> base class in <code>src/domain/shared/failure_events.py</code></li> <li>Create failure events for <code>projects</code> context</li> <li>Update <code>projects</code> derivers to return failure events</li> <li>Update <code>projects</code> use cases to publish failures</li> <li>Add tests for failure events</li> <li>Repeat for <code>coding</code> context</li> <li>Repeat for <code>cases</code> context</li> </ol>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#phase-2-policy-pattern","title":"Phase 2: Policy Pattern","text":"<ol> <li>Create policy infrastructure (<code>src/application/policies/</code>)</li> <li>Define <code>projects_policies.py</code> (source removal/rename reactions)</li> <li>Define <code>coding_policies.py</code> (category deletion reactions)</li> <li>Wire PolicyExecutor to <code>ApplicationCoordinator</code></li> <li>Test policy execution end-to-end</li> <li>Remove <code>SourceSyncHandler</code> (replaced by policies)</li> </ol>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#phase-3-repository-mappers","title":"Phase 3: Repository Mappers","text":"<ol> <li>Audit existing repositories for mapping patterns</li> <li>Extract explicit <code>_to_{entity}</code> and <code>_to_{entity}_data</code> functions</li> <li>Add entity validation in mapper functions</li> <li>Update all repositories consistently</li> </ol>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#phase-4-bounded-context-restructure","title":"Phase 4: Bounded Context Restructure","text":"<ol> <li>Create <code>src/contexts/</code> directory structure</li> <li>Migrate <code>shared</code> kernel first (lowest dependencies)</li> <li>Migrate <code>coding</code> context as pilot</li> <li>Create backward-compatible re-exports at old locations</li> <li>Run full test suite - fix any import issues</li> <li>Migrate <code>cases</code> context</li> <li>Migrate <code>settings</code> context</li> <li>Migrate <code>sources</code> context (has extractors)</li> <li>Migrate <code>projects</code> context (most dependencies, schema coordination)</li> <li>Update all application layer imports</li> <li>Update all presentation layer imports</li> <li>Run full test suite</li> <li>Remove old <code>src/domain/</code> and <code>src/infrastructure/</code> directories</li> <li>Update any tooling/CI paths</li> </ol>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#critical-files-summary","title":"Critical Files Summary","text":"File Purpose Initiative <code>src/domain/shared/failure_events.py</code> Base failure event 1 <code>src/domain/projects/derivers.py</code> Deriver updates 1 <code>src/domain/projects/failure_events.py</code> Project failure events 1 <code>src/domain/coding/failure_events.py</code> Coding failure events 1 <code>src/application/policies/__init__.py</code> Policy API 2 <code>src/application/policies/executor.py</code> EventBus integration 2 <code>src/application/policies/projects_policies.py</code> Source policies 2 <code>src/application/coordinator.py</code> Wire policies 2 <code>src/infrastructure/coding/repositories.py</code> Mapper pattern 3 <code>src/infrastructure/projects/project_repository.py</code> Mapper pattern 3 <code>src/contexts/shared/core/types.py</code> Migrated shared types 4 <code>src/contexts/coding/__init__.py</code> Context public API 4 <code>src/contexts/projects/__init__.py</code> Context public API 4"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#risk-mitigation","title":"Risk Mitigation","text":""},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#initiative-1-failure-events","title":"Initiative 1 (Failure Events)","text":"<ul> <li>Risk: Existing code depends on <code>Failure(reason)</code> pattern</li> <li>Mitigation: Keep backward compatibility in use cases by converting failure events to <code>Failure(event_type)</code> for return values</li> </ul>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#initiative-2-policies","title":"Initiative 2 (Policies)","text":"<ul> <li>Risk: Policies don't execute in the right order</li> <li>Mitigation: Test policies in isolation and integration; ensure idempotency</li> </ul>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#initiative-3-mappers","title":"Initiative 3 (Mappers)","text":"<ul> <li>Risk: Data loss during mapping</li> <li>Mitigation: Add round-trip tests (entity \u2192 data \u2192 entity equality)</li> </ul>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#initiative-4-restructure","title":"Initiative 4 (Restructure)","text":"<ul> <li>Risk: Breaking all imports causes massive churn</li> <li>Mitigation:</li> <li>Create re-export modules at old locations during transition</li> <li>Migrate one context at a time</li> <li>Run full test suite after each context migration</li> <li>Only remove old directories after all tests pass</li> </ul>"},{"location":"ai/DDD_WORKSHOP_ALIGNMENT_PLAN/#success-criteria","title":"Success Criteria","text":"<ol> <li>Failure Events: <code>event_bus.history</code> contains failure events when operations fail</li> <li>Policies: Deleting a source automatically removes segments (no manual cascade)</li> <li>Mappers: Each repository has explicit <code>_to_*</code> and <code>_to_*_data</code> functions</li> <li>Restructure: All code lives under <code>src/contexts/{context}/{core|infra}/</code></li> </ol>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/","title":"DDD Workshop Pattern Refactoring Plan","text":""},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#overview","title":"Overview","text":"<p>Restructure QualCoder v2 to religiously follow the ddd-workshop pattern where each bounded context is a complete vertical slice containing domain, infrastructure, and interface layers.</p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#target-architecture","title":"Target Architecture","text":""},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#ddd-workshop-pattern-reference","title":"ddd-workshop Pattern (Reference)","text":"<pre><code>src/\n\u251c\u2500\u2500 contexts/\n\u2502   \u2514\u2500\u2500 {context}/\n\u2502       \u251c\u2500\u2500 core/                    # Domain layer\n\u2502       \u2502   \u251c\u2500\u2500 entities/            # Domain models with validation\n\u2502       \u2502   \u251c\u2500\u2500 events/              # Domain events (success + failure)\n\u2502       \u2502   \u251c\u2500\u2500 commandHandlers/     # Use cases with embedded derivers\n\u2502       \u2502   \u2514\u2500\u2500 policies.py          # Context-specific event reactions\n\u2502       \u251c\u2500\u2500 infra/                   # Infrastructure layer\n\u2502       \u2502   \u251c\u2500\u2500 repositories/        # Data access\n\u2502       \u2502   \u2514\u2500\u2500 schema.py           # Database schema\n\u2502       \u2514\u2500\u2500 interface/               # External API layer (NEW)\n\u2502           \u2514\u2500\u2500 mcp_tools.py         # MCP tools for AI agents\n\u2514\u2500\u2500 shared/                          # Cross-cutting concerns ONLY\n    \u251c\u2500\u2500 common/                      # Shared types\n    \u2502   \u251c\u2500\u2500 types.py                # TypedIds, Result monad\n    \u2502   \u2514\u2500\u2500 events.py               # Base Event protocol\n    \u251c\u2500\u2500 core/                        # Shared domain logic\n    \u2502   \u251c\u2500\u2500 validation.py           # Validation utilities\n    \u2502   \u2514\u2500\u2500 policies.py             # Policy framework\n    \u2514\u2500\u2500 infra/                       # Shared infrastructure\n        \u251c\u2500\u2500 event_bus.py            # Pub/sub backbone\n        \u251c\u2500\u2500 signal_bridge/          # Qt signal bridging\n        \u251c\u2500\u2500 ai/                     # AI providers\n        \u2514\u2500\u2500 migrations/             # Schema migrations\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#current-structure-vs-target","title":"Current Structure vs Target","text":"Current Location Target Location Rationale <code>src/contexts/{ctx}/core/</code> <code>src/contexts/{ctx}/core/</code> \u2705 Keep as-is <code>src/contexts/{ctx}/infra/</code> <code>src/contexts/{ctx}/infra/</code> \u2705 Keep as-is <code>src/application/{ctx}/usecases/</code> <code>src/contexts/{ctx}/core/commandHandlers/</code> Command handlers belong in context <code>src/application/{ctx}/commands.py</code> <code>src/contexts/{ctx}/core/commands.py</code> Commands are domain DTOs <code>src/infrastructure/mcp/{ctx}_tools.py</code> <code>src/contexts/{ctx}/interface/mcp_tools.py</code> Interface layer per context <code>src/application/event_bus.py</code> <code>src/shared/infra/event_bus.py</code> Cross-cutting infrastructure <code>src/application/signal_bridge/</code> <code>src/shared/infra/signal_bridge/</code> Qt-specific cross-cutting <code>src/application/app_context.py</code> <code>src/shared/infra/app_context.py</code> Composition root <code>src/application/state.py</code> <code>src/shared/infra/state.py</code> Cross-cutting state cache <code>src/application/lifecycle.py</code> <code>src/shared/infra/lifecycle.py</code> Cross-cutting DB lifecycle <code>src/application/policies/</code> <code>src/shared/core/policies/</code> Policy framework <code>src/application/sync/</code> <code>src/shared/core/sync/</code> Cross-context sync handlers <code>src/infrastructure/ai/</code> <code>src/shared/infra/ai/</code> Cross-cutting AI services <code>src/infrastructure/migrations/</code> <code>src/shared/infra/migrations/</code> Cross-cutting schema evolution <code>src/contexts/shared/</code> <code>src/shared/</code> Rename for clarity"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#phase-1-restructure-shared-foundation","title":"Phase 1: Restructure <code>shared/</code> (Foundation)","text":""},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#11-create-new-srcshared-structure","title":"1.1 Create new <code>src/shared/</code> structure","text":"<pre><code>mkdir -p src/shared/{common,core,infra}\nmkdir -p src/shared/infra/{signal_bridge,ai,migrations}\nmkdir -p src/shared/core/{policies,sync}\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#12-move-from-srccontextsshared","title":"1.2 Move from <code>src/contexts/shared/</code>","text":"From To <code>src/contexts/shared/core/types.py</code> <code>src/shared/common/types.py</code> <code>src/contexts/shared/core/validation.py</code> <code>src/shared/core/validation.py</code> <code>src/contexts/shared/core/failure_events.py</code> <code>src/shared/common/failure_events.py</code> <code>src/contexts/shared/core/operation_result.py</code> <code>src/shared/common/operation_result.py</code> <code>src/contexts/shared/core/agent.py</code> <code>src/shared/common/agent.py</code>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#13-move-from-srcapplication","title":"1.3 Move from <code>src/application/</code>","text":"From To <code>src/application/event_bus.py</code> <code>src/shared/infra/event_bus.py</code> <code>src/application/app_context.py</code> <code>src/shared/infra/app_context.py</code> <code>src/application/state.py</code> <code>src/shared/infra/state.py</code> <code>src/application/lifecycle.py</code> <code>src/shared/infra/lifecycle.py</code> <code>src/application/signal_bridge/</code> <code>src/shared/infra/signal_bridge/</code> <code>src/application/policies/</code> <code>src/shared/core/policies/</code> <code>src/application/sync/</code> <code>src/shared/core/sync/</code>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#14-move-from-srcinfrastructure","title":"1.4 Move from <code>src/infrastructure/</code>","text":"From To <code>src/infrastructure/ai/</code> <code>src/shared/infra/ai/</code> <code>src/infrastructure/migrations/</code> <code>src/shared/infra/migrations/</code>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#15-create-barrel-files","title":"1.5 Create barrel files","text":"<p><code>src/shared/__init__.py</code>: <pre><code>\"\"\"Shared kernel - cross-cutting concerns only.\"\"\"\nfrom src.shared.common.types import (\n    CodeId, SegmentId, SourceId, CategoryId, CaseId, FolderId,\n    Success, Failure, Result,\n)\nfrom src.shared.common.operation_result import OperationResult\nfrom src.shared.infra.event_bus import EventBus\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#phase-2-restructure-bounded-contexts","title":"Phase 2: Restructure Bounded Contexts","text":""},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#21-coding-context","title":"2.1 Coding Context","text":"<p>Current: <pre><code>src/contexts/coding/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u251c\u2500\u2500 events.py\n\u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u2514\u2500\u2500 services/\n\u2514\u2500\u2500 infra/\n    \u251c\u2500\u2500 repositories.py\n    \u2514\u2500\u2500 schema.py\n\nsrc/application/coding/\n\u251c\u2500\u2500 usecases/\n\u2502   \u251c\u2500\u2500 create_code.py\n\u2502   \u251c\u2500\u2500 rename_code.py\n\u2502   \u251c\u2500\u2500 apply_code.py\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 commands.py\n\nsrc/infrastructure/mcp/\n\u2514\u2500\u2500 coding_tools.py\n</code></pre></p> <p>Target: <pre><code>src/contexts/coding/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 entities.py          # Keep\n\u2502   \u251c\u2500\u2500 events.py             # Keep\n\u2502   \u251c\u2500\u2500 failure_events.py     # Keep\n\u2502   \u251c\u2500\u2500 invariants.py         # Keep\n\u2502   \u251c\u2500\u2500 derivers.py           # Keep\n\u2502   \u251c\u2500\u2500 commands.py           # Move from application\n\u2502   \u251c\u2500\u2500 services/             # Keep\n\u2502   \u251c\u2500\u2500 policies.py           # NEW: context-specific policies\n\u2502   \u2514\u2500\u2500 commandHandlers/      # Move from application/usecases\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 create_code.py\n\u2502       \u251c\u2500\u2500 rename_code.py\n\u2502       \u251c\u2500\u2500 apply_code.py\n\u2502       \u251c\u2500\u2500 batch_apply_codes.py\n\u2502       \u251c\u2500\u2500 change_code_color.py\n\u2502       \u251c\u2500\u2500 create_category.py\n\u2502       \u251c\u2500\u2500 delete_category.py\n\u2502       \u251c\u2500\u2500 delete_code.py\n\u2502       \u251c\u2500\u2500 merge_codes.py\n\u2502       \u251c\u2500\u2500 move_code_to_category.py\n\u2502       \u251c\u2500\u2500 remove_segment.py\n\u2502       \u251c\u2500\u2500 update_code_memo.py\n\u2502       \u2514\u2500\u2500 queries.py\n\u251c\u2500\u2500 infra/\n\u2502   \u251c\u2500\u2500 repositories.py       # Keep\n\u2502   \u2514\u2500\u2500 schema.py            # Keep\n\u2514\u2500\u2500 interface/                # NEW\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 mcp_tools.py          # Move from infrastructure/mcp\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#22-cases-context","title":"2.2 Cases Context","text":"<p>Target: <pre><code>src/contexts/cases/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u251c\u2500\u2500 events.py\n\u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u251c\u2500\u2500 commands.py           # NEW\n\u2502   \u251c\u2500\u2500 policies.py           # NEW\n\u2502   \u2514\u2500\u2500 commandHandlers/      # Move from application\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 create_case.py\n\u2502       \u251c\u2500\u2500 update_case.py\n\u2502       \u251c\u2500\u2500 remove_case.py\n\u2502       \u251c\u2500\u2500 set_attribute.py\n\u2502       \u251c\u2500\u2500 remove_attribute.py\n\u2502       \u251c\u2500\u2500 link_source.py\n\u2502       \u251c\u2500\u2500 unlink_source.py\n\u2502       \u251c\u2500\u2500 get_case.py\n\u2502       \u2514\u2500\u2500 list_cases.py\n\u251c\u2500\u2500 infra/\n\u2502   \u251c\u2500\u2500 case_repository.py\n\u2502   \u2514\u2500\u2500 schema.py\n\u2514\u2500\u2500 interface/\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 mcp_tools.py          # Move from infrastructure/mcp\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#23-sources-context","title":"2.3 Sources Context","text":"<p>Target: <pre><code>src/contexts/sources/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u251c\u2500\u2500 events.py\n\u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u251c\u2500\u2500 commands.py           # NEW\n\u2502   \u251c\u2500\u2500 policies.py           # NEW\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u2514\u2500\u2500 commandHandlers/      # Move from application\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 add_source.py\n\u2502       \u251c\u2500\u2500 remove_source.py\n\u2502       \u251c\u2500\u2500 update_source.py\n\u2502       \u251c\u2500\u2500 get_source.py\n\u2502       \u2514\u2500\u2500 list_sources.py\n\u251c\u2500\u2500 infra/\n\u2502   \u251c\u2500\u2500 source_repository.py\n\u2502   \u251c\u2500\u2500 folder_repository.py\n\u2502   \u251c\u2500\u2500 text_extractor.py\n\u2502   \u251c\u2500\u2500 pdf_extractor.py\n\u2502   \u251c\u2500\u2500 image_extractor.py\n\u2502   \u251c\u2500\u2500 media_extractor.py\n\u2502   \u2514\u2500\u2500 schema.py\n\u2514\u2500\u2500 interface/\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 mcp_tools.py          # NEW (source query tools)\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#24-folders-context-extract-from-sources","title":"2.4 Folders Context (Extract from Sources)","text":"<p>Target: <pre><code>src/contexts/folders/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 entities.py           # Extract from sources\n\u2502   \u251c\u2500\u2500 events.py\n\u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u251c\u2500\u2500 commands.py\n\u2502   \u2514\u2500\u2500 commandHandlers/      # Move from application\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 create_folder.py\n\u2502       \u251c\u2500\u2500 delete_folder.py\n\u2502       \u251c\u2500\u2500 rename_folder.py\n\u2502       \u251c\u2500\u2500 move_source.py\n\u2502       \u251c\u2500\u2500 get_folder.py\n\u2502       \u2514\u2500\u2500 list_folders.py\n\u251c\u2500\u2500 infra/\n\u2502   \u251c\u2500\u2500 folder_repository.py  # Move from sources/infra\n\u2502   \u2514\u2500\u2500 schema.py\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 __init__.py\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#25-projects-context","title":"2.5 Projects Context","text":"<p>Target: <pre><code>src/contexts/projects/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u251c\u2500\u2500 events.py\n\u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u251c\u2500\u2500 commands.py           # Move from application\n\u2502   \u251c\u2500\u2500 policies.py           # NEW\n\u2502   \u2514\u2500\u2500 commandHandlers/      # Move from application\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 create_project.py\n\u2502       \u251c\u2500\u2500 open_project.py\n\u2502       \u2514\u2500\u2500 close_project.py\n\u251c\u2500\u2500 infra/\n\u2502   \u251c\u2500\u2500 project_repository.py\n\u2502   \u251c\u2500\u2500 settings_repository.py\n\u2502   \u2514\u2500\u2500 schema.py\n\u2514\u2500\u2500 interface/\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 mcp_tools.py          # Move from infrastructure/mcp\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#26-settings-context","title":"2.6 Settings Context","text":"<p>Target: <pre><code>src/contexts/settings/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u251c\u2500\u2500 events.py\n\u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u251c\u2500\u2500 commands.py           # Move from application\n\u2502   \u2514\u2500\u2500 commandHandlers/      # Move from application\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 change_theme.py\n\u2502       \u251c\u2500\u2500 change_font.py\n\u2502       \u251c\u2500\u2500 change_language.py\n\u2502       \u251c\u2500\u2500 configure_backup.py\n\u2502       \u2514\u2500\u2500 configure_av_coding.py\n\u251c\u2500\u2500 infra/\n\u2502   \u2514\u2500\u2500 user_settings_repository.py\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 __init__.py\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#27-ai-services-context","title":"2.7 AI Services Context","text":"<p>Target: <pre><code>src/contexts/ai_services/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u251c\u2500\u2500 events.py\n\u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u251c\u2500\u2500 protocols.py\n\u2502   \u251c\u2500\u2500 commands.py           # Move from application\n\u2502   \u2514\u2500\u2500 commandHandlers/      # Move from application\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 suggest_codes.py\n\u2502       \u251c\u2500\u2500 approve_code_suggestion.py\n\u2502       \u251c\u2500\u2500 detect_duplicates.py\n\u2502       \u2514\u2500\u2500 approve_merge.py\n\u251c\u2500\u2500 infra/                    # Move from infrastructure/ai\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 config.py\n\u2502   \u251c\u2500\u2500 llm_provider.py\n\u2502   \u251c\u2500\u2500 embedding_provider.py\n\u2502   \u251c\u2500\u2500 code_analyzer.py\n\u2502   \u251c\u2500\u2500 code_comparator.py\n\u2502   \u2514\u2500\u2500 vector_store.py\n\u2514\u2500\u2500 interface/\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 mcp_tools.py          # AI agent tools\n</code></pre></p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#phase-3-command-handler-pattern","title":"Phase 3: Command Handler Pattern","text":""},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#31-standard-command-handler-template","title":"3.1 Standard Command Handler Template","text":"<p>Following ddd-workshop pattern, each command handler should:</p> <pre><code>\"\"\"\n{context}/core/commandHandlers/{operation}.py\n\nCommand handler for {operation}.\n\"\"\"\nfrom dataclasses import dataclass\n\nfrom src.shared.common.types import Result, Success, Failure\nfrom src.shared.common.operation_result import OperationResult\nfrom src.shared.infra.event_bus import EventBus\n\nfrom ..entities import Entity\nfrom ..events import SuccessEvent\nfrom ..failure_events import FailureEvent\nfrom ..derivers import derive_operation\nfrom ...infra.repositories import EntityRepository\n\n\n# Command DTO\n# -----------\n\n@dataclass(frozen=True)\nclass OperationCommand:\n    \"\"\"Command data for operation.\"\"\"\n    field: str\n\n\n# State type\n# ----------\n\n@dataclass(frozen=True)\nclass OperationState:\n    \"\"\"State needed for deriving event.\"\"\"\n    existing: Entity | None\n\n\n# Command handler\n# ---------------\n\ndef handle_operation(\n    command: OperationCommand,\n    repository: EntityRepository,\n    event_bus: EventBus,\n) -&gt; OperationResult[Entity]:\n    \"\"\"\n    Handle operation command.\n\n    Steps:\n    1. Parse/validate command data\n    2. Fetch state from repository\n    3. Derive event using pure deriver\n    4. Update state (persist)\n    5. Publish and return event\n    \"\"\"\n    # Step 1: Validate command\n    if not command.field:\n        return OperationResult.fail(\n            error=\"Field is required\",\n            error_code=\"EMPTY_FIELD\",\n        )\n\n    # Step 2: Fetch state\n    existing = repository.get_by_field(command.field)\n    state = OperationState(existing=existing)\n\n    # Step 3: Derive event (pure function)\n    event = derive_operation(command, state)\n\n    # Step 4: Update state based on event type\n    match event:\n        case SuccessEvent():\n            entity = Entity(...)\n            repository.save(entity)\n        case FailureEvent():\n            return OperationResult.fail(\n                error=event.reason,\n                error_code=event.code,\n            )\n\n    # Step 5: Publish and return\n    event_bus.publish(event)\n\n    return OperationResult.ok(\n        data=entity,\n        rollback=DeleteCommand(id=entity.id),\n    )\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#32-deriver-stays-in-deriverspy","title":"3.2 Deriver stays in <code>derivers.py</code>","text":"<p>Unlike ddd-workshop which embeds derivers in handlers, we keep derivers in <code>derivers.py</code> because: - Python's module system makes imports cleaner - Derivers are pure and independently testable - Multiple handlers might share derivers</p>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#phase-4-context-specific-policies","title":"Phase 4: Context-Specific Policies","text":""},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#41-policy-pattern","title":"4.1 Policy Pattern","text":"<p>Each context defines its own policies in <code>{context}/core/policies.py</code>:</p> <pre><code>\"\"\"\ncoding/core/policies.py\n\nPolicies for coding context - reactions to domain events.\n\"\"\"\nfrom src.shared.core.policies import configure_policy\nfrom src.contexts.sources.core.events import SourceRemoved\n\nfrom .commandHandlers.remove_segment import handle_remove_segments_for_source\n\n\ndef configure_coding_policies(segment_repository, event_bus):\n    \"\"\"Configure coding context policies.\"\"\"\n\n    # When source is removed, clean up segments\n    configure_policy(\n        event_type=SourceRemoved,\n        actions={\n            \"DELETE_SEGMENTS\": lambda e: handle_remove_segments_for_source(\n                source_id=e.source_id,\n                repository=segment_repository,\n                event_bus=event_bus,\n            ),\n        },\n        description=\"Clean up segments when source is deleted\",\n    )\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#phase-5-interface-layer-mcp-tools","title":"Phase 5: Interface Layer (MCP Tools)","text":""},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#51-mcp-tools-per-context","title":"5.1 MCP Tools per Context","text":"<p>Each context exposes its tools in <code>{context}/interface/mcp_tools.py</code>:</p> <pre><code>\"\"\"\ncoding/interface/mcp_tools.py\n\nMCP tools for AI agent access to coding operations.\n\"\"\"\nfrom src.shared.common.operation_result import OperationResult\nfrom src.shared.infra.mcp import ToolDefinition, ToolParameter\n\nfrom ..core.commandHandlers.batch_apply_codes import (\n    handle_batch_apply_codes,\n    BatchApplyCodesCommand,\n)\nfrom ..core.commandHandlers.queries import get_all_codes, get_segments_for_source\n\n\ndef create_coding_tools(coding_context, event_bus):\n    \"\"\"Create MCP tools for coding context.\"\"\"\n\n    return [\n        ToolDefinition(\n            name=\"batch_apply_codes\",\n            description=\"Apply multiple codes to text segments\",\n            parameters=[\n                ToolParameter(name=\"source_id\", type=\"string\", required=True),\n                ToolParameter(name=\"segments\", type=\"array\", required=True),\n            ],\n            handler=lambda params: handle_batch_apply_codes(\n                command=BatchApplyCodesCommand(**params),\n                context=coding_context,\n                event_bus=event_bus,\n            ),\n        ),\n        ToolDefinition(\n            name=\"list_codes\",\n            description=\"Get all codes in the codebook\",\n            parameters=[],\n            handler=lambda params: get_all_codes(coding_context.code_repo),\n        ),\n        # ... more tools\n    ]\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#phase-6-update-imports","title":"Phase 6: Update Imports","text":""},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#61-global-search-replace-patterns","title":"6.1 Global Search-Replace Patterns","text":"Old Import New Import <code>from src.contexts.shared.core.types import</code> <code>from src.shared.common.types import</code> <code>from src.application.event_bus import</code> <code>from src.shared.infra.event_bus import</code> <code>from src.application.app_context import</code> <code>from src.shared.infra.app_context import</code> <code>from src.application.state import</code> <code>from src.shared.infra.state import</code> <code>from src.application.{ctx}.usecases import</code> <code>from src.contexts.{ctx}.core.commandHandlers import</code> <code>from src.infrastructure.mcp.{ctx}_tools import</code> <code>from src.contexts.{ctx}.interface.mcp_tools import</code> <code>from src.infrastructure.ai import</code> <code>from src.shared.infra.ai import</code>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#phase-7-delete-old-structure","title":"Phase 7: Delete Old Structure","text":"<p>After migration and tests pass:</p> <pre><code># Remove old application layer\nrm -rf src/application/\n\n# Remove old infrastructure layer\nrm -rf src/infrastructure/\n\n# Remove old shared location\nrm -rf src/contexts/shared/\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#final-structure","title":"Final Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 contexts/\n\u2502   \u251c\u2500\u2500 coding/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py           # Public API\n\u2502   \u2502   \u251c\u2500\u2500 core/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 events.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 invariants.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 derivers.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 commands.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 policies.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 services/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 commandHandlers/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 tests/\n\u2502   \u2502   \u251c\u2500\u2500 infra/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 repositories.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 schema.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 tests/\n\u2502   \u2502   \u2514\u2500\u2500 interface/\n\u2502   \u2502       \u251c\u2500\u2500 __init__.py\n\u2502   \u2502       \u251c\u2500\u2500 mcp_tools.py\n\u2502   \u2502       \u2514\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 cases/\n\u2502   \u2502   \u2514\u2500\u2500 (same structure)\n\u2502   \u251c\u2500\u2500 sources/\n\u2502   \u2502   \u2514\u2500\u2500 (same structure)\n\u2502   \u251c\u2500\u2500 folders/\n\u2502   \u2502   \u2514\u2500\u2500 (same structure)\n\u2502   \u251c\u2500\u2500 projects/\n\u2502   \u2502   \u2514\u2500\u2500 (same structure)\n\u2502   \u251c\u2500\u2500 settings/\n\u2502   \u2502   \u2514\u2500\u2500 (same structure)\n\u2502   \u2514\u2500\u2500 ai_services/\n\u2502       \u2514\u2500\u2500 (same structure)\n\u251c\u2500\u2500 shared/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 common/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 types.py\n\u2502   \u2502   \u251c\u2500\u2500 events.py\n\u2502   \u2502   \u251c\u2500\u2500 failure_events.py\n\u2502   \u2502   \u251c\u2500\u2500 operation_result.py\n\u2502   \u2502   \u2514\u2500\u2500 agent.py\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 validation.py\n\u2502   \u2502   \u251c\u2500\u2500 policies/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 framework.py\n\u2502   \u2502   \u2514\u2500\u2500 sync/\n\u2502   \u2502       \u2514\u2500\u2500 source_sync_handler.py\n\u2502   \u2514\u2500\u2500 infra/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 event_bus.py\n\u2502       \u251c\u2500\u2500 app_context.py\n\u2502       \u251c\u2500\u2500 state.py\n\u2502       \u251c\u2500\u2500 lifecycle.py\n\u2502       \u251c\u2500\u2500 signal_bridge/\n\u2502       \u251c\u2500\u2500 ai/\n\u2502       \u2514\u2500\u2500 migrations/\n\u251c\u2500\u2500 presentation/\n\u2502   \u2514\u2500\u2500 (unchanged)\n\u251c\u2500\u2500 tests/\n\u2502   \u2514\u2500\u2500 e2e/\n\u2514\u2500\u2500 main.py\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#migration-order","title":"Migration Order","text":"<ol> <li>Phase 1: Create <code>src/shared/</code> and move cross-cutting concerns</li> <li>Phase 2.1: Migrate <code>coding</code> context (largest, most complex)</li> <li>Phase 2.2: Migrate <code>cases</code> context</li> <li>Phase 2.3: Migrate <code>sources</code> context</li> <li>Phase 2.4: Extract <code>folders</code> context</li> <li>Phase 2.5: Migrate <code>projects</code> context</li> <li>Phase 2.6: Migrate <code>settings</code> context</li> <li>Phase 2.7: Migrate <code>ai_services</code> context</li> <li>Phase 6: Update all imports</li> <li>Phase 7: Delete old structure</li> </ol>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#testing-strategy","title":"Testing Strategy","text":"<p>After each phase:</p> <pre><code># Run all tests\nQT_QPA_PLATFORM=offscreen make test-all\n\n# Run specific context tests\nQT_QPA_PLATFORM=offscreen uv run pytest src/contexts/coding/ -v\n\n# Run E2E tests\nQT_QPA_PLATFORM=offscreen uv run pytest src/tests/e2e/ -v\n</code></pre>"},{"location":"ai/DDD_WORKSHOP_REFACTOR_PLAN/#benefits-of-this-refactoring","title":"Benefits of This Refactoring","text":"<ol> <li>Complete Vertical Slices: Each context owns domain \u2192 infra \u2192 interface</li> <li>Clear Boundaries: No cross-context imports except through <code>shared/</code></li> <li>Easier Navigation: Find all coding-related code in <code>contexts/coding/</code></li> <li>Simpler Mental Model: Matches ddd-workshop pattern exactly</li> <li>Better Testability: Each context is independently testable</li> <li>AI-Agent Friendly: MCP tools co-located with domain they expose</li> </ol>"},{"location":"ai/REFACTORING_PLAN/","title":"QualCoder v2 Refactoring Plan","text":"<p>STATUS: COMPLETED (2025-02-03) All items in this plan have been implemented.</p> <p>Based on analysis against <code>.claude/skills/developer/SKILL.md</code> guidelines.</p>"},{"location":"ai/REFACTORING_PLAN/#summary-of-gaps","title":"Summary of Gaps","text":"Area Issue Priority Status MCP CaseTools Calls repos directly, bypasses use cases P0 \u2705 Done OperationResult Use cases return <code>Result[T, str]</code>, no error_code/suggestions P0 \u2705 Done Cases domain Missing derivers, failure_events, DomainEvent inheritance P1 \u2705 Done Projects domain Missing derivers, DomainEvent inheritance P1 \u2705 Done Batch use cases No <code>batch_apply_codes()</code> for AI efficiency P2 \u2705 Done CaseManagerViewModel Not connected to SignalBridge P2 \u2705 Done SKILL.md E2E test path outdated P3 \u2705 Done"},{"location":"ai/REFACTORING_PLAN/#phase-1-foundation","title":"Phase 1: Foundation","text":""},{"location":"ai/REFACTORING_PLAN/#11-operationresult-type","title":"1.1 OperationResult Type","text":"<p>Create: <code>src/contexts/shared/core/operation_result.py</code></p> <pre><code>@dataclass(frozen=True)\nclass OperationResult:\n    success: bool\n    data: Any | None = None\n    error: str | None = None\n    error_code: str | None = None\n    suggestions: tuple[str, ...] = ()\n    rollback_command: Any | None = None\n</code></pre>"},{"location":"ai/REFACTORING_PLAN/#12-cases-domain-completion","title":"1.2 Cases Domain Completion","text":"<p>Create: - <code>src/contexts/cases/core/failure_events.py</code> - <code>src/contexts/cases/core/derivers.py</code></p> <p>Modify: - <code>src/contexts/cases/core/events.py</code> \u2192 inherit DomainEvent</p>"},{"location":"ai/REFACTORING_PLAN/#13-projects-domain-completion","title":"1.3 Projects Domain Completion","text":"<p>Create: - <code>src/contexts/projects/core/derivers.py</code></p> <p>Modify: - <code>src/contexts/projects/core/events.py</code> \u2192 inherit DomainEvent</p>"},{"location":"ai/REFACTORING_PLAN/#phase-2-use-cases","title":"Phase 2: Use Cases","text":""},{"location":"ai/REFACTORING_PLAN/#21-migrate-to-operationresult","title":"2.1 Migrate to OperationResult","text":"<p>Modify: All <code>src/application/*/usecases/*.py</code></p> <p>Change from: <pre><code>def create_code(...) -&gt; Result[Code, str]:\n    return Failure(\"Name exists\")\n</code></pre></p> <p>To: <pre><code>def create_code(...) -&gt; OperationResult:\n    return OperationResult(\n        success=False,\n        error=\"Name exists\",\n        error_code=\"CODE_NOT_CREATED/DUPLICATE_NAME\",\n        suggestions=(\"Use a different name\",),\n    )\n</code></pre></p>"},{"location":"ai/REFACTORING_PLAN/#22-add-batch-use-cases","title":"2.2 Add Batch Use Cases","text":"<p>Create: <code>src/application/coding/usecases/batch_apply_codes.py</code></p>"},{"location":"ai/REFACTORING_PLAN/#phase-3-presentation","title":"Phase 3: Presentation","text":""},{"location":"ai/REFACTORING_PLAN/#31-mcp-casetools-use-cases-p0","title":"3.1 MCP CaseTools \u2192 Use Cases (P0)","text":"<p>Modify: <code>src/infrastructure/mcp/case_tools.py</code></p> <p>Change from: <pre><code>def create_case(self, params):\n    case = Case(...)\n    self._case_repo.save(case)  # \u274c Direct repo\n</code></pre></p> <p>To: <pre><code>def create_case(self, params):\n    result = create_case_usecase(  # \u2705 Use case\n        CreateCaseCommand(...),\n        self._cases_ctx,\n        self._event_bus,\n    )\n</code></pre></p>"},{"location":"ai/REFACTORING_PLAN/#32-casemanagerviewmodel-signalbridge","title":"3.2 CaseManagerViewModel + SignalBridge","text":"<p>Modify: <code>src/presentation/viewmodels/case_manager_viewmodel.py</code></p> <p>Add signal subscriptions for reactive updates.</p>"},{"location":"ai/REFACTORING_PLAN/#execution-order","title":"Execution Order","text":"<pre><code>Week 1: Foundation\n  \u2514\u2500\u2500 1.1 OperationResult\n  \u2514\u2500\u2500 1.2 Cases domain\n  \u2514\u2500\u2500 1.3 Projects domain\n\nWeek 2: Use Cases\n  \u2514\u2500\u2500 2.1 Migrate coding use cases first (reference)\n  \u2514\u2500\u2500 2.1 Migrate remaining use cases\n  \u2514\u2500\u2500 2.2 Batch use cases\n\nWeek 3: Presentation\n  \u2514\u2500\u2500 3.1 MCP CaseTools (critical fix)\n  \u2514\u2500\u2500 3.2 SignalBridge connection\n</code></pre>"},{"location":"ai/REFACTORING_PLAN/#dependencies","title":"Dependencies","text":"<pre><code>OperationResult \u2500\u2500\u252c\u2500\u2500\u2192 Use Case Migration \u2500\u2500\u2192 MCP CaseTools\n                  \u2502\nCases Domain \u2500\u2500\u2500\u2500\u2500\u2518\nProjects Domain \u2500\u2500\u2518\n</code></pre>"},{"location":"ai/REFACTORING_PLAN/#decision-provider-pattern","title":"Decision: Provider Pattern","text":"<p>Current: ViewModels use Provider protocols for dependency injection.</p> <p>Guide says: \"Use direct wiring for internal, stable dependencies.\"</p> <p>Decision: Keep providers for testability, but ensure: 1. MCP Tools call same use cases as ViewModels 2. Document that providers are for testing convenience</p>"},{"location":"ai/REFACTORING_PLAN/#files-affected","title":"Files Affected","text":""},{"location":"ai/REFACTORING_PLAN/#new-files-5","title":"New Files (5)","text":"<ul> <li><code>src/contexts/shared/core/operation_result.py</code></li> <li><code>src/contexts/cases/core/failure_events.py</code></li> <li><code>src/contexts/cases/core/derivers.py</code></li> <li><code>src/contexts/projects/core/derivers.py</code></li> <li><code>src/application/coding/usecases/batch_apply_codes.py</code></li> </ul>"},{"location":"ai/REFACTORING_PLAN/#modified-files-20","title":"Modified Files (~20)","text":"<ul> <li><code>src/contexts/cases/core/events.py</code></li> <li><code>src/contexts/projects/core/events.py</code></li> <li><code>src/application/coding/usecases/*.py</code> (6 files)</li> <li><code>src/application/cases/usecases/*.py</code> (4 files)</li> <li><code>src/application/ai_services/usecases/*.py</code> (3 files)</li> <li><code>src/infrastructure/mcp/case_tools.py</code></li> <li><code>src/presentation/viewmodels/case_manager_viewmodel.py</code></li> <li><code>.claude/skills/developer/SKILL.md</code></li> </ul>"},{"location":"ai/REFACTORING_PLAN/#completion-notes","title":"Completion Notes","text":"<p>Completed: 2025-02-03</p>"},{"location":"ai/REFACTORING_PLAN/#implementation-summary","title":"Implementation Summary","text":"<ol> <li>OperationResult - Created <code>src/contexts/shared/core/operation_result.py</code> with full error handling pattern</li> <li>Cases domain - Created <code>src/contexts/cases/core/derivers.py</code> with full validation</li> <li>Projects domain - Created <code>src/contexts/projects/core/derivers.py</code></li> <li>Batch use cases - Created <code>src/application/coding/usecases/batch_apply_codes.py</code></li> <li>CaseManagerViewModel + SignalBridge - Integrated via <code>src/application/cases/signal_bridge.py</code></li> <li>MCP CaseTools - Refactored to use <code>CaseToolsContext</code> protocol (like <code>ProjectTools</code>)</li> <li>Now reads from <code>ProjectState</code> instead of direct repo calls</li> <li>Backward compatible with legacy <code>case_repo</code> parameter (emits deprecation warning)</li> <li>31 tests passing</li> </ol>"},{"location":"ai/REFACTORING_PLAN/#key-patterns-established","title":"Key Patterns Established","text":"<ul> <li>MCP Tools should accept <code>AppContext</code> (or protocol) rather than individual repos</li> <li>Query operations read from <code>ProjectState</code> cache</li> <li>Write operations call use cases which publish domain events</li> <li>Deprecation path maintained for backward compatibility</li> </ul>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/","title":"Refactoring Plan: Coordinator \u2192 AppContext","text":""},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#goal","title":"Goal","text":"<p>Replace the 3-layer pattern (Coordinator \u2192 Sub-coordinators \u2192 Use Cases) with the ddd-workshop pattern (AppContext + direct use case calls).</p>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#current-state","title":"Current State","text":"<pre><code>ApplicationCoordinator\n\u251c\u2500\u2500 CasesCoordinator      \u2192 usecases/create_case.py, etc.\n\u251c\u2500\u2500 SourcesCoordinator    \u2192 usecases/add_source.py, etc.\n\u251c\u2500\u2500 FoldersCoordinator    \u2192 usecases/create_folder.py, etc.\n\u251c\u2500\u2500 CodingCoordinator     \u2192 usecases/create_code.py, etc.\n\u251c\u2500\u2500 ProjectsCoordinator   \u2192 usecases/open_project.py, etc.\n\u251c\u2500\u2500 NavigationCoordinator \u2192 usecases/navigate.py, etc.\n\u251c\u2500\u2500 SettingsCoordinator   \u2192 settings repo calls\n\u2514\u2500\u2500 Dialog methods        \u2192 show_*_dialog()\n</code></pre> <p>Problems: - 3 layers of indirection - Sub-coordinators are just pass-through wrappers - Doesn't match ddd-workshop command handler pattern</p>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#target-state","title":"Target State","text":"<pre><code>AppContext (dependency container only)\n\u251c\u2500\u2500 event_bus: EventBus\n\u251c\u2500\u2500 state: ProjectState\n\u251c\u2500\u2500 lifecycle: ProjectLifecycle\n\u251c\u2500\u2500 settings_repo: UserSettingsRepository\n\u251c\u2500\u2500 sources_context: SourcesContext | None\n\u251c\u2500\u2500 cases_context: CasesContext | None\n\u251c\u2500\u2500 coding_context: CodingContext | None\n\u251c\u2500\u2500 projects_context: ProjectsContext | None\n\u2514\u2500\u2500 start() / stop()\n\nDialogService (separate)\n\u251c\u2500\u2500 show_open_project_dialog()\n\u251c\u2500\u2500 show_create_project_dialog()\n\u2514\u2500\u2500 show_settings_dialog()\n\nConsumers call use cases directly:\n    from src.application.cases.usecases import create_case\n    result = create_case(cmd, ctx.state, ctx.cases_context, ctx.event_bus)\n</code></pre>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#phase-1-create-appcontext","title":"Phase 1: Create AppContext","text":"<p>Files to create: - <code>src/application/app_context.py</code></p> <p>AppContext responsibilities: 1. Hold infrastructure (event_bus, state, lifecycle, settings_repo) 2. Hold bounded contexts (sources_context, cases_context, etc.) 3. Lifecycle methods: <code>start()</code>, <code>stop()</code> 4. Project open/close wiring</p> <p>NOT in AppContext: - No use case methods - No dialog methods - No query methods</p> <pre><code># src/application/app_context.py\n@dataclass\nclass AppContext:\n    event_bus: EventBus\n    state: ProjectState\n    lifecycle: ProjectLifecycle\n    settings_repo: UserSettingsRepository\n    signal_bridge: ProjectSignalBridge | None = None\n\n    # Contexts (populated when project opens)\n    sources_context: SourcesContext | None = None\n    cases_context: CasesContext | None = None\n    coding_context: CodingContext | None = None\n    projects_context: ProjectsContext | None = None\n\n    def start(self) -&gt; None: ...\n    def stop(self) -&gt; None: ...\n    def open_project(self, path: str) -&gt; Result: ...\n    def close_project(self) -&gt; None: ...\n</code></pre>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#phase-2-create-dialogservice","title":"Phase 2: Create DialogService","text":"<p>Files to create: - <code>src/presentation/services/dialog_service.py</code></p> <p>Move from Coordinator: - <code>show_open_project_dialog()</code> - <code>show_create_project_dialog()</code> - <code>show_settings_dialog()</code></p> <pre><code># src/presentation/services/dialog_service.py\nclass DialogService:\n    def __init__(self, ctx: AppContext):\n        self._ctx = ctx\n\n    def show_open_project_dialog(self, parent=None) -&gt; Result: ...\n    def show_create_project_dialog(self, parent=None) -&gt; Result: ...\n    def show_settings_dialog(self, parent=None) -&gt; Any: ...\n</code></pre>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#phase-3-update-consumers","title":"Phase 3: Update Consumers","text":""},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#31-filemanagerviewmodel","title":"3.1 FileManagerViewModel","text":"<p>Current: <pre><code>self._coordinator.sources.add_source(command)\nself._coordinator.cases.get_cases()\n</code></pre></p> <p>After: <pre><code>from src.application.sources.usecases import add_source\nfrom src.application.cases.usecases import get_cases\n\nadd_source(command, self._ctx.state, self._ctx.sources_context, self._ctx.event_bus)\nget_cases(self._ctx.state)\n</code></pre></p>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#32-projecttools-mcp","title":"3.2 ProjectTools (MCP)","text":"<p>Current: <pre><code>self._coordinator.sources.get_sources()\nself._coordinator.navigation.navigate_to_segment(command)\n</code></pre></p> <p>After: <pre><code>from src.application.sources.usecases import get_sources\nfrom src.application.navigation.usecases import navigate_to_segment\n\nget_sources(self._ctx.state)\nnavigate_to_segment(command, self._ctx.state, self._ctx.event_bus)\n</code></pre></p>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#33-mainpy","title":"3.3 main.py","text":"<p>Current: <pre><code>self._coordinator.show_settings_dialog(...)\nself._coordinator.navigation.connect_text_coding_screen(...)\n</code></pre></p> <p>After: <pre><code>self._dialog_service.show_settings_dialog(...)\n# Navigation connection moves to signal_bridge or AppContext\n</code></pre></p>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#phase-4-handle-navigation","title":"Phase 4: Handle Navigation","text":"<p>Navigation is special - it has state (current_screen) and connects to UI.</p> <p>Options: 1. Keep NavigationCoordinator as NavigationService 2. Move navigation state to AppContext 3. Make navigation a use case pattern</p> <p>Recommendation: Keep as <code>NavigationService</code> - it's stateful and UI-connected.</p> <pre><code># src/application/navigation/service.py\nclass NavigationService:\n    def __init__(self, ctx: AppContext):\n        self._ctx = ctx\n        self._current_screen: str | None = None\n\n    def navigate_to_screen(self, command) -&gt; Result: ...\n    def navigate_to_segment(self, command) -&gt; Result: ...\n    def get_current_screen(self) -&gt; str | None: ...\n</code></pre>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#phase-5-remove-sub-coordinators","title":"Phase 5: Remove Sub-Coordinators","text":"<p>Files to delete: - <code>src/application/coordinators/cases_coordinator.py</code> - <code>src/application/coordinators/sources_coordinator.py</code> - <code>src/application/coordinators/folders_coordinator.py</code> - <code>src/application/coordinators/coding_coordinator.py</code> - <code>src/application/coordinators/projects_coordinator.py</code> - <code>src/application/coordinators/settings_coordinator.py</code> - <code>src/application/coordinators/base.py</code> - <code>src/application/coordinators/__init__.py</code></p> <p>Keep but refactor: - <code>src/application/coordinators/navigation_coordinator.py</code> \u2192 <code>navigation/service.py</code></p> <p>Delete after migration: - <code>src/application/coordinator.py</code></p>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#phase-6-update-tests","title":"Phase 6: Update Tests","text":"<ol> <li>Replace <code>ApplicationCoordinator</code> fixtures with <code>AppContext</code></li> <li>Update test imports to use direct use case calls</li> <li>Add DialogService to test fixtures where needed</li> </ol>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#migration-order","title":"Migration Order","text":"<ol> <li>Create AppContext (new file, no breaking changes)</li> <li>Create DialogService (new file, no breaking changes)</li> <li>Create NavigationService (new file, no breaking changes)</li> <li>Migrate FileManagerViewModel (update imports)</li> <li>Migrate ProjectTools (update imports)</li> <li>Migrate main.py (update wiring)</li> <li>Update test fixtures (AppContext replaces Coordinator)</li> <li>Delete sub-coordinators (cleanup)</li> <li>Delete ApplicationCoordinator (final cleanup)</li> </ol>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#estimated-impact","title":"Estimated Impact","text":"Category Count Files to create 3 Files to modify ~15 Files to delete 9 Sub-coordinators removed 7 Use cases (unchanged) 47"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#benefits","title":"Benefits","text":"<ol> <li>Matches ddd-workshop - Direct command handler calls</li> <li>Less indirection - 1 layer instead of 3</li> <li>Clearer dependencies - Use cases declare what they need</li> <li>Easier testing - Test use cases directly, mock only dependencies</li> <li>No god object - AppContext is just a container</li> </ol>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#risks","title":"Risks","text":"<ol> <li>Breaking changes - All consumers need updating</li> <li>Verbose calls - Must pass 4 args instead of <code>coordinator.sources.add_source(cmd)</code></li> <li>Import sprawl - Many use case imports in ViewModels</li> </ol>"},{"location":"ai/REFACTOR_COORDINATOR_TO_APPCONTEXT/#mitigation-for-verbosity","title":"Mitigation for Verbosity","text":"<p>Create helper functions if needed:</p> <pre><code># src/application/cases/__init__.py\ndef create_case(ctx: AppContext, command: CreateCaseCommand) -&gt; Result:\n    \"\"\"Convenience wrapper for create_case use case.\"\"\"\n    from src.application.cases.usecases.create_case import create_case as _create\n    return _create(command, ctx.state, ctx.cases_context, ctx.event_bus)\n</code></pre> <p>This keeps the simple API while maintaining direct use case pattern.</p>"},{"location":"api/","title":"Design System","text":"<p>The QualCoder Design System is a comprehensive PySide6-based component library featuring 180+ reusable, themeable components following Material Design principles.</p>"},{"location":"api/#overview","title":"Overview","text":"<p>The design system provides:</p> <ul> <li>Design Tokens \u2014 Consistent colors, spacing, typography, and layout values</li> <li>180+ Components \u2014 Buttons, inputs, cards, modals, tables, charts, and more</li> <li>Theme Support \u2014 Light and dark themes with custom theme registration</li> <li>Material Icons \u2014 7,000+ icons via qtawesome (mdi6 prefix)</li> <li>Qt Signals \u2014 Event-driven interactivity patterns</li> </ul>"},{"location":"api/#quick-example","title":"Quick Example","text":"<pre><code>from design_system import (\n    Button, Input, Label, Card,\n    COLORS, SPACING\n)\n\n# Create a simple form\ncard = Card()\ncard.add_widget(Label(\"Username\", variant=\"title\"))\ncard.add_widget(Input(placeholder=\"Enter username...\"))\ncard.add_widget(Button(\"Submit\", variant=\"primary\"))\n</code></pre>"},{"location":"api/#sections","title":"Sections","text":"Section Description Getting Started Installation and quick start guide Design Tokens Colors, spacing, typography, and layout constants Components 180+ UI components organized by category Patterns Signal handling, theming, and composition patterns Reference Module index and dependency information"},{"location":"api/#component-categories","title":"Component Categories","text":"Category Components Description Core Button, Input, Label, Card, Badge Fundamental UI elements Icons Icon, IconText Material Design Icons Layout AppContainer, Panel, Sidebar, Toolbar Application structure Forms SearchBox, Select, Textarea User input Navigation Tab, Breadcrumb, NavList Navigation patterns Data Display DataTable, CodeTree, InfoCard Data presentation Lists FileList, CaseList, AttributeList Collection displays Media VideoContainer, Timeline Media playback Chat &amp; AI MessageBubble, ChatInput AI interface Document TextPanel, TranscriptPanel Document handling Feedback Spinner, Toast, ProgressBar User feedback Visualization ChartWidget, NetworkGraph Data visualization Pickers TypeSelector, ColorSchemeSelector Selection widgets Advanced Modal, ContextMenu, CodeEditor Complex components"},{"location":"api/#integration-with-architecture","title":"Integration with Architecture","text":"<p>The Design System is the Presentation Layer of QualCoder v2's architecture:</p> <pre><code>Domain (Pure) \u2192 Application (Events) \u2192 Presentation (Design System)\n</code></pre> <p>Components receive updates via Qt signals from the SignalBridge, maintaining the separation between pure domain logic and UI.</p> <p>See the Architecture Overview for how the Design System fits into the larger system.</p>"},{"location":"api/mcp-api/","title":"MCP API Reference","text":"<p>Technical reference for QualCoder's MCP (Model Context Protocol) server.</p>"},{"location":"api/mcp-api/#server-details","title":"Server Details","text":"Property Value URL <code>http://localhost:8765</code> Transport HTTP (JSON-RPC 2.0) Binding localhost only Started by QualCoder app (embedded)"},{"location":"api/mcp-api/#endpoints","title":"Endpoints","text":"Endpoint Method Description <code>/</code> GET Server info <code>/tools</code> GET List available tools <code>/tools/{name}</code> POST Call a specific tool <code>/mcp</code> POST MCP JSON-RPC endpoint"},{"location":"api/mcp-api/#tool-schemas","title":"Tool Schemas","text":""},{"location":"api/mcp-api/#project-tools","title":"Project Tools","text":""},{"location":"api/mcp-api/#get_project_context","title":"get_project_context","text":"<p>Get current project state.</p> <pre><code>{\n  \"name\": \"get_project_context\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {},\n    \"required\": []\n  }\n}\n</code></pre> <p>Response: <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"project_open\": true,\n    \"project_name\": \"My Research\",\n    \"project_path\": \"/path/to/project.qda\",\n    \"source_count\": 5,\n    \"sources\": [{\"id\": 1, \"name\": \"interview1.txt\", \"type\": \"text\"}],\n    \"case_count\": 3,\n    \"cases\": [{\"id\": 1, \"name\": \"Participant A\"}]\n  }\n}\n</code></pre></p>"},{"location":"api/mcp-api/#list_sources","title":"list_sources","text":"<p>List all sources with metadata.</p> <pre><code>{\n  \"name\": \"list_sources\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"source_type\": {\n        \"type\": \"string\",\n        \"description\": \"Filter: 'text', 'audio', 'video', 'image', 'pdf'\"\n      }\n    },\n    \"required\": []\n  }\n}\n</code></pre>"},{"location":"api/mcp-api/#read_source_content","title":"read_source_content","text":"<p>Read document text with pagination.</p> <pre><code>{\n  \"name\": \"read_source_content\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"source_id\": {\"type\": \"integer\", \"description\": \"Source ID\"},\n      \"start_pos\": {\"type\": \"integer\", \"default\": 0},\n      \"end_pos\": {\"type\": \"integer\"},\n      \"max_length\": {\"type\": \"integer\", \"default\": 50000}\n    },\n    \"required\": [\"source_id\"]\n  }\n}\n</code></pre> <p>Response: <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"source_id\": 1,\n    \"source_name\": \"interview1.txt\",\n    \"content\": \"The interview transcript...\",\n    \"start_pos\": 0,\n    \"end_pos\": 5000,\n    \"total_length\": 15000,\n    \"has_more\": true\n  }\n}\n</code></pre></p>"},{"location":"api/mcp-api/#navigate_to_segment","title":"navigate_to_segment","text":"<p>Navigate UI to a specific position.</p> <pre><code>{\n  \"name\": \"navigate_to_segment\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"source_id\": {\"type\": \"integer\"},\n      \"start_pos\": {\"type\": \"integer\"},\n      \"end_pos\": {\"type\": \"integer\"},\n      \"highlight\": {\"type\": \"boolean\", \"default\": true}\n    },\n    \"required\": [\"source_id\", \"start_pos\", \"end_pos\"]\n  }\n}\n</code></pre>"},{"location":"api/mcp-api/#suggest_source_metadata","title":"suggest_source_metadata","text":"<p>Suggest metadata for a source (pending human approval).</p> <pre><code>{\n  \"name\": \"suggest_source_metadata\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"source_id\": {\"type\": \"integer\"},\n      \"language\": {\"type\": \"string\", \"description\": \"e.g., 'en', 'es'\"},\n      \"topics\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}},\n      \"organization_suggestion\": {\"type\": \"string\"}\n    },\n    \"required\": [\"source_id\"]\n  }\n}\n</code></pre>"},{"location":"api/mcp-api/#coding-tools","title":"Coding Tools","text":""},{"location":"api/mcp-api/#list_codes","title":"list_codes","text":"<p>Get all codes in the codebook.</p> <pre><code>{\n  \"name\": \"list_codes\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {},\n    \"required\": []\n  }\n}\n</code></pre> <p>Response: <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\"id\": 1, \"name\": \"Anxiety\", \"color\": \"#FF6B6B\", \"segment_count\": 12},\n    {\"id\": 2, \"name\": \"Coping\", \"color\": \"#4ECDC4\", \"segment_count\": 8}\n  ]\n}\n</code></pre></p>"},{"location":"api/mcp-api/#get_code","title":"get_code","text":"<p>Get details for a specific code.</p> <pre><code>{\n  \"name\": \"get_code\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"code_id\": {\"type\": \"integer\"}\n    },\n    \"required\": [\"code_id\"]\n  }\n}\n</code></pre>"},{"location":"api/mcp-api/#batch_apply_codes","title":"batch_apply_codes","text":"<p>Apply multiple codes efficiently (AI-optimized).</p> <pre><code>{\n  \"name\": \"batch_apply_codes\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"operations\": {\n        \"type\": \"array\",\n        \"items\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"code_id\": {\"type\": \"integer\"},\n            \"source_id\": {\"type\": \"integer\"},\n            \"start_position\": {\"type\": \"integer\"},\n            \"end_position\": {\"type\": \"integer\"},\n            \"memo\": {\"type\": \"string\"},\n            \"importance\": {\"type\": \"integer\", \"minimum\": 0, \"maximum\": 3}\n          },\n          \"required\": [\"code_id\", \"source_id\", \"start_position\", \"end_position\"]\n        }\n      }\n    },\n    \"required\": [\"operations\"]\n  }\n}\n</code></pre> <p>Response: <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"total\": 3,\n    \"succeeded\": 3,\n    \"failed\": 0,\n    \"all_succeeded\": true,\n    \"results\": [\n      {\"index\": 0, \"success\": true, \"segment_id\": 42},\n      {\"index\": 1, \"success\": true, \"segment_id\": 43},\n      {\"index\": 2, \"success\": true, \"segment_id\": 44}\n    ]\n  }\n}\n</code></pre></p>"},{"location":"api/mcp-api/#list_segments_for_source","title":"list_segments_for_source","text":"<p>Get coded segments for a source.</p> <pre><code>{\n  \"name\": \"list_segments_for_source\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"source_id\": {\"type\": \"integer\"}\n    },\n    \"required\": [\"source_id\"]\n  }\n}\n</code></pre>"},{"location":"api/mcp-api/#http-examples","title":"HTTP Examples","text":""},{"location":"api/mcp-api/#direct-tool-call","title":"Direct Tool Call","text":"<pre><code>curl -X POST http://localhost:8765/tools/list_codes \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"arguments\": {}}'\n</code></pre>"},{"location":"api/mcp-api/#json-rpc-list-tools","title":"JSON-RPC: List Tools","text":"<pre><code>curl -X POST http://localhost:8765/mcp \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"method\": \"tools/list\",\n    \"params\": {}\n  }'\n</code></pre>"},{"location":"api/mcp-api/#json-rpc-call-tool","title":"JSON-RPC: Call Tool","text":"<pre><code>curl -X POST http://localhost:8765/mcp \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 2,\n    \"method\": \"tools/call\",\n    \"params\": {\n      \"name\": \"batch_apply_codes\",\n      \"arguments\": {\n        \"operations\": [{\n          \"code_id\": 1,\n          \"source_id\": 1,\n          \"start_position\": 0,\n          \"end_position\": 100\n        }]\n      }\n    }\n  }'\n</code></pre>"},{"location":"api/mcp-api/#error-responses","title":"Error Responses","text":"<pre><code>{\n  \"success\": false,\n  \"error\": \"No project open\",\n  \"error_code\": \"NO_PROJECT\"\n}\n</code></pre> Error Code Meaning <code>NO_PROJECT</code> No project is open in QualCoder <code>CODE_NOT_FOUND</code> Code ID doesn't exist <code>SOURCE_NOT_FOUND</code> Source ID doesn't exist <code>INVALID_POSITION</code> Start/end position out of range <code>TOOL_NOT_FOUND</code> Unknown tool name"},{"location":"api/mcp-api/#agent-integration","title":"Agent Integration","text":""},{"location":"api/mcp-api/#discovery","title":"Discovery","text":"<p>Check for <code>.mcp.json</code> in project root:</p> <pre><code>import json\nfrom pathlib import Path\n\ndef discover_mcp(project_root: str) -&gt; str | None:\n    config = Path(project_root) / \".mcp.json\"\n    if config.exists():\n        data = json.loads(config.read_text())\n        return data.get(\"mcpServers\", {}).get(\"qualcoder\", {}).get(\"url\")\n    return None\n</code></pre>"},{"location":"api/mcp-api/#health-check","title":"Health Check","text":"<pre><code>import httpx\n\ndef is_qualcoder_running(url: str = \"http://localhost:8765\") -&gt; bool:\n    try:\n        return httpx.get(f\"{url}/\", timeout=2).status_code == 200\n    except httpx.RequestError:\n        return False\n</code></pre>"},{"location":"api/mcp-api/#recommended-workflow","title":"Recommended Workflow","text":"<pre><code>async def agent_workflow():\n    mcp_url = discover_mcp(\".\") or \"http://localhost:8765/mcp\"\n\n    if not is_qualcoder_running():\n        return \"Start QualCoder first\"\n\n    # Check project is open\n    ctx = await call_tool(mcp_url, \"get_project_context\", {})\n    if not ctx[\"data\"][\"project_open\"]:\n        return \"Open a project in QualCoder\"\n\n    # Work with the project\n    codes = await call_tool(mcp_url, \"list_codes\", {})\n    # ... apply codes, analyze, etc.\n</code></pre>"},{"location":"api/mcp-api/#planned-tools","title":"Planned Tools","text":"<p>The following tools are planned but not yet implemented. Progress is tracked via Agent AC on feature tasks:</p> Tool Description Tracked In <code>create_code</code> Create a new code with name and color QC-028 AC #10 <code>update_code</code> Update code name, color, or memo QC-028 <code>delete_code</code> Delete a code QC-028 <code>merge_codes</code> Merge two codes into one QC-028 <code>remove_coding</code> Remove coding from a segment QC-029 AC #10 <code>add_source</code> Add a text source to the project QC-027 AC #11 <code>auto_code_pattern</code> Auto-code by text pattern QC-032 <code>auto_code_speaker</code> Auto-code by speaker QC-032"},{"location":"api/mcp-api/#architecture","title":"Architecture","text":"<p>See ARCHITECTURE.md for how MCP integrates with the application.</p> <p>See Decision 005 for the HTTP vs stdio transport decision.</p>"},{"location":"api/components/","title":"Components","text":"<p>The QualCoder Design System provides 180+ reusable components organized into functional categories.</p>"},{"location":"api/components/#component-categories","title":"Component Categories","text":"Category Components Description Core Button, Input, Label, Card, Badge, Alert, Avatar, Chip Fundamental UI elements Icons Icon, IconText Material Design Icons Layout AppContainer, Panel, Sidebar, Toolbar Application structure Forms SearchBox, Select, Textarea, ColorPicker User input Navigation Tab, TabGroup, Breadcrumb, NavList Navigation patterns Data Display DataTable, CodeTree, InfoCard, KeyValueList Data presentation Lists FileList, CaseList, AttributeList Collection displays Media VideoContainer, Timeline, PlayerControls Media playback Chat &amp; AI MessageBubble, ChatInput, CodeSuggestion AI interface Document TextPanel, TranscriptPanel, SelectionPopup Document handling Feedback Spinner, Toast, ProgressBar User feedback Visualization ChartWidget, NetworkGraph, WordCloud Data visualization Pickers TypeSelector, ColorSchemeSelector Selection widgets Advanced Modal, ContextMenu, CodeEditor, Pagination Complex components"},{"location":"api/components/#import-patterns","title":"Import Patterns","text":""},{"location":"api/components/#individual-imports","title":"Individual Imports","text":"<pre><code>from design_system import Button, Card, Label\n</code></pre>"},{"location":"api/components/#category-imports","title":"Category Imports","text":"<pre><code>from design_system import (\n    # Core\n    Button, Input, Label, Card, Badge, Alert,\n    # Layout\n    AppContainer, Panel, Sidebar,\n    # Forms\n    SearchBox, Select, Textarea,\n)\n</code></pre>"},{"location":"api/components/#full-import","title":"Full Import","text":"<pre><code>from design_system import *  # Not recommended for production\n</code></pre>"},{"location":"api/components/#component-conventions","title":"Component Conventions","text":""},{"location":"api/components/#constructor-parameters","title":"Constructor Parameters","text":"<p>Most components accept:</p> <ul> <li>Required parameters \u2014 Essential data (text, items, etc.)</li> <li>Optional styling \u2014 <code>variant</code>, <code>size</code>, <code>colors</code></li> <li>Optional behavior \u2014 <code>closable</code>, <code>checkable</code>, <code>editable</code></li> </ul>"},{"location":"api/components/#signals","title":"Signals","text":"<p>Components emit Qt signals for interactivity:</p> <pre><code>button.clicked.connect(handler)\ntable.row_clicked.connect(lambda idx, data: handle_row(idx))\nsearch.text_changed.connect(filter_results)\n</code></pre>"},{"location":"api/components/#common-signals","title":"Common Signals","text":"Signal Emitted When <code>clicked</code> Element clicked <code>double_clicked</code> Element double-clicked <code>value_changed</code> Value modified <code>selection_changed</code> Selection updated <code>text_changed</code> Text content changed"},{"location":"api/components/#methods","title":"Methods","text":"<p>Components provide methods for:</p> <ul> <li>Data access \u2014 <code>text()</code>, <code>value()</code>, <code>get_selected()</code></li> <li>Data modification \u2014 <code>setText()</code>, <code>setValue()</code>, <code>set_items()</code></li> <li>State management \u2014 <code>setEnabled()</code>, <code>setVisible()</code>, <code>clear()</code></li> </ul>"},{"location":"api/components/advanced/","title":"Advanced Components","text":"<p>Complex components: modals, context menus, editors, pagination, filters, and upload.</p>"},{"location":"api/components/advanced/#modal","title":"Modal","text":"<p>Material Design dialog.</p> <p></p> <pre><code>from design_system import Modal, ModalHeader, ModalBody, ModalFooter\n\nmodal = Modal(size=\"default\")  # sm, default, lg, xl\n\n# ModalHeader with title and optional close button\nmodal.set_header(ModalHeader(title=\"Confirm Action\"))\n\n# ModalBody is the content container\nmodal.body.addWidget(Label(\"Are you sure you want to proceed?\"))\n\n# ModalFooter contains action buttons\nmodal.add_button(\"Cancel\", variant=\"outline\", on_click=modal.reject)\nmodal.add_button(\"Confirm\", variant=\"primary\", on_click=modal.accept)\n\n# Show\nresult = modal.exec()  # Returns QDialog.Accepted or QDialog.Rejected\n</code></pre>"},{"location":"api/components/advanced/#modal-properties","title":"Modal Properties","text":"Property Type Default Description <code>size</code> str <code>\"default\"</code> <code>\"sm\"</code>, <code>\"default\"</code>, <code>\"lg\"</code>, <code>\"xl\"</code>"},{"location":"api/components/advanced/#modal-methods","title":"Modal Methods","text":"Method Description <code>set_header(widget)</code> Set header widget <code>add_button(text, variant, on_click)</code> Add footer button <code>exec()</code> Show modal and wait <code>accept()</code> Accept and close <code>reject()</code> Reject and close"},{"location":"api/components/advanced/#toggle-labeledtoggle","title":"Toggle / LabeledToggle","text":"<p>Switch component.</p> <p></p> <pre><code>from design_system import Toggle, LabeledToggle\n\ntoggle = Toggle()\ntoggle.setChecked(True)\ntoggle.toggled.connect(lambda checked: print(f\"Toggled: {checked}\"))\n\n# LabeledToggle includes text label\nlabeled = LabeledToggle(label=\"Enable feature\")\nlabeled.toggled.connect(lambda checked: handle_toggle(checked))\n</code></pre>"},{"location":"api/components/advanced/#toggle-signals","title":"Toggle Signals","text":"Signal Description <code>toggled(checked)</code> Toggle state changed"},{"location":"api/components/advanced/#contextmenu","title":"ContextMenu","text":"<p>Right-click menu.</p> <p></p> <pre><code>from design_system import ContextMenu\n\nmenu = ContextMenu()\nmenu.add_item(\"Edit\", icon=\"mdi6.pencil\", on_click=edit_handler)\nmenu.add_item(\"Delete\", icon=\"mdi6.delete\", variant=\"danger\", on_click=delete_handler)\nmenu.add_separator()\nsubmenu = menu.add_submenu(\"More Options\")\nsubmenu.add_item(\"Option 1\", on_click=handler1)\n\n# Show at cursor\nmenu.exec(QCursor.pos())\n</code></pre>"},{"location":"api/components/advanced/#contextmenu-methods","title":"ContextMenu Methods","text":"Method Description <code>add_item(text, icon, variant, on_click)</code> Add menu item <code>add_separator()</code> Add divider <code>add_submenu(text)</code> Add submenu <code>exec(pos)</code> Show at position"},{"location":"api/components/advanced/#filterpanel","title":"FilterPanel","text":"<p>Collapsible filter panel.</p> <p></p> <pre><code>from design_system import FilterPanel, FilterSection\n\nfilters = FilterPanel()\nfilters.add_section(\"File Type\", [\"Text\", \"Audio\", \"Video\", \"Image\"])\nfilters.add_section(\"Status\", [\"Coded\", \"Uncoded\", \"In Progress\"])\n\nfilters.filters_changed.connect(lambda f: print(f\"Filters: {f}\"))\n\n# Methods\ncurrent = filters.get_filters()\nfilters.clear_filters()\nfilters.set_collapsed(True)\n</code></pre>"},{"location":"api/components/advanced/#filterpanel-signals","title":"FilterPanel Signals","text":"Signal Description <code>filters_changed(filters)</code> Filter selection changed"},{"location":"api/components/advanced/#viewtoggle","title":"ViewToggle","text":"<p>Toggle between view modes.</p> <p></p> <pre><code>from design_system import ViewToggle\n\ntoggle = ViewToggle(views=[\"grid\", \"list\", \"table\"], current=\"list\")\ntoggle.view_changed.connect(lambda view: switch_to_view(view))\n\ntoggle.set_view(\"grid\")\ncurrent = toggle.current_view()\n</code></pre>"},{"location":"api/components/advanced/#codeeditor","title":"CodeEditor","text":"<p>Code editor with syntax highlighting.</p> <p></p> <pre><code>from design_system import CodeEditor\n\neditor = CodeEditor(\n    language=\"python\",\n    read_only=False,\n    show_line_numbers=True\n)\n\neditor.set_code(\"def hello():\\n    print('Hello')\")\ncode = editor.get_code()\neditor.set_language(\"sql\")\n\neditor.code_changed.connect(lambda code: print(\"Code changed\"))\n</code></pre>"},{"location":"api/components/advanced/#codeeditor-properties","title":"CodeEditor Properties","text":"Property Type Default Description <code>language</code> str <code>\"python\"</code> Syntax language <code>read_only</code> bool <code>False</code> Read-only mode <code>show_line_numbers</code> bool <code>True</code> Show line numbers"},{"location":"api/components/advanced/#richtexteditor","title":"RichTextEditor","text":"<p>Rich text editor with formatting toolbar.</p> <p></p> <pre><code>from design_system import RichTextEditor\n\neditor = RichTextEditor(show_toolbar=True)\n\neditor.set_html(\"&lt;p&gt;Hello &lt;b&gt;World&lt;/b&gt;&lt;/p&gt;\")\neditor.set_plain_text(\"Plain text content\")\n\nhtml = editor.get_html()\ntext = editor.get_plain_text()\n\neditor.content_changed.connect(lambda html: save_content(html))\n</code></pre>"},{"location":"api/components/advanced/#memoeditor","title":"MemoEditor","text":"<p>Memo/note editor for annotations.</p> <p></p> <pre><code>from design_system import MemoEditor\n\nmemo = MemoEditor(title=\"Research Notes\")\n\nmemo.set_content(\"My notes here...\")\ncontent = memo.get_content()\n\nmemo.content_changed.connect(lambda text: auto_save(text))\nmemo.save_clicked.connect(lambda: save_memo())\n</code></pre>"},{"location":"api/components/advanced/#pagination","title":"Pagination","text":"<p>Page navigation.</p> <p></p> <pre><code>from design_system import Pagination, SimplePagination\n\n# Full pagination\npager = Pagination(current_page=1, total_pages=10)\npager.page_changed.connect(lambda page: load_page(page))\npager.go_to_page(5)\npager.set_total_pages(20)\n\n# Simple prev/next\nsimple = SimplePagination()\nsimple.previous_clicked.connect(prev_handler)\nsimple.next_clicked.connect(next_handler)\n</code></pre>"},{"location":"api/components/advanced/#pagination-signals","title":"Pagination Signals","text":"Signal Description <code>page_changed(page)</code> Page changed"},{"location":"api/components/advanced/#daterangepicker","title":"DateRangePicker","text":"<p>Date range selection.</p> <p></p> <pre><code>from design_system import DateRangePicker, QuickDateSelect\n\npicker = DateRangePicker()\npicker.range_changed.connect(lambda start, end: print(f\"Range: {start} to {end}\"))\n\n# QuickDateSelect provides preset options\nquick = QuickDateSelect()\nquick.range_selected.connect(lambda start, end: apply_range(start, end))\n</code></pre>"},{"location":"api/components/advanced/#dropzone","title":"DropZone","text":"<p>Drag-and-drop file upload.</p> <p></p> <pre><code>from design_system import DropZone, CompactDropZone\n\nzone = DropZone(\n    accepted_types=[\".txt\", \".pdf\", \".docx\"],\n    max_files=10,\n    max_size_mb=50\n)\n\nzone.files_dropped.connect(lambda files: handle_upload(files))\nzone.browse_clicked.connect(open_file_dialog)\n\nzone.enable_drop()\nzone.disable_drop()\n\n# Compact variant\ncompact = CompactDropZone(accepted_types=[\".txt\", \".pdf\"])\ncompact.files_dropped.connect(handle_upload)\n</code></pre>"},{"location":"api/components/advanced/#dropzone-properties","title":"DropZone Properties","text":"Property Type Default Description <code>accepted_types</code> list <code>[]</code> Allowed extensions <code>max_files</code> int <code>10</code> Maximum files <code>max_size_mb</code> int <code>50</code> Max file size (MB)"},{"location":"api/components/advanced/#dropzone-signals","title":"DropZone Signals","text":"Signal Description <code>files_dropped(files)</code> Files dropped <code>browse_clicked</code> Browse button clicked"},{"location":"api/components/advanced/#imageannotationlayer","title":"ImageAnnotationLayer","text":"<p>Image annotation with drawing tools.</p> <pre><code>from design_system import ImageAnnotationLayer, ImageAnnotation, AnnotationMode\n\nlayer = ImageAnnotationLayer()\nlayer.load_image(\"/path/to/image.jpg\")\n\n# Set drawing mode\nlayer.set_mode(AnnotationMode.RECTANGLE)  # SELECT, RECTANGLE, POLYGON, FREEHAND\n\n# Signals\nlayer.annotation_created.connect(lambda ann: print(f\"Created: {ann.id}\"))\nlayer.annotation_selected.connect(lambda id: print(f\"Selected: {id}\"))\nlayer.annotation_deleted.connect(lambda id: print(f\"Deleted: {id}\"))\n\n# Methods\nannotations = layer.get_annotations()\nlayer.clear_annotations()\nlayer.delete_annotation(\"annotation-id\")\n</code></pre>"},{"location":"api/components/advanced/#annotationmode","title":"AnnotationMode","text":"Mode Description <code>SELECT</code> Select existing annotations <code>RECTANGLE</code> Draw rectangles <code>POLYGON</code> Draw polygons <code>FREEHAND</code> Freehand drawing"},{"location":"api/components/advanced/#diffviewer","title":"DiffViewer","text":"<p>Side-by-side diff viewer.</p> <pre><code>from design_system import DiffViewer\n\ndiff = DiffViewer()\ndiff.set_content(\"Original content...\", \"Modified content...\")\n</code></pre>"},{"location":"api/components/chat/","title":"Chat &amp; AI Components","text":"<p>AI interface components for chat, suggestions, and reasoning.</p>"},{"location":"api/components/chat/#messagebubble","title":"MessageBubble","text":"<p>Chat message display.</p> <p></p> <pre><code>from design_system import MessageBubble\n\nuser_msg = MessageBubble(\n    text=\"What codes are most frequent?\",\n    role=\"user\",\n    timestamp=\"10:30 AM\"\n)\n\nassistant_msg = MessageBubble(\n    text=\"The most frequent code is 'Theme A' with 15 occurrences.\",\n    role=\"assistant\",\n    timestamp=\"10:30 AM\"\n)\n</code></pre>"},{"location":"api/components/chat/#messagebubble-properties","title":"MessageBubble Properties","text":"Property Type Default Description <code>text</code> str required Message content <code>role</code> str required <code>\"user\"</code> or <code>\"assistant\"</code> <code>timestamp</code> str <code>None</code> Message timestamp"},{"location":"api/components/chat/#typingindicator","title":"TypingIndicator","text":"<p>Animated typing indicator.</p> <p></p> <pre><code>from design_system import TypingIndicator\n\nindicator = TypingIndicator()\nindicator.start()\n# ... AI is thinking ...\nindicator.stop()\n</code></pre>"},{"location":"api/components/chat/#typingindicator-methods","title":"TypingIndicator Methods","text":"Method Description <code>start()</code> Start animation <code>stop()</code> Stop animation"},{"location":"api/components/chat/#chatinput","title":"ChatInput","text":"<p>Message input with send button.</p> <p></p> <pre><code>from design_system import ChatInput\n\nchat_input = ChatInput()\nchat_input.message_sent.connect(lambda text: send_message(text))\n</code></pre>"},{"location":"api/components/chat/#chatinput-signals","title":"ChatInput Signals","text":"Signal Description <code>message_sent(text)</code> Message submitted"},{"location":"api/components/chat/#quickprompts","title":"QuickPrompts","text":"<p>Quick prompt suggestion buttons.</p> <pre><code>from design_system import QuickPrompts\n\nprompts = QuickPrompts()\nprompts.add_prompt(\"Summarize this document\")\nprompts.add_prompt(\"Find common themes\")\nprompts.add_prompt(\"Extract key quotes\")\n\nprompts.prompt_clicked.connect(lambda text: send_prompt(text))\n</code></pre>"},{"location":"api/components/chat/#quickprompts-methods","title":"QuickPrompts Methods","text":"Method Description <code>add_prompt(text)</code> Add a prompt button <code>clear()</code> Remove all prompts"},{"location":"api/components/chat/#quickprompts-signals","title":"QuickPrompts Signals","text":"Signal Description <code>prompt_clicked(text)</code> Prompt selected"},{"location":"api/components/chat/#codesuggestion","title":"CodeSuggestion","text":"<p>AI code suggestion display.</p> <p></p> <pre><code>from design_system import CodeSuggestion\n\nsuggestion = CodeSuggestion(\n    code_name=\"Theme A\",\n    code_color=\"#FFC107\",\n    confidence=0.85,\n    text_excerpt=\"relevant text from document...\"\n)\n\n# Signals\nsuggestion.accepted.connect(lambda: apply_suggestion())\nsuggestion.rejected.connect(lambda: dismiss_suggestion())\n</code></pre>"},{"location":"api/components/chat/#codesuggestion-properties","title":"CodeSuggestion Properties","text":"Property Type Default Description <code>code_name</code> str required Suggested code name <code>code_color</code> str required Code color <code>confidence</code> float required Confidence score (0-1) <code>text_excerpt</code> str <code>\"\"</code> Relevant text"},{"location":"api/components/chat/#codesuggestion-signals","title":"CodeSuggestion Signals","text":"Signal Description <code>accepted</code> Suggestion accepted <code>rejected</code> Suggestion rejected"},{"location":"api/components/chat/#aireasoningpanel","title":"AIReasoningPanel","text":"<p>AI reasoning explanation.</p> <pre><code>from design_system import AIReasoningPanel\n\npanel = AIReasoningPanel()\npanel.set_reasoning(\"Based on the context of...\")\n</code></pre>"},{"location":"api/components/chat/#aireasoningpanel-methods","title":"AIReasoningPanel Methods","text":"Method Description <code>set_reasoning(text)</code> Set reasoning text <code>clear()</code> Clear reasoning"},{"location":"api/components/chat/#confidencescore","title":"ConfidenceScore","text":"<p>Score visualization.</p> <pre><code>from design_system import ConfidenceScore\n\nscore = ConfidenceScore(value=0.92, label=\"Confidence\")\n</code></pre>"},{"location":"api/components/chat/#confidencescore-properties","title":"ConfidenceScore Properties","text":"Property Type Default Description <code>value</code> float required Score (0-1) <code>label</code> str <code>\"\"</code> Score label"},{"location":"api/components/chat/#chat-interface-example","title":"Chat Interface Example","text":"<p>Complete AI chat interface:</p> <pre><code>from PySide6.QtWidgets import QWidget, QVBoxLayout, QScrollArea\nfrom design_system import (\n    Panel, MessageBubble, ChatInput, QuickPrompts,\n    TypingIndicator, CodeSuggestion\n)\n\nclass AIChatPanel(Panel):\n    def __init__(self):\n        super().__init__()\n\n        # Message area\n        self.scroll = QScrollArea()\n        self.message_container = QWidget()\n        self.message_layout = QVBoxLayout(self.message_container)\n        self.scroll.setWidget(self.message_container)\n        self.add_widget(self.scroll)\n\n        # Typing indicator\n        self.typing = TypingIndicator()\n        self.typing.hide()\n        self.add_widget(self.typing)\n\n        # Quick prompts\n        self.prompts = QuickPrompts()\n        self.prompts.add_prompt(\"Summarize document\")\n        self.prompts.add_prompt(\"Find themes\")\n        self.prompts.add_prompt(\"Suggest codes\")\n        self.prompts.prompt_clicked.connect(self.send_message)\n        self.add_widget(self.prompts)\n\n        # Input\n        self.input = ChatInput()\n        self.input.message_sent.connect(self.send_message)\n        self.add_widget(self.input)\n\n    def send_message(self, text):\n        # Add user message\n        msg = MessageBubble(text=text, role=\"user\")\n        self.message_layout.addWidget(msg)\n\n        # Show typing indicator\n        self.typing.show()\n        self.typing.start()\n\n        # Send to AI and get response...\n        # self.call_ai(text)\n\n    def receive_response(self, text):\n        # Hide typing\n        self.typing.stop()\n        self.typing.hide()\n\n        # Add assistant message\n        msg = MessageBubble(text=text, role=\"assistant\")\n        self.message_layout.addWidget(msg)\n\n    def show_suggestion(self, suggestion_data):\n        suggestion = CodeSuggestion(\n            code_name=suggestion_data[\"code\"],\n            code_color=suggestion_data[\"color\"],\n            confidence=suggestion_data[\"confidence\"],\n            text_excerpt=suggestion_data[\"excerpt\"]\n        )\n        suggestion.accepted.connect(\n            lambda: self.apply_code(suggestion_data)\n        )\n        self.message_layout.addWidget(suggestion)\n</code></pre>"},{"location":"api/components/core/","title":"Core Components","text":"<p>Fundamental UI building blocks: buttons, inputs, labels, cards, and more.</p>"},{"location":"api/components/core/#button","title":"Button","text":"<p>Styled button with multiple variants and sizes.</p> <p></p> <p></p> <pre><code>from design_system import Button\n\n# Variants: primary, secondary, outline, ghost, danger, success, icon\nbutton = Button(\"Save\", variant=\"primary\")\nbutton = Button(\"Cancel\", variant=\"outline\")\nbutton = Button(\"Delete\", variant=\"danger\")\n\n# Sizes: sm, md, lg\nbutton = Button(\"Small\", size=\"sm\")\nbutton = Button(\"Large\", size=\"lg\")\n\n# Icon button\nbutton = Button(\"\", variant=\"icon\")\n\n# Connect click handler\nbutton.clicked.connect(lambda: print(\"Clicked!\"))\n</code></pre>"},{"location":"api/components/core/#button-properties","title":"Button Properties","text":"Property Type Default Description <code>text</code> str <code>\"\"</code> Button label <code>variant</code> str <code>\"primary\"</code> Visual style <code>size</code> str <code>\"md\"</code> Button size"},{"location":"api/components/core/#button-variants","title":"Button Variants","text":"Variant Use Case <code>primary</code> Primary actions (Save, Submit) <code>secondary</code> Secondary actions <code>outline</code> Alternative actions <code>ghost</code> Subtle actions <code>danger</code> Destructive actions (Delete) <code>success</code> Positive actions (Confirm) <code>icon</code> Icon-only buttons"},{"location":"api/components/core/#input","title":"Input","text":"<p>Text input field with validation support.</p> <p></p> <pre><code>from design_system import Input\n\ninput_field = Input(placeholder=\"Enter name...\")\n\n# Error state\ninput_field.set_error(True)\nis_error = input_field.is_error()\n\n# Get/set value\ntext = input_field.text()\ninput_field.setText(\"Hello\")\n</code></pre>"},{"location":"api/components/core/#input-properties","title":"Input Properties","text":"Property Type Default Description <code>placeholder</code> str <code>\"\"</code> Placeholder text"},{"location":"api/components/core/#input-methods","title":"Input Methods","text":"Method Returns Description <code>text()</code> str Get current text <code>setText(text)</code> None Set text value <code>set_error(bool)</code> None Set error state <code>is_error()</code> bool Check error state <code>clear()</code> None Clear input"},{"location":"api/components/core/#label","title":"Label","text":"<p>Text label with style variants.</p> <pre><code>from design_system import Label\n\n# Variants: default, muted, secondary, title, description, hint, error\ntitle = Label(\"Main Title\", variant=\"title\")\ndescription = Label(\"Some description\", variant=\"description\")\nhint = Label(\"Optional field\", variant=\"hint\")\nerror = Label(\"Invalid input\", variant=\"error\")\n</code></pre>"},{"location":"api/components/core/#label-variants","title":"Label Variants","text":"Variant Typography Use Case <code>default</code> Base, primary Standard text <code>title</code> 2xl, semibold Headings <code>description</code> Base, secondary Explanatory text <code>hint</code> Small, hint Help text <code>error</code> Small, error Error messages <code>muted</code> Small, disabled De-emphasized <code>secondary</code> Base, secondary Secondary text"},{"location":"api/components/core/#card","title":"Card","text":"<p>Container with elevation and shadow.</p> <p></p> <pre><code>from design_system import Card, CardHeader\n\n# Basic card\ncard = Card()\ncard.add_widget(Label(\"Content\"))\n\n# Card with header\ncard = Card()\nheader = CardHeader(title=\"Card Title\", description=\"Optional description\")\ncard.add_widget(header)\ncard.add_widget(Label(\"Body content\"))\n\n# Elevation levels: 1-4\ncard = Card(elevation=2)\n</code></pre>"},{"location":"api/components/core/#card-properties","title":"Card Properties","text":"Property Type Default Description <code>elevation</code> int <code>1</code> Shadow level (1-4)"},{"location":"api/components/core/#cardheader","title":"CardHeader","text":"<pre><code>from design_system import CardHeader\n\nheader = CardHeader(\n    title=\"Section Title\",\n    description=\"Optional description text\"\n)\n</code></pre>"},{"location":"api/components/core/#badge","title":"Badge","text":"<p>Small tag/label for status or counts.</p> <p></p> <pre><code>from design_system import Badge\n\n# Variants: default, secondary, outline, destructive, success, warning, info, primary\nbadge = Badge(\"New\", variant=\"primary\")\nbadge = Badge(\"3\", variant=\"info\")\nbadge = Badge(\"Error\", variant=\"destructive\")\n</code></pre>"},{"location":"api/components/core/#badge-variants","title":"Badge Variants","text":"Variant Color Use Case <code>default</code> Gray Neutral labels <code>primary</code> Primary Active items <code>secondary</code> Secondary Alternative <code>outline</code> Border only Subtle <code>destructive</code> Red Errors, warnings <code>success</code> Green Success states <code>warning</code> Yellow Cautions <code>info</code> Blue Information"},{"location":"api/components/core/#alert","title":"Alert","text":"<p>Callout component for messages.</p> <p></p> <pre><code>from design_system import Alert\n\n# Variants: default, destructive, success, warning, info\nalert = Alert(\n    title=\"Success!\",\n    description=\"Your changes have been saved.\",\n    variant=\"success\"\n)\n</code></pre>"},{"location":"api/components/core/#alert-properties","title":"Alert Properties","text":"Property Type Default Description <code>title</code> str <code>\"\"</code> Alert heading <code>description</code> str <code>\"\"</code> Alert body text <code>variant</code> str <code>\"default\"</code> Visual style"},{"location":"api/components/core/#avatar","title":"Avatar","text":"<p>Circular avatar with text or image.</p> <p></p> <pre><code>from design_system import Avatar\n\navatar = Avatar(text=\"JD\", size=40)  # Shows initials\n</code></pre>"},{"location":"api/components/core/#avatar-properties","title":"Avatar Properties","text":"Property Type Default Description <code>text</code> str <code>\"\"</code> Initials to display <code>size</code> int <code>40</code> Avatar diameter in pixels"},{"location":"api/components/core/#chip","title":"Chip","text":"<p>Tag with optional close button.</p> <p></p> <pre><code>from design_system import Chip\n\nchip = Chip(\"Python\", closable=True)\nchip.close_clicked.connect(lambda: print(\"Closed\"))\n</code></pre>"},{"location":"api/components/core/#chip-properties","title":"Chip Properties","text":"Property Type Default Description <code>text</code> str <code>\"\"</code> Chip label <code>closable</code> bool <code>False</code> Show close button"},{"location":"api/components/core/#chip-signals","title":"Chip Signals","text":"Signal Description <code>close_clicked</code> Emitted when close button clicked"},{"location":"api/components/core/#fileicon","title":"FileIcon","text":"<p>File type icon with colored background.</p> <p></p> <pre><code>from design_system import FileIcon\n\n# Types: text, audio, video, image, pdf\nicon = FileIcon(file_type=\"pdf\")\nicon = FileIcon(file_type=\"audio\")\n</code></pre>"},{"location":"api/components/core/#file-types","title":"File Types","text":"Type Color Icon <code>text</code> Blue Document <code>audio</code> Purple Microphone <code>video</code> Red Video <code>image</code> Green Image <code>pdf</code> Orange PDF"},{"location":"api/components/core/#separator","title":"Separator","text":"<p>Horizontal or vertical divider line.</p> <pre><code>from design_system import Separator\n\nh_sep = Separator(orientation=\"horizontal\")\nv_sep = Separator(orientation=\"vertical\")\n</code></pre>"},{"location":"api/components/core/#separator-properties","title":"Separator Properties","text":"Property Type Default Description <code>orientation</code> str <code>\"horizontal\"</code> Line direction"},{"location":"api/components/data-display/","title":"Data Display Components","text":"<p>Components for presenting data: tables, trees, cards, and lists.</p>"},{"location":"api/components/data-display/#datatable","title":"DataTable","text":"<p>Data table with selection support.</p> <p></p> <pre><code>from design_system import DataTable\n\ntable = DataTable(\n    headers=[\"Name\", \"Type\", \"Size\"],\n    checkable=True  # Enable row selection\n)\n\n# Set data\ntable.set_data([\n    {\"name\": \"file1.txt\", \"type\": \"text\", \"size\": \"10KB\"},\n    {\"name\": \"file2.pdf\", \"type\": \"pdf\", \"size\": \"2MB\"},\n])\n\n# Signals\ntable.row_clicked.connect(lambda idx, data: print(f\"Clicked row {idx}\"))\ntable.row_double_clicked.connect(lambda idx, data: print(f\"Double-clicked {idx}\"))\ntable.selection_changed.connect(lambda selected: print(f\"Selected: {selected}\"))\n\n# Methods\nselected = table.get_selected()\ntable.clear()\n</code></pre>"},{"location":"api/components/data-display/#datatable-properties","title":"DataTable Properties","text":"Property Type Default Description <code>headers</code> list <code>[]</code> Column headers <code>checkable</code> bool <code>False</code> Enable row selection"},{"location":"api/components/data-display/#datatable-signals","title":"DataTable Signals","text":"Signal Description <code>row_clicked(idx, data)</code> Row clicked <code>row_double_clicked(idx, data)</code> Row double-clicked <code>selection_changed(selected)</code> Selection changed"},{"location":"api/components/data-display/#codetree","title":"CodeTree","text":"<p>Hierarchical tree for qualitative codes.</p> <p></p> <pre><code>from design_system import CodeTree, CodeItem, CodeTreeNode\n\n# Define hierarchical structure using CodeItem data class\nitems = [\n    CodeItem(\n        id=\"1\",\n        name=\"Theme A\",\n        color=\"#FFC107\",\n        count=15,\n        children=[\n            CodeItem(id=\"1.1\", name=\"Sub-theme\", color=\"#FFD54F\", count=5),\n        ]\n    ),\n    CodeItem(id=\"2\", name=\"Theme B\", color=\"#4CAF50\", count=8),\n]\n\ntree = CodeTree()\ntree.set_items(items)\n\n# Signals\ntree.item_clicked.connect(lambda id: print(f\"Clicked: {id}\"))\ntree.item_double_clicked.connect(lambda id: print(f\"Edit: {id}\"))\ntree.item_expanded.connect(lambda id, expanded: print(f\"Expanded: {id} = {expanded}\"))\n\n# Methods\ntree.add_item(CodeItem(\"3\", \"New Code\", \"#2196F3\"), parent_id=\"1\")\ntree.remove_item(\"3\")\ntree.expand_item(\"1\", True)\n</code></pre>"},{"location":"api/components/data-display/#codeitem-data-class","title":"CodeItem Data Class","text":"<pre><code>from design_system import CodeItem\n\nitem = CodeItem(\n    id=\"unique-id\",\n    name=\"Code Name\",\n    color=\"#FFC107\",\n    count=10,\n    children=[]  # Nested CodeItems\n)\n</code></pre>"},{"location":"api/components/data-display/#codetree-signals","title":"CodeTree Signals","text":"Signal Description <code>item_clicked(id)</code> Item clicked <code>item_double_clicked(id)</code> Item double-clicked <code>item_expanded(id, expanded)</code> Item expand toggled"},{"location":"api/components/data-display/#infocard","title":"InfoCard","text":"<p>Information card with icon, supports collapsible content.</p> <pre><code>from design_system import InfoCard\n\ncard = InfoCard(\n    icon=\"mdi6.information\",\n    title=\"Total Files\",\n    description=\"127 files imported\",\n    collapsible=True\n)\n\n# Signal for collapse state changes\ncard.collapsed_changed.connect(lambda collapsed: print(f\"Collapsed: {collapsed}\"))\n</code></pre>"},{"location":"api/components/data-display/#infocard-properties","title":"InfoCard Properties","text":"Property Type Default Description <code>icon</code> str <code>None</code> Icon name <code>title</code> str <code>\"\"</code> Card title <code>description</code> str <code>\"\"</code> Card description <code>collapsible</code> bool <code>False</code> Enable collapse"},{"location":"api/components/data-display/#keyvaluelist","title":"KeyValueList","text":"<p>Key-value pairs display.</p> <p></p> <pre><code>from design_system import KeyValueList\n\nkvlist = KeyValueList()\nkvlist.set_items([\n    (\"Name\", \"Project Alpha\"),\n    (\"Created\", \"2024-01-15\"),\n    (\"Files\", \"42\"),\n])\n</code></pre>"},{"location":"api/components/data-display/#keyvaluelist-methods","title":"KeyValueList Methods","text":"Method Description <code>set_items(items)</code> Set key-value pairs <code>add_item(key, value)</code> Add single pair <code>clear()</code> Clear all items"},{"location":"api/components/data-display/#emptystate","title":"EmptyState","text":"<p>Placeholder for empty content.</p> <p></p> <pre><code>from design_system import EmptyState\n\nempty = EmptyState(\n    icon=\"mdi6.folder-open\",\n    title=\"No files yet\",\n    description=\"Import files to get started\"\n)\n</code></pre>"},{"location":"api/components/data-display/#emptystate-properties","title":"EmptyState Properties","text":"Property Type Default Description <code>icon</code> str <code>None</code> Icon name <code>title</code> str <code>\"\"</code> Empty state title <code>description</code> str <code>\"\"</code> Explanatory text"},{"location":"api/components/data-display/#heatmapgrid-heatmapcell","title":"HeatMapGrid / HeatMapCell","text":"<p>Heatmap visualization with interactive cells.</p> <pre><code>from design_system import HeatMapGrid, HeatMapCell\n\ngrid = HeatMapGrid(rows=5, cols=5)\ngrid.set_value(row=0, col=0, value=0.8)\n\n# Signal for cell interaction\ngrid.cell_clicked.connect(lambda row, col, value: print(f\"Cell ({row},{col}): {value}\"))\n\n# Individual cell\ncell = HeatMapCell(value=0.5)\ncell.clicked.connect(lambda value: print(f\"Value: {value}\"))\n</code></pre>"},{"location":"api/components/data-display/#codedetailcard","title":"CodeDetailCard","text":"<p>Detailed code information card with actions.</p> <pre><code>from design_system import CodeDetailCard\n\ncard = CodeDetailCard(\n    code_name=\"Theme A\",\n    code_color=\"#FFC107\",\n    description=\"Description of the code\",\n    count=15\n)\n\n# Signals\ncard.edit_clicked.connect(lambda: edit_code())\ncard.delete_clicked.connect(lambda: delete_code())\n</code></pre>"},{"location":"api/components/data-display/#filecell-entitycell","title":"FileCell / EntityCell","text":"<p>Table cell widgets for file and entity display.</p> <pre><code>from design_system import FileCell, EntityCell\n\n# File cell with icon\nfile_cell = FileCell(filename=\"document.txt\", file_type=\"text\")\nfile_cell.clicked.connect(lambda: open_file())\n\n# Entity cell\nentity_cell = EntityCell(name=\"Person A\", entity_type=\"participant\")\nentity_cell.clicked.connect(lambda: show_entity())\n</code></pre>"},{"location":"api/components/data-display/#statrow","title":"StatRow","text":"<p>Statistics row display.</p> <pre><code>from design_system import StatRow\n\nrow = StatRow()\nrow.add_stat(\"Files\", \"42\")\nrow.add_stat(\"Codes\", \"15\")\nrow.add_stat(\"Cases\", \"8\")\n</code></pre>"},{"location":"api/components/document/","title":"Document Components","text":"<p>Document display and editing components.</p>"},{"location":"api/components/document/#textpanel","title":"TextPanel","text":"<p>Text document display with optional line numbers.</p> <p></p> <pre><code>from design_system import TextPanel, LineNumberArea\n\npanel = TextPanel(\n    title=\"Interview Transcript\",\n    badge_text=\"Coded\",\n    show_header=True,\n    editable=False,\n    show_line_numbers=True\n)\n\npanel.set_text(\"Document content here...\")\ntext = panel.get_text()\npanel.set_stats([(\"Words\", \"1,234\"), (\"Codes\", \"15\")])\n\npanel.text_selected.connect(lambda text, start, end: print(f\"Selected: {text}\"))\n</code></pre>"},{"location":"api/components/document/#textpanel-properties","title":"TextPanel Properties","text":"Property Type Default Description <code>title</code> str <code>\"\"</code> Panel title <code>badge_text</code> str <code>None</code> Status badge <code>show_header</code> bool <code>True</code> Show header <code>editable</code> bool <code>False</code> Allow editing <code>show_line_numbers</code> bool <code>True</code> Show line numbers"},{"location":"api/components/document/#textpanel-methods","title":"TextPanel Methods","text":"Method Description <code>set_text(text)</code> Set document content <code>get_text()</code> Get document content <code>set_stats(stats)</code> Set stat pairs"},{"location":"api/components/document/#textpanel-signals","title":"TextPanel Signals","text":"Signal Description <code>text_selected(text, start, end)</code> Text selected"},{"location":"api/components/document/#transcriptpanel","title":"TranscriptPanel","text":"<p>Transcript display with segments.</p> <p></p> <pre><code>from design_system import TranscriptPanel, TranscriptSegment\n\npanel = TranscriptPanel()\n\n# TranscriptSegment data class for transcript entries\npanel.add_segment(TranscriptSegment(\n    speaker=\"Interviewer\",\n    timestamp=\"00:00:15\",\n    text=\"Can you describe your experience?\"\n))\npanel.add_segment(TranscriptSegment(\n    speaker=\"Participant\",\n    timestamp=\"00:00:20\",\n    text=\"Well, I started by...\"\n))\n</code></pre>"},{"location":"api/components/document/#transcriptsegment-data-class","title":"TranscriptSegment Data Class","text":"<pre><code>from design_system import TranscriptSegment\n\nsegment = TranscriptSegment(\n    speaker=\"Speaker Name\",\n    timestamp=\"00:00:00\",\n    text=\"Segment content\"\n)\n</code></pre>"},{"location":"api/components/document/#transcriptpanel-methods","title":"TranscriptPanel Methods","text":"Method Description <code>add_segment(segment)</code> Add transcript segment <code>clear()</code> Clear all segments"},{"location":"api/components/document/#selectionpopup","title":"SelectionPopup","text":"<p>Context popup for text selections.</p> <pre><code>from design_system import SelectionPopup\n\npopup = SelectionPopup()\npopup.add_action(\"Apply Code\", lambda: apply_code())\npopup.add_action(\"Add Memo\", lambda: add_memo())\npopup.show_at(x, y)\n</code></pre>"},{"location":"api/components/document/#selectionpopup-methods","title":"SelectionPopup Methods","text":"Method Description <code>add_action(label, callback)</code> Add action button <code>show_at(x, y)</code> Show at coordinates <code>hide()</code> Hide popup"},{"location":"api/components/document/#textcolor","title":"TextColor","text":"<p>Text color class for text highlighting.</p> <pre><code>from design_system import TextColor\n\ncolor = TextColor(foreground=\"#000000\", background=\"#FFFF00\")\n</code></pre>"},{"location":"api/components/document/#textcolor-properties","title":"TextColor Properties","text":"Property Type Description <code>foreground</code> str Text color <code>background</code> str Background color"},{"location":"api/components/document/#document-viewer-example","title":"Document Viewer Example","text":"<p>Complete document viewer with coding:</p> <pre><code>from design_system import (\n    Panel, PanelHeader, TextPanel, SelectionPopup,\n    CodeTree, Button\n)\n\nclass DocumentViewer(Panel):\n    def __init__(self):\n        super().__init__()\n\n        # Header\n        self.add_widget(PanelHeader(title=\"Document\"))\n\n        # Text panel\n        self.text_panel = TextPanel(\n            show_header=True,\n            editable=False,\n            show_line_numbers=True\n        )\n        self.text_panel.text_selected.connect(self.on_selection)\n        self.add_widget(self.text_panel)\n\n        # Selection popup\n        self.popup = SelectionPopup()\n        self.popup.add_action(\"Apply Code\", self.apply_code)\n        self.popup.add_action(\"Add Memo\", self.add_memo)\n\n        self.selected_text = \"\"\n        self.selection_range = (0, 0)\n\n    def load_document(self, text, title=\"Document\"):\n        self.text_panel.set_text(text)\n\n    def on_selection(self, text, start, end):\n        self.selected_text = text\n        self.selection_range = (start, end)\n\n        # Show popup near selection\n        cursor_pos = self.text_panel.cursor_position()\n        self.popup.show_at(cursor_pos.x(), cursor_pos.y())\n\n    def apply_code(self):\n        self.popup.hide()\n        # Open code selection dialog\n        print(f\"Apply code to: {self.selected_text}\")\n\n    def add_memo(self):\n        self.popup.hide()\n        # Open memo editor\n        print(f\"Add memo for: {self.selected_text}\")\n</code></pre>"},{"location":"api/components/feedback/","title":"Feedback Components","text":"<p>User feedback components: spinners, toasts, progress bars, and stat cards.</p>"},{"location":"api/components/feedback/#spinner-loadingindicator-loadingoverlay","title":"Spinner / LoadingIndicator / LoadingOverlay","text":"<p>Loading spinners.</p> <p></p> <pre><code>from design_system import Spinner, LoadingIndicator, LoadingOverlay\n\n# Simple Spinner widget\nspinner = Spinner(size=24, color=\"#009688\")\nspinner.start()\nspinner.stop()\n\n# LoadingIndicator combines spinner with text\nloading = LoadingIndicator(text=\"Loading files...\")\nloading.start()\nloading.stop()\n\n# LoadingOverlay covers parent widget with loading state\noverlay = LoadingOverlay(parent=main_window)\noverlay.show()\n# ... loading ...\noverlay.hide()\n</code></pre>"},{"location":"api/components/feedback/#spinner-properties","title":"Spinner Properties","text":"Property Type Default Description <code>size</code> int <code>24</code> Spinner diameter <code>color</code> str <code>None</code> Spinner color"},{"location":"api/components/feedback/#loadingindicator-properties","title":"LoadingIndicator Properties","text":"Property Type Default Description <code>text</code> str <code>\"\"</code> Loading message"},{"location":"api/components/feedback/#skeletonloader","title":"SkeletonLoader","text":"<p>Skeleton loading placeholder.</p> <pre><code>from design_system import SkeletonLoader\n\nskeleton = SkeletonLoader(width=200, height=20)\n</code></pre>"},{"location":"api/components/feedback/#skeletonloader-properties","title":"SkeletonLoader Properties","text":"Property Type Default Description <code>width</code> int <code>100</code> Skeleton width <code>height</code> int <code>20</code> Skeleton height"},{"location":"api/components/feedback/#toast","title":"Toast","text":"<p>Popup notifications.</p> <p></p> <pre><code>from design_system import Toast, ToastManager, ToastContainer\n\n# Show toast\ntoast = Toast(\n    message=\"File saved successfully\",\n    variant=\"success\",  # success, error, warning, info\n    duration=3000,      # ms, 0 for infinite\n    closable=True\n)\ntoast.show_toast()\n\n# Using manager (handles positioning)\nToastManager.show(\"Operation complete\", variant=\"success\")\n\n# ToastContainer manages multiple toasts with stacking\ncontainer = ToastContainer(parent=window)\ncontainer.add_toast(toast)\n</code></pre>"},{"location":"api/components/feedback/#toast-properties","title":"Toast Properties","text":"Property Type Default Description <code>message</code> str required Toast message <code>variant</code> str <code>\"info\"</code> Visual style <code>duration</code> int <code>3000</code> Display time (ms) <code>closable</code> bool <code>True</code> Show close button"},{"location":"api/components/feedback/#toast-variants","title":"Toast Variants","text":"Variant Color Use Case <code>success</code> Green Success messages <code>error</code> Red Error messages <code>warning</code> Yellow Warnings <code>info</code> Blue Information"},{"location":"api/components/feedback/#progressbar","title":"ProgressBar","text":"<p>Progress indicator.</p> <p></p> <pre><code>from design_system import ProgressBar, ProgressBarLabeled, ProgressBarWidget\n\n# Simple progress\nprogress = ProgressBar()\nprogress.setValue(50)\nprogress.setMaxValue(100)\n\n# With label\nlabeled = ProgressBarLabeled(label=\"Importing files...\")\nlabeled.setValue(75)\n\n# Base widget\nwidget = ProgressBarWidget()\nwidget.setValue(60)\n</code></pre>"},{"location":"api/components/feedback/#progressbar-methods","title":"ProgressBar Methods","text":"Method Description <code>setValue(value)</code> Set current value <code>setMaxValue(value)</code> Set maximum value <code>value()</code> Get current value"},{"location":"api/components/feedback/#relevancescorebar","title":"RelevanceScoreBar","text":"<p>Score indicator bar for 0-1 relevance values.</p> <pre><code>from design_system import RelevanceScoreBar, RelevanceBarWidget, ScoreIndicator\n\n# Simple relevance bar\nbar = RelevanceScoreBar(score=0.85)\nbar.set_score(0.92)\n\n# Variants: default, success, warning, error\nbar = RelevanceScoreBar(score=0.75, variant=\"success\")\n\n# Container widget\nrelevance = RelevanceBarWidget()\nrelevance.set_score(0.68)\n\n# Visual score indicator\nindicator = ScoreIndicator(score=0.9)\nindicator.set_score(0.5)\n</code></pre>"},{"location":"api/components/feedback/#relevancescorebar-properties","title":"RelevanceScoreBar Properties","text":"Property Type Default Description <code>score</code> float <code>0</code> Score value (0-1) <code>variant</code> str <code>\"default\"</code> Visual style"},{"location":"api/components/feedback/#statcard","title":"StatCard","text":"<p>Statistics display with trend.</p> <p></p> <pre><code>from design_system import StatCard, StatCardRow, MiniStatCard\n\ncard = StatCard(\n    value=\"1,234\",\n    label=\"Total Codes\",\n    trend=\"+12%\",\n    trend_direction=\"up\",  # or \"down\"\n    icon=\"mdi6.tag\",\n    color=\"#009688\"\n)\n\n# StatCardRow arranges multiple stats horizontally\nrow = StatCardRow()\nrow.add_stat(StatCard(value=\"100\", label=\"Files\"))\nrow.add_stat(StatCard(value=\"25\", label=\"Codes\"))\n\n# MiniStatCard is a compact version for dashboards\nmini = MiniStatCard(value=\"42\", label=\"Files\")\n</code></pre>"},{"location":"api/components/feedback/#statcard-properties","title":"StatCard Properties","text":"Property Type Default Description <code>value</code> str required Display value <code>label</code> str required Stat label <code>trend</code> str <code>None</code> Trend text (e.g., \"+12%\") <code>trend_direction</code> str <code>None</code> <code>\"up\"</code> or <code>\"down\"</code> <code>icon</code> str <code>None</code> Icon name <code>color</code> str <code>None</code> Accent color"},{"location":"api/components/feedback/#feedback-example","title":"Feedback Example","text":"<p>Loading state management:</p> <pre><code>from design_system import (\n    Panel, LoadingOverlay, ProgressBarLabeled,\n    Toast, ToastManager\n)\n\nclass DataLoader(Panel):\n    def __init__(self):\n        super().__init__()\n\n        # Loading overlay\n        self.overlay = LoadingOverlay(parent=self)\n\n        # Progress bar\n        self.progress = ProgressBarLabeled(label=\"Loading...\")\n        self.progress.hide()\n        self.add_widget(self.progress)\n\n    def start_loading(self, total_items):\n        self.overlay.show()\n        self.progress.show()\n        self.progress.setMaxValue(total_items)\n        self.progress.setValue(0)\n\n    def update_progress(self, current, message=\"\"):\n        self.progress.setValue(current)\n        if message:\n            self.progress.set_label(message)\n\n    def finish_loading(self, success=True):\n        self.overlay.hide()\n        self.progress.hide()\n\n        if success:\n            ToastManager.show(\"Data loaded successfully\", variant=\"success\")\n        else:\n            ToastManager.show(\"Failed to load data\", variant=\"error\")\n</code></pre>"},{"location":"api/components/forms/","title":"Form Components","text":"<p>User input components: search boxes, selects, textareas, and pickers.</p>"},{"location":"api/components/forms/#searchbox","title":"SearchBox","text":"<p>Search input with icon.</p> <p></p> <pre><code>from design_system import SearchBox\n\nsearch = SearchBox(placeholder=\"Search files...\")\n\n# Signals\nsearch.text_changed.connect(lambda text: print(f\"Typing: {text}\"))\nsearch.search_submitted.connect(lambda text: print(f\"Search: {text}\"))\n\n# Methods\ntext = search.text()\nsearch.setText(\"query\")\nsearch.clear()\n</code></pre>"},{"location":"api/components/forms/#searchbox-signals","title":"SearchBox Signals","text":"Signal Description <code>text_changed(text)</code> Emitted as user types <code>search_submitted(text)</code> Emitted on Enter press"},{"location":"api/components/forms/#select","title":"Select","text":"<p>Dropdown selection.</p> <p></p> <pre><code>from design_system import Select\n\nselect = Select(placeholder=\"Choose option...\")\nselect.add_items([\"Option 1\", \"Option 2\", \"Option 3\"])\nselect.value_changed.connect(lambda value: print(f\"Selected: {value}\"))\n</code></pre>"},{"location":"api/components/forms/#select-methods","title":"Select Methods","text":"Method Description <code>add_items(items)</code> Add list of options <code>current_value()</code> Get selected value <code>set_value(value)</code> Set selected value <code>clear()</code> Clear selection"},{"location":"api/components/forms/#select-signals","title":"Select Signals","text":"Signal Description <code>value_changed(value)</code> Emitted when selection changes"},{"location":"api/components/forms/#multiselect","title":"MultiSelect","text":"<p>Multiple selection dropdown.</p> <pre><code>from design_system import MultiSelect\n\nmulti = MultiSelect()\nmulti.add_items([\"Tag 1\", \"Tag 2\", \"Tag 3\"])\n# User can select multiple items\n</code></pre>"},{"location":"api/components/forms/#multiselect-methods","title":"MultiSelect Methods","text":"Method Description <code>add_items(items)</code> Add options <code>selected_items()</code> Get selected values <code>set_selected(items)</code> Set selected values"},{"location":"api/components/forms/#textarea","title":"Textarea","text":"<p>Multi-line text input.</p> <p></p> <pre><code>from design_system import Textarea\n\ntextarea = Textarea(placeholder=\"Enter description...\")\ntext = textarea.toPlainText()\ntextarea.setPlainText(\"Content here\")\n</code></pre>"},{"location":"api/components/forms/#textarea-properties","title":"Textarea Properties","text":"Property Type Default Description <code>placeholder</code> str <code>\"\"</code> Placeholder text"},{"location":"api/components/forms/#numberinput","title":"NumberInput","text":"<p>Numeric input with spin controls.</p> <pre><code>from design_system import NumberInput\n\nnumber = NumberInput(minimum=0, maximum=100, value=50)\n</code></pre>"},{"location":"api/components/forms/#numberinput-properties","title":"NumberInput Properties","text":"Property Type Default Description <code>minimum</code> int <code>0</code> Minimum value <code>maximum</code> int <code>100</code> Maximum value <code>value</code> int <code>0</code> Initial value"},{"location":"api/components/forms/#rangeslider","title":"RangeSlider","text":"<p>Range selection slider.</p> <pre><code>from design_system import RangeSlider\n\nslider = RangeSlider(minimum=0, maximum=100)\nslider.valueChanged.connect(lambda value: print(f\"Value: {value}\"))\n</code></pre>"},{"location":"api/components/forms/#rangeslider-properties","title":"RangeSlider Properties","text":"Property Type Default Description <code>minimum</code> int <code>0</code> Minimum value <code>maximum</code> int <code>100</code> Maximum value"},{"location":"api/components/forms/#colorpicker","title":"ColorPicker","text":"<p>Color selection widget.</p> <p></p> <pre><code>from design_system import ColorPicker\n\npicker = ColorPicker()\npicker.color_changed.connect(lambda color: print(f\"Color: {color}\"))\n</code></pre>"},{"location":"api/components/forms/#colorpicker-signals","title":"ColorPicker Signals","text":"Signal Description <code>color_changed(color)</code> Emitted when color selected"},{"location":"api/components/forms/#formgroup","title":"FormGroup","text":"<p>Grouped form fields with label.</p> <p></p> <pre><code>from design_system import FormGroup, Input\n\ngroup = FormGroup(label=\"User Details\")\ngroup.add_widget(Input(placeholder=\"Name\"))\ngroup.add_widget(Input(placeholder=\"Email\"))\n</code></pre>"},{"location":"api/components/forms/#formgroup-properties","title":"FormGroup Properties","text":"Property Type Default Description <code>label</code> str <code>\"\"</code> Group label"},{"location":"api/components/forms/#coderselector","title":"CoderSelector","text":"<p>Coder/user selection dropdown.</p> <pre><code>from design_system import CoderSelector\n\nselector = CoderSelector()\n# Populated with available coders\n</code></pre>"},{"location":"api/components/forms/#form-example","title":"Form Example","text":"<p>Complete form with validation:</p> <pre><code>from PySide6.QtWidgets import QWidget, QVBoxLayout\nfrom design_system import (\n    Card, CardHeader, FormGroup, Input, Select,\n    Textarea, Button, Label\n)\n\nclass ContactForm(QWidget):\n    def __init__(self):\n        super().__init__()\n        layout = QVBoxLayout(self)\n\n        card = Card()\n        card.add_widget(CardHeader(title=\"Contact Form\"))\n\n        # Name field\n        name_group = FormGroup(label=\"Name\")\n        self.name_input = Input(placeholder=\"Enter your name\")\n        name_group.add_widget(self.name_input)\n        card.add_widget(name_group)\n\n        # Category select\n        category_group = FormGroup(label=\"Category\")\n        self.category_select = Select(placeholder=\"Select category\")\n        self.category_select.add_items([\"General\", \"Support\", \"Sales\"])\n        category_group.add_widget(self.category_select)\n        card.add_widget(category_group)\n\n        # Message\n        message_group = FormGroup(label=\"Message\")\n        self.message_input = Textarea(placeholder=\"Enter your message\")\n        message_group.add_widget(self.message_input)\n        card.add_widget(message_group)\n\n        # Submit button\n        submit_btn = Button(\"Submit\", variant=\"primary\")\n        submit_btn.clicked.connect(self.submit)\n        card.add_widget(submit_btn)\n\n        layout.addWidget(card)\n\n    def submit(self):\n        name = self.name_input.text()\n        category = self.category_select.current_value()\n        message = self.message_input.toPlainText()\n\n        if not name:\n            self.name_input.set_error(True)\n            return\n\n        print(f\"Submitted: {name}, {category}, {message}\")\n</code></pre>"},{"location":"api/components/icons/","title":"Icons","text":"<p>Material Design Icons via qtawesome (mdi6 prefix).</p>"},{"location":"api/components/icons/#icon","title":"Icon","text":"<p>Icon widget for displaying Material Design Icons.</p> <pre><code>from design_system import Icon, IconText, icon, get_pixmap, get_qicon\n\n# Icon widget\nfolder_icon = Icon(\"mdi6.folder\", size=24, color=\"#009688\")\nfolder_icon.set_color(\"#FF5722\")\nfolder_icon.set_size(32)\n</code></pre>"},{"location":"api/components/icons/#icon-properties","title":"Icon Properties","text":"Property Type Default Description <code>name</code> str required Icon name (mdi6.xxx) <code>size</code> int <code>24</code> Icon size in pixels <code>color</code> str <code>None</code> Icon color (hex)"},{"location":"api/components/icons/#icon-methods","title":"Icon Methods","text":"Method Description <code>set_color(color)</code> Update icon color <code>set_size(size)</code> Update icon size"},{"location":"api/components/icons/#icontext","title":"IconText","text":"<p>Icon and text side by side.</p> <pre><code>from design_system import IconText\n\nitem = IconText(icon=\"mdi6.file\", text=\"document.txt\", icon_size=20)\n</code></pre>"},{"location":"api/components/icons/#icontext-properties","title":"IconText Properties","text":"Property Type Default Description <code>icon</code> str required Icon name <code>text</code> str required Text label <code>icon_size</code> int <code>20</code> Icon size"},{"location":"api/components/icons/#factory-functions","title":"Factory Functions","text":""},{"location":"api/components/icons/#icon_1","title":"icon()","text":"<p>Create an icon widget.</p> <pre><code>from design_system import icon\n\nicon_widget = icon(\"mdi6.home\", size=20, color=\"#000\")\n</code></pre>"},{"location":"api/components/icons/#get_pixmap","title":"get_pixmap()","text":"<p>Get a QPixmap for use in other widgets.</p> <pre><code>from design_system import get_pixmap\n\npixmap = get_pixmap(\"mdi6.save\", size=24, color=\"#009688\")\nlabel.setPixmap(pixmap)\n</code></pre>"},{"location":"api/components/icons/#get_qicon","title":"get_qicon()","text":"<p>Get a QIcon for use in menus, buttons, etc.</p> <pre><code>from design_system import get_qicon\n\nqicon = get_qicon(\"mdi6.settings\", color=\"#666\")\naction.setIcon(qicon)\nbutton.setIcon(qicon)\n</code></pre>"},{"location":"api/components/icons/#common-icon-names","title":"Common Icon Names","text":""},{"location":"api/components/icons/#navigation","title":"Navigation","text":"Icon Name Description \ud83c\udfe0 <code>mdi6.home</code> Home \u2630 <code>mdi6.menu</code> Menu \u2190 <code>mdi6.arrow-left</code> Back \u203a <code>mdi6.chevron-right</code> Expand \u2191 <code>mdi6.arrow-up</code> Up \u2193 <code>mdi6.arrow-down</code> Down"},{"location":"api/components/icons/#actions","title":"Actions","text":"Icon Name Description + <code>mdi6.plus</code> Add \ud83d\uddd1 <code>mdi6.delete</code> Delete \u270f <code>mdi6.pencil</code> Edit \u2713 <code>mdi6.check</code> Confirm \u2715 <code>mdi6.close</code> Close \ud83d\udcbe <code>mdi6.content-save</code> Save \u21bb <code>mdi6.refresh</code> Refresh"},{"location":"api/components/icons/#files","title":"Files","text":"Icon Name Description \ud83d\udcc4 <code>mdi6.file</code> File \ud83d\udcc1 <code>mdi6.folder</code> Folder \ud83d\udcc2 <code>mdi6.folder-open</code> Open folder \ud83d\udcdd <code>mdi6.file-document</code> Document \ud83d\uddbc <code>mdi6.file-image</code> Image file \ud83d\udcca <code>mdi6.file-chart</code> Chart file"},{"location":"api/components/icons/#media","title":"Media","text":"Icon Name Description \u25b6 <code>mdi6.play</code> Play \u23f8 <code>mdi6.pause</code> Pause \u23f9 <code>mdi6.stop</code> Stop \ud83d\udd0a <code>mdi6.volume-high</code> Volume \ud83c\udfa4 <code>mdi6.microphone</code> Microphone"},{"location":"api/components/icons/#status","title":"Status","text":"Icon Name Description \u2713 <code>mdi6.check-circle</code> Success \u26a0 <code>mdi6.alert</code> Warning \u2715 <code>mdi6.close-circle</code> Error \u2139 <code>mdi6.information</code> Info \u23f3 <code>mdi6.loading</code> Loading"},{"location":"api/components/icons/#ui","title":"UI","text":"Icon Name Description \ud83d\udd0d <code>mdi6.magnify</code> Search \u2699 <code>mdi6.cog</code> Settings \ud83d\udc64 <code>mdi6.account</code> User \ud83c\udff7 <code>mdi6.tag</code> Tag \u22ee <code>mdi6.dots-vertical</code> More options"},{"location":"api/components/icons/#finding-icons","title":"Finding Icons","text":"<p>The design system uses Material Design Icons from the Pictogrammers library.</p> <ol> <li>Visit pictogrammers.com/library/mdi/</li> <li>Search for an icon</li> <li>Use the name with <code>mdi6.</code> prefix</li> </ol> <p>Example: The \"folder\" icon becomes <code>mdi6.folder</code></p>"},{"location":"api/components/icons/#usage-examples","title":"Usage Examples","text":""},{"location":"api/components/icons/#button-with-icon","title":"Button with Icon","text":"<pre><code>from design_system import Button, get_qicon\n\nbutton = Button(\"Save\")\nbutton.setIcon(get_qicon(\"mdi6.content-save\"))\n</code></pre>"},{"location":"api/components/icons/#menu-item-with-icon","title":"Menu Item with Icon","text":"<pre><code>from PySide6.QtWidgets import QAction\nfrom design_system import get_qicon\n\naction = QAction(\"Open\")\naction.setIcon(get_qicon(\"mdi6.folder-open\"))\nmenu.addAction(action)\n</code></pre>"},{"location":"api/components/icons/#tree-item-with-icon","title":"Tree Item with Icon","text":"<pre><code>from PySide6.QtWidgets import QTreeWidgetItem\nfrom design_system import get_qicon\n\nitem = QTreeWidgetItem([\"Documents\"])\nitem.setIcon(0, get_qicon(\"mdi6.folder\"))\n</code></pre>"},{"location":"api/components/icons/#status-indicator","title":"Status Indicator","text":"<pre><code>from design_system import Icon\n\ndef get_status_icon(status: str) -&gt; Icon:\n    icons = {\n        \"success\": (\"mdi6.check-circle\", \"#4CAF50\"),\n        \"warning\": (\"mdi6.alert\", \"#FF9800\"),\n        \"error\": (\"mdi6.close-circle\", \"#F44336\"),\n        \"info\": (\"mdi6.information\", \"#2196F3\"),\n    }\n    name, color = icons.get(status, (\"mdi6.help-circle\", \"#9E9E9E\"))\n    return Icon(name, color=color)\n</code></pre>"},{"location":"api/components/layout/","title":"Layout Components","text":"<p>Application structure components: containers, panels, sidebars, and toolbars.</p>"},{"location":"api/components/layout/#appcontainer","title":"AppContainer","text":"<p>Main application container with section management.</p> <pre><code>from design_system import AppContainer, TitleBar, MenuBar, Toolbar, StatusBar, MainContent\n\napp = AppContainer()\napp.set_title_bar(TitleBar(title=\"QualCoder\"))\napp.set_menu_bar(MenuBar())\napp.set_toolbar(Toolbar())\napp.set_content(MainContent())  # Central content area\napp.set_status_bar(StatusBar())\n</code></pre>"},{"location":"api/components/layout/#appcontainer-methods","title":"AppContainer Methods","text":"Method Description <code>set_title_bar(widget)</code> Set the title bar <code>set_menu_bar(widget)</code> Set the menu bar <code>set_toolbar(widget)</code> Set the toolbar <code>set_content(widget)</code> Set central content <code>set_status_bar(widget)</code> Set the status bar"},{"location":"api/components/layout/#titlebar","title":"TitleBar","text":"<p>Application title bar.</p> <pre><code>from design_system import TitleBar\n\ntitle_bar = TitleBar(title=\"QualCoder v2\")\ntitle_bar.set_title(\"New Title\")\n</code></pre>"},{"location":"api/components/layout/#titlebar-properties","title":"TitleBar Properties","text":"Property Type Default Description <code>title</code> str <code>\"\"</code> Application title"},{"location":"api/components/layout/#menubar","title":"MenuBar","text":"<p>Application menu bar container.</p> <pre><code>from design_system import MenuBar\n\nmenu_bar = MenuBar()\nmenu_bar.add_menu(\"File\")\nmenu_bar.add_menu(\"Edit\")\nmenu_bar.add_menu(\"View\")\n</code></pre>"},{"location":"api/components/layout/#menubar-methods","title":"MenuBar Methods","text":"Method Returns Description <code>add_menu(name)</code> QMenu Add a menu"},{"location":"api/components/layout/#maincontent","title":"MainContent","text":"<p>Main content area container.</p> <pre><code>from design_system import MainContent\n\ncontent = MainContent()\ncontent.add_widget(panel)\n</code></pre>"},{"location":"api/components/layout/#panel","title":"Panel","text":"<p>Side panel with header.</p> <p></p> <pre><code>from design_system import Panel, PanelHeader\n\npanel = Panel()\nheader = PanelHeader(title=\"Properties\")\npanel.add_widget(header)\npanel.add_widget(content)\n</code></pre>"},{"location":"api/components/layout/#panelheader","title":"PanelHeader","text":"<pre><code>from design_system import PanelHeader\n\nheader = PanelHeader(title=\"Section Title\")\n</code></pre>"},{"location":"api/components/layout/#sidebar","title":"Sidebar","text":"<p>Collapsible sidebar.</p> <p></p> <pre><code>from design_system import Sidebar\n\nsidebar = Sidebar()\nsidebar.add_widget(navigation)\n</code></pre>"},{"location":"api/components/layout/#toolbar","title":"Toolbar","text":"<p>Tool button container.</p> <p></p> <pre><code>from design_system import Toolbar, ToolbarGroup, ToolbarButton\n\ntoolbar = Toolbar()\n\n# Add groups of buttons using ToolbarGroup\nfile_group = ToolbarGroup()\nfile_group.add_widget(ToolbarButton(\"mdi6.folder-open\", \"Open\"))\nfile_group.add_widget(ToolbarButton(\"mdi6.content-save\", \"Save\"))\ntoolbar.add_widget(file_group)\n</code></pre>"},{"location":"api/components/layout/#toolbarbutton","title":"ToolbarButton","text":"<pre><code>from design_system import ToolbarButton\n\nbtn = ToolbarButton(icon=\"mdi6.play\", tooltip=\"Play\")\nbtn.clicked.connect(play_handler)\n</code></pre> Property Type Default Description <code>icon</code> str required Icon name <code>tooltip</code> str <code>\"\"</code> Hover tooltip"},{"location":"api/components/layout/#toolbargroup","title":"ToolbarGroup","text":"<p>Groups related toolbar buttons together.</p> <pre><code>from design_system import ToolbarGroup, ToolbarButton\n\ngroup = ToolbarGroup()\ngroup.add_widget(ToolbarButton(\"mdi6.undo\", \"Undo\"))\ngroup.add_widget(ToolbarButton(\"mdi6.redo\", \"Redo\"))\n</code></pre>"},{"location":"api/components/layout/#statusbar","title":"StatusBar","text":"<p>Bottom status bar.</p> <pre><code>from design_system import StatusBar, Label\n\nstatus = StatusBar()\nstatus.add_widget(Label(\"Ready\"))\n</code></pre>"},{"location":"api/components/layout/#tabbar","title":"TabBar","text":"<p>Tab bar component for window/panel tabs.</p> <pre><code>from design_system import TabBar\n\ntab_bar = TabBar()\ntab_bar.add_tab(\"Tab 1\", active=True)\ntab_bar.add_tab(\"Tab 2\")\ntab_bar.tab_changed.connect(lambda index: switch_content(index))\n</code></pre>"},{"location":"api/components/layout/#tabbar-methods","title":"TabBar Methods","text":"Method Description <code>add_tab(name, active=False)</code> Add a tab"},{"location":"api/components/layout/#tabbar-signals","title":"TabBar Signals","text":"Signal Description <code>tab_changed(index)</code> Emitted when active tab changes"},{"location":"api/components/layout/#layout-example","title":"Layout Example","text":"<p>Complete application layout:</p> <pre><code>from design_system import (\n    AppContainer, TitleBar, MenuBar, Toolbar, StatusBar,\n    MainContent, Sidebar, Panel, PanelHeader,\n    ToolbarGroup, ToolbarButton, Label\n)\n\n# Create container\napp = AppContainer()\n\n# Title bar\napp.set_title_bar(TitleBar(title=\"QualCoder\"))\n\n# Menu bar\nmenu_bar = MenuBar()\nmenu_bar.add_menu(\"File\")\nmenu_bar.add_menu(\"Edit\")\napp.set_menu_bar(menu_bar)\n\n# Toolbar\ntoolbar = Toolbar()\nfile_group = ToolbarGroup()\nfile_group.add_widget(ToolbarButton(\"mdi6.folder-open\", \"Open\"))\nfile_group.add_widget(ToolbarButton(\"mdi6.content-save\", \"Save\"))\ntoolbar.add_widget(file_group)\napp.set_toolbar(toolbar)\n\n# Sidebar\nsidebar = Sidebar()\n# Add navigation items...\napp.set_sidebar(sidebar)\n\n# Main content\ncontent = MainContent()\n\n# Side panel\npanel = Panel()\npanel.add_widget(PanelHeader(title=\"Properties\"))\npanel.add_widget(Label(\"Content here\"))\ncontent.add_widget(panel)\n\napp.set_content(content)\n\n# Status bar\nstatus = StatusBar()\nstatus.add_widget(Label(\"Ready\"))\napp.set_status_bar(status)\n</code></pre>"},{"location":"api/components/lists/","title":"List Components","text":"<p>Collection display components for files, cases, attributes, and queues.</p>"},{"location":"api/components/lists/#filelist","title":"FileList","text":"<p>File list with type icons.</p> <p></p> <pre><code>from design_system import FileList\n\nfiles = FileList()\nfiles.add_file(\n    id=\"1\",\n    name=\"interview.txt\",\n    file_type=\"text\",\n    size=\"15KB\",\n    status=\"coded\"\n)\n\nfiles.item_clicked.connect(lambda id: print(f\"Selected: {id}\"))\nfiles.item_double_clicked.connect(lambda id: print(f\"Open: {id}\"))\n</code></pre>"},{"location":"api/components/lists/#filelist-methods","title":"FileList Methods","text":"Method Description <code>add_file(id, name, file_type, size, status)</code> Add a file <code>remove_file(id)</code> Remove a file <code>clear()</code> Clear all files"},{"location":"api/components/lists/#filelist-signals","title":"FileList Signals","text":"Signal Description <code>item_clicked(id)</code> File clicked <code>item_double_clicked(id)</code> File double-clicked"},{"location":"api/components/lists/#caselist","title":"CaseList","text":"<p>Case/study list.</p> <p></p> <pre><code>from design_system import CaseList, ListItem\n\ncases = CaseList()\ncases.add_item(ListItem(id=\"1\", text=\"Case Study A\", subtitle=\"5 files\"))\n</code></pre>"},{"location":"api/components/lists/#attributelist","title":"AttributeList","text":"<p>Attribute list display.</p> <pre><code>from design_system import AttributeList, ListItem\n\nattrs = AttributeList()\nattrs.add_item(ListItem(id=\"1\", text=\"Age\", subtitle=\"Numeric\"))\n</code></pre>"},{"location":"api/components/lists/#queuelist","title":"QueueList","text":"<p>Queue/task list.</p> <pre><code>from design_system import QueueList, ListItem\n\nqueue = QueueList()\nqueue.add_item(ListItem(\n    id=\"1\",\n    text=\"Review coding\",\n    badge=\"3\",\n    badge_variant=\"warning\"\n))\n</code></pre>"},{"location":"api/components/lists/#listitem","title":"ListItem","text":"<p>Data structure for list items.</p> <pre><code>from design_system import ListItem\n\nitem = ListItem(\n    id=\"unique-id\",\n    text=\"Item Title\",\n    subtitle=\"Optional subtitle\",\n    icon=\"mdi6.file\",\n    badge=\"New\",\n    badge_variant=\"primary\",\n    data={\"custom\": \"data\"}\n)\n</code></pre>"},{"location":"api/components/lists/#listitem-properties","title":"ListItem Properties","text":"Property Type Default Description <code>id</code> str required Unique identifier <code>text</code> str required Primary text <code>subtitle</code> str <code>None</code> Secondary text <code>icon</code> str <code>None</code> Icon name <code>badge</code> str <code>None</code> Badge text <code>badge_variant</code> str <code>\"default\"</code> Badge style <code>data</code> dict <code>None</code> Custom data"},{"location":"api/components/lists/#baselist","title":"BaseList","text":"<p>Base class for all list components.</p> <pre><code>from design_system import BaseList\n\n# Typically subclassed, provides:\n# - item_clicked signal\n# - item_double_clicked signal\n# - Selection management\n</code></pre>"},{"location":"api/components/lists/#baselist-signals","title":"BaseList Signals","text":"Signal Description <code>item_clicked(id)</code> Item clicked <code>item_double_clicked(id)</code> Item double-clicked"},{"location":"api/components/lists/#list-item-widgets","title":"List Item Widgets","text":"<p>Individual item widgets for list components.</p>"},{"location":"api/components/lists/#filelistitem","title":"FileListItem","text":"<pre><code>from design_system import FileListItem\n\nfile_item = FileListItem(\n    id=\"1\",\n    name=\"document.txt\",\n    file_type=\"text\",\n    size=\"10KB\"\n)\n</code></pre>"},{"location":"api/components/lists/#caselistitem","title":"CaseListItem","text":"<pre><code>from design_system import CaseListItem\n\ncase_item = CaseListItem(\n    id=\"1\",\n    name=\"Case Study A\",\n    file_count=5\n)\n</code></pre>"},{"location":"api/components/lists/#attributelistitem","title":"AttributeListItem","text":"<pre><code>from design_system import AttributeListItem\n\nattr_item = AttributeListItem(\n    id=\"1\",\n    name=\"Age\",\n    value_type=\"numeric\"\n)\n</code></pre>"},{"location":"api/components/lists/#queuelistitem","title":"QueueListItem","text":"<pre><code>from design_system import QueueListItem\n\nqueue_item = QueueListItem(\n    id=\"1\",\n    title=\"Review document\",\n    status=\"pending\"\n)\n</code></pre>"},{"location":"api/components/lists/#list-example","title":"List Example","text":"<p>File browser with filtering:</p> <pre><code>from design_system import (\n    Panel, PanelHeader, FileList, SearchBox,\n    MediaTypeSelector, EmptyState\n)\n\nclass FileBrowser(Panel):\n    def __init__(self):\n        super().__init__()\n\n        # Header with search\n        header = PanelHeader(title=\"Files\")\n        self.add_widget(header)\n\n        # Search\n        self.search = SearchBox(placeholder=\"Search files...\")\n        self.search.text_changed.connect(self.filter_files)\n        self.add_widget(self.search)\n\n        # Type filter\n        self.type_filter = MediaTypeSelector()\n        self.add_widget(self.type_filter)\n\n        # File list\n        self.file_list = FileList()\n        self.file_list.item_clicked.connect(self.on_file_selected)\n        self.file_list.item_double_clicked.connect(self.on_file_opened)\n        self.add_widget(self.file_list)\n\n        # Empty state (shown when no files)\n        self.empty = EmptyState(\n            icon=\"mdi6.file-outline\",\n            title=\"No files\",\n            description=\"Import files to get started\"\n        )\n        self.empty.hide()\n        self.add_widget(self.empty)\n\n    def set_files(self, files):\n        self.file_list.clear()\n        for f in files:\n            self.file_list.add_file(\n                id=f[\"id\"],\n                name=f[\"name\"],\n                file_type=f[\"type\"],\n                size=f[\"size\"],\n                status=f.get(\"status\", \"\")\n            )\n\n        if not files:\n            self.file_list.hide()\n            self.empty.show()\n        else:\n            self.file_list.show()\n            self.empty.hide()\n\n    def filter_files(self, query):\n        # Implement filtering logic\n        pass\n\n    def on_file_selected(self, file_id):\n        print(f\"Selected: {file_id}\")\n\n    def on_file_opened(self, file_id):\n        print(f\"Opening: {file_id}\")\n</code></pre>"},{"location":"api/components/media/","title":"Media Components","text":"<p>Media playback and visualization components.</p>"},{"location":"api/components/media/#videocontainer","title":"VideoContainer","text":"<p>Video player container.</p> <pre><code>from design_system import VideoContainer\n\nvideo = VideoContainer()\nvideo.set_source(\"/path/to/video.mp4\")\n</code></pre>"},{"location":"api/components/media/#waveformvisualization","title":"WaveformVisualization","text":"<p>Audio waveform display.</p> <pre><code>from design_system import WaveformVisualization\n\nwaveform = WaveformVisualization()\nwaveform.set_position(0.5)  # 50% through\nwaveform.add_segment(start=10.0, end=25.0, color=\"#009688\")\n\nwaveform.position_changed.connect(lambda pos: print(f\"Position: {pos}\"))\n</code></pre>"},{"location":"api/components/media/#waveformvisualization-methods","title":"WaveformVisualization Methods","text":"Method Description <code>set_position(pos)</code> Set playback position (0-1) <code>add_segment(start, end, color)</code> Add highlighted segment <code>clear_segments()</code> Remove all segments"},{"location":"api/components/media/#waveformvisualization-signals","title":"WaveformVisualization Signals","text":"Signal Description <code>position_changed(pos)</code> Position updated"},{"location":"api/components/media/#timeline","title":"Timeline","text":"<p>Playback timeline.</p> <p></p> <pre><code>from design_system import Timeline\n\ntimeline = Timeline()\ntimeline.set_duration(300)  # 5 minutes in seconds\ntimeline.set_position(60)   # 1 minute in seconds\n</code></pre>"},{"location":"api/components/media/#timeline-methods","title":"Timeline Methods","text":"Method Description <code>set_duration(seconds)</code> Set total duration <code>set_position(seconds)</code> Set current position <code>get_position()</code> Get current position"},{"location":"api/components/media/#playercontrols","title":"PlayerControls","text":"<p>Media player controls.</p> <p></p> <pre><code>from design_system import PlayerControls\n\ncontrols = PlayerControls()\ncontrols.play_clicked.connect(play_handler)\ncontrols.pause_clicked.connect(pause_handler)\n</code></pre>"},{"location":"api/components/media/#playercontrols-signals","title":"PlayerControls Signals","text":"Signal Description <code>play_clicked</code> Play button clicked <code>pause_clicked</code> Pause button clicked <code>stop_clicked</code> Stop button clicked <code>seek_requested(position)</code> Seek requested"},{"location":"api/components/media/#thumbnail-thumbnailstrip","title":"Thumbnail / ThumbnailStrip","text":"<p>Image thumbnails.</p> <pre><code>from design_system import Thumbnail, ThumbnailStrip\n\n# Individual Thumbnail widget\nthumb = Thumbnail(image_path=\"/path/to/image.jpg\", size=100)\nthumb.clicked.connect(lambda: open_image())\n\n# ThumbnailStrip displays multiple thumbnails in a row\nstrip = ThumbnailStrip()\nstrip.add_thumbnail(\"/path/to/img1.jpg\")\nstrip.add_thumbnail(\"/path/to/img2.jpg\")\nstrip.thumbnail_clicked.connect(lambda index: select_image(index))\n</code></pre>"},{"location":"api/components/media/#thumbnail-properties","title":"Thumbnail Properties","text":"Property Type Default Description <code>image_path</code> str required Path to image <code>size</code> int <code>80</code> Thumbnail size"},{"location":"api/components/media/#thumbnailstrip-signals","title":"ThumbnailStrip Signals","text":"Signal Description <code>thumbnail_clicked(index)</code> Thumbnail clicked"},{"location":"api/components/media/#media-player-example","title":"Media Player Example","text":"<p>Complete audio/video player:</p> <pre><code>from design_system import (\n    Panel, PanelHeader, VideoContainer, Timeline,\n    PlayerControls, WaveformVisualization\n)\n\nclass MediaPlayer(Panel):\n    def __init__(self):\n        super().__init__()\n\n        self.add_widget(PanelHeader(title=\"Media Player\"))\n\n        # Video display\n        self.video = VideoContainer()\n        self.add_widget(self.video)\n\n        # Waveform (for audio)\n        self.waveform = WaveformVisualization()\n        self.waveform.position_changed.connect(self.seek_to)\n        self.add_widget(self.waveform)\n\n        # Timeline\n        self.timeline = Timeline()\n        self.add_widget(self.timeline)\n\n        # Controls\n        self.controls = PlayerControls()\n        self.controls.play_clicked.connect(self.play)\n        self.controls.pause_clicked.connect(self.pause)\n        self.add_widget(self.controls)\n\n        self.duration = 0\n        self.position = 0\n\n    def load_media(self, path):\n        self.video.set_source(path)\n        # Set duration after loading\n        self.timeline.set_duration(self.duration)\n\n    def play(self):\n        # Start playback\n        pass\n\n    def pause(self):\n        # Pause playback\n        pass\n\n    def seek_to(self, position):\n        self.position = position * self.duration\n        self.timeline.set_position(self.position)\n</code></pre>"},{"location":"api/components/navigation/","title":"Navigation Components","text":"<p>Navigation patterns: tabs, menus, breadcrumbs, and step indicators.</p>"},{"location":"api/components/navigation/#tab-tabgroup","title":"Tab / TabGroup","text":"<p>Tab navigation.</p> <p></p> <pre><code>from design_system import Tab, TabGroup\n\ntabs = TabGroup()\ntabs.add_tab(\"Files\", icon=\"mdi6.file\", active=True)\ntabs.add_tab(\"Codes\", icon=\"mdi6.tag\")\ntabs.add_tab(\"Cases\", icon=\"mdi6.folder\")\n\ntabs.tab_changed.connect(lambda name: print(f\"Tab: {name}\"))\nactive = tabs.get_active_tab()\n</code></pre>"},{"location":"api/components/navigation/#tabgroup-methods","title":"TabGroup Methods","text":"Method Returns Description <code>add_tab(name, icon, active)</code> Tab Add a tab <code>get_active_tab()</code> str Get active tab name <code>set_active_tab(name)</code> None Set active tab"},{"location":"api/components/navigation/#tabgroup-signals","title":"TabGroup Signals","text":"Signal Description <code>tab_changed(name)</code> Emitted when tab changes"},{"location":"api/components/navigation/#menuitem","title":"MenuItem","text":"<p>Menu item with optional icon.</p> <pre><code>from design_system import MenuItem\n\nitem = MenuItem(\"Open Project\", icon=\"mdi6.folder-open\")\nitem.setActive(True)\nitem.clicked.connect(handler)\n</code></pre>"},{"location":"api/components/navigation/#menuitem-properties","title":"MenuItem Properties","text":"Property Type Default Description <code>text</code> str required Menu item label <code>icon</code> str <code>None</code> Icon name"},{"location":"api/components/navigation/#menuitem-methods","title":"MenuItem Methods","text":"Method Description <code>setActive(bool)</code> Set active state"},{"location":"api/components/navigation/#breadcrumb","title":"Breadcrumb","text":"<p>Breadcrumb navigation path.</p> <p></p> <pre><code>from design_system import Breadcrumb\n\nbreadcrumb = Breadcrumb()\nbreadcrumb.set_path([\"Home\", \"Projects\", \"Current\"])\n</code></pre>"},{"location":"api/components/navigation/#breadcrumb-methods","title":"Breadcrumb Methods","text":"Method Description <code>set_path(items)</code> Set breadcrumb path <code>get_path()</code> Get current path"},{"location":"api/components/navigation/#navlist","title":"NavList","text":"<p>Vertical navigation list.</p> <pre><code>from design_system import NavList\n\nnav = NavList()\nnav.add_item(\"Dashboard\", icon=\"mdi6.view-dashboard\")\nnav.add_item(\"Settings\", icon=\"mdi6.cog\")\n</code></pre>"},{"location":"api/components/navigation/#navlist-methods","title":"NavList Methods","text":"Method Description <code>add_item(name, icon)</code> Add navigation item <code>set_active(name)</code> Set active item"},{"location":"api/components/navigation/#stepindicator","title":"StepIndicator","text":"<p>Progress steps display.</p> <p></p> <pre><code>from design_system import StepIndicator\n\nsteps = StepIndicator()\nsteps.set_steps([\"Upload\", \"Configure\", \"Review\", \"Complete\"])\nsteps.set_current(1)  # 0-indexed\n</code></pre>"},{"location":"api/components/navigation/#stepindicator-methods","title":"StepIndicator Methods","text":"Method Description <code>set_steps(steps)</code> Set step names <code>set_current(index)</code> Set current step (0-indexed) <code>get_current()</code> Get current step index"},{"location":"api/components/navigation/#mediatypeselector","title":"MediaTypeSelector","text":"<p>File type filter selector.</p> <pre><code>from design_system import MediaTypeSelector\n\nselector = MediaTypeSelector()\n# Allows filtering by: text, audio, video, image, pdf\n</code></pre>"},{"location":"api/components/navigation/#navigation-example","title":"Navigation Example","text":"<p>Complete navigation setup:</p> <pre><code>from design_system import (\n    Sidebar, NavList, TabGroup, Breadcrumb, MenuItem\n)\n\n# Sidebar navigation\nsidebar = Sidebar()\nnav = NavList()\nnav.add_item(\"Home\", icon=\"mdi6.home\")\nnav.add_item(\"Files\", icon=\"mdi6.file\")\nnav.add_item(\"Codes\", icon=\"mdi6.tag\")\nnav.add_item(\"Cases\", icon=\"mdi6.folder\")\nnav.add_item(\"Reports\", icon=\"mdi6.chart-bar\")\nnav.add_item(\"Settings\", icon=\"mdi6.cog\")\nsidebar.add_widget(nav)\n\n# Tab navigation for content area\ntabs = TabGroup()\ntabs.add_tab(\"Overview\", active=True)\ntabs.add_tab(\"Details\")\ntabs.add_tab(\"History\")\n\ntabs.tab_changed.connect(lambda name: switch_view(name))\n\n# Breadcrumb for location\nbreadcrumb = Breadcrumb()\nbreadcrumb.set_path([\"Home\", \"Projects\", \"My Project\", \"Files\"])\n</code></pre>"},{"location":"api/components/pickers/","title":"Picker Components","text":"<p>Selection widgets for types, colors, and options.</p>"},{"location":"api/components/pickers/#typeselector-typeoptioncard","title":"TypeSelector / TypeOptionCard","text":"<p>Type selection with visual cards.</p> <pre><code>from design_system import TypeSelector, TypeOptionCard\n\nselector = TypeSelector()\nselector.add_type(TypeOptionCard(\n    type_id=\"text\",\n    title=\"Text Document\",\n    description=\"Import text files\",\n    icon=\"mdi6.file-document\"\n))\nselector.add_type(TypeOptionCard(\n    type_id=\"audio\",\n    title=\"Audio File\",\n    description=\"Import audio recordings\",\n    icon=\"mdi6.microphone\"\n))\n\nselector.type_selected.connect(lambda type_id: handle_selection(type_id))\n</code></pre>"},{"location":"api/components/pickers/#typeoptioncard-properties","title":"TypeOptionCard Properties","text":"Property Type Default Description <code>type_id</code> str required Unique identifier <code>title</code> str required Card title <code>description</code> str <code>\"\"</code> Card description <code>icon</code> str <code>None</code> Icon name"},{"location":"api/components/pickers/#typeselector-signals","title":"TypeSelector Signals","text":"Signal Description <code>type_selected(type_id)</code> Type selected"},{"location":"api/components/pickers/#colorschemeselector","title":"ColorSchemeSelector","text":"<p>Color scheme picker for visualizations.</p> <pre><code>from design_system import ColorSchemeSelector, ColorSchemeOption\n\nselector = ColorSchemeSelector()\nselector.add_scheme(ColorSchemeOption(\n    name=\"primary\",\n    colors=[\"#3B82F6\", \"#60A5FA\", \"#93C5FD\"]\n))\nselector.add_scheme(ColorSchemeOption(\n    name=\"success\",\n    colors=[\"#22C55E\", \"#4ADE80\", \"#86EFAC\"]\n))\n\nselector.scheme_selected.connect(lambda name: apply_scheme(name))\n</code></pre>"},{"location":"api/components/pickers/#colorschemeoption-properties","title":"ColorSchemeOption Properties","text":"Property Type Description <code>name</code> str Scheme identifier <code>colors</code> list List of hex colors"},{"location":"api/components/pickers/#colorschemeselector-signals","title":"ColorSchemeSelector Signals","text":"Signal Description <code>scheme_selected(name)</code> Scheme selected"},{"location":"api/components/pickers/#charttypeselector","title":"ChartTypeSelector","text":"<p>Chart type picker for data visualization.</p> <pre><code>from design_system import ChartTypeSelector\n\nselector = ChartTypeSelector()\n# Includes options: bar, line, pie, scatter\n\nselector.type_selected.connect(lambda chart_type: update_chart(chart_type))\n</code></pre>"},{"location":"api/components/pickers/#charttypeselector-signals","title":"ChartTypeSelector Signals","text":"Signal Description <code>type_selected(chart_type)</code> Chart type selected"},{"location":"api/components/pickers/#radiocardgroup-radiocard","title":"RadioCardGroup / RadioCard","text":"<p>Radio button selection with card layout.</p> <pre><code>from design_system import RadioCardGroup, RadioCard\n\ngroup = RadioCardGroup()\ngroup.add_card(RadioCard(\n    value=\"option1\",\n    title=\"Option 1\",\n    description=\"Description for option 1\"\n))\ngroup.add_card(RadioCard(\n    value=\"option2\",\n    title=\"Option 2\",\n    description=\"Description for option 2\"\n))\n\ngroup.value_changed.connect(lambda value: print(f\"Selected: {value}\"))\n</code></pre>"},{"location":"api/components/pickers/#radiocard-properties","title":"RadioCard Properties","text":"Property Type Default Description <code>value</code> str required Option value <code>title</code> str required Card title <code>description</code> str <code>\"\"</code> Card description"},{"location":"api/components/pickers/#radiocardgroup-signals","title":"RadioCardGroup Signals","text":"Signal Description <code>value_changed(value)</code> Selection changed"},{"location":"api/components/pickers/#picker-example","title":"Picker Example","text":"<p>File import type selector:</p> <pre><code>from design_system import (\n    Modal, ModalHeader, TypeSelector, TypeOptionCard,\n    Button\n)\n\nclass ImportTypeDialog(Modal):\n    def __init__(self, parent=None):\n        super().__init__(parent, size=\"lg\")\n\n        self.set_header(ModalHeader(title=\"Select Import Type\"))\n\n        # Type selector\n        self.selector = TypeSelector()\n\n        self.selector.add_type(TypeOptionCard(\n            type_id=\"text\",\n            title=\"Text Documents\",\n            description=\"Import .txt, .docx, .rtf files\",\n            icon=\"mdi6.file-document\"\n        ))\n\n        self.selector.add_type(TypeOptionCard(\n            type_id=\"audio\",\n            title=\"Audio Files\",\n            description=\"Import .mp3, .wav, .m4a files\",\n            icon=\"mdi6.microphone\"\n        ))\n\n        self.selector.add_type(TypeOptionCard(\n            type_id=\"video\",\n            title=\"Video Files\",\n            description=\"Import .mp4, .mov, .avi files\",\n            icon=\"mdi6.video\"\n        ))\n\n        self.selector.add_type(TypeOptionCard(\n            type_id=\"pdf\",\n            title=\"PDF Documents\",\n            description=\"Import .pdf files\",\n            icon=\"mdi6.file-pdf-box\"\n        ))\n\n        self.selector.add_type(TypeOptionCard(\n            type_id=\"image\",\n            title=\"Images\",\n            description=\"Import .jpg, .png, .gif files\",\n            icon=\"mdi6.image\"\n        ))\n\n        self.body.addWidget(self.selector)\n\n        self.selected_type = None\n        self.selector.type_selected.connect(self.on_type_selected)\n\n        # Buttons\n        self.add_button(\"Cancel\", variant=\"outline\", on_click=self.reject)\n        self.add_button(\"Continue\", variant=\"primary\", on_click=self.accept)\n\n    def on_type_selected(self, type_id):\n        self.selected_type = type_id\n\n    def get_selected_type(self):\n        return self.selected_type\n</code></pre>"},{"location":"api/components/visualization/","title":"Visualization Components","text":"<p>Data visualization: charts, graphs, word clouds, and PDF viewers.</p>"},{"location":"api/components/visualization/#chartwidget","title":"ChartWidget","text":"<p>Charts using PyQtGraph.</p> <p></p> <pre><code>from design_system import ChartWidget, ChartDataPoint\n\nchart = ChartWidget(title=\"Code Frequency\", subtitle=\"Top 10 codes\")\n\n# Bar chart using ChartDataPoint data class\nchart.set_bar_data([\n    ChartDataPoint(label=\"Theme A\", value=15, color=\"#FFC107\"),\n    ChartDataPoint(label=\"Theme B\", value=12, color=\"#4CAF50\"),\n    ChartDataPoint(label=\"Theme C\", value=8, color=\"#2196F3\"),\n])\n\n# Line chart\nchart.set_line_data([\n    ChartDataPoint(label=\"Jan\", value=10),\n    ChartDataPoint(label=\"Feb\", value=15),\n    ChartDataPoint(label=\"Mar\", value=12),\n])\n\n# Scatter plot\nchart.set_scatter_data([...])\n\nchart.point_clicked.connect(lambda idx, data: print(f\"Clicked: {data}\"))\nchart.clear()\n</code></pre>"},{"location":"api/components/visualization/#chartdatapoint","title":"ChartDataPoint","text":"<pre><code>from design_system import ChartDataPoint\n\npoint = ChartDataPoint(\n    label=\"Category\",\n    value=100,\n    color=\"#FFC107\"\n)\n</code></pre>"},{"location":"api/components/visualization/#chartwidget-methods","title":"ChartWidget Methods","text":"Method Description <code>set_bar_data(data)</code> Set bar chart data <code>set_line_data(data)</code> Set line chart data <code>set_scatter_data(data)</code> Set scatter plot data <code>clear()</code> Clear chart"},{"location":"api/components/visualization/#chartwidget-signals","title":"ChartWidget Signals","text":"Signal Description <code>point_clicked(idx, data)</code> Data point clicked"},{"location":"api/components/visualization/#piechart","title":"PieChart","text":"<p>Pie chart specialization.</p> <pre><code>from design_system import PieChart, ChartDataPoint\n\npie = PieChart(title=\"Distribution\")\npie.set_data([\n    ChartDataPoint(\"Category A\", 40, \"#FFC107\"),\n    ChartDataPoint(\"Category B\", 35, \"#4CAF50\"),\n    ChartDataPoint(\"Category C\", 25, \"#2196F3\"),\n])\n</code></pre>"},{"location":"api/components/visualization/#sparkline","title":"SparkLine","text":"<p>Mini inline sparkline.</p> <pre><code>from design_system import SparkLine\n\nspark = SparkLine(data=[10, 15, 12, 18, 14, 20], color=\"#009688\")\n</code></pre>"},{"location":"api/components/visualization/#sparkline-properties","title":"SparkLine Properties","text":"Property Type Default Description <code>data</code> list <code>[]</code> Data points <code>color</code> str <code>None</code> Line color"},{"location":"api/components/visualization/#legenditem","title":"LegendItem","text":"<p>Chart legend item.</p> <pre><code>from design_system import LegendItem\n\nitem = LegendItem(label=\"Category A\", color=\"#FFC107\")\n</code></pre>"},{"location":"api/components/visualization/#networkgraphwidget","title":"NetworkGraphWidget","text":"<p>Interactive network visualization.</p> <p></p> <pre><code>from design_system import NetworkGraphWidget, GraphNode, GraphEdge\n\ngraph = NetworkGraphWidget()\n\n# Add nodes using GraphNode data class\ngraph.add_node(GraphNode(id=\"1\", label=\"Code A\", color=\"#FFC107\", size=20))\ngraph.add_node(GraphNode(id=\"2\", label=\"Code B\", color=\"#4CAF50\", size=15))\n\n# Add edges using GraphEdge data class\ngraph.add_edge(GraphEdge(source=\"1\", target=\"2\", weight=5, label=\"co-occurs\"))\n\n# Layout algorithms: spring, circular, kamada-kawai\ngraph.layout(\"spring\")\n\n# Signals\ngraph.node_clicked.connect(lambda id, meta: print(f\"Node: {id}\"))\ngraph.node_double_clicked.connect(lambda id, meta: print(f\"Edit: {id}\"))\ngraph.edge_clicked.connect(lambda src, tgt: print(f\"Edge: {src} -&gt; {tgt}\"))\n\ngraph.clear()\n</code></pre>"},{"location":"api/components/visualization/#graphnode-graphedge","title":"GraphNode / GraphEdge","text":"<pre><code>from design_system import GraphNode, GraphEdge\n\nnode = GraphNode(\n    id=\"unique-id\",\n    label=\"Node Label\",\n    color=\"#FFC107\",\n    size=20\n)\n\nedge = GraphEdge(\n    source=\"node-1\",\n    target=\"node-2\",\n    weight=5,\n    label=\"relationship\"\n)\n</code></pre>"},{"location":"api/components/visualization/#networkgraphwidget-signals","title":"NetworkGraphWidget Signals","text":"Signal Description <code>node_clicked(id, meta)</code> Node clicked <code>node_double_clicked(id, meta)</code> Node double-clicked <code>edge_clicked(source, target)</code> Edge clicked"},{"location":"api/components/visualization/#wordcloudwidget","title":"WordCloudWidget","text":"<p>Word cloud visualization.</p> <p></p> <pre><code>from design_system import WordCloudWidget\n\ncloud = WordCloudWidget(\n    max_words=100,\n    min_font_size=10,\n    max_font_size=60,\n    color_scheme=\"primary\"  # primary, success, error, warning, info\n)\n\n# From word frequencies\ncloud.set_frequencies({\n    \"qualitative\": 50,\n    \"research\": 45,\n    \"coding\": 40,\n    \"analysis\": 35,\n})\n\n# Or from raw text\ncloud.set_text(\"Full text content to analyze...\")\n\ncloud.generate()\ncloud.word_clicked.connect(lambda word: print(f\"Word: {word}\"))\n</code></pre>"},{"location":"api/components/visualization/#wordcloudwidget-properties","title":"WordCloudWidget Properties","text":"Property Type Default Description <code>max_words</code> int <code>100</code> Maximum words <code>min_font_size</code> int <code>10</code> Minimum font size <code>max_font_size</code> int <code>60</code> Maximum font size <code>color_scheme</code> str <code>\"primary\"</code> Color scheme"},{"location":"api/components/visualization/#wordcloudwidget-methods","title":"WordCloudWidget Methods","text":"Method Description <code>set_frequencies(dict)</code> Set word frequencies <code>set_text(text)</code> Set raw text <code>generate()</code> Generate word cloud"},{"location":"api/components/visualization/#wordcloudpreview","title":"WordCloudPreview","text":"<p>Thumbnail preview of word cloud.</p> <pre><code>from design_system import WordCloudPreview\n\npreview = WordCloudPreview()\npreview.set_frequencies({\"word\": 10, \"cloud\": 8, \"preview\": 5})\n</code></pre>"},{"location":"api/components/visualization/#pdfpageviewer","title":"PDFPageViewer","text":"<p>PDF document viewer with text selection overlay.</p> <pre><code>from design_system import PDFPageViewer, PDFSelection\n\nviewer = PDFPageViewer(\n    show_toolbar=True,      # Navigation and zoom controls\n    show_thumbnails=True,   # Page thumbnail sidebar\n    initial_zoom=1.0        # Starting zoom level\n)\n\n# Load document\nviewer.load_document(\"/path/to/document.pdf\")\n\n# Navigation\nviewer.go_to_page(5)        # 0-indexed\nviewer.next_page()\nviewer.previous_page()\n\n# Zoom\nviewer.set_zoom(1.5)        # 150%\nviewer.zoom_in()            # +25%\nviewer.zoom_out()           # -25%\nviewer.fit_to_width()       # Auto-fit\n\n# Signals\nviewer.page_changed.connect(lambda page: print(f\"Page: {page}\"))\nviewer.document_loaded.connect(lambda count: print(f\"Pages: {count}\"))\nviewer.zoom_changed.connect(lambda zoom: print(f\"Zoom: {zoom}\"))\n\n# Text selection (Ctrl+Click and drag)\nviewer.text_selected.connect(lambda sel: handle_selection(sel))\n\ndef handle_selection(selection: PDFSelection):\n    print(f\"Page: {selection.page}\")\n    print(f\"Text: {selection.text}\")\n    print(f\"Rect: {selection.rect}\")\n\n# Properties\npage = viewer.current_page   # Current page (0-indexed)\ntotal = viewer.page_count    # Total pages\nzoom = viewer.zoom           # Current zoom level\n\n# Cleanup\nviewer.close_document()\n</code></pre>"},{"location":"api/components/visualization/#pdfpageviewer-properties","title":"PDFPageViewer Properties","text":"Property Type Default Description <code>show_toolbar</code> bool <code>True</code> Show navigation toolbar <code>show_thumbnails</code> bool <code>True</code> Show page thumbnails <code>initial_zoom</code> float <code>1.0</code> Starting zoom level"},{"location":"api/components/visualization/#pdfpageviewer-signals","title":"PDFPageViewer Signals","text":"Signal Description <code>page_changed(page)</code> Page navigation <code>document_loaded(count)</code> Document loaded <code>zoom_changed(zoom)</code> Zoom level changed <code>text_selected(selection)</code> Text selected"},{"location":"api/components/visualization/#pdfselection-data-class","title":"PDFSelection Data Class","text":"<pre><code>from design_system import PDFSelection\n\nselection = PDFSelection(\n    page=0,\n    text=\"Selected text\",\n    rect=(x0, y0, x1, y1)\n)\n</code></pre> <p>Note: Dependencies</p> <p>PDFPageViewer requires <code>pymupdf</code> (PyMuPDF) for PDF rendering.</p>"},{"location":"api/getting-started/","title":"Getting Started","text":"<p>This guide walks you through installing and using the QualCoder Design System in your PySide6 applications.</p>"},{"location":"api/getting-started/#overview","title":"Overview","text":"<p>The QualCoder Design System provides:</p> <ul> <li>Design Tokens \u2014 Consistent values for colors, spacing, typography</li> <li>Core Components \u2014 Buttons, inputs, cards, labels, badges</li> <li>Layout Components \u2014 App containers, panels, sidebars, toolbars</li> <li>Form Components \u2014 Search boxes, selects, textareas, color pickers</li> <li>Data Components \u2014 Tables, trees, lists, charts</li> <li>Feedback Components \u2014 Spinners, toasts, progress bars</li> <li>Advanced Components \u2014 Modals, context menus, editors</li> </ul>"},{"location":"api/getting-started/#sections","title":"Sections","text":"<ul> <li>Installation \u2014 Install the design system</li> <li>Quick Start \u2014 Build your first UI</li> </ul>"},{"location":"api/getting-started/installation/","title":"Installation","text":""},{"location":"api/getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.11+</li> <li>PySide6 6.5+</li> <li>UV (recommended)</li> </ul>"},{"location":"api/getting-started/installation/#install-with-uv","title":"Install with UV","text":"<pre><code>git clone https://github.com/scope-impact/qualcoder-v2\ncd qualcoder-v2\nuv sync\n</code></pre>"},{"location":"api/getting-started/installation/#install-from-pypi","title":"Install from PyPI","text":"<pre><code>uv add qualcoder-design-system\n# or\npip install qualcoder-design-system\n</code></pre>"},{"location":"api/getting-started/installation/#dependencies","title":"Dependencies","text":"<p>The design system automatically installs these dependencies:</p> Package Version Purpose PySide6 \u22656.5 Qt widgets and layouts qtawesome \u22651.2 Material Design Icons (mdi6) pyqtgraph \u22650.13 Charts and plotting networkx \u22653.0 Graph algorithms wordcloud \u22651.9 Word cloud generation numpy \u22651.24 Numerical operations pymupdf \u22651.23 PDF rendering"},{"location":"api/getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code>from design_system import Button, COLORS\n\n# Should print the primary color\nprint(COLORS.primary)\n\n# Create a test button\nbutton = Button(\"Test\", variant=\"primary\")\nprint(f\"Button created: {button}\")\n</code></pre>"},{"location":"api/getting-started/installation/#ide-setup","title":"IDE Setup","text":"<p>For best development experience, ensure your IDE recognizes the type annotations:</p>"},{"location":"api/getting-started/installation/#vs-code","title":"VS Code","text":"<p>Install the Pylance extension for full type support.</p>"},{"location":"api/getting-started/installation/#pycharm","title":"PyCharm","text":"<p>Type hints work out of the box.</p>"},{"location":"api/getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start \u2014 Build your first UI</li> <li>Design Tokens \u2014 Learn the token system</li> </ul>"},{"location":"api/getting-started/quick-start/","title":"Quick Start","text":"<p>Build your first UI with the QualCoder Design System.</p>"},{"location":"api/getting-started/quick-start/#basic-import","title":"Basic Import","text":"<pre><code>from design_system import (\n    # Tokens\n    COLORS, SPACING, RADIUS, TYPOGRAPHY, LAYOUT,\n    ColorPalette, get_colors, get_theme,\n\n    # Core\n    Button, Input, Label, Card, Badge, Alert, Avatar, Chip,\n\n    # Icons\n    Icon, IconText, icon, get_pixmap, get_qicon,\n\n    # Layout\n    AppContainer, Panel, Sidebar, MainContent, Toolbar,\n\n    # Forms\n    SearchBox, Select, Textarea, ColorPicker,\n\n    # Data\n    DataTable, CodeTree, FileList,\n)\n</code></pre>"},{"location":"api/getting-started/quick-start/#creating-components","title":"Creating Components","text":""},{"location":"api/getting-started/quick-start/#basic-button","title":"Basic Button","text":"<pre><code># Variants: primary, secondary, outline, ghost, danger, success, icon\nbutton = Button(\"Click Me\", variant=\"primary\")\nbutton.clicked.connect(lambda: print(\"Clicked!\"))\n</code></pre>"},{"location":"api/getting-started/quick-start/#text-input","title":"Text Input","text":"<pre><code>input_field = Input(placeholder=\"Enter name...\")\ninput_field.textChanged.connect(lambda text: print(f\"Text: {text}\"))\n</code></pre>"},{"location":"api/getting-started/quick-start/#card-container","title":"Card Container","text":"<pre><code>card = Card()\ncard.add_widget(Label(\"Title\", variant=\"title\"))\ncard.add_widget(Label(\"Description text\", variant=\"description\"))\ncard.add_widget(Button(\"Action\", variant=\"primary\"))\n</code></pre>"},{"location":"api/getting-started/quick-start/#building-a-form","title":"Building a Form","text":"<pre><code>from PySide6.QtWidgets import QVBoxLayout, QWidget\nfrom design_system import Card, Label, Input, Button, FormGroup\n\nclass LoginForm(QWidget):\n    def __init__(self):\n        super().__init__()\n        layout = QVBoxLayout(self)\n\n        card = Card()\n\n        # Header\n        card.add_widget(Label(\"Login\", variant=\"title\"))\n\n        # Form fields\n        username_group = FormGroup(label=\"Username\")\n        username_group.add_widget(Input(placeholder=\"Enter username\"))\n        card.add_widget(username_group)\n\n        password_group = FormGroup(label=\"Password\")\n        password_group.add_widget(Input(placeholder=\"Enter password\"))\n        card.add_widget(password_group)\n\n        # Submit button\n        card.add_widget(Button(\"Sign In\", variant=\"primary\"))\n\n        layout.addWidget(card)\n</code></pre>"},{"location":"api/getting-started/quick-start/#using-icons","title":"Using Icons","text":"<pre><code>from design_system import Icon, IconText, Button\n\n# Icon widget\nfolder_icon = Icon(\"mdi6.folder\", size=24, color=\"#009688\")\n\n# Icon with text\nfile_item = IconText(icon=\"mdi6.file\", text=\"document.txt\")\n\n# Button with icon\nicon_button = Button(\"\", variant=\"icon\")\n</code></pre>"},{"location":"api/getting-started/quick-start/#theme-management","title":"Theme Management","text":"<pre><code>from design_system import set_theme, get_theme, COLORS\n\n# Switch themes\nset_theme(\"dark\")\ncurrent = get_theme()  # \"dark\"\n\n# Use themed colors\nprint(COLORS.primary)      # Automatically uses current theme\nprint(COLORS.background)   # Theme-aware background color\n</code></pre>"},{"location":"api/getting-started/quick-start/#complete-example","title":"Complete Example","text":"<pre><code>import sys\nfrom PySide6.QtWidgets import QApplication, QMainWindow\nfrom design_system import (\n    AppContainer, TitleBar, Toolbar, MainContent,\n    Panel, Card, Label, Button, SearchBox,\n    generate_stylesheet, COLORS\n)\n\nclass MainWindow(QMainWindow):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"QualCoder\")\n        self.resize(1200, 800)\n\n        # Apply design system stylesheet\n        self.setStyleSheet(generate_stylesheet(COLORS))\n\n        # Create app container\n        app = AppContainer()\n        app.set_title_bar(TitleBar(title=\"QualCoder v2\"))\n\n        # Toolbar\n        toolbar = Toolbar()\n        toolbar.add_widget(SearchBox(placeholder=\"Search...\"))\n        app.set_toolbar(toolbar)\n\n        # Main content\n        content = MainContent()\n\n        # Add a card\n        card = Card()\n        card.add_widget(Label(\"Welcome\", variant=\"title\"))\n        card.add_widget(Label(\"Get started by importing files.\"))\n        card.add_widget(Button(\"Import Files\", variant=\"primary\"))\n        content.add_widget(card)\n\n        app.set_content(content)\n        self.setCentralWidget(app)\n\nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n    window = MainWindow()\n    window.show()\n    sys.exit(app.exec())\n</code></pre>"},{"location":"api/getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Design Tokens \u2014 Learn the color, spacing, and typography system</li> <li>Core Components \u2014 Explore buttons, inputs, cards, and more</li> <li>Patterns \u2014 Common usage patterns</li> </ul>"},{"location":"api/patterns/","title":"Patterns","text":"<p>Common usage patterns and best practices for building with the QualCoder Design System.</p>"},{"location":"api/patterns/#overview","title":"Overview","text":"Pattern Description Signals Qt signal-based interactivity Theming Color customization and themes Composition Building complex layouts"},{"location":"api/patterns/#quick-reference","title":"Quick Reference","text":""},{"location":"api/patterns/#signal-connections","title":"Signal Connections","text":"<pre><code>button.clicked.connect(handler)\ntable.row_clicked.connect(lambda idx, data: handle(idx))\nsearch.text_changed.connect(filter_results)\n</code></pre>"},{"location":"api/patterns/#theme-switching","title":"Theme Switching","text":"<pre><code>from design_system import set_theme, get_theme\n\nset_theme(\"dark\")\ncurrent = get_theme()\n</code></pre>"},{"location":"api/patterns/#container-composition","title":"Container Composition","text":"<pre><code>card = Card()\ncard.add_widget(CardHeader(title=\"Section\"))\ncard.add_widget(Label(\"Content\"))\ncard.add_widget(Button(\"Action\", variant=\"primary\"))\n</code></pre>"},{"location":"api/patterns/composition/","title":"Composition Patterns","text":"<p>Building complex layouts from simple components.</p>"},{"location":"api/patterns/composition/#container-composition","title":"Container Composition","text":""},{"location":"api/patterns/composition/#basic-card-layout","title":"Basic Card Layout","text":"<pre><code>from design_system import Card, CardHeader, Label, Button\n\ncard = Card()\ncard.add_widget(CardHeader(title=\"Section Title\"))\ncard.add_widget(Label(\"Content goes here\"))\ncard.add_widget(Button(\"Action\", variant=\"primary\"))\n</code></pre>"},{"location":"api/patterns/composition/#panel-with-header","title":"Panel with Header","text":"<pre><code>from design_system import Panel, PanelHeader, FileList\n\npanel = Panel()\npanel.add_widget(PanelHeader(title=\"Files\"))\npanel.add_widget(FileList())\n</code></pre>"},{"location":"api/patterns/composition/#hierarchical-data","title":"Hierarchical Data","text":""},{"location":"api/patterns/composition/#tree-structures","title":"Tree Structures","text":"<pre><code>from design_system import CodeTree, CodeItem\n\ntree = CodeTree()\ntree.set_items([\n    CodeItem(\"1\", \"Parent\", \"#FFC107\", count=10, children=[\n        CodeItem(\"1.1\", \"Child A\", \"#FFD54F\", count=5),\n        CodeItem(\"1.2\", \"Child B\", \"#FFE082\", count=5),\n    ])\n])\n</code></pre>"},{"location":"api/patterns/composition/#nested-layouts","title":"Nested Layouts","text":"<pre><code>from PySide6.QtWidgets import QHBoxLayout, QVBoxLayout\nfrom design_system import Panel, Card, Label\n\n# Main horizontal layout\nmain_layout = QHBoxLayout()\n\n# Left sidebar\nsidebar = Panel()\nsidebar.add_widget(Label(\"Navigation\"))\nmain_layout.addWidget(sidebar, stretch=1)\n\n# Right content area\ncontent = QVBoxLayout()\n\n# Top card\ntop_card = Card()\ntop_card.add_widget(Label(\"Top Section\"))\ncontent.addWidget(top_card)\n\n# Bottom card\nbottom_card = Card()\nbottom_card.add_widget(Label(\"Bottom Section\"))\ncontent.addWidget(bottom_card)\n\nmain_layout.addLayout(content, stretch=3)\n</code></pre>"},{"location":"api/patterns/composition/#reusable-components","title":"Reusable Components","text":""},{"location":"api/patterns/composition/#create-compound-components","title":"Create Compound Components","text":"<pre><code>from design_system import (\n    Panel, PanelHeader, SearchBox, FileList, EmptyState\n)\n\nclass FileBrowser(Panel):\n    \"\"\"Reusable file browser component.\"\"\"\n\n    def __init__(self, title=\"Files\"):\n        super().__init__()\n\n        # Header\n        self.add_widget(PanelHeader(title=title))\n\n        # Search\n        self.search = SearchBox(placeholder=\"Search...\")\n        self.search.text_changed.connect(self._filter)\n        self.add_widget(self.search)\n\n        # File list\n        self.file_list = FileList()\n        self.add_widget(self.file_list)\n\n        # Empty state\n        self.empty = EmptyState(\n            icon=\"mdi6.file-outline\",\n            title=\"No files\",\n            description=\"No files match your search\"\n        )\n        self.empty.hide()\n        self.add_widget(self.empty)\n\n        self._all_files = []\n\n    def set_files(self, files):\n        self._all_files = files\n        self._render_files(files)\n\n    def _filter(self, query):\n        filtered = [f for f in self._all_files\n                    if query.lower() in f[\"name\"].lower()]\n        self._render_files(filtered)\n\n    def _render_files(self, files):\n        self.file_list.clear()\n        for f in files:\n            self.file_list.add_file(**f)\n\n        if files:\n            self.file_list.show()\n            self.empty.hide()\n        else:\n            self.file_list.hide()\n            self.empty.show()\n</code></pre>"},{"location":"api/patterns/composition/#parameterized-components","title":"Parameterized Components","text":"<pre><code>from design_system import Card, CardHeader, Button, Badge\n\nclass ActionCard(Card):\n    \"\"\"Card with configurable actions.\"\"\"\n\n    def __init__(self, title, actions=None, badge=None):\n        super().__init__()\n\n        # Header with optional badge\n        header = CardHeader(title=title)\n        if badge:\n            header.add_widget(Badge(badge[\"text\"], variant=badge.get(\"variant\", \"primary\")))\n        self.add_widget(header)\n\n        # Action buttons\n        if actions:\n            for action in actions:\n                btn = Button(\n                    action[\"label\"],\n                    variant=action.get(\"variant\", \"outline\")\n                )\n                if \"on_click\" in action:\n                    btn.clicked.connect(action[\"on_click\"])\n                self.add_widget(btn)\n\n# Usage\ncard = ActionCard(\n    title=\"Document\",\n    badge={\"text\": \"New\", \"variant\": \"success\"},\n    actions=[\n        {\"label\": \"Edit\", \"variant\": \"primary\", \"on_click\": edit_doc},\n        {\"label\": \"Delete\", \"variant\": \"danger\", \"on_click\": delete_doc},\n    ]\n)\n</code></pre>"},{"location":"api/patterns/composition/#layout-patterns","title":"Layout Patterns","text":""},{"location":"api/patterns/composition/#master-detail-layout","title":"Master-Detail Layout","text":"<pre><code>from PySide6.QtWidgets import QSplitter\nfrom design_system import Panel, FileList, TextPanel\n\nclass MasterDetailView(QSplitter):\n    def __init__(self):\n        super().__init__()\n\n        # Master (list)\n        self.master = Panel()\n        self.file_list = FileList()\n        self.file_list.item_clicked.connect(self.show_detail)\n        self.master.add_widget(self.file_list)\n        self.addWidget(self.master)\n\n        # Detail (content)\n        self.detail = TextPanel()\n        self.addWidget(self.detail)\n\n        # Set proportions\n        self.setSizes([300, 700])\n\n    def show_detail(self, file_id):\n        # Load and display file content\n        content = self.load_file(file_id)\n        self.detail.set_text(content)\n</code></pre>"},{"location":"api/patterns/composition/#tab-based-layout","title":"Tab-Based Layout","text":"<pre><code>from design_system import TabGroup, Panel\n\nclass TabbedView(Panel):\n    def __init__(self):\n        super().__init__()\n\n        # Tab navigation\n        self.tabs = TabGroup()\n        self.tabs.add_tab(\"Overview\", active=True)\n        self.tabs.add_tab(\"Details\")\n        self.tabs.add_tab(\"History\")\n        self.tabs.tab_changed.connect(self.switch_tab)\n        self.add_widget(self.tabs)\n\n        # Content panels\n        self.overview_panel = self.create_overview()\n        self.details_panel = self.create_details()\n        self.history_panel = self.create_history()\n\n        self.panels = {\n            \"Overview\": self.overview_panel,\n            \"Details\": self.details_panel,\n            \"History\": self.history_panel,\n        }\n\n        # Show initial panel\n        self.current_panel = self.overview_panel\n        self.add_widget(self.current_panel)\n\n    def switch_tab(self, tab_name):\n        # Hide current\n        self.current_panel.hide()\n\n        # Show new\n        self.current_panel = self.panels[tab_name]\n        self.current_panel.show()\n</code></pre>"},{"location":"api/patterns/composition/#composition-best-practices","title":"Composition Best Practices","text":""},{"location":"api/patterns/composition/#do","title":"Do","text":"<ul> <li>Break complex UIs into reusable components</li> <li>Use composition over inheritance</li> <li>Pass configuration through constructor parameters</li> <li>Keep components focused on single responsibility</li> </ul>"},{"location":"api/patterns/composition/#dont","title":"Don't","text":"<ul> <li>Create deeply nested component hierarchies</li> <li>Duplicate layout code across components</li> <li>Tightly couple components to specific data structures</li> <li>Mix business logic with presentation</li> </ul>"},{"location":"api/patterns/signals/","title":"Signal Patterns","text":"<p>Qt signal-based interactivity patterns.</p>"},{"location":"api/patterns/signals/#basic-signal-connection","title":"Basic Signal Connection","text":"<pre><code># Connect signals to handlers\nbutton.clicked.connect(self.on_button_click)\ntable.row_clicked.connect(lambda idx, data: self.select_row(idx))\nsearch.text_changed.connect(self.filter_results)\n</code></pre>"},{"location":"api/patterns/signals/#lambda-functions","title":"Lambda Functions","text":"<p>Use lambdas for inline handlers or to pass additional data:</p> <pre><code># Pass additional context\nfor i, item in enumerate(items):\n    button = Button(item.name)\n    button.clicked.connect(lambda checked, idx=i: self.select_item(idx))\n    layout.addWidget(button)\n</code></pre>"},{"location":"api/patterns/signals/#signal-forwarding","title":"Signal Forwarding","text":"<p>Forward signals to parent components:</p> <pre><code>from PySide6.QtCore import Signal\n\nclass FilePanel(Panel):\n    file_selected = Signal(str)  # Forward selection\n\n    def __init__(self):\n        super().__init__()\n        self.file_list = FileList()\n        self.file_list.item_clicked.connect(self.file_selected.emit)\n        self.add_widget(self.file_list)\n</code></pre>"},{"location":"api/patterns/signals/#custom-signals","title":"Custom Signals","text":"<p>Define custom signals for component communication:</p> <pre><code>from PySide6.QtCore import QObject, Signal\n\nclass DataManager(QObject):\n    data_loaded = Signal(list)\n    data_error = Signal(str)\n    loading_started = Signal()\n    loading_finished = Signal()\n\n    def load_data(self):\n        self.loading_started.emit()\n        try:\n            data = fetch_data()\n            self.data_loaded.emit(data)\n        except Exception as e:\n            self.data_error.emit(str(e))\n        finally:\n            self.loading_finished.emit()\n</code></pre>"},{"location":"api/patterns/signals/#signal-disconnection","title":"Signal Disconnection","text":"<p>Disconnect signals when needed:</p> <pre><code>class DynamicView(Panel):\n    def __init__(self):\n        super().__init__()\n        self.current_handler = None\n\n    def set_handler(self, handler):\n        # Disconnect previous handler\n        if self.current_handler:\n            self.button.clicked.disconnect(self.current_handler)\n\n        # Connect new handler\n        self.current_handler = handler\n        self.button.clicked.connect(handler)\n</code></pre>"},{"location":"api/patterns/signals/#debouncing","title":"Debouncing","text":"<p>Debounce rapid signals (e.g., search input):</p> <pre><code>from PySide6.QtCore import QTimer\n\nclass SearchPanel(Panel):\n    def __init__(self):\n        super().__init__()\n        self.search = SearchBox()\n        self.search.text_changed.connect(self.on_text_changed)\n\n        self.debounce_timer = QTimer()\n        self.debounce_timer.setSingleShot(True)\n        self.debounce_timer.timeout.connect(self.execute_search)\n\n        self.pending_query = \"\"\n\n    def on_text_changed(self, text):\n        self.pending_query = text\n        self.debounce_timer.start(300)  # 300ms debounce\n\n    def execute_search(self):\n        self.perform_search(self.pending_query)\n</code></pre>"},{"location":"api/patterns/signals/#event-bus-pattern","title":"Event Bus Pattern","text":"<p>Central event bus for application-wide communication:</p> <pre><code>from PySide6.QtCore import QObject, Signal\n\nclass EventBus(QObject):\n    _instance = None\n\n    # Application events\n    theme_changed = Signal(str)\n    project_loaded = Signal(str)\n    file_opened = Signal(str)\n    code_applied = Signal(str, str, int, int)\n\n    @classmethod\n    def instance(cls):\n        if cls._instance is None:\n            cls._instance = EventBus()\n        return cls._instance\n\n# Usage\nEventBus.instance().theme_changed.connect(self.on_theme_changed)\nEventBus.instance().theme_changed.emit(\"dark\")\n</code></pre>"},{"location":"api/patterns/signals/#signal-best-practices","title":"Signal Best Practices","text":""},{"location":"api/patterns/signals/#do","title":"Do","text":"<ul> <li>Use descriptive signal names (<code>item_selected</code>, not <code>clicked</code>)</li> <li>Include relevant data in signal parameters</li> <li>Disconnect signals when components are destroyed</li> <li>Use <code>blockSignals()</code> when updating programmatically</li> </ul>"},{"location":"api/patterns/signals/#dont","title":"Don't","text":"<ul> <li>Connect signals in loops without proper cleanup</li> <li>Emit signals during initialization (use <code>QTimer.singleShot</code>)</li> <li>Create circular signal connections</li> <li>Ignore signal parameters that provide context</li> </ul>"},{"location":"api/patterns/theming/","title":"Theming Patterns","text":"<p>Color customization and theme management.</p>"},{"location":"api/patterns/theming/#theme-management","title":"Theme Management","text":""},{"location":"api/patterns/theming/#switch-themes","title":"Switch Themes","text":"<pre><code>from design_system import set_theme, get_theme\n\n# Switch to dark theme\nset_theme(\"dark\")\n\n# Switch to light theme\nset_theme(\"light\")\n\n# Get current theme\ncurrent = get_theme()  # \"light\" or \"dark\"\n</code></pre>"},{"location":"api/patterns/theming/#apply-theme-stylesheet","title":"Apply Theme Stylesheet","text":"<pre><code>from design_system import generate_stylesheet, COLORS\n\n# Generate and apply stylesheet\napp.setStyleSheet(generate_stylesheet(COLORS))\n</code></pre>"},{"location":"api/patterns/theming/#custom-themes","title":"Custom Themes","text":""},{"location":"api/patterns/theming/#register-custom-theme","title":"Register Custom Theme","text":"<pre><code>from design_system import ColorPalette, register_theme, set_theme\n\n# Create custom palette\ncorporate_palette = ColorPalette(\n    # Brand colors\n    primary=\"#0066CC\",\n    primary_light=\"#3399FF\",\n    primary_dark=\"#004499\",\n    primary_hover=\"#0055AA\",\n    primary_foreground=\"#FFFFFF\",\n\n    secondary=\"#FF5722\",\n    secondary_light=\"#FF8A65\",\n    secondary_dark=\"#E64A19\",\n\n    # Semantic colors\n    success=\"#4CAF50\",\n    success_light=\"#C8E6C9\",\n    warning=\"#FF9800\",\n    warning_light=\"#FFE0B2\",\n    error=\"#F44336\",\n    error_light=\"#FFCDD2\",\n    info=\"#2196F3\",\n    info_light=\"#BBDEFB\",\n\n    # Surface colors\n    background=\"#FFFFFF\",\n    surface=\"#F5F5F5\",\n    surface_light=\"#FAFAFA\",\n    surface_elevated=\"#FFFFFF\",\n\n    # Text colors\n    text_primary=\"#212121\",\n    text_secondary=\"#757575\",\n    text_disabled=\"#BDBDBD\",\n    text_hint=\"#9E9E9E\",\n\n    # Border colors\n    border=\"#E0E0E0\",\n    border_light=\"#EEEEEE\",\n    divider=\"#E0E0E0\",\n)\n\n# Register theme\nregister_theme(\"corporate\", corporate_palette)\n\n# Activate theme\nset_theme(\"corporate\")\n</code></pre>"},{"location":"api/patterns/theming/#component-level-theming","title":"Component-Level Theming","text":""},{"location":"api/patterns/theming/#pass-colors-to-components","title":"Pass Colors to Components","text":"<pre><code>from design_system import Button, COLORS, ColorPalette\n\n# Use global colors (theme-aware)\nbutton = Button(\"Save\", variant=\"primary\", colors=COLORS)\n\n# Use custom colors for specific component\ncustom_colors = ColorPalette(primary=\"#FF5722\")\nspecial_button = Button(\"Special\", variant=\"primary\", colors=custom_colors)\n</code></pre>"},{"location":"api/patterns/theming/#override-specific-colors","title":"Override Specific Colors","text":"<pre><code>from design_system import COLORS\n\n# Access themed colors\nbg_color = COLORS.background\ntext_color = COLORS.text_primary\n\n# Use in manual styling\nwidget.setStyleSheet(f\"\"\"\n    QWidget {{\n        background-color: {bg_color};\n        color: {text_color};\n    }}\n\"\"\")\n</code></pre>"},{"location":"api/patterns/theming/#dynamic-theme-switching","title":"Dynamic Theme Switching","text":""},{"location":"api/patterns/theming/#react-to-theme-changes","title":"React to Theme Changes","text":"<pre><code>from design_system import set_theme, generate_stylesheet, COLORS\n\nclass ThemeAwareApp(QMainWindow):\n    def __init__(self):\n        super().__init__()\n        self.apply_theme(\"light\")\n\n    def toggle_theme(self):\n        current = get_theme()\n        new_theme = \"dark\" if current == \"light\" else \"light\"\n        self.apply_theme(new_theme)\n\n    def apply_theme(self, theme):\n        set_theme(theme)\n        self.setStyleSheet(generate_stylesheet(COLORS))\n        # Notify child components if needed\n        self.theme_changed.emit(theme)\n</code></pre>"},{"location":"api/patterns/theming/#theme-aware-custom-widgets","title":"Theme-Aware Custom Widgets","text":"<pre><code>from design_system import COLORS\n\nclass CustomWidget(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.update_style()\n\n    def update_style(self):\n        # Use current theme colors\n        self.setStyleSheet(f\"\"\"\n            CustomWidget {{\n                background-color: {COLORS.surface};\n                border: 1px solid {COLORS.border};\n                border-radius: 8px;\n            }}\n            CustomWidget:hover {{\n                background-color: {COLORS.surface_light};\n            }}\n        \"\"\")\n</code></pre>"},{"location":"api/patterns/theming/#color-utilities","title":"Color Utilities","text":""},{"location":"api/patterns/theming/#conditional-styling","title":"Conditional Styling","text":"<pre><code>from design_system import COLORS\n\ndef get_status_color(status: str) -&gt; str:\n    \"\"\"Get color for status indicator.\"\"\"\n    return {\n        \"success\": COLORS.success,\n        \"warning\": COLORS.warning,\n        \"error\": COLORS.error,\n        \"info\": COLORS.info,\n    }.get(status, COLORS.text_secondary)\n\ndef get_file_type_color(file_type: str) -&gt; str:\n    \"\"\"Get color for file type icon.\"\"\"\n    return {\n        \"text\": COLORS.file_text,\n        \"audio\": COLORS.file_audio,\n        \"video\": COLORS.file_video,\n        \"image\": COLORS.file_image,\n        \"pdf\": COLORS.file_pdf,\n    }.get(file_type, COLORS.text_secondary)\n</code></pre>"},{"location":"api/patterns/theming/#color-manipulation","title":"Color Manipulation","text":"<pre><code>def adjust_opacity(color: str, opacity: float) -&gt; str:\n    \"\"\"Add opacity to hex color.\"\"\"\n    # Convert hex to rgba\n    r = int(color[1:3], 16)\n    g = int(color[3:5], 16)\n    b = int(color[5:7], 16)\n    return f\"rgba({r}, {g}, {b}, {opacity})\"\n\n# Usage\nhover_bg = adjust_opacity(COLORS.primary, 0.1)\n</code></pre>"},{"location":"api/patterns/theming/#theme-best-practices","title":"Theme Best Practices","text":""},{"location":"api/patterns/theming/#do","title":"Do","text":"<ul> <li>Use design tokens instead of hardcoded colors</li> <li>Apply themes at the application level</li> <li>Update all components when theme changes</li> <li>Test both light and dark themes</li> </ul>"},{"location":"api/patterns/theming/#dont","title":"Don't","text":"<ul> <li>Hardcode color values in components</li> <li>Mix themed and non-themed colors</li> <li>Ignore contrast ratios for accessibility</li> <li>Forget to update icons/images for themes</li> </ul>"},{"location":"api/reference/","title":"Reference","text":"<p>Technical reference for the QualCoder Design System.</p>"},{"location":"api/reference/#sections","title":"Sections","text":"<ul> <li>Module Index \u2014 All modules and their contents</li> <li>Dependencies \u2014 Required packages</li> </ul>"},{"location":"api/reference/#quick-links","title":"Quick Links","text":""},{"location":"api/reference/#import-everything","title":"Import Everything","text":"<pre><code>from design_system import *\n</code></pre>"},{"location":"api/reference/#import-by-category","title":"Import by Category","text":"<pre><code># Tokens\nfrom design_system import COLORS, SPACING, RADIUS, TYPOGRAPHY\n\n# Core components\nfrom design_system import Button, Input, Label, Card, Badge\n\n# Layout\nfrom design_system import AppContainer, Panel, Sidebar, Toolbar\n\n# Forms\nfrom design_system import SearchBox, Select, Textarea\n\n# Data display\nfrom design_system import DataTable, CodeTree, FileList\n\n# Feedback\nfrom design_system import Toast, Spinner, ProgressBar\n</code></pre>"},{"location":"api/reference/#type-annotations","title":"Type Annotations","text":"<p>All components include type annotations for IDE support:</p> <pre><code>def add_file(\n    self,\n    id: str,\n    name: str,\n    file_type: str,\n    size: str = \"\",\n    status: str = \"\"\n) -&gt; None:\n    ...\n</code></pre>"},{"location":"api/reference/#signal-types","title":"Signal Types","text":"<p>Common signal signatures:</p> Signal Parameters Description <code>clicked</code> <code>()</code> Simple click <code>text_changed</code> <code>(str)</code> Text updated <code>value_changed</code> <code>(Any)</code> Value changed <code>item_clicked</code> <code>(str)</code> Item ID clicked <code>row_clicked</code> <code>(int, dict)</code> Row index and data <code>selection_changed</code> <code>(list)</code> Selected items"},{"location":"api/reference/dependencies/","title":"Dependencies","text":"<p>Required packages for the QualCoder Design System.</p>"},{"location":"api/reference/dependencies/#core-dependencies","title":"Core Dependencies","text":"Package Version Purpose Required PySide6 \u22656.5 Qt widgets and layouts Yes qtawesome \u22651.2 Material Design Icons (mdi6) Yes"},{"location":"api/reference/dependencies/#visualization-dependencies","title":"Visualization Dependencies","text":"Package Version Purpose Required pyqtgraph \u22650.13 Charts and plotting Yes networkx \u22653.0 Graph algorithms Yes wordcloud \u22651.9 Word cloud generation Yes numpy \u22651.24 Numerical operations Yes"},{"location":"api/reference/dependencies/#document-dependencies","title":"Document Dependencies","text":"Package Version Purpose Required pymupdf \u22651.23 PDF rendering Optional"},{"location":"api/reference/dependencies/#installation","title":"Installation","text":""},{"location":"api/reference/dependencies/#all-dependencies","title":"All Dependencies","text":"<pre><code>pip install PySide6 qtawesome pyqtgraph networkx wordcloud numpy pymupdf\n</code></pre>"},{"location":"api/reference/dependencies/#minimal-installation","title":"Minimal Installation","text":"<pre><code>pip install PySide6 qtawesome\n</code></pre>"},{"location":"api/reference/dependencies/#with-pyprojecttoml","title":"With pyproject.toml","text":"<pre><code>[project]\ndependencies = [\n    \"PySide6&gt;=6.5\",\n    \"qtawesome&gt;=1.2\",\n    \"pyqtgraph&gt;=0.13\",\n    \"networkx&gt;=3.0\",\n    \"wordcloud&gt;=1.9\",\n    \"numpy&gt;=1.24\",\n]\n\n[project.optional-dependencies]\npdf = [\"pymupdf&gt;=1.23\"]\n</code></pre>"},{"location":"api/reference/dependencies/#compatibility","title":"Compatibility","text":""},{"location":"api/reference/dependencies/#python-version","title":"Python Version","text":"<ul> <li>Python 3.10+ required</li> <li>Python 3.11+ recommended</li> </ul>"},{"location":"api/reference/dependencies/#platform-support","title":"Platform Support","text":"Platform Status Windows Supported macOS Supported Linux Supported"},{"location":"api/reference/dependencies/#qt-version","title":"Qt Version","text":"<ul> <li>PySide6 6.5+ (Qt 6.5+)</li> <li>Earlier versions may work but are untested</li> </ul>"},{"location":"api/reference/dependencies/#optional-features","title":"Optional Features","text":""},{"location":"api/reference/dependencies/#pdf-viewer","title":"PDF Viewer","text":"<p>The <code>PDFPageViewer</code> component requires <code>pymupdf</code>:</p> <pre><code>pip install pymupdf\n</code></pre> <p>Without this package, PDF viewer components will raise an import error.</p>"},{"location":"api/reference/dependencies/#word-cloud","title":"Word Cloud","text":"<p>The <code>WordCloudWidget</code> requires <code>wordcloud</code>:</p> <pre><code>pip install wordcloud\n</code></pre>"},{"location":"api/reference/dependencies/#network-graph","title":"Network Graph","text":"<p>The <code>NetworkGraphWidget</code> requires <code>networkx</code>:</p> <pre><code>pip install networkx\n</code></pre>"},{"location":"api/reference/dependencies/#troubleshooting","title":"Troubleshooting","text":""},{"location":"api/reference/dependencies/#pyside6-installation-issues","title":"PySide6 Installation Issues","text":"<p>On some systems, you may need to install additional Qt dependencies:</p> <p>Ubuntu/Debian: <pre><code>sudo apt-get install libxcb-xinerama0\n</code></pre></p> <p>macOS: <pre><code>brew install qt6\n</code></pre></p>"},{"location":"api/reference/dependencies/#qtawesome-icons-not-loading","title":"qtawesome Icons Not Loading","text":"<p>Ensure qtawesome is properly installed:</p> <pre><code>import qtawesome as qta\n# Test icon loading\nicon = qta.icon(\"mdi6.folder\")\n</code></pre>"},{"location":"api/reference/dependencies/#pyqtgraph-opengl-issues","title":"PyQtGraph OpenGL Issues","text":"<p>If you encounter OpenGL errors with charts:</p> <pre><code>import pyqtgraph as pg\npg.setConfigOption('useOpenGL', False)\n</code></pre>"},{"location":"api/reference/modules/","title":"Module Index","text":"<p>Complete module listing for the QualCoder Design System.</p>"},{"location":"api/reference/modules/#core-modules","title":"Core Modules","text":"Module Purpose Key Exports <code>tokens.py</code> Design tokens <code>COLORS</code>, <code>SPACING</code>, <code>RADIUS</code>, <code>TYPOGRAPHY</code>, <code>LAYOUT</code>, <code>ANIMATION</code>, <code>SHADOWS</code>, <code>ZINDEX</code>, <code>ColorPalette</code> <code>stylesheet.py</code> Qt stylesheet generation <code>generate_stylesheet</code> <code>components.py</code> Core UI components <code>Button</code>, <code>Input</code>, <code>Label</code>, <code>Card</code>, <code>Badge</code>, <code>Alert</code>, <code>Avatar</code>, <code>Chip</code>, <code>FileIcon</code>, <code>Separator</code> <code>icons.py</code> Icon system <code>Icon</code>, <code>IconText</code>, <code>icon</code>, <code>get_pixmap</code>, <code>get_qicon</code>"},{"location":"api/reference/modules/#layout-modules","title":"Layout Modules","text":"Module Purpose Key Exports <code>layout.py</code> Layout components <code>AppContainer</code>, <code>TitleBar</code>, <code>MenuBar</code>, <code>MainContent</code>, <code>Panel</code>, <code>PanelHeader</code>, <code>Sidebar</code>, <code>Toolbar</code>, <code>ToolbarGroup</code>, <code>ToolbarButton</code>, <code>StatusBar</code>, <code>TabBar</code>"},{"location":"api/reference/modules/#form-modules","title":"Form Modules","text":"Module Purpose Key Exports <code>forms.py</code> Form inputs <code>SearchBox</code>, <code>Select</code>, <code>MultiSelect</code>, <code>Textarea</code>, <code>NumberInput</code>, <code>RangeSlider</code>, <code>ColorPicker</code>, <code>FormGroup</code>, <code>CoderSelector</code>"},{"location":"api/reference/modules/#navigation-modules","title":"Navigation Modules","text":"Module Purpose Key Exports <code>navigation.py</code> Navigation components <code>Tab</code>, <code>TabGroup</code>, <code>MenuItem</code>, <code>Breadcrumb</code>, <code>NavList</code>, <code>StepIndicator</code>, <code>MediaTypeSelector</code>"},{"location":"api/reference/modules/#data-display-modules","title":"Data Display Modules","text":"Module Purpose Key Exports <code>data_display.py</code> Data display components <code>DataTable</code>, <code>InfoCard</code>, <code>KeyValueList</code>, <code>EmptyState</code>, <code>HeatMapGrid</code>, <code>HeatMapCell</code>, <code>CodeDetailCard</code>, <code>FileCell</code>, <code>EntityCell</code>, <code>StatRow</code> <code>code_tree.py</code> Code tree <code>CodeTree</code>, <code>CodeItem</code>, <code>CodeTreeNode</code>"},{"location":"api/reference/modules/#list-modules","title":"List Modules","text":"Module Purpose Key Exports <code>lists.py</code> List components <code>FileList</code>, <code>CaseList</code>, <code>AttributeList</code>, <code>QueueList</code>, <code>ListItem</code>, <code>BaseList</code>, <code>FileListItem</code>, <code>CaseListItem</code>, <code>AttributeListItem</code>, <code>QueueListItem</code>"},{"location":"api/reference/modules/#media-modules","title":"Media Modules","text":"Module Purpose Key Exports <code>media.py</code> Media components <code>VideoContainer</code>, <code>WaveformVisualization</code>, <code>Timeline</code>, <code>PlayerControls</code>, <code>Thumbnail</code>, <code>ThumbnailStrip</code>"},{"location":"api/reference/modules/#chatai-modules","title":"Chat/AI Modules","text":"Module Purpose Key Exports <code>chat.py</code> Chat/AI components <code>MessageBubble</code>, <code>TypingIndicator</code>, <code>ChatInput</code>, <code>QuickPrompts</code>, <code>CodeSuggestion</code>, <code>AIReasoningPanel</code>, <code>ConfidenceScore</code>"},{"location":"api/reference/modules/#document-modules","title":"Document Modules","text":"Module Purpose Key Exports <code>document.py</code> Document components <code>TextPanel</code>, <code>LineNumberArea</code>, <code>TranscriptPanel</code>, <code>TranscriptSegment</code>, <code>SelectionPopup</code>, <code>TextColor</code>"},{"location":"api/reference/modules/#feedback-modules","title":"Feedback Modules","text":"Module Purpose Key Exports <code>spinner.py</code> Loading spinners <code>Spinner</code>, <code>LoadingIndicator</code>, <code>LoadingOverlay</code>, <code>SkeletonLoader</code> <code>toast.py</code> Toast notifications <code>Toast</code>, <code>ToastManager</code>, <code>ToastContainer</code> <code>progress_bar.py</code> Progress bars <code>ProgressBar</code>, <code>ProgressBarLabeled</code>, <code>ProgressBarWidget</code>, <code>RelevanceScoreBar</code>, <code>RelevanceBarWidget</code>, <code>ScoreIndicator</code> <code>stat_card.py</code> Statistics cards <code>StatCard</code>, <code>StatCardRow</code>, <code>MiniStatCard</code>"},{"location":"api/reference/modules/#visualization-modules","title":"Visualization Modules","text":"Module Purpose Key Exports <code>charts.py</code> Chart components <code>ChartWidget</code>, <code>ChartDataPoint</code>, <code>PieChart</code>, <code>SparkLine</code>, <code>LegendItem</code> <code>network_graph.py</code> Network graph <code>NetworkGraphWidget</code>, <code>GraphNode</code>, <code>GraphEdge</code> <code>word_cloud.py</code> Word cloud <code>WordCloudWidget</code>, <code>WordCloudPreview</code> <code>pdf_viewer.py</code> PDF document viewer <code>PDFPageViewer</code>, <code>PDFSelection</code>, <code>PDFGraphicsView</code>, <code>PDFThumbnail</code>, <code>PDFTextBlock</code>"},{"location":"api/reference/modules/#picker-modules","title":"Picker Modules","text":"Module Purpose Key Exports <code>pickers.py</code> Picker components <code>TypeSelector</code>, <code>TypeOptionCard</code>, <code>ColorSchemeSelector</code>, <code>ColorSchemeOption</code>, <code>ChartTypeSelector</code>, <code>RadioCardGroup</code>, <code>RadioCard</code>"},{"location":"api/reference/modules/#advanced-modules","title":"Advanced Modules","text":"Module Purpose Key Exports <code>modal.py</code> Modal dialogs <code>Modal</code>, <code>ModalHeader</code>, <code>ModalBody</code>, <code>ModalFooter</code> <code>toggle.py</code> Toggle/switch <code>Toggle</code>, <code>LabeledToggle</code> <code>context_menu.py</code> Context menus <code>ContextMenu</code>, <code>ContextMenuItem</code>, <code>ContextMenuWidget</code>, <code>ContextMenuItemWidget</code> <code>filters.py</code> Filter components <code>FilterPanel</code>, <code>FilterSection</code>, <code>FilterChip</code>, <code>FilterChipGroup</code>, <code>SearchInput</code>, <code>SearchOptions</code>, <code>ViewToggle</code> <code>editors.py</code> Editor components <code>CodeEditor</code>, <code>LineNumbers</code>, <code>SimpleSyntaxHighlighter</code>, <code>EditorToolbar</code>, <code>DiffViewer</code>, <code>RichTextEditor</code>, <code>MemoEditor</code> <code>pagination.py</code> Pagination <code>Pagination</code>, <code>SimplePagination</code>, <code>PageButton</code>, <code>PaginationInfo</code> <code>calendar.py</code> Calendar components <code>DateRangePicker</code>, <code>QuickDateSelect</code>, <code>CalendarMini</code>, <code>CalendarDay</code>, <code>CalendarNavigation</code> <code>upload.py</code> Upload components <code>DropZone</code>, <code>CompactDropZone</code>, <code>FileTypeBadges</code>, <code>FileTypeBadge</code>, <code>UploadProgress</code>, <code>UploadList</code> <code>image_annotation.py</code> Image annotation <code>ImageAnnotationLayer</code>, <code>ImageAnnotation</code>, <code>AnnotationMode</code>, <code>AnnotationToolbar</code>"},{"location":"api/reference/modules/#theme-functions","title":"Theme Functions","text":"Function Purpose <code>get_theme()</code> Get current theme name <code>set_theme(name)</code> Set active theme <code>get_colors()</code> Get current color palette <code>register_theme(name, palette)</code> Register custom theme <code>generate_stylesheet(colors)</code> Generate Qt stylesheet"},{"location":"api/reference/modules/#data-classes","title":"Data Classes","text":"Class Module Purpose <code>ColorPalette</code> <code>tokens.py</code> Color palette definition <code>ListItem</code> <code>lists.py</code> List item data <code>CodeItem</code> <code>code_tree.py</code> Code tree node data <code>ChartDataPoint</code> <code>charts.py</code> Chart data point <code>GraphNode</code> <code>network_graph.py</code> Network node data <code>GraphEdge</code> <code>network_graph.py</code> Network edge data <code>TranscriptSegment</code> <code>document.py</code> Transcript segment data <code>PDFSelection</code> <code>pdf_viewer.py</code> PDF text selection <code>ImageAnnotation</code> <code>image_annotation.py</code> Image annotation data"},{"location":"api/tokens/","title":"Design Tokens","text":"<p>Design tokens are the foundation of the QualCoder Design System \u2014 consistent values for colors, spacing, typography, and layout that ensure visual coherence across all components.</p>"},{"location":"api/tokens/#overview","title":"Overview","text":"Token Module Purpose <code>COLORS</code> <code>tokens.py</code> Color palette with 60+ properties <code>SPACING</code> <code>tokens.py</code> Spacing scale (4px to 32px) <code>RADIUS</code> <code>tokens.py</code> Border radius values <code>TYPOGRAPHY</code> <code>tokens.py</code> Font families, sizes, weights <code>LAYOUT</code> <code>tokens.py</code> Layout constants <code>ANIMATION</code> <code>tokens.py</code> Animation durations and easing <code>SHADOWS</code> <code>tokens.py</code> Shadow definitions <code>ZINDEX</code> <code>tokens.py</code> Z-index layering"},{"location":"api/tokens/#quick-reference","title":"Quick Reference","text":"<pre><code>from design_system import (\n    COLORS, SPACING, RADIUS, TYPOGRAPHY,\n    LAYOUT, ANIMATION, SHADOWS, ZINDEX\n)\n\n# Colors\nCOLORS.primary          # Primary brand color\nCOLORS.background       # Page background\nCOLORS.text_primary     # Main text color\n\n# Spacing\nSPACING.sm              # 8px\nSPACING.md              # 12px\nSPACING.lg              # 16px\n\n# Typography\nTYPOGRAPHY.text_base    # 14px\nTYPOGRAPHY.font_family  # \"Roboto\"\n\n# Radius\nRADIUS.md               # 8px\nRADIUS.full             # 9999px (circular)\n</code></pre>"},{"location":"api/tokens/#sections","title":"Sections","text":"<ul> <li>Colors \u2014 Complete color system with theming</li> <li>Spacing \u2014 Spacing scale and usage</li> <li>Typography \u2014 Font families, sizes, and weights</li> <li>Layout &amp; Animation \u2014 Layout constants, shadows, z-index</li> </ul>"},{"location":"api/tokens/colors/","title":"Colors","text":"<p>The color system provides 60+ color properties organized into semantic categories, with built-in support for light and dark themes.</p>"},{"location":"api/tokens/colors/#colorpalette","title":"ColorPalette","text":"<pre><code>from design_system import (\n    COLORS, ColorPalette, get_colors, get_theme,\n    set_theme, register_theme, COLORS_LIGHT, COLORS_DARK\n)\n\n# Use default colors (follows current theme)\nbutton = Button(\"Save\", colors=COLORS)\n\n# Get default palette\ncolors = get_colors()\n\n# Theme management\nset_theme(\"light\")  # or \"dark\"\ncurrent_theme = get_theme()\n\n# Access theme-specific palettes directly\nlight_colors = COLORS_LIGHT\ndark_colors = COLORS_DARK\n</code></pre>"},{"location":"api/tokens/colors/#color-categories","title":"Color Categories","text":""},{"location":"api/tokens/colors/#primary-colors","title":"Primary Colors","text":"Property Description <code>primary</code> Main brand color <code>primary_light</code> Lighter variant for hover states <code>primary_dark</code> Darker variant for pressed states <code>primary_hover</code> Hover state color <code>primary_foreground</code> Text color on primary background"},{"location":"api/tokens/colors/#secondary-colors","title":"Secondary Colors","text":"Property Description <code>secondary</code> Secondary brand color <code>secondary_light</code> Lighter variant <code>secondary_dark</code> Darker variant <code>secondary_hover</code> Hover state color"},{"location":"api/tokens/colors/#semantic-colors","title":"Semantic Colors","text":"Property Description <code>success</code> Success state (green) <code>success_light</code> Light success background <code>warning</code> Warning state (yellow/orange) <code>warning_light</code> Light warning background <code>error</code> Error state (red) <code>error_light</code> Light error background <code>info</code> Info state (blue) <code>info_light</code> Light info background"},{"location":"api/tokens/colors/#surface-colors","title":"Surface Colors","text":"Property Description <code>background</code> Page background <code>surface</code> Card/panel background <code>surface_light</code> Slightly elevated surface <code>surface_lighter</code> More elevated surface <code>surface_elevated</code> Highest elevation surface"},{"location":"api/tokens/colors/#text-colors","title":"Text Colors","text":"Property Description <code>text_primary</code> Main text color <code>text_secondary</code> Secondary/muted text <code>text_disabled</code> Disabled text <code>text_hint</code> Hint/placeholder text"},{"location":"api/tokens/colors/#border-colors","title":"Border Colors","text":"Property Description <code>border</code> Default border color <code>border_light</code> Light border color <code>divider</code> Divider line color"},{"location":"api/tokens/colors/#file-type-colors","title":"File Type Colors","text":"Property Description <code>file_text</code> Text file icon color <code>file_audio</code> Audio file icon color <code>file_video</code> Video file icon color <code>file_image</code> Image file icon color <code>file_pdf</code> PDF file icon color"},{"location":"api/tokens/colors/#code-highlighting","title":"Code Highlighting","text":"Property Description <code>code_yellow</code> Keywords, classes <code>code_red</code> Strings <code>code_green</code> Comments <code>code_purple</code> Numbers <code>code_blue</code> Functions <code>code_pink</code> Operators <code>code_orange</code> Decorators <code>code_cyan</code> Built-ins"},{"location":"api/tokens/colors/#custom-themes","title":"Custom Themes","text":"<p>Register and use custom color themes:</p> <pre><code>from design_system import ColorPalette, register_theme, set_theme\n\n# Create custom palette\ncustom_palette = ColorPalette(\n    primary=\"#0066CC\",\n    primary_light=\"#3399FF\",\n    primary_dark=\"#004499\",\n    secondary=\"#FF5722\",\n    background=\"#FFFFFF\",\n    surface=\"#F5F5F5\",\n    text_primary=\"#212121\",\n    text_secondary=\"#757575\",\n    border=\"#E0E0E0\",\n    success=\"#4CAF50\",\n    warning=\"#FF9800\",\n    error=\"#F44336\",\n    info=\"#2196F3\",\n    # ... other properties\n)\n\n# Register theme\nregister_theme(\"corporate\", custom_palette)\n\n# Activate theme\nset_theme(\"corporate\")\n</code></pre>"},{"location":"api/tokens/colors/#usage-examples","title":"Usage Examples","text":""},{"location":"api/tokens/colors/#component-with-colors","title":"Component with Colors","text":"<pre><code>from design_system import Button, COLORS\n\n# Components automatically use current theme\nbutton = Button(\"Save\", variant=\"primary\")\n\n# Or pass colors explicitly\nbutton = Button(\"Save\", variant=\"primary\", colors=COLORS)\n</code></pre>"},{"location":"api/tokens/colors/#manual-color-access","title":"Manual Color Access","text":"<pre><code>from design_system import COLORS\n\n# Use in stylesheets\nstylesheet = f\"\"\"\n    QWidget {{\n        background-color: {COLORS.background};\n        color: {COLORS.text_primary};\n    }}\n    QPushButton {{\n        background-color: {COLORS.primary};\n        border-radius: 4px;\n    }}\n\"\"\"\n</code></pre>"},{"location":"api/tokens/colors/#conditional-styling","title":"Conditional Styling","text":"<pre><code>from design_system import COLORS\n\ndef get_status_color(status: str) -&gt; str:\n    return {\n        \"success\": COLORS.success,\n        \"warning\": COLORS.warning,\n        \"error\": COLORS.error,\n        \"info\": COLORS.info,\n    }.get(status, COLORS.text_secondary)\n</code></pre>"},{"location":"api/tokens/layout-animation/","title":"Layout &amp; Animation","text":"<p>Layout constants, shadows, z-index layering, and animation timing tokens.</p>"},{"location":"api/tokens/layout-animation/#layout-constants","title":"Layout Constants","text":"<pre><code>from design_system import LAYOUT\n\nLAYOUT.sidebar_width   # 300px \u2014 Default sidebar width\nLAYOUT.toolbar_height  # 52px  \u2014 Toolbar height\nLAYOUT.panel_min_width # 200px \u2014 Minimum panel width\n</code></pre>"},{"location":"api/tokens/layout-animation/#usage","title":"Usage","text":"<pre><code>from design_system import LAYOUT\n\nsidebar.setFixedWidth(LAYOUT.sidebar_width)\ntoolbar.setFixedHeight(LAYOUT.toolbar_height)\npanel.setMinimumWidth(LAYOUT.panel_min_width)\n</code></pre>"},{"location":"api/tokens/layout-animation/#animation","title":"Animation","text":"<pre><code>from design_system import ANIMATION\n\nANIMATION.duration_fast    # 150ms \u2014 Quick transitions\nANIMATION.duration_normal  # 250ms \u2014 Standard transitions\nANIMATION.duration_slow    # 400ms \u2014 Deliberate animations\nANIMATION.easing_default   # \"ease-in-out\"\n</code></pre>"},{"location":"api/tokens/layout-animation/#animation-examples","title":"Animation Examples","text":"<pre><code>from PySide6.QtCore import QPropertyAnimation, QEasingCurve\nfrom design_system import ANIMATION\n\n# Fade animation\nanimation = QPropertyAnimation(widget, b\"opacity\")\nanimation.setDuration(ANIMATION.duration_normal)\nanimation.setEasingCurve(QEasingCurve.InOutQuad)\nanimation.setStartValue(0.0)\nanimation.setEndValue(1.0)\nanimation.start()\n</code></pre>"},{"location":"api/tokens/layout-animation/#shadows","title":"Shadows","text":"<pre><code>from design_system import SHADOWS\n\nSHADOWS.sm   # Small shadow \u2014 subtle elevation\nSHADOWS.md   # Medium shadow \u2014 cards, panels\nSHADOWS.lg   # Large shadow \u2014 modals, dropdowns\nSHADOWS.xl   # Extra large \u2014 floating elements\n</code></pre>"},{"location":"api/tokens/layout-animation/#shadow-values","title":"Shadow Values","text":"Token Typical Use <code>sm</code> Buttons, inputs <code>md</code> Cards, panels <code>lg</code> Dropdowns, popovers <code>xl</code> Modals, dialogs"},{"location":"api/tokens/layout-animation/#usage_1","title":"Usage","text":"<pre><code>from design_system import SHADOWS\n\nstylesheet = f\"\"\"\n    QWidget.card {{\n        {SHADOWS.md}\n    }}\n\n    QMenu {{\n        {SHADOWS.lg}\n    }}\n\"\"\"\n</code></pre>"},{"location":"api/tokens/layout-animation/#z-index","title":"Z-Index","text":"<p>Layer hierarchy for stacking overlapping elements:</p> <pre><code>from design_system import ZINDEX\n\nZINDEX.dropdown  # 1000 \u2014 Dropdown menus\nZINDEX.modal     # 1050 \u2014 Modal dialogs\nZINDEX.popover   # 1060 \u2014 Popovers\nZINDEX.tooltip   # 1070 \u2014 Tooltips\nZINDEX.toast     # 1080 \u2014 Toast notifications\n</code></pre>"},{"location":"api/tokens/layout-animation/#z-index-hierarchy","title":"Z-Index Hierarchy","text":"<pre><code>Base content          0\nDropdowns          1000\nModals             1050\nPopovers           1060\nTooltips           1070\nToasts             1080\n</code></pre>"},{"location":"api/tokens/layout-animation/#usage_2","title":"Usage","text":"<pre><code>from PySide6.QtWidgets import QWidget\nfrom design_system import ZINDEX\n\n# Ensure modal appears above dropdown\nmodal = QWidget()\nmodal.raise_()  # Qt handles z-ordering\n\n# For manual CSS-based layering\nstylesheet = f\"\"\"\n    QWidget.modal {{\n        z-index: {ZINDEX.modal};\n    }}\n\"\"\"\n</code></pre>"},{"location":"api/tokens/layout-animation/#gradients","title":"Gradients","text":"<pre><code>from design_system import GRADIENTS\n\nGRADIENTS.primary    # Primary color gradient\nGRADIENTS.secondary  # Secondary color gradient\n</code></pre>"},{"location":"api/tokens/layout-animation/#usage_3","title":"Usage","text":"<pre><code>from design_system import GRADIENTS\n\nstylesheet = f\"\"\"\n    QPushButton.gradient {{\n        background: {GRADIENTS.primary};\n    }}\n\"\"\"\n</code></pre>"},{"location":"api/tokens/layout-animation/#complete-token-summary","title":"Complete Token Summary","text":"Category Tokens Purpose Colors <code>COLORS</code>, <code>ColorPalette</code> 60+ color properties Spacing <code>SPACING</code> 4px\u201332px scale Radius <code>RADIUS</code> 0px\u20139999px Typography <code>TYPOGRAPHY</code> Fonts, sizes, weights Layout <code>LAYOUT</code> Dimension constants Animation <code>ANIMATION</code> Duration, easing Shadows <code>SHADOWS</code> Elevation shadows Z-Index <code>ZINDEX</code> Layer ordering Gradients <code>GRADIENTS</code> Background gradients"},{"location":"api/tokens/spacing/","title":"Spacing","text":"<p>Consistent spacing creates visual rhythm and hierarchy. The spacing scale uses a 4px base unit.</p>"},{"location":"api/tokens/spacing/#spacing-scale","title":"Spacing Scale","text":"<pre><code>from design_system import SPACING\n\nSPACING.xs    # 4px  \u2014 Tight spacing\nSPACING.sm    # 8px  \u2014 Small gaps\nSPACING.md    # 12px \u2014 Default spacing\nSPACING.lg    # 16px \u2014 Comfortable spacing\nSPACING.xl    # 20px \u2014 Large gaps\nSPACING.xxl   # 24px \u2014 Section spacing\nSPACING.xxxl  # 32px \u2014 Major sections\n</code></pre>"},{"location":"api/tokens/spacing/#visual-reference","title":"Visual Reference","text":"Token Value Use Case <code>xs</code> 4px Icon padding, tight groups <code>sm</code> 8px Button padding, list items <code>md</code> 12px Card padding, form fields <code>lg</code> 16px Section padding <code>xl</code> 20px Card margins <code>xxl</code> 24px Page sections <code>xxxl</code> 32px Major layout gaps"},{"location":"api/tokens/spacing/#usage-examples","title":"Usage Examples","text":""},{"location":"api/tokens/spacing/#layout-margins","title":"Layout Margins","text":"<pre><code>from PySide6.QtWidgets import QVBoxLayout\nfrom design_system import SPACING\n\nlayout = QVBoxLayout()\nlayout.setContentsMargins(\n    SPACING.lg,  # left\n    SPACING.lg,  # top\n    SPACING.lg,  # right\n    SPACING.lg   # bottom\n)\nlayout.setSpacing(SPACING.md)\n</code></pre>"},{"location":"api/tokens/spacing/#component-padding","title":"Component Padding","text":"<pre><code>from design_system import SPACING\n\nstylesheet = f\"\"\"\n    QWidget {{\n        padding: {SPACING.sm}px {SPACING.md}px;\n    }}\n\"\"\"\n</code></pre>"},{"location":"api/tokens/spacing/#consistent-gaps","title":"Consistent Gaps","text":"<pre><code>from design_system import Card, Label, Button, SPACING\n\ncard = Card()\ncard.layout().setSpacing(SPACING.md)\ncard.add_widget(Label(\"Title\"))\ncard.add_widget(Label(\"Description\"))\ncard.add_widget(Button(\"Action\"))\n</code></pre>"},{"location":"api/tokens/spacing/#border-radius","title":"Border Radius","text":"<p>The radius tokens complement spacing for consistent rounded corners:</p> <pre><code>from design_system import RADIUS\n\nRADIUS.none   # 0px   \u2014 Sharp corners\nRADIUS.sm     # 4px   \u2014 Subtle rounding\nRADIUS.md     # 8px   \u2014 Default rounding\nRADIUS.lg     # 12px  \u2014 Prominent rounding\nRADIUS.xl     # 16px  \u2014 Large rounding\nRADIUS.full   # 9999px \u2014 Circular (pills, avatars)\n</code></pre>"},{"location":"api/tokens/spacing/#radius-examples","title":"Radius Examples","text":"<pre><code>from design_system import RADIUS\n\n# Button with default radius\nbutton_style = f\"border-radius: {RADIUS.md}px;\"\n\n# Circular avatar\navatar_style = f\"border-radius: {RADIUS.full}px;\"\n\n# Sharp card\ncard_style = f\"border-radius: {RADIUS.none}px;\"\n</code></pre>"},{"location":"api/tokens/typography/","title":"Typography","text":"<p>Typography tokens define font families, sizes, and weights for consistent text styling.</p>"},{"location":"api/tokens/typography/#font-families","title":"Font Families","text":"<pre><code>from design_system import TYPOGRAPHY\n\nTYPOGRAPHY.font_family       # \"Roboto\"\nTYPOGRAPHY.font_family_mono  # \"Roboto Mono\"\n</code></pre>"},{"location":"api/tokens/typography/#font-sizes","title":"Font Sizes","text":"<pre><code>from design_system import TYPOGRAPHY\n\nTYPOGRAPHY.text_xs   # 10px \u2014 Captions, badges\nTYPOGRAPHY.text_sm   # 12px \u2014 Secondary text, labels\nTYPOGRAPHY.text_base # 14px \u2014 Body text (default)\nTYPOGRAPHY.text_lg   # 16px \u2014 Emphasized text\nTYPOGRAPHY.text_xl   # 18px \u2014 Subheadings\nTYPOGRAPHY.text_2xl  # 24px \u2014 Headings\nTYPOGRAPHY.text_3xl  # 28px \u2014 Page titles\n</code></pre>"},{"location":"api/tokens/typography/#font-weights","title":"Font Weights","text":"<pre><code>from design_system import TYPOGRAPHY\n\nTYPOGRAPHY.weight_normal    # 400 \u2014 Body text\nTYPOGRAPHY.weight_medium    # 500 \u2014 Emphasized\nTYPOGRAPHY.weight_semibold  # 600 \u2014 Subheadings\nTYPOGRAPHY.weight_bold      # 700 \u2014 Headings\n</code></pre>"},{"location":"api/tokens/typography/#size-reference","title":"Size Reference","text":"Token Size Typical Use <code>text_xs</code> 10px Badges, tooltips <code>text_sm</code> 12px Labels, captions <code>text_base</code> 14px Body text <code>text_lg</code> 16px Lead paragraphs <code>text_xl</code> 18px Section headers <code>text_2xl</code> 24px Card titles <code>text_3xl</code> 28px Page titles"},{"location":"api/tokens/typography/#label-component","title":"Label Component","text":"<p>The <code>Label</code> component provides built-in typography variants:</p> <pre><code>from design_system import Label\n\n# Typography variants\ntitle = Label(\"Main Title\", variant=\"title\")\ndescription = Label(\"Some description\", variant=\"description\")\nhint = Label(\"Optional field\", variant=\"hint\")\nerror = Label(\"Invalid input\", variant=\"error\")\nmuted = Label(\"Secondary info\", variant=\"muted\")\n</code></pre>"},{"location":"api/tokens/typography/#variant-mapping","title":"Variant Mapping","text":"Variant Size Weight Color <code>default</code> base normal text_primary <code>title</code> 2xl semibold text_primary <code>description</code> base normal text_secondary <code>hint</code> sm normal text_hint <code>error</code> sm normal error <code>muted</code> sm normal text_disabled <code>secondary</code> base normal text_secondary"},{"location":"api/tokens/typography/#usage-examples","title":"Usage Examples","text":""},{"location":"api/tokens/typography/#custom-stylesheet","title":"Custom Stylesheet","text":"<pre><code>from design_system import TYPOGRAPHY, COLORS\n\nstylesheet = f\"\"\"\n    QLabel {{\n        font-family: {TYPOGRAPHY.font_family};\n        font-size: {TYPOGRAPHY.text_base}px;\n        color: {COLORS.text_primary};\n    }}\n\n    QLabel.title {{\n        font-size: {TYPOGRAPHY.text_2xl}px;\n        font-weight: {TYPOGRAPHY.weight_semibold};\n    }}\n\n    QLabel.code {{\n        font-family: {TYPOGRAPHY.font_family_mono};\n        font-size: {TYPOGRAPHY.text_sm}px;\n    }}\n\"\"\"\n</code></pre>"},{"location":"api/tokens/typography/#dynamic-sizing","title":"Dynamic Sizing","text":"<pre><code>from design_system import TYPOGRAPHY\n\ndef get_heading_size(level: int) -&gt; int:\n    sizes = {\n        1: TYPOGRAPHY.text_3xl,\n        2: TYPOGRAPHY.text_2xl,\n        3: TYPOGRAPHY.text_xl,\n        4: TYPOGRAPHY.text_lg,\n        5: TYPOGRAPHY.text_base,\n        6: TYPOGRAPHY.text_sm,\n    }\n    return sizes.get(level, TYPOGRAPHY.text_base)\n</code></pre>"},{"location":"archive/","title":"Archive","text":"<p>Historical planning documents from early QualCoder v2 development.</p> <p>These documents capture initial research and planning decisions. They may reference outdated directory structures or approaches that have since evolved.</p>"},{"location":"archive/#documents","title":"Documents","text":"Document Purpose LOCALIZATION_ANALYSIS.md i18n/l10n framework analysis (Qt Linguist vs GNU gettext) SCREEN_STORIES_PLAN.md UI layer implementation plan with user stories"},{"location":"archive/#current-documentation","title":"Current Documentation","text":"<p>For up-to-date documentation, see:</p> <ul> <li>Architecture - C4 model, bounded contexts, data flow</li> <li>Tutorials - Hands-on fDDD onboarding</li> <li>Design Documents - Active design specifications</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/","title":"QualCoder v2: Localization Analysis Report","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#executive-summary","title":"Executive Summary","text":"<p>This document provides a comprehensive analysis of internationalization (i18n) requirements for QualCoder v2. It covers:</p> <ol> <li>String Audit - Inventory of translatable strings by component and bounded context</li> <li>Framework Evaluation - Comparison of Qt Linguist vs GNU gettext</li> <li>Architecture Design - Translation loading, locale storage, runtime switching</li> <li>Translation Workflow - Platform selection and contributor processes</li> </ol> <p>Key Recommendation: Use Qt Linguist (<code>.ts</code>/<code>.qm</code>) as the sole localization framework, replacing v1's hybrid gettext + Qt Linguist approach. This simplifies maintenance while enabling runtime language switching.</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Executive Summary</li> <li>Table of Contents</li> <li>String Audit</li> <li>3.1 Presentation Layer Strings</li> <li>3.2 Domain Layer Strings</li> <li>3.3 Bounded Context Categorization</li> <li>3.4 v1 Translation Reuse Assessment</li> <li>Framework Evaluation</li> <li>4.1 Qt Linguist (.ts/.qm)</li> <li>4.2 GNU gettext (.po/.mo)</li> <li>4.3 Comparison Matrix</li> <li>4.4 Recommendation</li> <li>Architecture Design</li> <li>5.1 Translation Loading</li> <li>5.2 Locale Preference Storage</li> <li>5.3 Runtime Language Switching</li> <li>5.4 RTL Support Strategy</li> <li>Translation Workflow</li> <li>6.1 Platform Comparison</li> <li>6.2 Recommended Workflow</li> <li>6.3 Target Languages</li> <li>Implementation Roadmap</li> <li>References</li> </ol>"},{"location":"archive/LOCALIZATION_ANALYSIS/#3-string-audit","title":"3. String Audit","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#31-presentation-layer-strings","title":"3.1 Presentation Layer Strings","text":"<p>The v2 presentation layer contains approximately 100-120 user-facing strings distributed across components:</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#311-by-component-type","title":"3.1.1 By Component Type","text":"Component Location Count Examples UI Labels <code>src/presentation/organisms/</code> ~50 \"Codes\", \"Files\", \"Cases\", \"Add code\", \"Search\" Tooltips <code>src/presentation/organisms/</code> ~30 \"Previous code instance\", \"Expand all categories\" Menu Items <code>src/presentation/templates/app_shell.py</code> ~10 \"Project\", \"Coding\", \"Reports\", \"Help\" Status Messages <code>src/presentation/templates/app_shell.py</code> ~5 \"Ready\", \"0 files\", \"Loading...\" Error Messages <code>src/domain/shared/types.py</code> ~10 \"Code name already exists\", \"Invalid selection\" Dialog Buttons Various ~10 \"OK\", \"Cancel\", \"Apply\", \"Save\", \"Delete\" Empty States <code>src/presentation/organisms/</code> ~5 \"No codes yet\", \"Drop files here\""},{"location":"archive/LOCALIZATION_ANALYSIS/#312-detailed-component-breakdown","title":"3.1.2 Detailed Component Breakdown","text":"File Purpose String Count Categories <code>organisms/codes_panel.py</code> Code tree UI ~20 Labels, tooltips, context menu <code>organisms/files_panel.py</code> File browser ~15 Labels, tooltips, empty state <code>organisms/details_panel.py</code> Segment details ~12 Labels, placeholders <code>organisms/coding_toolbar.py</code> Coding actions ~8 Button labels, tooltips <code>organisms/text_editor_panel.py</code> Text display ~10 Labels, context menu <code>templates/app_shell.py</code> Main window ~15 Menus, status bar <code>screens/text_coding.py</code> Coding screen ~10 Labels, titles"},{"location":"archive/LOCALIZATION_ANALYSIS/#32-domain-layer-strings","title":"3.2 Domain Layer Strings","text":"<p>Domain layer error messages should be translated for user-friendly error handling:</p> Category Location Count Examples Validation Errors <code>domain/shared/types.py</code> ~8 \"Name cannot be empty\", \"Value out of range\" Business Rule Violations <code>domain/coding/invariants.py</code> ~10 \"Code name already exists\", \"Circular hierarchy detected\" Operation Failures <code>domain/*/derivers.py</code> ~5 \"Cannot delete code with segments\" <p>Note: Domain errors should use error codes internally, with translation happening at the presentation boundary.</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#33-bounded-context-categorization","title":"3.3 Bounded Context Categorization","text":"<p>Strings map to bounded contexts for translation context and maintenance:</p> <pre><code>graph TB\n    subgraph \"Core Domain\"\n        CODING[Coding Context&lt;br/&gt;~30 strings]\n        ANALYSIS[Analysis Context&lt;br/&gt;~15 strings]\n    end\n\n    subgraph \"Supporting Domain\"\n        PROJECT[Project Context&lt;br/&gt;~12 strings]\n        SOURCE[Source Management&lt;br/&gt;~18 strings]\n        CASE[Case Context&lt;br/&gt;~10 strings]\n    end\n\n    subgraph \"Generic/Shared\"\n        COMMON[Common UI&lt;br/&gt;~20 strings]\n        ERRORS[Error Messages&lt;br/&gt;~15 strings]\n    end\n\n    style CODING fill:#FFD700\n    style ANALYSIS fill:#FFD700</code></pre> Bounded Context String Count Key Areas Coding ~30 Code tree, segments, categories, annotations Source Management ~18 File browser, import/export, media types Analysis ~15 Reports, charts, statistics Project ~12 Settings, backup, project info Case ~10 Case list, attributes, membership Common ~20 Buttons, dialogs, status, navigation Errors ~15 Validation, business rules, operations"},{"location":"archive/LOCALIZATION_ANALYSIS/#34-v1-translation-reuse-assessment","title":"3.4 v1 Translation Reuse Assessment","text":"<p>QualCoder v1 provides translations in 9 languages that can be leveraged:</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#341-v1-translation-files","title":"3.4.1 v1 Translation Files","text":"Language Code gettext (<code>.po</code>) Qt Linguist (<code>.ts</code>) Status German de <code>de.po</code> <code>app_de.ts</code> Verified English en - - Source Spanish es <code>es.po</code> <code>app_es.ts</code> Improved recently French fr <code>fr.po</code> <code>app_fr.ts</code> Exists Italian it <code>it.po</code> <code>app_it.ts</code> Exists Japanese ja <code>ja.po</code> <code>app_ja.ts</code> Exists Portuguese pt <code>pt.po</code> <code>app_pt.ts</code> Exists Swedish sv <code>sv.po</code> <code>app_sv.ts</code> Verified Chinese zh <code>zh.po</code> <code>app_zh.ts</code> Exists"},{"location":"archive/LOCALIZATION_ANALYSIS/#342-reuse-strategy","title":"3.4.2 Reuse Strategy","text":"<p>High Reuse Potential (~60% of v2 strings): - Common UI elements (OK, Cancel, Delete, Save) - Bounded context terminology (Codes, Files, Cases, Memos) - Menu items and navigation - Standard error messages</p> <p>Low Reuse Potential (~40% of v2 strings): - New v2 UI patterns (design system components) - Revised UX copy - New features not in v1</p> <p>Conversion Process: <pre><code># Extract v1 gettext strings\nmsgunfmt locale/de/LC_MESSAGES/de.mo -o v1_de.po\n\n# Convert to Qt format (using translate-toolkit)\npo2ts v1_de.po v1_de.ts\n\n# Cherry-pick relevant strings to v2 .ts files\n</code></pre></p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#4-framework-evaluation","title":"4. Framework Evaluation","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#41-qt-linguist-tsqm","title":"4.1 Qt Linguist (.ts/.qm)","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#overview","title":"Overview","text":"<p>Qt Linguist is Qt's native internationalization system, using XML-based <code>.ts</code> source files compiled to binary <code>.qm</code> files for runtime.</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#tooling","title":"Tooling","text":"Tool Purpose Command <code>pyside6-lupdate</code> Extract strings from source <code>pyside6-lupdate src/ -ts translations/*.ts</code> <code>pyside6-lrelease</code> Compile <code>.ts</code> to <code>.qm</code> <code>pyside6-lrelease translations/*.ts</code> <code>pyside6-linguist</code> GUI translation editor <code>pyside6-linguist translations/qualcoder_de.ts</code>"},{"location":"archive/LOCALIZATION_ANALYSIS/#api-usage","title":"API Usage","text":"<pre><code>from PySide6.QtCore import QCoreApplication, QTranslator\n\n# Mark strings for translation\nlabel.setText(QCoreApplication.translate(\"CodesPanel\", \"Codes\"))\n\n# Using tr() method in QObject subclasses\nself.setWindowTitle(self.tr(\"QualCoder\"))\n\n# Plural forms\ncount = 5\ntext = QCoreApplication.translate(\n    \"CodesPanel\",\n    \"%n code(s) selected\",\n    \"\",\n    count\n)\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#advantages","title":"Advantages","text":"<ul> <li>Native PySide6 integration</li> <li>Runtime language switching via <code>LanguageChange</code> events</li> <li>Context support (disambiguation)</li> <li>Plural forms with CLDR rules</li> <li>Visual translation editor</li> <li>Build pipeline integration</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#disadvantages","title":"Disadvantages","text":"<ul> <li>Qt-specific format</li> <li>Less universal than gettext</li> <li>XML verbose compared to PO</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#42-gnu-gettext-pomo","title":"4.2 GNU gettext (.po/.mo)","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#overview_1","title":"Overview","text":"<p>GNU gettext is the standard Unix/Linux internationalization system, using text-based <code>.po</code> source files compiled to binary <code>.mo</code> files.</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#tooling_1","title":"Tooling","text":"Tool Purpose Command <code>xgettext</code> Extract strings <code>xgettext -o messages.pot src/**/*.py</code> <code>msgfmt</code> Compile <code>.po</code> to <code>.mo</code> <code>msgfmt -o messages.mo messages.po</code> <code>poedit</code> GUI translation editor N/A"},{"location":"archive/LOCALIZATION_ANALYSIS/#api-usage_1","title":"API Usage","text":"<pre><code>import gettext\n\n# Initialize\ntranslation = gettext.translation('qualcoder', 'locale', languages=['de'])\ntranslation.install()\n\n# Mark strings\n_(\"Codes\")\n\n# Plural forms\nngettext(\"%d code\", \"%d codes\", count) % count\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#advantages_1","title":"Advantages","text":"<ul> <li>Industry standard</li> <li>Universal format (many tools support PO)</li> <li>Simple text format</li> <li>v1 translations directly reusable</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#disadvantages_1","title":"Disadvantages","text":"<ul> <li>Separate from Qt (not native)</li> <li>No runtime switch without reload</li> <li>Requires manual integration with Qt widgets</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#43-comparison-matrix","title":"4.3 Comparison Matrix","text":"Criteria Weight Qt Linguist GNU gettext Winner PySide6 Integration 25% \u2b50\u2b50\u2b50\u2b50\u2b50 Native \u2b50\u2b50\u2b50 Manual Qt Runtime Switch 20% \u2b50\u2b50\u2b50\u2b50\u2b50 Events \u2b50\u2b50 Reload Qt Tooling 15% \u2b50\u2b50\u2b50\u2b50 Qt tools \u2b50\u2b50\u2b50\u2b50 poedit Tie Plural Forms 10% \u2b50\u2b50\u2b50\u2b50\u2b50 CLDR \u2b50\u2b50\u2b50\u2b50\u2b50 CLDR Tie v1 Compatibility 10% \u2b50\u2b50\u2b50 Conversion \u2b50\u2b50\u2b50\u2b50\u2b50 Direct gettext Maintenance 10% \u2b50\u2b50\u2b50\u2b50\u2b50 Single \u2b50\u2b50\u2b50 Hybrid Qt Universal Format 10% \u2b50\u2b50\u2b50 Qt-specific \u2b50\u2b50\u2b50\u2b50\u2b50 Standard gettext <p>Weighted Score: Qt Linguist wins on integration, runtime switching, and maintenance simplicity.</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#44-recommendation","title":"4.4 Recommendation","text":"<p>Use Qt Linguist (<code>.ts</code>/<code>.qm</code>) as the sole localization framework.</p> <p>Rationale:</p> <ol> <li>No Qt Designer Files - v2 has code-only UI, removing the primary driver for v1's hybrid approach</li> <li>Native Integration - PySide6's translation APIs are first-class</li> <li>Runtime Switching - <code>LanguageChange</code> events enable seamless language changes</li> <li>Maintenance Simplicity - Single system reduces build complexity and contributor confusion</li> <li>Future-Proof - Qt continues active development of i18n features</li> </ol> <p>Migration Cost: Low - convert v1 <code>.po</code> files using <code>po2ts</code> or manual cherry-picking for ~100 strings.</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#5-architecture-design","title":"5. Architecture Design","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#51-translation-loading","title":"5.1 Translation Loading","text":"<pre><code>sequenceDiagram\n    participant App as Application\n    participant Settings as ProjectSettings\n    participant Svc as TranslationService\n    participant Trans as QTranslator\n    participant UI as UI Widgets\n\n    App-&gt;&gt;Settings: get_language()\n    Settings--&gt;&gt;App: \"de\"\n    App-&gt;&gt;Svc: load_language(\"de\")\n    Svc-&gt;&gt;Trans: load(\"qualcoder_de.qm\")\n    Trans--&gt;&gt;Svc: success\n    Svc-&gt;&gt;App: installTranslator(translator)\n    App-&gt;&gt;UI: LanguageChange event\n    UI-&gt;&gt;UI: retranslateUi()</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#translation-service-interface","title":"Translation Service Interface","text":"<pre><code># src/infrastructure/i18n/protocols.py\nfrom typing import Protocol, Sequence\n\nclass TranslationService(Protocol):\n    \"\"\"Protocol for translation services.\"\"\"\n\n    def available_languages(self) -&gt; Sequence[str]:\n        \"\"\"Return list of available locale codes.\"\"\"\n        ...\n\n    def current_language(self) -&gt; str:\n        \"\"\"Return current locale code.\"\"\"\n        ...\n\n    def load_language(self, locale_code: str) -&gt; bool:\n        \"\"\"Load translations for locale. Returns success.\"\"\"\n        ...\n\n    def switch_language(self, locale_code: str) -&gt; bool:\n        \"\"\"Switch language at runtime. Triggers UI refresh.\"\"\"\n        ...\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#implementation","title":"Implementation","text":"<pre><code># src/infrastructure/i18n/qt_translation.py\nfrom PySide6.QtCore import QTranslator, QCoreApplication, QLocale\nfrom pathlib import Path\n\nclass QtTranslationService:\n    \"\"\"Qt-based translation service.\"\"\"\n\n    TRANSLATIONS_PATH = Path(__file__).parent / \"translations\"\n    SUPPORTED_LANGUAGES = (\"en\", \"de\", \"es\", \"fr\", \"it\", \"ja\", \"pt\", \"sv\", \"zh\")\n\n    def __init__(self, app: QCoreApplication):\n        self._app = app\n        self._translator = QTranslator()\n        self._qt_translator = QTranslator()  # For Qt built-in strings\n        self._current = \"en\"\n\n    def available_languages(self) -&gt; tuple[str, ...]:\n        return self.SUPPORTED_LANGUAGES\n\n    def current_language(self) -&gt; str:\n        return self._current\n\n    def load_language(self, locale_code: str) -&gt; bool:\n        if locale_code not in self.SUPPORTED_LANGUAGES:\n            return False\n\n        # Load app translations\n        qm_path = self.TRANSLATIONS_PATH / f\"qualcoder_{locale_code}.qm\"\n        if qm_path.exists():\n            self._translator.load(str(qm_path))\n            self._app.installTranslator(self._translator)\n\n        # Load Qt translations (buttons, dialogs)\n        qt_locale = QLocale(locale_code)\n        self._qt_translator.load(qt_locale, \"qtbase\", \"_\",\n                                  QLibraryInfo.path(QLibraryInfo.TranslationsPath))\n        self._app.installTranslator(self._qt_translator)\n\n        self._current = locale_code\n        return True\n\n    def switch_language(self, locale_code: str) -&gt; bool:\n        self._app.removeTranslator(self._translator)\n        self._app.removeTranslator(self._qt_translator)\n        return self.load_language(locale_code)\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#52-locale-preference-storage","title":"5.2 Locale Preference Storage","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#storage-location","title":"Storage Location","text":"Scope Storage Key Default Application QSettings <code>language</code> System locale Project SQLite <code>project</code> table <code>language</code> Application setting"},{"location":"archive/LOCALIZATION_ANALYSIS/#implementation_1","title":"Implementation","text":"<pre><code># Application-level (persists across projects)\nfrom PySide6.QtCore import QSettings\n\nsettings = QSettings(\"QualCoder\", \"QualCoder\")\nlanguage = settings.value(\"language\", QLocale.system().name()[:2])\n\n# Project-level (overrides application)\n# Stored in project SQLite: SELECT language FROM project WHERE ...\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#locale-resolution-order","title":"Locale Resolution Order","text":"<pre><code>flowchart TD\n    START[App Startup] --&gt; CHECK_PROJECT{Project&lt;br/&gt;Open?}\n    CHECK_PROJECT --&gt;|Yes| PROJECT_LANG[Read project.language]\n    CHECK_PROJECT --&gt;|No| APP_LANG[Read QSettings.language]\n    PROJECT_LANG --&gt; HAS_PROJECT{Value&lt;br/&gt;Set?}\n    HAS_PROJECT --&gt;|Yes| USE_PROJECT[Use Project Language]\n    HAS_PROJECT --&gt;|No| APP_LANG\n    APP_LANG --&gt; HAS_APP{Value&lt;br/&gt;Set?}\n    HAS_APP --&gt;|Yes| USE_APP[Use App Language]\n    HAS_APP --&gt;|No| SYSTEM[Use System Locale]\n    USE_PROJECT --&gt; LOAD[Load Translations]\n    USE_APP --&gt; LOAD\n    SYSTEM --&gt; LOAD</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#53-runtime-language-switching","title":"5.3 Runtime Language Switching","text":"<p>Recommendation: YES - Unlike v1's restart requirement, v2 should support runtime language switching.</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#approach","title":"Approach","text":"<ol> <li>Event-Based Refresh - PySide6 widgets receive <code>LanguageChange</code> events</li> <li>Wrapper Function - Use <code>tr()</code> wrapper instead of raw <code>QCoreApplication.translate()</code></li> <li>Retranslate Pattern - Widgets implement <code>changeEvent()</code> to refresh text</li> </ol>"},{"location":"archive/LOCALIZATION_ANALYSIS/#implementation-pattern","title":"Implementation Pattern","text":"<pre><code>from PySide6.QtCore import QEvent, QCoreApplication\nfrom PySide6.QtWidgets import QWidget, QLabel, QPushButton\n\ndef tr(text: str, context: str = \"QualCoder\") -&gt; str:\n    \"\"\"Translation wrapper for consistency.\"\"\"\n    return QCoreApplication.translate(context, text)\n\nclass CodesPanel(QWidget):\n    def __init__(self):\n        super().__init__()\n        self._title_label = QLabel()\n        self._add_button = QPushButton()\n        self._retranslate_ui()\n\n    def _retranslate_ui(self):\n        \"\"\"Update all translatable strings.\"\"\"\n        self._title_label.setText(tr(\"Codes\"))\n        self._add_button.setText(tr(\"Add Code\"))\n        self._add_button.setToolTip(tr(\"Create a new code\"))\n\n    def changeEvent(self, event: QEvent):\n        if event.type() == QEvent.LanguageChange:\n            self._retranslate_ui()\n        super().changeEvent(event)\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#settings-ui","title":"Settings UI","text":"<pre><code>class LanguageSelector(QComboBox):\n    \"\"\"Language selection dropdown.\"\"\"\n\n    LANGUAGES = {\n        \"en\": \"English\",\n        \"de\": \"Deutsch\",\n        \"es\": \"Espa\u00f1ol\",\n        \"fr\": \"Fran\u00e7ais\",\n        \"it\": \"Italiano\",\n        \"ja\": \"\u65e5\u672c\u8a9e\",\n        \"pt\": \"Portugu\u00eas\",\n        \"sv\": \"Svenska\",\n        \"zh\": \"\u4e2d\u6587\",\n    }\n\n    def __init__(self, translation_service: TranslationService):\n        super().__init__()\n        self._service = translation_service\n        for code, name in self.LANGUAGES.items():\n            self.addItem(name, code)\n        self.currentIndexChanged.connect(self._on_language_changed)\n\n    def _on_language_changed(self, index: int):\n        locale_code = self.itemData(index)\n        self._service.switch_language(locale_code)\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#54-rtl-support-strategy","title":"5.4 RTL Support Strategy","text":"<p>Right-to-left (RTL) languages like Arabic, Hebrew, and Persian require layout mirroring.</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#pyside6-rtl-support","title":"PySide6 RTL Support","text":"<p>PySide6/Qt handles RTL automatically when: 1. <code>QApplication.setLayoutDirection(Qt.RightToLeft)</code> is called 2. <code>QLocale</code> is set to an RTL language</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#strategy","title":"Strategy","text":"Phase Action Languages v2.0 LTR languages only en, de, es, fr, it, ja, pt, sv, zh v2.1+ Add RTL support ar (Arabic), he (Hebrew), fa (Persian)"},{"location":"archive/LOCALIZATION_ANALYSIS/#rtl-implementation-future","title":"RTL Implementation (Future)","text":"<pre><code>def set_rtl_layout(app: QApplication, locale_code: str):\n    rtl_languages = {\"ar\", \"he\", \"fa\", \"ur\"}\n    if locale_code in rtl_languages:\n        app.setLayoutDirection(Qt.RightToLeft)\n    else:\n        app.setLayoutDirection(Qt.LeftToRight)\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#design-considerations-for-rtl","title":"Design Considerations for RTL","text":"<ul> <li>Use <code>QHBoxLayout</code> / <code>QVBoxLayout</code> (auto-mirror)</li> <li>Avoid hardcoded left/right margins in stylesheets</li> <li>Test icon directions (arrows, chevrons)</li> <li>Ensure text alignment respects layout direction</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#6-translation-workflow","title":"6. Translation Workflow","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#61-platform-comparison","title":"6.1 Platform Comparison","text":"Platform License Cost Git Integration Translation Memory Review Weblate GPL/Proprietary Free (self-host), $150+/mo (cloud) Native Yes Voting, approval Crowdin Proprietary Free (OSS), $50+/mo Native Yes Voting, approval GitHub - Free Native No PR-based Transifex Proprietary Free (OSS), $99+/mo Native Yes Voting, approval"},{"location":"archive/LOCALIZATION_ANALYSIS/#platform-deep-dive","title":"Platform Deep Dive","text":"<p>Weblate (Recommended) - Open source, can self-host - Excellent Git integration (automatic sync) - Supports <code>.ts</code> format natively - Free for open source projects - Active development, modern UI</p> <p>Crowdin - Polished UX, 600+ integrations - Strong community features - Good for large projects - Cost scales with strings/languages</p> <p>GitHub-only - No extra tooling - Familiar to contributors - Limited translation UI (edit XML directly) - No translation memory</p>"},{"location":"archive/LOCALIZATION_ANALYSIS/#62-recommended-workflow","title":"6.2 Recommended Workflow","text":"<pre><code>flowchart TB\n    subgraph \"Developer\"\n        DEV[Write Code] --&gt; LUPDATE[pyside6-lupdate]\n        LUPDATE --&gt; TS[.ts files]\n        TS --&gt; COMMIT[Commit to Git]\n    end\n\n    subgraph \"Translation Platform (Weblate)\"\n        COMMIT --&gt; SYNC[Git Sync]\n        SYNC --&gt; TRANSLATE[Translators Work]\n        TRANSLATE --&gt; REVIEW[Review/Approve]\n        REVIEW --&gt; PUSH[Push to Git]\n    end\n\n    subgraph \"Build Pipeline (CI)\"\n        PUSH --&gt; LRELEASE[pyside6-lrelease]\n        LRELEASE --&gt; QM[.qm files]\n        QM --&gt; PACKAGE[Package Release]\n    end\n\n    style TRANSLATE fill:#90EE90\n    style REVIEW fill:#90EE90</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#step-by-step-process","title":"Step-by-Step Process","text":"<ol> <li> <p>String Extraction (Developer)    <pre><code># Extract all translatable strings\npyside6-lupdate src/ -ts translations/qualcoder.ts\n\n# Update language-specific files\npyside6-lupdate src/ -ts translations/qualcoder_de.ts \\\n                         translations/qualcoder_es.ts \\\n                         translations/qualcoder_fr.ts\n</code></pre></p> </li> <li> <p>Translation (Translators via Weblate)</p> </li> <li>Log into Weblate</li> <li>Select language</li> <li>Translate strings with context</li> <li>Use translation memory for consistency</li> <li> <p>Mark uncertain translations for review</p> </li> <li> <p>Review (Reviewers)</p> </li> <li>Check translations for accuracy</li> <li>Verify context-appropriate wording</li> <li>Approve or suggest changes</li> <li> <p>Weblate voting for community consensus</p> </li> <li> <p>Build (CI Pipeline)    <pre><code># .github/workflows/build.yml\n- name: Compile translations\n  run: |\n    pyside6-lrelease translations/*.ts \\\n      -qm src/infrastructure/i18n/translations/\n</code></pre></p> </li> <li> <p>Release (Distribution)</p> </li> <li><code>.qm</code> files bundled in release</li> <li>Loaded at runtime by <code>TranslationService</code></li> </ol>"},{"location":"archive/LOCALIZATION_ANALYSIS/#63-target-languages","title":"6.3 Target Languages","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#initial-release-v20","title":"Initial Release (v2.0)","text":"<p>Based on v1 translation quality and user demand:</p> Priority Language Code Status Notes 1 English en Source Reference language 2 German de v1 verified Active community 3 Spanish es v1 improved Recently updated 4 French fr v1 exists Needs review 5 Swedish sv v1 verified Maintainer contributed"},{"location":"archive/LOCALIZATION_ANALYSIS/#future-expansion-v21","title":"Future Expansion (v2.1+)","text":"Priority Language Code Rationale 6 Chinese zh Large user base potential 7 Portuguese pt v1 exists, Brazil demand 8 Japanese ja Academic research community 9 Italian it v1 exists 10 Arabic ar RTL support milestone"},{"location":"archive/LOCALIZATION_ANALYSIS/#7-implementation-roadmap","title":"7. Implementation Roadmap","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#phase-1-infrastructure-qc-00304","title":"Phase 1: Infrastructure (QC-003.04)","text":"<p>Goal: Establish translation infrastructure</p> <ul> <li>[ ] Create <code>src/infrastructure/i18n/</code> module structure</li> <li>[ ] Implement <code>TranslationService</code> protocol and Qt implementation</li> <li>[ ] Add locale preference storage (QSettings, project DB)</li> <li>[ ] Create <code>tr()</code> wrapper function</li> <li>[ ] Set up translation directory structure</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#phase-2-string-extraction-qc-00305","title":"Phase 2: String Extraction (QC-003.05)","text":"<p>Goal: Extract and organize all translatable strings</p> <ul> <li>[ ] Add <code>tr()</code> calls to all presentation layer components</li> <li>[ ] Create <code>translations/qualcoder.ts</code> source file</li> <li>[ ] Create context files for bounded contexts</li> <li>[ ] Document string extraction conventions</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#phase-3-initial-translations","title":"Phase 3: Initial Translations","text":"<p>Goal: Provide initial language support</p> <ul> <li>[ ] Convert v1 <code>.po</code> files to <code>.ts</code> format</li> <li>[ ] Cherry-pick relevant translations</li> <li>[ ] Complete German (de) translations</li> <li>[ ] Complete Spanish (es) translations</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#phase-4-workflow-setup","title":"Phase 4: Workflow Setup","text":"<p>Goal: Enable community contributions</p> <ul> <li>[ ] Set up Weblate instance or cloud account</li> <li>[ ] Configure Git sync</li> <li>[ ] Document contributor process</li> <li>[ ] Add translation status badges to README</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#phase-5-runtime-switching","title":"Phase 5: Runtime Switching","text":"<p>Goal: Enable language changes without restart</p> <ul> <li>[ ] Implement <code>retranslateUi()</code> pattern in all widgets</li> <li>[ ] Add <code>changeEvent()</code> handlers</li> <li>[ ] Create language settings UI</li> <li>[ ] Test all components for proper refresh</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#8-references","title":"8. References","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#official-documentation","title":"Official Documentation","text":"<ul> <li>Qt Internationalization</li> <li>PySide6 Translation Tutorial</li> <li>pyside6-lupdate Tool</li> <li>pyside6-lrelease Tool</li> <li>pyside6-linguist Tool</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#translation-platforms","title":"Translation Platforms","text":"<ul> <li>Weblate Documentation</li> <li>Crowdin Documentation</li> <li>Weblate vs Crowdin Comparison</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#format-conversion","title":"Format Conversion","text":"<ul> <li>translate-toolkit po2ts</li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#qualcoder-v1-reference","title":"QualCoder v1 Reference","text":"<ul> <li>Source: <code>/Users/sathish.narayanan/Documents/git/qualcoder/</code></li> <li>Translation loading: <code>src/qualcoder/__main__.py</code> (lines 3300-3353)</li> <li>gettext files: <code>src/qualcoder/{lang}.po</code></li> <li>Qt files: <code>src/qualcoder/GUI/app_{lang}.ts</code></li> </ul>"},{"location":"archive/LOCALIZATION_ANALYSIS/#appendix-a-acceptance-criteria-mapping","title":"Appendix A: Acceptance Criteria Mapping","text":"AC # Requirement Section Status #1 Identify all user-facing strings \u00a73.1 \u2705 #2 Categorize by component type \u00a73.1.1 \u2705 #3 Map to bounded contexts \u00a73.3 \u2705 #4 Assess v1 translation reuse \u00a73.4 \u2705 #5 Evaluate Qt Linguist \u00a74.1 \u2705 #6 Evaluate GNU gettext \u00a74.2 \u2705 #7 Create comparison matrix \u00a74.3 \u2705 #8 Provide recommendation \u00a74.4, ADR-003 \u2705 #9 Design translation loading \u00a75.1 \u2705 #10 Design locale storage \u00a75.2 \u2705 #11 Design runtime switching \u00a75.3 \u2705 #12 Design RTL support \u00a75.4 \u2705 #13 Compare translation platforms \u00a76.1 \u2705 #14 Design contributor workflow \u00a76.2 \u2705 #15 Identify target languages \u00a76.3 \u2705"},{"location":"archive/LOCALIZATION_ANALYSIS/#appendix-b-string-formatting-guidelines","title":"Appendix B: String Formatting Guidelines","text":""},{"location":"archive/LOCALIZATION_ANALYSIS/#named-placeholders-recommended","title":"Named Placeholders (Recommended)","text":"<pre><code># Good - named placeholders\ntr(\"File {filename} loaded successfully\")\ntr(\"{count} codes in {category}\")\n\n# Acceptable - Qt-style positional\ntr(\"File %1 loaded in %2 ms\").arg(filename).arg(time)\n\n# Avoid - Python format without names\ntr(\"File %s loaded\")  # Hard for translators to understand context\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#pluralization","title":"Pluralization","text":"<pre><code># Qt plural forms\ncount = 5\ntext = QCoreApplication.translate(\n    \"CodesPanel\",\n    \"%n code(s) selected\",\n    \"\",  # disambiguation\n    count\n)\n# Result: \"5 codes selected\" (English)\n# Result: \"5 Codes ausgew\u00e4hlt\" (German)\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#context-disambiguation","title":"Context Disambiguation","text":"<pre><code># When same English word has different translations\nQCoreApplication.translate(\"Menu\", \"File\")      # Menu item\nQCoreApplication.translate(\"Dialog\", \"File\")    # Dialog button\n</code></pre>"},{"location":"archive/LOCALIZATION_ANALYSIS/#appendix-c-text-expansion-guidelines","title":"Appendix C: Text Expansion Guidelines","text":"<p>Different languages require different space for the same content:</p> Language Expansion Factor Example German +30% \"Save\" \u2192 \"Speichern\" French +20% \"Save\" \u2192 \"Enregistrer\" Finnish +30% \"Code\" \u2192 \"Koodi\" Japanese -30% \"Settings\" \u2192 \"\u8a2d\u5b9a\" Chinese -30% \"Settings\" \u2192 \"\u8bbe\u7f6e\" <p>Design Recommendations: - Avoid fixed-width buttons - Use <code>QSizePolicy.Expanding</code> for labels - Test UI with German/Finnish for length - Test UI with CJK for font rendering</p> <p>Document Version: 1.0 Last Updated: 2026-01-30 Related ADR: decision-003 localization-framework.md</p>"},{"location":"archive/SCREEN_STORIES_PLAN/","title":"UI Layer Implementation Plan","text":""},{"location":"archive/SCREEN_STORIES_PLAN/#overview","title":"Overview","text":"<p>Build QualCoder UI with a clear three-layer architecture that separates reusable components from app-specific templates and screens.</p>"},{"location":"archive/SCREEN_STORIES_PLAN/#three-layer-architecture","title":"Three-Layer Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                                                 \u2502\n\u2502   LAYER 3: SCREENS                                              \u2502\n\u2502   Content that fills template slots                             \u2502\n\u2502   (TextCodingContent, SettingsContent, AIChat, ...)             \u2502\n\u2502                                                                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502   LAYER 2: TEMPLATES                                            \u2502\n\u2502   App shell &amp; layout patterns                                   \u2502\n\u2502   (AppShell, SidebarLayout, ThreePanelLayout, ...)              \u2502\n\u2502                                                                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502   LAYER 1: DESIGN SYSTEM                                        \u2502\n\u2502   Primitive components &amp; tokens                                 \u2502\n\u2502   (Button, Input, Card, DataTable, CodeTree, ...)               \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#layer-responsibilities","title":"Layer Responsibilities","text":"Layer Location Contains Reusable? Design System <code>design_system/</code> Tokens, primitives, generic components Yes - any PyQt6 project Templates <code>ui/templates/</code> App shell, layout patterns, navigation Partially - similar apps Screens <code>ui/screens/</code> Screen content, business logic No - QualCoder specific"},{"location":"archive/SCREEN_STORIES_PLAN/#directory-structure","title":"Directory Structure","text":"<pre><code>QualCoder-v2/\n\u2502\n\u251c\u2500\u2500 design_system/                    # LAYER 1: Generic components\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 tokens.py                     # Colors, spacing, typography\n\u2502   \u251c\u2500\u2500 components.py                 # Button, Input, Card, Badge\n\u2502   \u251c\u2500\u2500 layout.py                     # Panel, Sidebar, Splitter\n\u2502   \u251c\u2500\u2500 forms.py                      # SearchBox, Select, FormGroup\n\u2502   \u251c\u2500\u2500 data_display.py               # DataTable, KeyValueList\n\u2502   \u251c\u2500\u2500 code_tree.py                  # CodeTree, CodeItem\n\u2502   \u251c\u2500\u2500 document.py                   # TextPanel, TranscriptPanel\n\u2502   \u251c\u2500\u2500 media.py                      # VideoContainer, Timeline\n\u2502   \u251c\u2500\u2500 chat.py                       # MessageBubble, ChatInput\n\u2502   \u251c\u2500\u2500 ... (other modules)\n\u2502   \u2514\u2500\u2500 storybook/                    # Component documentation\n\u2502\n\u251c\u2500\u2500 ui/                               # LAYER 2 &amp; 3: App-specific\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 templates/                    # LAYER 2: App shell &amp; layouts\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 app_shell.py              # Main app container\n\u2502   \u2502   \u251c\u2500\u2500 title_bar.py              # Window title bar\n\u2502   \u2502   \u251c\u2500\u2500 menu_bar.py               # Main menu navigation\n\u2502   \u2502   \u251c\u2500\u2500 tab_bar.py                # Quick access tabs\n\u2502   \u2502   \u251c\u2500\u2500 toolbar.py                # Toolbar container\n\u2502   \u2502   \u251c\u2500\u2500 status_bar.py             # Status bar\n\u2502   \u2502   \u2514\u2500\u2500 layouts/                  # Content area layouts\n\u2502   \u2502       \u251c\u2500\u2500 __init__.py\n\u2502   \u2502       \u251c\u2500\u2500 single_panel.py       # Full-width content\n\u2502   \u2502       \u251c\u2500\u2500 sidebar_layout.py     # Sidebar + main content\n\u2502   \u2502       \u251c\u2500\u2500 three_panel.py        # Left + center + right\n\u2502   \u2502       \u2514\u2500\u2500 split_layout.py       # Resizable split panels\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 screens/                      # LAYER 3: Screen content\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 coding/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 text.py               # Text coding content\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 image.py              # Image coding content\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 audio_video.py        # A/V coding content\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 pdf.py                # PDF coding content\n\u2502   \u2502   \u251c\u2500\u2500 ai/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 chat.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 search.py\n\u2502   \u2502   \u251c\u2500\u2500 manage/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 files.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 cases.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 journals.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 attributes.py\n\u2502   \u2502   \u251c\u2500\u2500 reports/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 coding.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 charts.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 comparison.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 text_mining.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 graph.py\n\u2502   \u2502   \u2514\u2500\u2500 settings/\n\u2502   \u2502       \u251c\u2500\u2500 __init__.py\n\u2502   \u2502       \u251c\u2500\u2500 settings.py\n\u2502   \u2502       \u2514\u2500\u2500 sql_query.py\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 mock_data/                    # Test data for standalone dev\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 files.py\n\u2502   \u2502   \u251c\u2500\u2500 codes.py\n\u2502   \u2502   \u251c\u2500\u2500 cases.py\n\u2502   \u2502   \u251c\u2500\u2500 documents.py\n\u2502   \u2502   \u2514\u2500\u2500 chat.py\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 storybook/                    # Screen preview app\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 app.py\n\u2502       \u2514\u2500\u2500 stories/\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#layer-2-templates","title":"Layer 2: Templates","text":""},{"location":"archive/SCREEN_STORIES_PLAN/#app-shell-structure","title":"App Shell Structure","text":"<p>Every QualCoder screen uses the same shell:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TITLE BAR                                               \u2502\n\u2502 [Q] QualCoder - project_name.qda        [\u2500][\u25a1][\u00d7]       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 MENU BAR                                                \u2502\n\u2502 Project | Files and Cases | Coding | Reports | AI | Help\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 TAB BAR                                                 \u2502\n\u2502 [Coding] [Reports] [Manage] [Action Log]                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 TOOLBAR                                    \u2190 slot       \u2502\n\u2502 [context-specific buttons and actions]                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                         \u2502\n\u2502 MAIN CONTENT                               \u2190 slot       \u2502\n\u2502 (screen-specific content goes here)                     \u2502\n\u2502                                                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 STATUS BAR                                              \u2502\n\u2502 Ready | 24 files | 156 codes | Last saved: 2:34 PM      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#appshell-implementation","title":"AppShell Implementation","text":"<pre><code># ui/templates/app_shell.py\nfrom PyQt6.QtWidgets import QMainWindow, QWidget, QVBoxLayout\nfrom PyQt6.QtCore import pyqtSignal\n\nfrom design_system import ColorPalette, get_theme\n\nfrom .title_bar import TitleBar\nfrom .menu_bar import AppMenuBar\nfrom .tab_bar import AppTabBar\nfrom .toolbar import ToolbarContainer\nfrom .status_bar import AppStatusBar\n\n\nclass AppShell(QMainWindow):\n    \"\"\"\n    Main application shell - the fixed template for all screens.\n\n    Provides:\n    - Title bar with project name\n    - Menu bar navigation\n    - Tab bar for quick access\n    - Toolbar slot (filled by screens)\n    - Content slot (filled by screens)\n    - Status bar\n    \"\"\"\n\n    # Navigation signals\n    menu_selected = pyqtSignal(str)      # \"project\", \"files\", \"coding\", etc.\n    tab_selected = pyqtSignal(str)       # \"coding\", \"reports\", \"manage\", etc.\n\n    def __init__(self, colors: ColorPalette = None, parent=None):\n        super().__init__(parent)\n        self._colors = colors or get_theme(\"dark\")\n        self._current_screen = None\n        self._setup_ui()\n\n    def _setup_ui(self):\n        self.setWindowTitle(\"QualCoder\")\n        self.setMinimumSize(1200, 800)\n\n        # Central widget\n        central = QWidget()\n        self.setCentralWidget(central)\n        layout = QVBoxLayout(central)\n        layout.setContentsMargins(0, 0, 0, 0)\n        layout.setSpacing(0)\n\n        # Title bar\n        self.title_bar = TitleBar(colors=self._colors)\n        layout.addWidget(self.title_bar)\n\n        # Menu bar\n        self.menu_bar = AppMenuBar(colors=self._colors)\n        self.menu_bar.item_clicked.connect(self.menu_selected.emit)\n        layout.addWidget(self.menu_bar)\n\n        # Tab bar\n        self.tab_bar = AppTabBar(colors=self._colors)\n        self.tab_bar.tab_clicked.connect(self.tab_selected.emit)\n        layout.addWidget(self.tab_bar)\n\n        # Toolbar (slot - filled by screens)\n        self.toolbar = ToolbarContainer(colors=self._colors)\n        layout.addWidget(self.toolbar)\n\n        # Content area (slot - filled by screens)\n        self.content_area = QWidget()\n        self.content_layout = QVBoxLayout(self.content_area)\n        self.content_layout.setContentsMargins(0, 0, 0, 0)\n        layout.addWidget(self.content_area, 1)  # stretch\n\n        # Status bar\n        self.status_bar = AppStatusBar(colors=self._colors)\n        layout.addWidget(self.status_bar)\n\n    def set_project(self, name: str):\n        \"\"\"Update title bar with project name\"\"\"\n        self.title_bar.set_project(name)\n\n    def set_screen(self, screen: 'BaseScreen'):\n        \"\"\"\n        Set the current screen content.\n\n        The screen provides:\n        - toolbar_content(): widgets for the toolbar\n        - content(): the main content widget\n        \"\"\"\n        # Clear current\n        if self._current_screen:\n            self._current_screen.setParent(None)\n\n        self._current_screen = screen\n\n        # Set toolbar content\n        self.toolbar.set_content(screen.toolbar_content())\n\n        # Set main content\n        while self.content_layout.count():\n            child = self.content_layout.takeAt(0)\n            if child.widget():\n                child.widget().setParent(None)\n\n        self.content_layout.addWidget(screen.content())\n\n        # Update status bar\n        self.status_bar.set_message(screen.status_message())\n\n    def set_active_menu(self, menu_id: str):\n        \"\"\"Highlight active menu item\"\"\"\n        self.menu_bar.set_active(menu_id)\n\n    def set_active_tab(self, tab_id: str):\n        \"\"\"Highlight active tab\"\"\"\n        self.tab_bar.set_active(tab_id)\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#menu-bar","title":"Menu Bar","text":"<pre><code># ui/templates/menu_bar.py\nfrom PyQt6.QtWidgets import QWidget, QHBoxLayout, QPushButton\nfrom PyQt6.QtCore import pyqtSignal\n\nfrom design_system import ColorPalette\n\n\nclass AppMenuBar(QWidget):\n    \"\"\"Main menu navigation bar\"\"\"\n\n    item_clicked = pyqtSignal(str)\n\n    MENU_ITEMS = [\n        (\"project\", \"Project\"),\n        (\"files\", \"Files and Cases\"),\n        (\"coding\", \"Coding\"),\n        (\"reports\", \"Reports\"),\n        (\"ai\", \"AI\"),\n        (\"help\", \"Help\"),\n    ]\n\n    def __init__(self, colors: ColorPalette, parent=None):\n        super().__init__(parent)\n        self._colors = colors\n        self._buttons = {}\n        self._active = None\n        self._setup_ui()\n\n    def _setup_ui(self):\n        layout = QHBoxLayout(self)\n        layout.setContentsMargins(16, 0, 16, 0)\n        layout.setSpacing(0)\n\n        for menu_id, label in self.MENU_ITEMS:\n            btn = QPushButton(label)\n            btn.setProperty(\"menuItem\", True)\n            btn.clicked.connect(lambda checked, mid=menu_id: self._on_click(mid))\n            self._buttons[menu_id] = btn\n            layout.addWidget(btn)\n\n        layout.addStretch()\n        self._apply_style()\n\n    def set_active(self, menu_id: str):\n        \"\"\"Set active menu item\"\"\"\n        if self._active:\n            self._buttons[self._active].setProperty(\"active\", False)\n        self._active = menu_id\n        if menu_id in self._buttons:\n            self._buttons[menu_id].setProperty(\"active\", True)\n        self._apply_style()\n\n    def _on_click(self, menu_id: str):\n        self.set_active(menu_id)\n        self.item_clicked.emit(menu_id)\n\n    def _apply_style(self):\n        # ... styling code\n        pass\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#content-layouts","title":"Content Layouts","text":"<pre><code># ui/templates/layouts/sidebar_layout.py\nfrom PyQt6.QtWidgets import QWidget, QHBoxLayout, QSplitter\nfrom PyQt6.QtCore import Qt\n\nfrom design_system import ColorPalette\n\n\nclass SidebarLayout(QWidget):\n    \"\"\"\n    Layout with sidebar + main content.\n\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502          \u2502                        \u2502\n    \u2502 SIDEBAR  \u2502     MAIN CONTENT       \u2502\n    \u2502          \u2502                        \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \"\"\"\n\n    def __init__(self, colors: ColorPalette, parent=None):\n        super().__init__(parent)\n        self._colors = colors\n        self._setup_ui()\n\n    def _setup_ui(self):\n        layout = QHBoxLayout(self)\n        layout.setContentsMargins(0, 0, 0, 0)\n\n        self.splitter = QSplitter(Qt.Orientation.Horizontal)\n\n        # Sidebar container\n        self.sidebar = QWidget()\n        self.sidebar.setMinimumWidth(200)\n        self.sidebar.setMaximumWidth(400)\n        self.sidebar_layout = QVBoxLayout(self.sidebar)\n        self.sidebar_layout.setContentsMargins(0, 0, 0, 0)\n        self.splitter.addWidget(self.sidebar)\n\n        # Main content container\n        self.main_content = QWidget()\n        self.main_layout = QVBoxLayout(self.main_content)\n        self.main_layout.setContentsMargins(0, 0, 0, 0)\n        self.splitter.addWidget(self.main_content)\n\n        self.splitter.setSizes([280, 920])\n        layout.addWidget(self.splitter)\n\n    def set_sidebar(self, widget: QWidget):\n        \"\"\"Set sidebar content\"\"\"\n        self._clear_layout(self.sidebar_layout)\n        self.sidebar_layout.addWidget(widget)\n\n    def set_content(self, widget: QWidget):\n        \"\"\"Set main content\"\"\"\n        self._clear_layout(self.main_layout)\n        self.main_layout.addWidget(widget)\n\n    def _clear_layout(self, layout):\n        while layout.count():\n            child = layout.takeAt(0)\n            if child.widget():\n                child.widget().setParent(None)\n\n\n# ui/templates/layouts/three_panel.py\nclass ThreePanelLayout(QWidget):\n    \"\"\"\n    Layout with left sidebar + center + right panel.\n\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502          \u2502              \u2502          \u2502\n    \u2502   LEFT   \u2502    CENTER    \u2502  RIGHT   \u2502\n    \u2502          \u2502              \u2502          \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \"\"\"\n\n    def __init__(self, colors: ColorPalette, parent=None):\n        super().__init__(parent)\n        self._colors = colors\n        self._setup_ui()\n\n    def _setup_ui(self):\n        layout = QHBoxLayout(self)\n        layout.setContentsMargins(0, 0, 0, 0)\n\n        self.splitter = QSplitter(Qt.Orientation.Horizontal)\n\n        # Left panel\n        self.left_panel = QWidget()\n        self.left_panel.setMinimumWidth(200)\n        self.left_panel.setMaximumWidth(350)\n        self.left_layout = QVBoxLayout(self.left_panel)\n        self.left_layout.setContentsMargins(0, 0, 0, 0)\n        self.splitter.addWidget(self.left_panel)\n\n        # Center panel\n        self.center_panel = QWidget()\n        self.center_layout = QVBoxLayout(self.center_panel)\n        self.center_layout.setContentsMargins(0, 0, 0, 0)\n        self.splitter.addWidget(self.center_panel)\n\n        # Right panel\n        self.right_panel = QWidget()\n        self.right_panel.setMinimumWidth(200)\n        self.right_panel.setMaximumWidth(350)\n        self.right_layout = QVBoxLayout(self.right_panel)\n        self.right_layout.setContentsMargins(0, 0, 0, 0)\n        self.splitter.addWidget(self.right_panel)\n\n        self.splitter.setSizes([280, 640, 280])\n        layout.addWidget(self.splitter)\n\n    def set_left(self, widget: QWidget):\n        self._clear_layout(self.left_layout)\n        self.left_layout.addWidget(widget)\n\n    def set_center(self, widget: QWidget):\n        self._clear_layout(self.center_layout)\n        self.center_layout.addWidget(widget)\n\n    def set_right(self, widget: QWidget):\n        self._clear_layout(self.right_layout)\n        self.right_layout.addWidget(widget)\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#layer-3-screens","title":"Layer 3: Screens","text":""},{"location":"archive/SCREEN_STORIES_PLAN/#base-screen-class","title":"Base Screen Class","text":"<pre><code># ui/screens/base.py\nfrom abc import ABC, abstractmethod\nfrom PyQt6.QtWidgets import QWidget\n\nfrom design_system import ColorPalette, get_theme\n\n\nclass BaseScreen(ABC):\n    \"\"\"\n    Base class for all screen content.\n\n    Screens don't include the app shell - they provide:\n    - toolbar_content(): widgets for the toolbar slot\n    - content(): the main content widget\n    - status_message(): text for status bar\n    \"\"\"\n\n    def __init__(self, colors: ColorPalette = None):\n        self._colors = colors or get_theme(\"dark\")\n        self._data_provider = None\n        self._toolbar_widget = None\n        self._content_widget = None\n        self._build()\n\n    @abstractmethod\n    def _build(self):\n        \"\"\"Build the screen's toolbar and content widgets\"\"\"\n        pass\n\n    @abstractmethod\n    def _build_toolbar(self) -&gt; QWidget:\n        \"\"\"Create toolbar content for this screen\"\"\"\n        pass\n\n    @abstractmethod\n    def _build_content(self) -&gt; QWidget:\n        \"\"\"Create main content for this screen\"\"\"\n        pass\n\n    def toolbar_content(self) -&gt; QWidget:\n        \"\"\"Get toolbar widget\"\"\"\n        if not self._toolbar_widget:\n            self._toolbar_widget = self._build_toolbar()\n        return self._toolbar_widget\n\n    def content(self) -&gt; QWidget:\n        \"\"\"Get content widget\"\"\"\n        if not self._content_widget:\n            self._content_widget = self._build_content()\n        return self._content_widget\n\n    def status_message(self) -&gt; str:\n        \"\"\"Status bar message\"\"\"\n        return \"Ready\"\n\n    def set_data_provider(self, provider):\n        \"\"\"Inject data provider for real data\"\"\"\n        self._data_provider = provider\n        self._refresh_data()\n\n    def _refresh_data(self):\n        \"\"\"Override to reload data from provider\"\"\"\n        pass\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#example-screen-text-coding","title":"Example Screen: Text Coding","text":"<pre><code># ui/screens/coding/text.py\nfrom PyQt6.QtWidgets import QWidget, QHBoxLayout, QVBoxLayout\n\nfrom design_system import ColorPalette\nfrom design_system.components import Button\nfrom design_system.code_tree import CodeTree\nfrom design_system.document import TextPanel, SelectionPopup\nfrom design_system.data_display import KeyValueList\n\nfrom ..base import BaseScreen\nfrom ...templates.layouts import ThreePanelLayout\nfrom ...mock_data import get_mock_codes, get_mock_document\n\n\nclass TextCodingScreen(BaseScreen):\n    \"\"\"Text coding screen content\"\"\"\n\n    def _build(self):\n        self._codes = []\n        self._document = None\n        self._load_data()\n\n    def _build_toolbar(self) -&gt; QWidget:\n        \"\"\"Build toolbar with coding actions\"\"\"\n        toolbar = QWidget()\n        layout = QHBoxLayout(toolbar)\n        layout.setContentsMargins(8, 4, 8, 4)\n\n        # File selection dropdown would go here\n        layout.addWidget(Button(\"Open File\", icon=\"folder_open\", colors=self._colors))\n        layout.addWidget(Button(\"Save\", icon=\"save\", colors=self._colors))\n\n        layout.addStretch()\n\n        layout.addWidget(Button(\"Undo\", icon=\"undo\", variant=\"ghost\", colors=self._colors))\n        layout.addWidget(Button(\"Redo\", icon=\"redo\", variant=\"ghost\", colors=self._colors))\n\n        return toolbar\n\n    def _build_content(self) -&gt; QWidget:\n        \"\"\"Build three-panel coding layout\"\"\"\n        layout = ThreePanelLayout(colors=self._colors)\n\n        # Left: Code tree\n        self.code_tree = CodeTree(colors=self._colors)\n        self.code_tree.set_codes(self._codes)\n        layout.set_left(self.code_tree)\n\n        # Center: Document text\n        self.text_panel = TextPanel(colors=self._colors)\n        self.text_panel.set_content(self._document)\n        layout.set_center(self.text_panel)\n\n        # Right: Code details\n        self.details_panel = self._build_details_panel()\n        layout.set_right(self.details_panel)\n\n        return layout\n\n    def _build_details_panel(self) -&gt; QWidget:\n        \"\"\"Build right panel with code details\"\"\"\n        panel = QWidget()\n        layout = QVBoxLayout(panel)\n\n        # Code info\n        self.code_info = KeyValueList(colors=self._colors)\n        self.code_info.add_item(\"Selected Code\", \"None\")\n        self.code_info.add_item(\"Color\", \"-\")\n        self.code_info.add_item(\"Frequency\", \"0\")\n        layout.addWidget(self.code_info)\n\n        layout.addStretch()\n        return panel\n\n    def _load_data(self):\n        \"\"\"Load mock or real data\"\"\"\n        if self._data_provider:\n            self._codes = self._data_provider.get_codes()\n            self._document = self._data_provider.get_document()\n        else:\n            self._codes = get_mock_codes()\n            self._document = get_mock_document()\n\n    def status_message(self) -&gt; str:\n        doc_name = self._document.get(\"name\", \"No document\") if self._document else \"No document\"\n        code_count = len(self._codes)\n        return f\"{doc_name} | {code_count} codes\"\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#example-screen-settings","title":"Example Screen: Settings","text":"<pre><code># ui/screens/settings/settings.py\nfrom PyQt6.QtWidgets import QWidget, QHBoxLayout, QVBoxLayout\n\nfrom design_system import ColorPalette\nfrom design_system.components import Button\nfrom design_system.navigation import NavList\nfrom design_system.forms import Select, Toggle, FormGroup\n\nfrom ..base import BaseScreen\nfrom ...templates.layouts import SidebarLayout\n\n\nclass SettingsScreen(BaseScreen):\n    \"\"\"Settings screen content\"\"\"\n\n    SECTIONS = [\n        (\"general\", \"General\", \"tune\"),\n        (\"appearance\", \"Appearance\", \"palette\"),\n        (\"fonts\", \"Fonts\", \"text_fields\"),\n        (\"shortcuts\", \"Shortcuts\", \"keyboard\"),\n        (\"backup\", \"Backup\", \"backup\"),\n        (\"ai\", \"AI Settings\", \"smart_toy\"),\n        (\"advanced\", \"Advanced\", \"code\"),\n    ]\n\n    def _build(self):\n        self._current_section = \"general\"\n\n    def _build_toolbar(self) -&gt; QWidget:\n        toolbar = QWidget()\n        layout = QHBoxLayout(toolbar)\n        layout.setContentsMargins(8, 4, 8, 4)\n\n        layout.addStretch()\n        layout.addWidget(Button(\"Reset to Defaults\", variant=\"secondary\", colors=self._colors))\n        layout.addWidget(Button(\"Save Changes\", variant=\"primary\", colors=self._colors))\n\n        return toolbar\n\n    def _build_content(self) -&gt; QWidget:\n        layout = SidebarLayout(colors=self._colors)\n\n        # Left: Settings navigation\n        self.nav = NavList(colors=self._colors)\n        for section_id, label, icon in self.SECTIONS:\n            self.nav.add_item(section_id, label, icon)\n        self.nav.set_active(\"general\")\n        self.nav.item_clicked.connect(self._on_section_change)\n        layout.set_sidebar(self.nav)\n\n        # Right: Settings content\n        self.settings_content = self._build_general_section()\n        layout.set_content(self.settings_content)\n\n        return layout\n\n    def _build_general_section(self) -&gt; QWidget:\n        \"\"\"Build general settings form\"\"\"\n        panel = QWidget()\n        layout = QVBoxLayout(panel)\n        layout.setContentsMargins(24, 24, 24, 24)\n\n        # Language\n        lang_group = FormGroup(\"Language &amp; Region\", colors=self._colors)\n        lang_group.add_row(\n            \"Interface Language\",\n            Select(options=[\"English\", \"German\", \"Spanish\", \"French\"], colors=self._colors),\n            description=\"Choose the language for menus and interface\"\n        )\n        lang_group.add_row(\n            \"Date Format\",\n            Select(options=[\"MM/DD/YYYY\", \"DD/MM/YYYY\", \"YYYY-MM-DD\"], colors=self._colors),\n        )\n        layout.addWidget(lang_group)\n\n        # Behavior\n        behavior_group = FormGroup(\"Behavior\", colors=self._colors)\n        behavior_group.add_row(\n            \"Auto-save\",\n            Toggle(checked=True, colors=self._colors),\n            description=\"Automatically save changes\"\n        )\n        behavior_group.add_row(\n            \"Confirm deletions\",\n            Toggle(checked=True, colors=self._colors),\n        )\n        layout.addWidget(behavior_group)\n\n        layout.addStretch()\n        return panel\n\n    def _on_section_change(self, section_id: str):\n        self._current_section = section_id\n        # Would rebuild content for selected section\n\n    def status_message(self) -&gt; str:\n        return \"Settings\"\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#how-it-all-connects","title":"How It All Connects","text":""},{"location":"archive/SCREEN_STORIES_PLAN/#running-a-screen","title":"Running a Screen","text":"<pre><code># main.py\nfrom PyQt6.QtWidgets import QApplication\nimport sys\n\nfrom design_system import get_theme\nfrom ui.templates.app_shell import AppShell\nfrom ui.screens.coding.text import TextCodingScreen\n\n\ndef main():\n    app = QApplication(sys.argv)\n\n    colors = get_theme(\"dark\")\n\n    # Create app shell (template)\n    shell = AppShell(colors=colors)\n    shell.set_project(\"research_project.qda\")\n\n    # Create screen content\n    screen = TextCodingScreen(colors=colors)\n\n    # Insert screen into shell\n    shell.set_screen(screen)\n    shell.set_active_menu(\"coding\")\n    shell.set_active_tab(\"coding\")\n\n    shell.show()\n    sys.exit(app.exec())\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#screen-navigation","title":"Screen Navigation","text":"<pre><code># In AppShell or a router\nclass AppShell(QMainWindow):\n\n    def __init__(self, ...):\n        # ...\n        self.menu_selected.connect(self._handle_navigation)\n\n    def _handle_navigation(self, menu_id: str):\n        \"\"\"Navigate to different screen based on menu selection\"\"\"\n        screen_map = {\n            \"coding\": lambda: TextCodingScreen(self._colors),\n            \"files\": lambda: FileManagerScreen(self._colors),\n            \"reports\": lambda: CodingReportsScreen(self._colors),\n            \"settings\": lambda: SettingsScreen(self._colors),\n            # ...\n        }\n\n        creator = screen_map.get(menu_id)\n        if creator:\n            screen = creator()\n            self.set_screen(screen)\n            self.set_active_menu(menu_id)\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#visual-summary","title":"Visual Summary","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         AppShell                                \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 TitleBar (design_system/layout.py)                        \u2502  \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502\n\u2502  \u2502 AppMenuBar (ui/templates/menu_bar.py)                     \u2502  \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502\n\u2502  \u2502 AppTabBar (ui/templates/tab_bar.py)                       \u2502  \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502\n\u2502  \u2502 ToolbarContainer \u2190 screen.toolbar_content()               \u2502  \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502\n\u2502  \u2502                                                           \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502  \u2502  \u2502           screen.content()                          \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u2502CodeTree \u2502    TextPanel        \u2502 Details \u2502        \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u2502(design  \u2502    (design_system)  \u2502 (design \u2502        \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u2502_system) \u2502                     \u2502 _system)\u2502        \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502           ThreePanelLayout                          \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502           (ui/templates/layouts)                    \u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502  \u2502                                                           \u2502  \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u2502\n\u2502  \u2502 AppStatusBar (ui/templates/status_bar.py)                 \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"archive/SCREEN_STORIES_PLAN/#implementation-phases","title":"Implementation Phases","text":""},{"location":"archive/SCREEN_STORIES_PLAN/#phase-1-templates-foundation","title":"Phase 1: Templates Foundation","text":"<ol> <li>Create <code>ui/templates/</code> structure</li> <li>Build <code>AppShell</code> with all shell components</li> <li>Build layout classes (<code>SidebarLayout</code>, <code>ThreePanelLayout</code>)</li> <li>Test shell with placeholder content</li> </ol>"},{"location":"archive/SCREEN_STORIES_PLAN/#phase-2-first-screens","title":"Phase 2: First Screens","text":"<ol> <li>Create <code>ui/screens/base.py</code></li> <li>Build <code>SettingsScreen</code> (simplest)</li> <li>Build <code>FileManagerScreen</code> (validates layouts)</li> <li>Test navigation between screens</li> </ol>"},{"location":"archive/SCREEN_STORIES_PLAN/#phase-3-mock-data-storybook","title":"Phase 3: Mock Data &amp; Storybook","text":"<ol> <li>Create <code>ui/mock_data/</code> module</li> <li>Build <code>ui/storybook/</code> for screen previews</li> <li>Add more screens progressively</li> </ol>"},{"location":"archive/SCREEN_STORIES_PLAN/#phase-4-6-remaining-screens","title":"Phase 4-6: Remaining Screens","text":"<p>Follow priority order from previous plan.</p>"},{"location":"archive/SCREEN_STORIES_PLAN/#benefits-of-this-architecture","title":"Benefits of This Architecture","text":"<ol> <li>Clear separation: Design system stays generic, templates handle app structure, screens handle content</li> <li>Consistency: All screens share the same shell automatically</li> <li>Testability: Screens can be tested in isolation with mock data</li> <li>Maintainability: Change shell once, all screens update</li> <li>Reusability: Templates could be reused for similar apps</li> <li>Gradual migration: Can build screens one at a time</li> </ol>"},{"location":"archive/SCREEN_STORIES_PLAN/#next-steps","title":"Next Steps","text":"<ol> <li>Create <code>ui/templates/</code> structure</li> <li>Build <code>AppShell</code> with shell components</li> <li>Build first layout (<code>SidebarLayout</code>)</li> <li>Build <code>SettingsScreen</code> to validate the pattern</li> <li>Set up screen storybook</li> </ol> <p>Ready to start?</p>"},{"location":"backlog/","title":"Backlog","text":"<p>Project backlog containing tasks, architecture decisions, and planning documents.</p>"},{"location":"backlog/#contents","title":"Contents","text":"<ul> <li>Tasks \u2014 Feature specifications and implementation tasks</li> <li>Decisions \u2014 Architecture Decision Records (ADRs)</li> <li>Backlog Restructure \u2014 Backlog organization and structure</li> <li>Dependency Analysis \u2014 Task dependency mapping</li> </ul>"},{"location":"backlog/#tasks-overview","title":"Tasks Overview","text":"<p>Tasks follow the <code>QC-XXX</code> numbering scheme:</p> Range Domain QC-026 Project Navigation QC-027 Source Management QC-028 Code Management QC-029 Text Coding QC-030 Case Management QC-031+ Additional Features"},{"location":"backlog/#decisions","title":"Decisions","text":"<p>Architecture Decision Records document key technical choices:</p> <ul> <li>Decision 001 \u2014 Design System Visualization Libraries</li> <li>Decision 002 \u2014 Library Alternatives Analysis</li> <li>Decision 003 \u2014 Localization Framework</li> <li>Decision 004 \u2014 Design System Visualization (Updated)</li> <li>Decision 005 \u2014 MCP Transport (HTTP over Stdio)</li> </ul>"},{"location":"backlog/BACKLOG_RESTRUCTURE/","title":"QualCoder v2 Backlog - Big Picture","text":"<p>Purpose: User-centric and Agent-centric feature backlog Principle: Every feature has a Human path AND an Agent path Status: DRAFT - Skeleton for Review</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#the-two-actors","title":"The Two Actors","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        QualCoder v2                                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502   \u2502 RESEARCHER  \u2502                         \u2502  AI AGENT   \u2502           \u2502\n\u2502   \u2502   (Human)   \u2502                         \u2502 (Autonomous)\u2502           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518                         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2502          \u2502                                       \u2502                   \u2502\n\u2502          \u2502 Mouse/Keyboard                        \u2502 tool_call         \u2502\n\u2502          \u2502 Visual Feedback                       \u2502 MCP Protocol      \u2502\n\u2502          \u25bc                                       \u25bc                   \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502   \u2502                    EVENT BUS                          \u2502          \u2502\n\u2502   \u2502  (Listens to Human Events AND Agent Events)          \u2502          \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502          \u2502                                       \u2502                   \u2502\n\u2502          \u25bc                                       \u25bc                   \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502   \u2502   Human     \u2502                         \u2502   Agent     \u2502           \u2502\n\u2502   \u2502  Performed  \u2502\u25c4\u2500\u2500\u2500\u2500\u2500 Same Domain \u2500\u2500\u2500\u2500\u2500\u25ba\u2502  Performed  \u2502           \u2502\n\u2502   \u2502   Action    \u2502        Logic            \u2502   Action    \u2502           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#trust-levels-agent-autonomy","title":"Trust Levels (Agent Autonomy)","text":"Level Name Description Human Involvement T1 Autonomous Agent acts freely None - just notified T2 Notify Agent acts, human informed Post-action notification T3 Suggest Agent proposes, human decides Approval required T4 Assist Human leads, agent helps Human initiates"},{"location":"backlog/BACKLOG_RESTRUCTURE/#parallel-development-tracks","title":"Parallel Development Tracks","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    TWO PARALLEL DEVELOPMENT TRACKS                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  TRACK A: RESEARCHER UI                    TRACK B: AGENT MCP               \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                     \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500              \u2502\n\u2502                                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502\n\u2502  \u2502 Screens &amp; Dialogs   \u2502                   \u2502 MCP Tools &amp; Schemas \u2502         \u2502\n\u2502  \u2502 (Qt/PySide6)        \u2502                   \u2502 (JSON-RPC/HTTP)     \u2502         \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502\n\u2502             \u2502                                         \u2502                     \u2502\n\u2502             \u2502         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502                     \u2502\n\u2502             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502  SHARED DOMAIN    \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2502\n\u2502                       \u2502  (Use Cases)      \u2502                                 \u2502\n\u2502                       \u2502  - Coordinators   \u2502                                 \u2502\n\u2502                       \u2502  - Repositories   \u2502                                 \u2502\n\u2502                       \u2502  - Event Bus      \u2502                                 \u2502\n\u2502                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                 \u2502\n\u2502                                                                             \u2502\n\u2502  Key Insight: Agent MCP tools can be developed IN PARALLEL with UI.        \u2502\n\u2502  They share the same domain layer but have independent interfaces.          \u2502\n\u2502                                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#why-parallel-tracks-matter","title":"Why Parallel Tracks Matter","text":"Without Parallel Tracks With Parallel Tracks Agent blocked until all UI screens done Agent tools ship as domain is ready MCP tools wait for Image/AV screens Text MCP tools ship NOW Testing requires full UI Agent enables automated testing Single critical path Multiple parallel workstreams"},{"location":"backlog/BACKLOG_RESTRUCTURE/#feature-map-skeleton","title":"Feature Map (Skeleton)","text":""},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-000-foundation-architecture-setup","title":"F-000: Foundation (Architecture Setup)","text":"<p>Establishes the base architecture that enables all other features. This is \"done once\" infrastructure - not user-facing, but enables everything.</p> Component Purpose Status Event Bus Pub/sub for domain events Done Signal Bridge Thread-safe domain \u2192 Qt signals Done Design System Reusable UI components Done Result Type Success/Failure pattern Done Typed IDs CodeId, SourceId, etc. Done MCP Server HTTP server for agent tools Done"},{"location":"backlog/BACKLOG_RESTRUCTURE/#core-features-what-users-do","title":"Core Features (What users DO)","text":"ID Feature Researcher Actions Agent Actions Trust F-001 Open &amp; Navigate Project Open project, browse sources, switch views Navigate to specific source/segment T1 F-002 Manage Sources Import files, organize, delete Suggest imports, extract metadata T3 F-003 Manage Codes Create codes, organize hierarchy, merge Suggest new codes, detect duplicates T3 F-004 Apply Codes to Text Select text, apply code, remove coding Apply codes, suggest codes T3 F-005 Apply Codes to Images Draw region, apply code Detect regions, suggest codes T3 F-006 Apply Codes to Audio/Video Mark time range, apply code Transcribe, suggest codes T3 F-007 Auto-Code Find patterns, batch apply Find similar, batch apply T2 F-008 Search &amp; Find Search text, filter by code Semantic search, find related T1 F-009 Manage Cases Create cases, link sources Suggest groupings T3 F-010 Generate Reports Run reports, export Generate summaries, insights T2 F-011 Collaborate Switch coder, compare, merge Detect conflicts, suggest resolutions T3 F-012 Chat with Agent Ask questions, give instructions Respond, execute tasks T3"},{"location":"backlog/BACKLOG_RESTRUCTURE/#feature-details-skeleton","title":"Feature Details (Skeleton)","text":""},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-001-open-navigate-project","title":"F-001: Open &amp; Navigate Project","text":"<p>Researcher wants to: - Open an existing project or create new - See list of sources in the project - Navigate between different views (coding, analysis, etc.) - Quickly find where they left off</p> <p>Agent wants to: - Know which project is active - Navigate to a specific source or segment - Understand current context for suggestions</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-001.1 | Open existing project | Researcher | | F-001.2 | Create new project | Researcher | | F-001.3 | View source list | Researcher | | F-001.4 | Switch between screens | Researcher | | F-001.5 | Get current project context | Agent | | F-001.6 | Navigate to source | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-002-manage-sources","title":"F-002: Manage Sources","text":"<p>Researcher wants to: - Import text documents, PDFs, images, audio, video - Organize sources into folders/groups - View source properties and metadata - Delete or archive sources</p> <p>Agent wants to: - List available sources - Read source content - Extract metadata automatically - Suggest organization</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-002.1 | Import text document | Researcher | | F-002.2 | Import PDF document | Researcher | | F-002.3 | Import image files | Researcher | | F-002.4 | Import audio/video files | Researcher | | F-002.5 | Organize sources into folders | Researcher | | F-002.6 | View source metadata | Researcher | | F-002.7 | Delete source | Researcher | | F-002.8 | List all sources | Agent | | F-002.9 | Read source content | Agent | | F-002.10 | Extract metadata | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-003-manage-codes","title":"F-003: Manage Codes","text":"<p>Researcher wants to: - Create new codes with name, color, description - Organize codes into categories (hierarchy) - Rename, recolor, edit codes - Merge duplicate or similar codes - Delete codes</p> <p>Agent wants to: - List available codes - Suggest new codes based on content - Detect potential duplicate codes - Understand code hierarchy</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-003.1 | Create new code | Researcher | | F-003.2 | Create code category | Researcher | | F-003.3 | Move code to category | Researcher | | F-003.4 | Rename code | Researcher | | F-003.5 | Change code color | Researcher | | F-003.6 | Edit code memo | Researcher | | F-003.7 | Merge two codes | Researcher | | F-003.8 | Delete code | Researcher | | F-003.9 | List all codes | Agent | | F-003.10 | Suggest new code | Agent | | F-003.11 | Detect duplicate codes | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-004-apply-codes-to-text","title":"F-004: Apply Codes to Text","text":"<p>Researcher wants to: - Select text in a document - Apply one or more codes to selection - See highlighted coded segments - View all segments for a code - Remove coding from a segment - Add memo to a segment</p> <p>Agent wants to: - Apply code to specific text positions - Suggest codes for uncoded text - List coded segments - Find similar uncoded passages</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-004.1 | Select text and apply code | Researcher | | F-004.2 | Apply multiple codes to selection | Researcher | | F-004.3 | View coded segments with highlights | Researcher | | F-004.4 | View all segments for a code | Researcher | | F-004.5 | Remove coding from segment | Researcher | | F-004.6 | Add memo to segment | Researcher | | F-004.7 | Apply code to text range | Agent | | F-004.8 | Suggest code for text | Agent | | F-004.9 | List coded segments | Agent | | F-004.10 | Find similar uncoded text | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-005-apply-codes-to-images","title":"F-005: Apply Codes to Images","text":"<p>Researcher wants to: - Draw rectangle/polygon on image - Apply code to drawn region - See coded regions as overlays - Remove coding from region - Add memo to region</p> <p>Agent wants to: - Detect objects/regions in image - Apply code to image region - Suggest codes for detected regions</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-005.1 | Draw region on image | Researcher | | F-005.2 | Apply code to image region | Researcher | | F-005.3 | View coded regions as overlays | Researcher | | F-005.4 | Remove coding from region | Researcher | | F-005.5 | Detect regions in image | Agent | | F-005.6 | Apply code to detected region | Agent | | F-005.7 | Suggest codes for image | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-006-apply-codes-to-audiovideo","title":"F-006: Apply Codes to Audio/Video","text":"<p>Researcher wants to: - Play audio/video with transcript - Mark time range - Apply code to time range - See coded ranges on timeline - Link to transcript text</p> <p>Agent wants to: - Transcribe audio/video - Detect speakers - Apply code to time range - Suggest codes based on transcript</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-006.1 | Play media with transcript | Researcher | | F-006.2 | Mark time range | Researcher | | F-006.3 | Apply code to time range | Researcher | | F-006.4 | View coded ranges on timeline | Researcher | | F-006.5 | Transcribe media | Agent | | F-006.6 | Detect speakers | Agent | | F-006.7 | Apply code to time range | Agent | | F-006.8 | Suggest codes from transcript | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-007-auto-code","title":"F-007: Auto-Code","text":"<p>Researcher wants to: - Search for a text pattern - See all matches highlighted - Apply code to all matches at once - Undo batch coding - Auto-code by speaker</p> <p>Agent wants to: - Find similar passages to coded segment - Batch apply codes to similar content - Track and report auto-coding batches</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-007.1 | Search text pattern | Researcher | | F-007.2 | Preview matches before coding | Researcher | | F-007.3 | Apply code to all matches | Researcher | | F-007.4 | Undo batch coding | Researcher | | F-007.5 | Auto-code by speaker name | Researcher | | F-007.6 | Find similar to coded segment | Agent | | F-007.7 | Batch apply to similar | Agent | | F-007.8 | Report batch results | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-008-search-find","title":"F-008: Search &amp; Find","text":"<p>Researcher wants to: - Search text across all sources - Filter by code, source, case - Jump to search results - Save search as smart collection</p> <p>Agent wants to: - Semantic search (meaning, not just text) - Find related segments - Answer questions about data</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-008.1 | Full-text search | Researcher | | F-008.2 | Filter by code | Researcher | | F-008.3 | Filter by source | Researcher | | F-008.4 | Jump to result | Researcher | | F-008.5 | Save search as collection | Researcher | | F-008.6 | Semantic search | Agent | | F-008.7 | Find related segments | Agent | | F-008.8 | Answer data question | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-009-manage-cases","title":"F-009: Manage Cases","text":"<p>Researcher wants to: - Create case (e.g., participant) - Link sources to case - Add case attributes (demographics) - View all data for a case</p> <p>Agent wants to: - List cases - Suggest case groupings - Compare across cases</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-009.1 | Create case | Researcher | | F-009.2 | Link source to case | Researcher | | F-009.3 | Add case attributes | Researcher | | F-009.4 | View case data | Researcher | | F-009.5 | List all cases | Agent | | F-009.6 | Suggest case groupings | Agent | | F-009.7 | Compare across cases | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-010-generate-reports","title":"F-010: Generate Reports","text":"<p>Researcher wants to: - Generate code frequency report - Generate co-occurrence matrix - Export coded data - Visualize code distribution</p> <p>Agent wants to: - Generate summary of findings - Identify themes and patterns - Create visualizations</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-010.1 | Generate code frequencies | Researcher | | F-010.2 | Generate co-occurrence matrix | Researcher | | F-010.3 | Export to spreadsheet | Researcher | | F-010.4 | Visualize code distribution | Researcher | | F-010.5 | Summarize findings | Agent | | F-010.6 | Identify themes | Agent | | F-010.7 | Generate insight report | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-011-collaborate","title":"F-011: Collaborate","text":"<p>Researcher wants to: - Switch between coders - See who coded what - Compare coding between coders - Merge coding from multiple coders - Calculate inter-rater reliability</p> <p>Agent wants to: - Detect coding conflicts - Suggest conflict resolutions - Calculate agreement statistics</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-011.1 | Switch coder identity | Researcher | | F-011.2 | View coding by coder | Researcher | | F-011.3 | Compare two coders | Researcher | | F-011.4 | Merge coding | Researcher | | F-011.5 | Calculate reliability | Researcher | | F-011.6 | Detect conflicts | Agent | | F-011.7 | Suggest resolutions | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#f-012-chat-with-agent","title":"F-012: Chat with Agent","text":"<p>Researcher wants to: - Ask questions about the data - Give coding instructions - Review agent suggestions - Approve or reject agent actions</p> <p>Agent wants to: - Understand researcher intent - Execute multi-step tasks - Present findings clearly - Learn from feedback</p> <p>Stories: | ID | Story | Actor | |----|-------|-------| | F-012.1 | Ask question about data | Researcher | | F-012.2 | Give coding instruction | Researcher | | F-012.3 | Review pending suggestions | Researcher | | F-012.4 | Approve agent action | Researcher | | F-012.5 | Reject agent action | Researcher | | F-012.6 | Execute multi-step task | Agent | | F-012.7 | Present findings | Agent | | F-012.8 | Learn from feedback | Agent |</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#mapping-old-structure-new-structure","title":"Mapping: Old Structure \u2192 New Structure","text":"Old (Architecture) New (User-Centric) M-001: Foundation Infrastructure - not a feature M-002: Coding Context F-003, F-004, F-007 M-003: Source Management F-002 M-004: Case Management F-009 M-005: Analysis F-008, F-010 M-006: Agent Experience F-012 M-007: Collaboration F-011"},{"location":"backlog/BACKLOG_RESTRUCTURE/#implementation-status-mapping","title":"Implementation Status Mapping","text":""},{"location":"backlog/BACKLOG_RESTRUCTURE/#researcher-ui-track","title":"Researcher UI Track","text":"Feature Current Status Notes F-001 Partial Project open works, navigation partial F-002 Not Started M-003 not started F-003 Done QC-004 domain complete F-004 In Progress QC-005/006/007 in progress F-005 Not Started Part of QC-007 F-006 Not Started Part of QC-007 F-007 In Progress Auto-coding controller done F-008 Not Started Part of M-005 F-009 Not Started M-004 not started F-010 Not Started M-005 not started F-011 Not Started M-007 not started F-012 Partial Agent infrastructure done"},{"location":"backlog/BACKLOG_RESTRUCTURE/#agent-mcp-track-parallel-development","title":"Agent MCP Track (Parallel Development)","text":"Feature Agent Capability Status F-001 Get project context \u2705 Done F-001 Navigate to source \u2705 Done F-002 List sources \u2705 Done F-002 Read source content \u2705 Done F-002 Extract metadata \u2705 Done F-002 Add source \u274c Missing F-003 List codes \u2705 Done F-003 Get code details \u2705 Done F-003 Create code \u274c Missing F-004 Apply codes \u2705 Done F-004 List segments \u2705 Done F-004 Remove coding \u274c Missing <p>Key Blockers for Agent Testing: - Agent cannot create codes - Agent cannot add test documents</p>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#next-steps","title":"Next Steps","text":"<ol> <li>Review this skeleton - Does the feature breakdown make sense?</li> <li>Refine stories - Add acceptance criteria (no implementation details)</li> <li>Prioritize - Which features first?</li> <li>Track - Map implementation to user stories</li> </ol>"},{"location":"backlog/BACKLOG_RESTRUCTURE/#open-questions","title":"Open Questions","text":"<ol> <li> <p>Should Foundation (design system, event bus, etc.) be tracked as a feature or kept separate as \"infrastructure\"?</p> </li> <li> <p>Are there missing features from the researcher's perspective?</p> </li> <li> <p>Are there missing agent capabilities?</p> </li> <li> <p>How granular should stories be? (Current: ~8-10 per feature)</p> </li> </ol>"},{"location":"backlog/DEPENDENCY_ANALYSIS/","title":"QualCoder v2 Backlog Dependency Analysis","text":""},{"location":"backlog/DEPENDENCY_ANALYSIS/#overview","title":"Overview","text":"<p>Total: 20 features (QC-026 to QC-045) with 135+ subtasks</p>"},{"location":"backlog/DEPENDENCY_ANALYSIS/#dependency-tiers","title":"Dependency Tiers","text":"<pre><code>TIER 1: FOUNDATION (Must complete first)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  QC-026: Open &amp; Navigate Project                                    \u2502\n\u2502  \u2514\u2500\u2500 Entry point - blocks EVERYTHING                                \u2502\n\u2502                                                                     \u2502\n\u2502  QC-027: Manage Sources                                             \u2502\n\u2502  \u2514\u2500\u2500 Imports text/image/AV/PDF - blocks all coding features         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                                    \u25bc\nTIER 2: CORE CODING (Text - mostly done \u2713)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  QC-028: Manage Codes \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 [In Progress]  \u2502\n\u2502  \u251c\u2500\u2500 Researcher: create, organize, merge codes \u2713                    \u2502\n\u2502  \u2514\u2500\u2500 Agent: list, suggest, create codes                             \u2502\n\u2502                                                                     \u2502\n\u2502  QC-029: Apply Codes to Text \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 [In Progress]  \u2502\n\u2502  \u251c\u2500\u2500 Researcher: select, apply, remove coding \u2713                     \u2502\n\u2502  \u2514\u2500\u2500 Agent: apply, list, remove segments                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                                    \u25bc\nTIER 3: SPECIALIZED CODING (Image/AV)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  QC-030: Apply Codes to Images                                      \u2502\n\u2502  \u251c\u2500\u2500 Researcher: draw region, apply code                            \u2502\n\u2502  \u2514\u2500\u2500 Agent: detect regions, apply codes                             \u2502\n\u2502                                                                     \u2502\n\u2502  QC-031: Apply Codes to Audio/Video                                 \u2502\n\u2502  \u251c\u2500\u2500 Researcher: mark time range, apply code                        \u2502\n\u2502  \u2514\u2500\u2500 Agent: transcribe, apply codes                                 \u2502\n\u2502                                                                     \u2502\n\u2502  QC-032: Auto-Code \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 [In Progress]   \u2502\n\u2502  \u2514\u2500\u2500 5/7 subtasks Done \u2713                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                                    \u25bc\nTIER 4: ANALYSIS &amp; REPORTING (Needs coded data)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  QC-033: Search and Find                                            \u2502\n\u2502  QC-035: Generate Reports                                           \u2502\n\u2502  QC-044: Visualizations                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                                    \u25bc\nTIER 5: COLLABORATION &amp; AI (Needs everything)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  QC-036: Collaborate                                                \u2502\n\u2502  QC-037: Chat with Agent \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 (Consummate feature)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nPARALLEL TRACK: AUXILIARY FEATURES (Can start after QC-026)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  QC-034: Manage Cases                                               \u2502\n\u2502  QC-038: Settings and Preferences                                   \u2502\n\u2502  QC-039: Import/Export Formats                                      \u2502\n\u2502  QC-040: Data Privacy                                               \u2502\n\u2502  QC-041: References and Bibliography                                \u2502\n\u2502  QC-042: Apply Codes to PDF                                         \u2502\n\u2502  QC-043: Journals and Memos                                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"backlog/DEPENDENCY_ANALYSIS/#parallel-development-researcher-agent","title":"Parallel Development: Researcher + Agent","text":"<p>Every feature has both Researcher and Agent acceptance criteria. They can be developed in parallel:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  EACH FEATURE = RESEARCHER AC + AGENT AC                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                     \u2502\n\u2502  Example: QC-028 Manage Codes                                       \u2502\n\u2502  \u251c\u2500\u2500 Researcher: create, edit, merge codes (UI)                     \u2502\n\u2502  \u2514\u2500\u2500 Agent: list, suggest, create codes (MCP)                       \u2502\n\u2502                                                                     \u2502\n\u2502  Both share same domain layer - develop in parallel!                \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"backlog/DEPENDENCY_ANALYSIS/#current-status-summary","title":"Current Status Summary","text":"Status Count Features \u2713 Done/In Progress 3 QC-028, QC-029, QC-032 Blocked 2 QC-030, QC-031 To Do 15 QC-026, 027, 033-044"},{"location":"backlog/DEPENDENCY_ANALYSIS/#current-agent-capability-status","title":"Current Agent Capability Status","text":"Feature Agent Capability Status QC-028 List codes \u2705 Working QC-028 Get code details \u2705 Working QC-028 Suggest codes \u2705 Done QC-028 Create new code \u274c Missing QC-027 List sources \u2705 Working QC-027 Read source content \u2705 Working QC-027 Add text source \u274c Missing QC-029 Apply codes to text \u2705 Working QC-029 List coded segments \u2705 Working QC-029 Navigate to segment \u2705 Working QC-029 Remove coded segment \u274c Missing"},{"location":"backlog/DEPENDENCY_ANALYSIS/#recommended-sequence","title":"Recommended Sequence","text":""},{"location":"backlog/DEPENDENCY_ANALYSIS/#phase-1-foundation","title":"Phase 1: Foundation","text":"<pre><code>QC-026 (Project) \u2192 QC-027 (Sources) \u2192 QC-028/029 (Coding)\n</code></pre>"},{"location":"backlog/DEPENDENCY_ANALYSIS/#phase-2-complete-text-coding","title":"Phase 2: Complete Text Coding","text":"<pre><code>QC-028: Add \"Agent can create code\" capability\nQC-027: Add \"Agent can add source\" capability\nQC-029: Add \"Agent can remove segment\" capability\n</code></pre>"},{"location":"backlog/DEPENDENCY_ANALYSIS/#phase-3-specialized-coding","title":"Phase 3: Specialized Coding","text":"<pre><code>QC-030 (Image Coding) - Researcher + Agent\nQC-031 (AV Coding) - Researcher + Agent\n</code></pre>"},{"location":"backlog/DEPENDENCY_ANALYSIS/#phase-4-analysis-collaboration","title":"Phase 4: Analysis &amp; Collaboration","text":"<pre><code>QC-033 (Search) \u2192 QC-035 (Reports) \u2192 QC-036 (Collaborate) \u2192 QC-037 (Chat)\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-001%20-%20Foundation/","title":"Foundation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-001%20-%20Foundation/#description","title":"Description","text":"<p>Establish the foundational layers of QualCoder v2: shared domain types, agent infrastructure, design system, and application shell.</p> <p>Agent-First: The agent context foundation is established here so every subsequent vertical slice can expose both human UI and agent tools.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-001%20-%20Foundation/#goals","title":"Goals","text":"<ul> <li>Shared types (Result monad, IDs, base protocols)</li> <li>Agent infrastructure (TrustLevel, session, agent server base)</li> <li>Reusable UI component library</li> <li>Application shell with navigation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-001%20-%20Foundation/#tasks","title":"Tasks","text":"ID Task Layer Status QC-001 Shared Domain Types &amp; Agent Foundation Domain Done QC-002 Design System Components Presentation Done QC-003 Application Shell Presentation Done QC-003.01 Base Signal Bridge Infrastructure Application Done QC-003.02 Event Bus Infrastructure Application Done"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-001%20-%20Foundation/#success-criteria","title":"Success Criteria","text":"<ul> <li>[x] Result[T, E] type with Success/Failure</li> <li>[x] Base ID types and protocols</li> <li>[x] TrustLevel, AgentSession, approval workflow base</li> <li>[x] Agent server skeleton ready to register tools</li> <li>[x] 50+ reusable UI components</li> <li>[x] Navigation and layout system</li> <li>[x] BaseSignalBridge with thread-safe event\u2192signal bridging</li> <li>[x] EventBus with pub/sub for domain events</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-002%20-%20Coding-Context/","title":"Coding Context","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-002%20-%20Coding-Context/#description","title":"Description","text":"<p>Implement the Coding bounded context end-to-end - the Core Domain where researchers apply semantic codes to qualitative data.</p> <p>Agent-First: Both human UI and agent tools are delivered together. An AI assistant can code data just like a human user.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-002%20-%20Coding-Context/#goals","title":"Goals","text":"<ul> <li>Pure, testable domain logic (Functional Core)</li> <li>Persistent storage with SQLite</li> <li>Controller orchestration (serves both UI and agent)</li> <li>Full coding UI screens</li> <li>Agent tools for agent coding</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-002%20-%20Coding-Context/#tasks","title":"Tasks","text":"ID Task Layer Status QC-004 Coding Domain Domain Done QC-005 Coding Infrastructure Infrastructure To Do QC-006 Coding Application Application To Do QC-007 Coding Presentation Presentation To Do"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-002%20-%20Coding-Context/#success-criteria","title":"Success Criteria","text":"<ul> <li>[ ] Entities: Code, Category, Segment (text, image, A/V)</li> <li>[ ] Events emitted for all state changes</li> <li>[ ] SQLite repositories working</li> <li>[ ] Controller coordinates operations</li> <li>[ ] All 4 coding screens functional (text, image, A/V, PDF)</li> <li>[ ] Agent tools: create_code, apply_code, list_codes, etc.</li> <li>[ ] Agent actions visible in UI (badges, activity panel)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-003%20-%20Source-Management/","title":"Source Management","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-003%20-%20Source-Management/#description","title":"Description","text":"<p>Implement the Source Management bounded context end-to-end - importing, organizing, and managing research data files.</p> <p>Agent-First: AI can import files, list sources, and read content for analysis.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-003%20-%20Source-Management/#goals","title":"Goals","text":"<ul> <li>Support text, image, audio, video, PDF sources</li> <li>File organization with folders</li> <li>Text extraction and transcription</li> <li>Source preview and metadata</li> <li>Agent tools for source operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-003%20-%20Source-Management/#tasks","title":"Tasks","text":"ID Task Layer Status QC-008 Source Domain Domain To Do QC-009 Source Infrastructure Infrastructure To Do QC-010 Source Application Application To Do QC-011 Source Presentation Presentation To Do"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-003%20-%20Source-Management/#success-criteria","title":"Success Criteria","text":"<ul> <li>[ ] Source and Folder entities</li> <li>[ ] Import from filesystem</li> <li>[ ] Text extraction from PDF</li> <li>[ ] File manager screen functional</li> <li>[ ] Agent tools: list_sources, read_source, import_file</li> <li>[ ] Agent can read source content for coding suggestions</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-004%20-%20Case-Management/","title":"Case Management","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-004%20-%20Case-Management/#description","title":"Description","text":"<p>Implement the Case bounded context end-to-end - grouping sources and segments into research units (participants, events, themes).</p> <p>Agent-First: AI can create cases, assign attributes, and query by case for focused analysis.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-004%20-%20Case-Management/#goals","title":"Goals","text":"<ul> <li>Case creation and management</li> <li>Flexible attributes system</li> <li>Case membership (sources or segments)</li> <li>Cross-case analysis support</li> <li>Agent tools for case operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-004%20-%20Case-Management/#tasks","title":"Tasks","text":"ID Task Layer Status QC-012 Case Domain Domain To Do QC-013 Case Infrastructure Infrastructure To Do QC-014 Case Application Application To Do QC-015 Case Presentation Presentation To Do"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-004%20-%20Case-Management/#success-criteria","title":"Success Criteria","text":"<ul> <li>[ ] Case and Attribute entities</li> <li>[ ] Membership assignment</li> <li>[ ] Case manager screen functional</li> <li>[ ] Attribute editor working</li> <li>[ ] Agent tools: create_case, list_cases, add_to_case, set_attribute</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-005%20-%20Analysis/","title":"Analysis & Reports","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-005%20-%20Analysis/#description","title":"Description","text":"<p>Implement the Analysis bounded context end-to-end - generating insights, reports, visualizations, and exports from coded data.</p> <p>Agent-First: AI can query coding patterns, generate reports, and provide analytical insights.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-005%20-%20Analysis/#goals","title":"Goals","text":"<ul> <li>Code frequency analysis</li> <li>Co-occurrence matrices</li> <li>Graph visualizations</li> <li>Export to multiple formats</li> <li>Agent tools for analysis queries</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-005%20-%20Analysis/#tasks","title":"Tasks","text":"ID Task Layer Status QC-016 Analysis Domain Domain To Do QC-017 Analysis Infrastructure Infrastructure To Do QC-018 Analysis Application Application To Do QC-019 Analysis Presentation Presentation To Do"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-005%20-%20Analysis/#success-criteria","title":"Success Criteria","text":"<ul> <li>[ ] Query and Report specifications</li> <li>[ ] Frequency reports working</li> <li>[ ] Chart visualizations</li> <li>[ ] Export to XLSX, REFI-QDA</li> <li>[ ] Agent tools: query_codes, get_frequency, find_cooccurrence</li> <li>[ ] Agent can answer questions about coding patterns</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-006%20-%20Agent-Context/","title":"Agent Experience","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-006%20-%20Agent-Context/#description","title":"Description","text":"<p>Implement the dedicated Agent Experience screens - AI chat, semantic search, and review queue.</p> <p>Note: Agent infrastructure (TrustLevel, sessions, agent server) is in M-001. Agent tools are in each context. This milestone adds the agent-specific UI screens.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-006%20-%20Agent-Context/#goals","title":"Goals","text":"<ul> <li>AI chat interface for conversational coding assistance</li> <li>Semantic search across coded data</li> <li>Review queue for pending agent suggestions</li> <li>Agent activity dashboard</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-006%20-%20Agent-Context/#tasks","title":"Tasks","text":"ID Task Layer Status QC-020 Agent Session Management Application To Do QC-021 Agent Presentation Presentation To Do"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-006%20-%20Agent-Context/#success-criteria","title":"Success Criteria","text":"<ul> <li>[ ] AI Chat screen functional (mockup: <code>ai_chat.html</code>)</li> <li>[ ] AI Search screen functional (mockup: <code>ai_search.html</code>)</li> <li>[ ] Review Queue screen functional (mockup: <code>review_queue.html</code>)</li> <li>[ ] Agent statistics and activity history</li> <li>[ ] Batch approve/reject in review queue</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-007%20-%20Collaboration/","title":"Collaboration","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-007%20-%20Collaboration/#description","title":"Description","text":"<p>Implement the Collaboration bounded context end-to-end - multi-coder workflows, project merging, and inter-rater reliability.</p> <p>Agent-First: AI is treated as a coder. Agent codings are tracked separately for comparison and can be promoted to human codings after review.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-007%20-%20Collaboration/#goals","title":"Goals","text":"<ul> <li>Multiple coders per project (including AI as a coder)</li> <li>Code ownership tracking</li> <li>Project merge with conflict resolution</li> <li>Coder comparison (Kappa scores)</li> <li>Agent tools for coder context</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-007%20-%20Collaboration/#tasks","title":"Tasks","text":"ID Task Layer Status QC-022 Collaboration Domain Domain To Do QC-023 Collaboration Infrastructure Infrastructure To Do QC-024 Collaboration Application Application To Do QC-025 Collaboration Presentation Presentation To Do"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/milestones/m-007%20-%20Collaboration/#success-criteria","title":"Success Criteria","text":"<ul> <li>[ ] Coder entity with ownership (human and AI coders)</li> <li>[ ] Merge engine with conflict detection</li> <li>[ ] Kappa score calculation</li> <li>[ ] Coder selector and comparison UI</li> <li>[ ] Agent tools: set_coder, compare_coders</li> <li>[ ] AI coder visibility toggle</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-001%20-%20Shared-Domain-Types/","title":"Shared Domain Types & Agent Foundation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-001%20-%20Shared-Domain-Types/#description","title":"Description","text":"<p>Define the shared types used across all bounded contexts, including agent infrastructure.</p> <p>Agent-First: TrustLevel and session types are foundational so every context can be agent-aware.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-001%20-%20Shared-Domain-Types/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] Result[T, E] monad (Success | Failure)</li> <li>[x] Base ID types (CodeId, SourceId, etc.)</li> <li>[x] DomainEvent base class</li> <li>[x] Common value objects (Color, etc.)</li> <li>[x] TrustLevel enum (Autonomous, Notify, Suggest, Require)</li> <li>[x] AgentSession base type</li> <li>[x] Agent tool schema base protocol</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-001%20-%20Shared-Domain-Types/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/shared/types.py</code></li> <li><code>src/domain/shared/agent.py</code></li> <li><code>src/agent_context/protocols.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002%20-%20Design-System/","title":"Design System Components","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002%20-%20Design-System/#description","title":"Description","text":"<p>Build the reusable UI component library following Material Design.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002%20-%20Design-System/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: Components built as QWidget subclasses.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002%20-%20Design-System/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] Atoms (buttons, inputs, labels, icons)</li> <li>[x] Molecules (form fields, search bars, chips)</li> <li>[x] Organisms (toolbars, panels, dialogs)</li> <li>[x] Theme system (dark/light, teal accent)</li> <li>[x] Component storybook</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002%20-%20Design-System/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/components/</code></li> <li><code>design_system/</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.01%20-%20Visualization-Components/","title":"Visualization Components","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.01%20-%20Visualization-Components/#description","title":"Description","text":"<p>Implement visualization components for the design system based on ADR-001 library decisions. These components wrap external libraries with consistent design system styling and theming support.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.01%20-%20Visualization-Components/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] #1 ChartWidget - Statistical chart component (bar, line, scatter, pie)</li> <li>[x] #2 NetworkGraphWidget - Interactive network graph with nodes/edges</li> <li>[x] #3 WordCloudWidget - Word frequency visualization with color scheme support</li> <li>[x] #4 PDFPageViewer - PDF page rendering with text selection overlay</li> <li>[x] #5 ImageAnnotationLayer - Rectangle/polygon annotation on images</li> <li>[x] #6 HeatMapCell - Data table cell variant with color intensity</li> <li>[x] #7 RelevanceScoreBar - Horizontal progress variant for search scores</li> <li>[x] #8 All components support dark/light theme switching</li> <li>[x] #9 Unit tests for each component</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.01%20-%20Visualization-Components/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: - ChartWidget uses PyQtGraph for performance - NetworkGraphWidget uses NetworkX with QGraphicsScene - WordCloudWidget wraps the wordcloud library - PDFPageViewer uses PyMuPDF for rendering - ImageAnnotationLayer built on QGraphicsScene</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.01%20-%20Visualization-Components/#dependencies-to-add","title":"Dependencies to Add","text":"<pre><code>uv add pyqtgraph networkx wordcloud numpy matplotlib pymupdf\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.01%20-%20Visualization-Components/#implementation","title":"Implementation","text":"Component File Library ChartWidget <code>design_system/charts.py</code> PyQtGraph (MIT) NetworkGraphWidget <code>design_system/network_graph.py</code> NetworkX (BSD) WordCloudWidget <code>design_system/word_cloud.py</code> wordcloud (MIT) PDFPageViewer <code>design_system/pdf_viewer.py</code> PyMuPDF (AGPL) ImageAnnotationLayer <code>design_system/image_annotation.py</code> QGraphicsScene HeatMapCell <code>design_system/data_display.py</code> Native Qt RelevanceScoreBar <code>design_system/progress_bar.py</code> Native Qt"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.01%20-%20Visualization-Components/#related-tasks","title":"Related Tasks","text":"<ul> <li>QC-019.05: Chart Components (Analysis)</li> <li>QC-019.07: Network Graph View (Analysis)</li> <li>QC-019.08: Word Cloud Generator (Analysis)</li> <li>QC-007.11: Image Coding Screen (Coding)</li> <li>QC-007.17: PDF Coding Screen (Coding)</li> <li>QC-021.02: AI Search Screen (relevance scores)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.01%20-%20Visualization-Components/#references","title":"References","text":"<ul> <li>PyQtGraph Documentation</li> <li>NetworkX + Qt Example</li> <li>wordcloud GitHub</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/","title":"PySide6 + Qt-Material Migration","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#description","title":"Description","text":"<p>Migrate the design system from PyQt6 to PySide6 and integrate qt-material theme for modern Material Design styling. This provides LGPL licensing (free for commercial use) and consistent Material Design aesthetics.</p> <p>Key Changes: - Replace PyQt6 with PySide6 (99.9% API compatible) - Add qt-material theme integration - Create Qt compatibility layer for future flexibility - Update token system to leverage qt-material colors</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#rationale","title":"Rationale","text":"<ol> <li>Licensing: PySide6 uses LGPL (free for commercial), PyQt6 requires paid license for closed-source</li> <li>Modern Look: qt-material provides polished Material Design out of the box</li> <li>Maintainability: Qt Company maintains PySide6 directly</li> <li>Compatibility: Both use identical Qt6 APIs</li> </ol>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] Qt compatibility layer (<code>qt_compat.py</code>) allows switching between PyQt6/PySide6</li> <li>[x] All design system imports use compatibility layer</li> <li>[x] qt-material theme integrated with <code>setup_theme()</code> function</li> <li>[x] Token system updated to use qt-material color palette</li> <li>[x] Signal/pyqtSignal \u2192 Signal migration complete</li> <li>[x] pyproject.toml updated with PySide6 + qt-material dependencies</li> <li>[x] Storybook runs with new theme</li> <li>[x] All existing tests pass</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#subtasks","title":"Subtasks","text":"ID Subtask Status 1 Create Qt compatibility layer (<code>design_system/qt_compat.py</code>) Done 2 Create theme integration (<code>design_system/theme.py</code>) Done 3 Migrate design system imports (~30 files) Done 4 Migrate src/application imports (signal_bridge) Done 5 Migrate src/presentation imports Done 6 Update pyproject.toml dependencies Done 7 Update tests to use PySide6 Done"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#implementation","title":"Implementation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#files-created","title":"Files Created","text":"<ul> <li><code>design_system/qt_compat.py</code> - Compatibility layer (PySide6 first, PyQt6 fallback)</li> <li><code>design_system/theme.py</code> - qt-material integration with <code>setup_theme()</code> and <code>MaterialPalette</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#files-modified","title":"Files Modified","text":"<ul> <li>All <code>design_system/*.py</code> - Updated to use <code>from .qt_compat import ...</code></li> <li><code>src/application/signal_bridge/*.py</code> - Updated with PySide6/PyQt6 fallback</li> <li><code>src/presentation/**/*.py</code> - Updated to use <code>from design_system.qt_compat import ...</code></li> <li><code>design_system/pyproject.toml</code> - Changed to PySide6 + qt-material</li> <li><code>pyproject.toml</code> - Added PySide6 dependency</li> <li>All test files - Updated with try/except for PySide6/PyQt6</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#import-migration-pattern","title":"Import Migration Pattern","text":"<pre><code># Before (PyQt6)\nfrom PyQt6.QtWidgets import QWidget, QPushButton\nfrom PyQt6.QtCore import pyqtSignal, Qt\n\n# After (using compatibility layer)\nfrom design_system.qt_compat import QWidget, QPushButton, Signal, Qt\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#theme-setup-pattern","title":"Theme Setup Pattern","text":"<pre><code>from design_system import setup_theme\nfrom design_system.qt_compat import QApplication\n\napp = QApplication(sys.argv)\npalette = setup_theme(app, theme='dark_teal')  # or 'light_teal'\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#technical-notes","title":"Technical Notes","text":"<ul> <li>PySide6 uses <code>Signal</code> instead of <code>pyqtSignal</code></li> <li>PySide6 uses <code>Slot</code> instead of <code>pyqtSlot</code></li> <li>Property decorators work identically</li> <li>qt-material themes: dark_teal, light_teal, dark_amber, dark_blue, dark_purple</li> <li>Fallback stylesheet provided when qt-material is unavailable</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-002.02%20-%20PySide6-Qt-Material-Migration/#dependencies","title":"Dependencies","text":"<ul> <li>QC-002.01 (Visualization Components) - Complete</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003%20-%20Application-Shell/","title":"Application Shell","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003%20-%20Application-Shell/#description","title":"Description","text":"<p>Build the main application shell with navigation and layout system.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003%20-%20Application-Shell/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] Main window with sidebar navigation</li> <li>[x] Screen routing system</li> <li>[x] Layout templates</li> <li>[x] Status bar and toolbar</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003%20-%20Application-Shell/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/shell/</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/","title":"Base Signal Bridge Infrastructure","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#description","title":"Description","text":"<p>Create the foundational Signal Bridge infrastructure that all context-specific bridges (Coding, Source, Case, Agent, Collaboration) will inherit from. This establishes the thread-safe pattern for bridging domain events to UI signals.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#rationale","title":"Rationale","text":"<p>All 5 context-specific Signal Bridges share: - Singleton pattern - Thread-safe emission (domain events may arrive from background threads) - Event Bus subscription - Event \u2192 Payload conversion</p> <p>Extracting this to a base class reduces duplication and ensures consistent behavior.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#basesignalbridge-class","title":"BaseSignalBridge Class","text":"<ul> <li>[ ] #1 Abstract base class for all signal bridges</li> <li>[ ] #2 Singleton pattern with <code>instance()</code> class method</li> <li>[ ] #3 Class-level registry for singleton instances</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#thread-safe-emission","title":"Thread-Safe Emission","text":"<ul> <li>[ ] #4 Method to handle cross-thread signal emission</li> <li>[ ] #5 Ensures signals emitted from background threads are delivered on UI thread</li> <li>[ ] #6 Detects if already on UI thread \u2192 emit directly (optimization)</li> <li>[ ] #7 Helper method to check current thread</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#event-bus-integration","title":"Event Bus Integration","text":"<ul> <li>[ ] #8 Accepts event bus as dependency</li> <li>[ ] #9 Abstract method for subclasses to define event subscriptions</li> <li>[ ] #10 Cleanup method to unsubscribe on destruction</li> <li>[ ] #11 Dispatcher method that receives domain events and routes to converters</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#converter-registry-pattern","title":"Converter Registry Pattern","text":"<ul> <li>[ ] #12 <code>EventConverter</code> protocol: converts domain event to UI payload</li> <li>[ ] #13 Registry mapping event_type \u2192 converter</li> <li>[ ] #14 Method to register converters</li> <li>[ ] #15 Subclasses register their converters during initialization</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#signal-mapping","title":"Signal Mapping","text":"<ul> <li>[ ] #16 Registry mapping event_type \u2192 UI signal</li> <li>[ ] #17 Method to register signal mappings</li> <li>[ ] #18 Auto-wiring: event arrives \u2192 convert \u2192 emit mapped signal</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#activity-feed-integration","title":"Activity Feed Integration","text":"<ul> <li>[ ] #19 Common signal for activity logging (all bridges emit here)</li> <li>[ ] #20 Method to format and emit activity items</li> <li>[ ] #21 <code>ActivityItem</code> type with timestamp, session_id, description, status</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#lifecycle-management","title":"Lifecycle Management","text":"<ul> <li>[ ] #22 <code>start()</code> - begin listening to events</li> <li>[ ] #23 <code>stop()</code> - stop listening, cleanup subscriptions</li> <li>[ ] #24 Context manager support for automatic cleanup</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#payload-dtos","title":"Payload DTOs","text":"<ul> <li>[ ] #25 <code>SignalPayload</code> base type (immutable)</li> <li>[ ] #26 Common fields: <code>timestamp</code>, <code>session_id</code>, <code>is_ai_action</code>, <code>event_type</code></li> <li>[ ] #27 <code>ActivityItem</code> type for activity feed</li> <li>[ ] #28 <code>ActivityStatus</code> enum: COMPLETED, PENDING, QUEUED, REJECTED, FAILED</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6 implementation: - Base class inherits from <code>QObject</code> - Signals use <code>pyqtSignal(object)</code> - Thread-safe emission via <code>QMetaObject.invokeMethod</code> with <code>Qt.QueuedConnection</code> - Main thread detection via <code>QThread.currentThread()</code></p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#file-structure","title":"File Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 application/\n\u2502   \u2514\u2500\u2500 signal_bridge/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 base.py              # BaseSignalBridge class\n\u2502       \u251c\u2500\u2500 protocols.py         # EventConverter protocol\n\u2502       \u251c\u2500\u2500 payloads.py          # SignalPayload, ActivityItem\n\u2502       \u2514\u2500\u2500 thread_utils.py      # Thread detection helpers\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#downstream-tasks","title":"Downstream Tasks","text":"<p>This task unblocks and simplifies: - QC-006.04 - Signal Bridge (Coding) - QC-010.06 - Source Signal Bridge - QC-014.05 - Case Signal Bridge - QC-020.06 - Agent Signal Bridge - QC-024.05 - Collaboration Signal Bridge</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.01%20-%20Base-Signal-Bridge/#testing-strategy","title":"Testing Strategy","text":"<ul> <li>[ ] Unit test thread-safe emission (mock UI thread)</li> <li>[ ] Unit test converter registry</li> <li>[ ] Unit test signal mapping</li> <li>[ ] Integration test with real EventBus</li> <li>[ ] Verify singleton behavior across imports</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/","title":"Event Bus Infrastructure","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#description","title":"Description","text":"<p>Implement the foundational Event Bus for domain event pub/sub. This is the backbone of the Functional DDD architecture, enabling decoupled communication between bounded contexts and reactive UI updates via Signal Bridges.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#rationale","title":"Rationale","text":"<p>The Event Bus is critical infrastructure that: - Enables domain events to flow from Controllers to Signal Bridges - Supports cross-context communication (e.g., Coding \u2192 Analysis) - Allows Policies to react to events from any context - Must be thread-safe for background operations</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#core-pubsub","title":"Core Pub/Sub","text":"<ul> <li>[x] #1 <code>subscribe(event_type, handler)</code> - subscribe by event type string</li> <li>[x] #2 <code>subscribe_type(event_class, handler)</code> - subscribe by event class</li> <li>[x] #3 <code>subscribe_all(handler)</code> - subscribe to all events</li> <li>[x] #4 <code>unsubscribe(event_type, handler)</code> - remove subscription</li> <li>[x] #5 <code>publish(event)</code> - publish event to all matching subscribers</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#thread-safety","title":"Thread Safety","text":"<ul> <li>[x] #6 Thread-safe publish from background threads</li> <li>[x] #7 Handlers invoked synchronously (desktop app model)</li> <li>[x] #8 Lock-free read path for performance</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#subscription-management","title":"Subscription Management","text":"<ul> <li>[x] #9 Returns subscription handle for easy cleanup</li> <li>[x] #10 <code>clear()</code> - remove all subscriptions</li> <li>[x] #11 <code>clear_for_handler(handler)</code> - remove all subscriptions for a handler</li> <li>[ ] #12 Weak reference option to prevent memory leaks (deferred)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#event-type-resolution","title":"Event Type Resolution","text":"<ul> <li>[x] #13 Supports string event types (e.g., \"coding.code_created\")</li> <li>[x] #14 Supports class-based event types (e.g., CodeCreated)</li> <li>[x] #15 Auto-derives string type from class if not specified</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#debugging-support","title":"Debugging Support","text":"<ul> <li>[x] #16 Optional event history (last N events)</li> <li>[x] #17 Subscription count introspection</li> <li>[x] #18 Event type listing</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#implementation-notes","title":"Implementation Notes","text":"<p>Simple synchronous implementation for desktop app: - No async/await needed - PyQt6 handles threading - Signal Bridges handle thread-safe UI updates - Keep it simple: dict of handlers, publish iterates and calls</p> <p>Event type convention: <pre><code># String format: \"{context}.{event_name}\"\n\"coding.code_created\"\n\"sources.source_imported\"\n\"cases.case_created\"\n</code></pre></p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#file-structure","title":"File Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 event_bus.py          # EventBus implementation\n\u2502   \u2514\u2500\u2500 __init__.py           # Export EventBus\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#interface","title":"Interface","text":"<pre><code>class EventBus:\n    def subscribe(self, event_type: str, handler: Callable[[Any], None]) -&gt; Subscription\n    def subscribe_type(self, event_class: type, handler: Callable) -&gt; Subscription\n    def subscribe_all(self, handler: Callable[[Any], None]) -&gt; Subscription\n    def unsubscribe(self, event_type: str, handler: Callable) -&gt; None\n    def publish(self, event: DomainEvent) -&gt; None\n    def clear(self) -&gt; None\n\n@dataclass\nclass Subscription:\n    \"\"\"Handle for managing a subscription.\"\"\"\n    def cancel(self) -&gt; None: ...\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#downstream-dependencies","title":"Downstream Dependencies","text":"<p>This task unblocks: - QC-003.01 - Base Signal Bridge (integration testing) - QC-006 - Coding Application (controller event publishing) - All Signal Bridge implementations</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.02%20-%20Event-Bus/#testing-strategy","title":"Testing Strategy","text":"<ul> <li>[x] Unit test subscribe/publish flow</li> <li>[x] Unit test type-based subscription</li> <li>[x] Unit test subscription cleanup</li> <li>[x] Thread safety test (publish from background)</li> <li>[ ] Integration test with BaseSignalBridge (deferred to QC-006.04)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/","title":"Localization Analysis","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#description","title":"Description","text":"<p>Analyze what changes are needed to make QualCoder v2 fully localizable. This includes auditing current strings, evaluating i18n frameworks for PyQt6, and designing the translation workflow.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#rationale","title":"Rationale","text":"<p>QualCoder is used by researchers worldwide. Supporting multiple languages will: - Expand accessibility to non-English speakers - Build on QualCoder v1's existing translation community - Ensure UI strings are properly externalized from the start</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#string-audit","title":"String Audit","text":"<ul> <li>[ ] #1 Inventory all user-facing strings in presentation layer</li> <li>[ ] #2 Identify strings in domain layer (error messages, validation)</li> <li>[ ] #3 Categorize by bounded context (Coding, Sources, Cases, etc.)</li> <li>[ ] #4 Check QualCoder v1 for existing translations to leverage</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#framework-evaluation","title":"Framework Evaluation","text":"<ul> <li>[ ] #5 Evaluate Qt Linguist (<code>.ts</code>/<code>.qm</code>) for PyQt6</li> <li>[ ] #6 Evaluate GNU gettext (<code>.po</code>/<code>.mo</code>) as alternative</li> <li>[ ] #7 Document pros/cons of each approach</li> <li>[ ] #8 Recommend framework with rationale</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#architecture-design","title":"Architecture Design","text":"<ul> <li>[ ] #9 Define where translation loading happens (Infrastructure layer)</li> <li>[ ] #10 Design locale preference storage in user settings</li> <li>[ ] #11 Determine if runtime language switching is needed</li> <li>[ ] #12 Plan for RTL (right-to-left) language support</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#translation-workflow","title":"Translation Workflow","text":"<ul> <li>[ ] #13 Research contribution platforms (Weblate, Crowdin, GitHub)</li> <li>[ ] #14 Define workflow: extract \u2192 translate \u2192 review \u2192 build</li> <li>[ ] #15 Identify initial target languages based on user demand</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#implementation-notes","title":"Implementation Notes","text":"<p>This is an analysis task - deliverables are documentation and recommendations, not code.</p> <p>Key questions to answer: - What does QualCoder v1 use? Can we reuse translations? - Which languages are most requested? - Should language switch require restart?</p> <p>Special considerations: - Pluralization rules differ by language - String interpolation should use named placeholders - German/Finnish text can be 30% longer than English - CJK fonts need consideration</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#file-structure","title":"File Structure","text":"<pre><code>backlog/\n\u251c\u2500\u2500 decisions/\n\u2502   \u2514\u2500\u2500 decision-003 localization-framework.md   # ADR output\ndocs/\n\u251c\u2500\u2500 i18n/\n\u2502   \u2514\u2500\u2500 localization-analysis.md                 # Full analysis report\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#downstream-tasks","title":"Downstream Tasks","text":"<p>This analysis will inform: - QC-003.04 - Localization Infrastructure (implementation) - All presentation layer tasks (string externalization)</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.03%20-%20Localization-Analysis/#testing-strategy","title":"Testing Strategy","text":"<ul> <li>[ ] Verify string audit is comprehensive</li> <li>[ ] Validate framework recommendation with prototype</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/","title":"Project Migration","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/#description","title":"Description","text":"<p>Implement migration tooling to convert QualCoder v1 projects to v2 format. Critical for user adoption.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Database: SQLite <code>.qda</code> file</li> <li>Additional files: <code>pseudonyms.json</code>, media files in subdirectories</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/#schema-migration-engine","title":"Schema Migration Engine","text":"<ul> <li>[ ] #1 <code>detect_schema_version(project_path) -&gt; SchemaVersion</code></li> <li>[ ] #2 <code>migrate(project_path, target_version) -&gt; Result[MigrationReport, MigrationError]</code></li> <li>[ ] #3 Incremental migrations (v1.0 \u2192 v1.1 \u2192 v2.0)</li> <li>[ ] #4 Rollback support for failed migrations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/#data-migrations","title":"Data Migrations","text":"<ul> <li>[ ] #5 Core tables (source, code_name, code_text, code_image, code_av)</li> <li>[ ] #6 Cases and attributes</li> <li>[ ] #7 Journals and project settings</li> <li>[ ] #8 File path updates if needed</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/#backup-safety","title":"Backup &amp; Safety","text":"<ul> <li>[ ] #9 Create timestamped backup before migration</li> <li>[ ] #10 Verify data integrity after migration</li> <li>[ ] #11 <code>MigrationReport</code>: changes made, warnings, errors</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/#ui-integration","title":"UI Integration","text":"<ul> <li>[ ] #12 Show migration dialog when opening v1 project</li> <li>[ ] #13 Progress indicator during migration</li> <li>[ ] #14 Display migration report on completion</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.04%20-%20Project-Migration/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/migration/migrator.py</code></li> <li><code>src/infrastructure/migration/schema_detector.py</code></li> <li><code>src/infrastructure/migration/backup.py</code></li> <li><code>src/presentation/dialogs/migration_dialog.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/","title":"Project Merge","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#description","title":"Description","text":"<p>Merge two separate QualCoder projects (.qda files) into one. Different from code merging (QC-024.02) which merges codes within a project.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Module: <code>merge_projects.py</code></li> <li>Features: Import codes, files, cases from another project</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#merge-selection","title":"Merge Selection","text":"<ul> <li>[ ] #1 Select source project to merge from</li> <li>[ ] #2 Choose what to merge (codes, files, cases, journals)</li> <li>[ ] #3 Preview changes before applying</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#merge-strategies","title":"Merge Strategies","text":"<ul> <li>[ ] #4 Codes: Merge by name (combine) or add as new</li> <li>[ ] #5 Files: Skip duplicates, rename, or replace</li> <li>[ ] #6 Cases: Merge by name or add as new</li> <li>[ ] #7 Preserve original coder attribution</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#conflict-resolution","title":"Conflict Resolution","text":"<ul> <li>[ ] #8 Detect duplicate code names</li> <li>[ ] #9 Detect duplicate file names</li> <li>[ ] #10 User choice for each conflict</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#merge-report","title":"Merge Report","text":"<ul> <li>[ ] #11 List items merged</li> <li>[ ] #12 List conflicts resolved</li> <li>[ ] #13 List items skipped</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/project/merge_projects.py</code></li> <li><code>src/presentation/dialogs/merge_project_dialog.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-003.05%20-%20Project-Merge/#note","title":"Note","text":"<p>Agent should NOT perform project merges autonomously (destructive operation).</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004%20-%20Coding-Domain/","title":"Coding Domain","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004%20-%20Coding-Domain/#description","title":"Description","text":"<p>Define the domain layer for the Coding bounded context: entities, events, invariants, derivers, and agent tool schemas.</p> <p>Agent-First: Agent tool schemas are defined alongside domain entities.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004%20-%20Coding-Domain/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] Entities: Code, Category, TextSegment, ImageSegment, AVSegment</li> <li>[x] Value objects: Color, TextPosition, ImageRegion, TimeRange</li> <li>[x] Domain events (13 events)</li> <li>[x] Invariants (business rule predicates)</li> <li>[x] Derivers (pure functions \u2192 Result[Event, Failure])</li> <li>[x] Agent tool schemas (create_code, apply_code, list_codes, etc.)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004%20-%20Coding-Domain/#subtasks","title":"Subtasks","text":"ID Subtask Status QC-004.1 Entities &amp; Value Objects Done QC-004.2 Domain Events Done QC-004.3 Invariants Done QC-004.4 Derivers Done QC-004.5 Agent Tool Schemas Done QC-004.6 Unit Tests Done"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004%20-%20Coding-Domain/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/coding/entities.py</code></li> <li><code>src/domain/coding/events.py</code></li> <li><code>src/domain/coding/invariants.py</code></li> <li><code>src/domain/coding/derivers.py</code></li> <li><code>src/agent_context/schemas/coding_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.01%20-%20Auto-Code-Batch-Events/","title":"Auto-Code Batch Events","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.01%20-%20Auto-Code-Batch-Events/#description","title":"Description","text":"<p>Add domain events for auto-coding batch operations. Enables tracking batches for undo and progress reporting.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.01%20-%20Auto-Code-Batch-Events/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.01%20-%20Auto-Code-Batch-Events/#events-frozen-dataclasses-extending-domainevent","title":"Events (frozen dataclasses extending DomainEvent)","text":"<ul> <li>[ ] #1 <code>AutoCodeBatchStarted</code> event with payload: batch_id, code_id, source_id, pattern, match_type (exact/startswith/contains/regex)</li> <li>[ ] #2 <code>AutoCodeBatchCompleted</code> event with payload: batch_id, segments_created (list of segment_ids), total_matches</li> <li>[ ] #3 <code>AutoCodeBatchUndone</code> event with payload: batch_id, segments_removed (list of segment_ids)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.01%20-%20Auto-Code-Batch-Events/#value-objects-frozen-dataclasses","title":"Value Objects (frozen dataclasses)","text":"<ul> <li>[ ] #4 <code>AutoCodeBatch</code> value object: batch_id, code_id, pattern, match_type, segment_ids, created_at</li> <li>[ ] #5 <code>MatchType</code> enum: EXACT, STARTS_WITH, CONTAINS, ENDS_WITH, REGEX</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.01%20-%20Auto-Code-Batch-Events/#invariants-pure-predicate-functions","title":"Invariants (pure predicate functions)","text":"<ul> <li>[ ] #6 <code>is_valid_regex(pattern: str) -&gt; bool</code> - validates regex patterns</li> <li>[ ] #7 <code>is_batch_undoable(batch: AutoCodeBatch, segments: List[Segment]) -&gt; bool</code> - all segments still exist</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.01%20-%20Auto-Code-Batch-Events/#integration","title":"Integration","text":"<ul> <li>[ ] #8 Events registered in Coding context event catalog</li> <li>[ ] #9 Events follow standard structure: event_id, event_type, aggregate_id, occurred_at, caused_by, payload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.02%20-%20Image-and-AV-Segment-Events/","title":"Image and AV Segment Events","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.02%20-%20Image-and-AV-Segment-Events/#description","title":"Description","text":"<p>Add domain events for image region and audio/video time range coding. Enables UI observation of media segment operations.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.02%20-%20Image-and-AV-Segment-Events/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.02%20-%20Image-and-AV-Segment-Events/#image-segment-events-frozen-dataclasses-extending-domainevent","title":"Image Segment Events (frozen dataclasses extending DomainEvent)","text":"<ul> <li>[ ] #1 <code>ImageSegmentCoded</code> event with payload: segment_id, code_id, source_id, region (ImageRegion), owner (coder_id)</li> <li>[ ] #2 <code>ImageSegmentUncoded</code> event with payload: segment_id, code_id, source_id</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.02%20-%20Image-and-AV-Segment-Events/#av-segment-events-frozen-dataclasses-extending-domainevent","title":"AV Segment Events (frozen dataclasses extending DomainEvent)","text":"<ul> <li>[ ] #3 <code>AVSegmentCoded</code> event with payload: segment_id, code_id, source_id, time_range (TimeRange), transcript (optional)</li> <li>[ ] #4 <code>AVSegmentUncoded</code> event with payload: segment_id, code_id, source_id</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.02%20-%20Image-and-AV-Segment-Events/#value-objects-frozen-dataclasses-compared-by-value","title":"Value Objects (frozen dataclasses, compared by value)","text":"<ul> <li>[ ] #5 <code>ImageRegion</code> value object: x, y, width, height with methods: area(), intersects(other), contains_point(x, y)</li> <li>[ ] #6 <code>TimeRange</code> value object: start_ms, end_ms with methods: duration_ms(), overlaps(other), contains(ms)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.02%20-%20Image-and-AV-Segment-Events/#invariants-pure-predicate-functions","title":"Invariants (pure predicate functions)","text":"<ul> <li>[ ] #7 <code>is_region_within_image(region: ImageRegion, source: ImageSource) -&gt; bool</code></li> <li>[ ] #8 <code>is_time_range_valid(time_range: TimeRange, source: AVSource) -&gt; bool</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.02%20-%20Image-and-AV-Segment-Events/#integration","title":"Integration","text":"<ul> <li>[ ] #9 Events extend base <code>SegmentEvent</code> union type</li> <li>[ ] #10 Events registered in Coding context event catalog</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.03%20-%20Segment-Importance-Event/","title":"Segment Importance Event","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.03%20-%20Segment-Importance-Event/#description","title":"Description","text":"<p>Add domain event for segment importance changes. Enables UI to update bold formatting when importance toggled.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.03%20-%20Segment-Importance-Event/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.03%20-%20Segment-Importance-Event/#event-frozen-dataclass-extending-domainevent","title":"Event (frozen dataclass extending DomainEvent)","text":"<ul> <li>[ ] #1 <code>SegmentImportanceChanged</code> event with payload: segment_id, code_id, old_importance (0|1), new_importance (0|1)</li> <li>[ ] #2 Event includes standard fields: event_id, occurred_at, caused_by (coder_id)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.03%20-%20Segment-Importance-Event/#value-object-update","title":"Value Object Update","text":"<ul> <li>[ ] #3 <code>Importance</code> value object or type alias: constrained to 0 (normal) or 1 (important)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.03%20-%20Segment-Importance-Event/#invariants-pure-predicate-functions","title":"Invariants (pure predicate functions)","text":"<ul> <li>[ ] #4 <code>is_valid_importance(value: int) -&gt; bool</code> - value in {0, 1}</li> <li>[ ] #5 <code>is_importance_change_valid(old: int, new: int) -&gt; bool</code> - values differ</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-004.03%20-%20Segment-Importance-Event/#integration","title":"Integration","text":"<ul> <li>[ ] #6 Event added to <code>SegmentEvent</code> union type: SegmentCoded | SegmentUncoded | SegmentMemoUpdated | SegmentImportanceChanged</li> <li>[ ] #7 Event registered in Coding context event catalog</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005%20-%20Coding-Infrastructure/","title":"Coding Infrastructure","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005%20-%20Coding-Infrastructure/#description","title":"Description","text":"<p>Implement repositories for the Coding bounded context with SQLite persistence.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005%20-%20Coding-Infrastructure/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Repository protocols (interfaces)</li> <li>[ ] In-memory repositories (for testing)</li> <li>[ ] SQLite repositories (for production)</li> <li>[ ] Data mapping (entity \u2194 database)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005%20-%20Coding-Infrastructure/#subtasks","title":"Subtasks","text":"ID Subtask Status QC-005.1 Repository Protocols To Do QC-005.2 In-Memory Repositories To Do QC-005.3 SQLite Code Repository To Do QC-005.4 SQLite Category Repository To Do QC-005.5 SQLite Segment Repository To Do QC-005.6 Repository Tests To Do"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005%20-%20Coding-Infrastructure/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/protocols.py</code></li> <li><code>src/infrastructure/repositories/coding/</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.01%20-%20Segment-Query-Methods/","title":"Segment Query Methods","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.01%20-%20Segment-Query-Methods/#description","title":"Description","text":"<p>Add repository methods for querying segments by source and detecting overlaps. Required for text highlighting and overlap detection.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.01%20-%20Segment-Query-Methods/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.01%20-%20Segment-Query-Methods/#repository-methods-segmentrepository","title":"Repository Methods (SegmentRepository)","text":"<ul> <li>[ ] #1 <code>find_by_source_id(source_id: SourceId) -&gt; List[Segment]</code> - returns all segments for a source, ordered by position</li> <li>[ ] #2 <code>find_overlapping(source_id: SourceId, position: TextPosition) -&gt; List[Segment]</code> - returns segments overlapping given range</li> <li>[ ] #3 <code>find_by_code_id(code_id: CodeId) -&gt; List[Segment]</code> - returns all segments with given code</li> <li>[ ] #4 <code>count_by_code_id(code_id: CodeId) -&gt; int</code> - returns count without loading entities</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.01%20-%20Segment-Query-Methods/#query-dtos-read-only-for-cqrs-lite-read-path","title":"Query DTOs (Read-only, for CQRS-lite read path)","text":"<ul> <li>[ ] #5 <code>SegmentWithCode</code> DTO: segment_id, source_id, position, code_id, code_name, code_color</li> <li>[ ] #6 <code>find_by_source_with_codes(source_id) -&gt; List[SegmentWithCode]</code> - single query joining segment + code</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.01%20-%20Segment-Query-Methods/#performance","title":"Performance","text":"<ul> <li>[ ] #7 Indexed queries: source_id, code_id columns indexed in SQLite</li> <li>[ ] #8 Position overlap query uses efficient range comparison (start &lt; end AND end &gt; start)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.01%20-%20Segment-Query-Methods/#immutability","title":"Immutability","text":"<ul> <li>[ ] #9 All returned entities are frozen dataclasses (domain entities, not ORM objects)</li> <li>[ ] #10 Repository converts SQLite rows \u2192 domain entities via factory functions</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.02%20-%20Code-Query-Methods/","title":"Code Query Methods","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.02%20-%20Code-Query-Methods/#description","title":"Description","text":"<p>Add repository methods for querying codes with counts, searching, and tracking recent usage. Required for code tree display.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.02%20-%20Code-Query-Methods/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.02%20-%20Code-Query-Methods/#repository-methods-coderepository","title":"Repository Methods (CodeRepository)","text":"<ul> <li>[ ] #1 <code>find_all_with_counts() -&gt; List[CodeWithCount]</code> - returns all codes with segment count, single query</li> <li>[ ] #2 <code>find_by_name_like(pattern: str) -&gt; List[Code]</code> - case-insensitive search by name pattern</li> <li>[ ] #3 <code>find_recent(limit: int = 10) -&gt; List[Code]</code> - returns recently used codes, ordered by last_used_at desc</li> <li>[ ] #4 <code>find_by_category_id(category_id: Optional[CategoryId]) -&gt; List[Code]</code> - None returns uncategorized codes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.02%20-%20Code-Query-Methods/#query-dtos-read-only-for-ui-display","title":"Query DTOs (Read-only, for UI display)","text":"<ul> <li>[ ] #5 <code>CodeWithCount</code> DTO: code_id, name, color, memo, category_id, segment_count</li> <li>[ ] #6 <code>CodeTreeNode</code> DTO: code_id, name, color, category_path, segment_count (for tree display)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.02%20-%20Code-Query-Methods/#category-queries","title":"Category Queries","text":"<ul> <li>[ ] #7 <code>find_all_categories_with_codes() -&gt; List[CategoryWithCodes]</code> - hierarchical structure for tree</li> <li>[ ] #8 <code>find_category_path(category_id) -&gt; List[Category]</code> - returns ancestor chain for breadcrumb</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.02%20-%20Code-Query-Methods/#immutability","title":"Immutability","text":"<ul> <li>[ ] #9 All returned entities are frozen dataclasses</li> <li>[ ] #10 Query methods are read-only, never modify state</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.03%20-%20Batch-Operations/","title":"Batch Operations","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.03%20-%20Batch-Operations/#description","title":"Description","text":"<p>Add repository methods for batch segment operations. Required for auto-coding and undo functionality.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.03%20-%20Batch-Operations/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.03%20-%20Batch-Operations/#repository-methods-segmentrepository","title":"Repository Methods (SegmentRepository)","text":"<ul> <li>[ ] #1 <code>save_batch(segments: List[Segment], batch_id: BatchId) -&gt; List[SegmentId]</code> - inserts atomically, returns created IDs</li> <li>[ ] #2 <code>delete_by_batch_id(batch_id: BatchId) -&gt; int</code> - removes all segments in batch, returns count deleted</li> <li>[ ] #3 <code>find_by_batch_id(batch_id: BatchId) -&gt; List[Segment]</code> - retrieves all segments in a batch</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.03%20-%20Batch-Operations/#batch-tracking","title":"Batch Tracking","text":"<ul> <li>[ ] #4 <code>batch_id</code> column added to segment storage (nullable for non-batch operations)</li> <li>[ ] #5 <code>BatchId</code> typed identifier following project ID pattern (UUID or int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.03%20-%20Batch-Operations/#transaction-support","title":"Transaction Support","text":"<ul> <li>[ ] #6 All batch operations wrapped in SQLite transaction (BEGIN/COMMIT/ROLLBACK)</li> <li>[ ] #7 On failure, entire batch is rolled back (atomicity guarantee)</li> <li>[ ] #8 <code>with_transaction(fn)</code> context manager for coordinating multiple operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.03%20-%20Batch-Operations/#performance","title":"Performance","text":"<ul> <li>[ ] #9 Batch insert uses executemany for efficiency</li> <li>[ ] #10 batch_id column indexed for fast deletion/lookup</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.04%20-%20Code-Usage-Tracking/","title":"Code Usage Tracking","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.04%20-%20Code-Usage-Tracking/#description","title":"Description","text":"<p>Track code usage history for recent codes feature. Store last-used timestamp per code.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.04%20-%20Code-Usage-Tracking/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.04%20-%20Code-Usage-Tracking/#schema-changes","title":"Schema Changes","text":"<ul> <li>[ ] #1 Add <code>last_used_at: datetime</code> column to code_name table (nullable for backwards compatibility)</li> <li>[ ] #2 Migration script to add column with default NULL for existing codes</li> <li>[ ] #3 Index on <code>last_used_at DESC</code> for efficient recent query</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.04%20-%20Code-Usage-Tracking/#repository-methods-coderepository","title":"Repository Methods (CodeRepository)","text":"<ul> <li>[ ] #4 <code>update_last_used(code_id: CodeId, timestamp: datetime) -&gt; None</code> - updates usage timestamp</li> <li>[ ] #5 <code>find_recent(limit: int) -&gt; List[Code]</code> - returns codes ordered by last_used_at DESC NULLS LAST</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.04%20-%20Code-Usage-Tracking/#event-handler-policy","title":"Event Handler (Policy)","text":"<ul> <li>[ ] #6 <code>on_segment_coded(event: SegmentCoded)</code> policy updates last_used_at for event.code_id</li> <li>[ ] #7 Policy subscribes to SegmentCoded event via Event Bus</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-005.04%20-%20Code-Usage-Tracking/#immutability-note","title":"Immutability Note","text":"<ul> <li>[ ] #8 <code>last_used_at</code> is infrastructure concern, not part of domain Code entity</li> <li>[ ] #9 Code entity remains pure; tracking is repository/policy responsibility</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006%20-%20Coding-Application/","title":"Coding Application","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006%20-%20Coding-Application/#description","title":"Description","text":"<p>Implement the application layer for Coding: controller, event bus, command handling, and agent tool registration.</p> <p>Agent-First: The controller serves both UI and agent. Agent tools are registered here.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006%20-%20Coding-Application/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] CodingController implementation</li> <li>[ ] All commands working (create, rename, delete, apply code, etc.)</li> <li>[ ] Events published for state changes</li> <li>[ ] SignalBridge wiring complete (domain events \u2192 Qt signals)</li> <li>[ ] Agent tools registered and functional</li> <li>[ ] Trust level enforcement on agent operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006%20-%20Coding-Application/#subtasks","title":"Subtasks","text":"<p>Ordered by dependency flow: Controller \u2192 Commands \u2192 Wiring \u2192 Services \u2192 Agent</p> ID Subtask Status Wires Controller &amp; Commands QC-006.01 Coding Controller Core To Do Controller \u2192 Deriver \u2192 Repo QC-006.02 Image and AV Coding Commands To Do Controller \u2192 Deriver \u2192 Repo QC-006.03 Auto-Coding Commands To Do Controller \u2192 Batch Deriver \u2192 Repo QC-006.04 Navigation Queries To Do Controller \u2192 Query Repo (read-only) Signal Bridge Wiring QC-006.05 Coding Signal Bridge To Do EventBus \u2192 Bridge \u2192 Qt Signals QC-006.06 Signal Payloads To Do Event \u2192 Payload DTOs QC-006.07 Event Converters To Do Converter per event type Services &amp; Policies QC-006.08 Recent Codes Service To Do Policy \u2192 on_segment_coded Agent Integration QC-006.09 Agent Tool Schemas To Do MCP schemas for tools QC-006.10 Agent Tool Registration To Do Register tools with MCP server QC-006.11 Trust Enforcement To Do Permission checks per tool Testing QC-006.12 Integration Tests To Do End-to-end flow tests"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006%20-%20Coding-Application/#event-flow-map","title":"Event Flow Map","text":"Domain Event Signal Bridge Signal UI Subscribers CodeCreated <code>code_created</code> CodeTree, ActivityPanel CodeRenamed <code>code_renamed</code> CodeTree CodeDeleted <code>code_deleted</code> CodeTree, SegmentList CodeColorChanged <code>code_color_changed</code> CodeTree, SegmentHighlights SegmentCoded <code>segment_coded</code> TextCodingScreen, SegmentList SegmentUncoded <code>segment_uncoded</code> TextCodingScreen, SegmentList ImageSegmentCoded <code>image_segment_coded</code> ImageCodingScreen AVSegmentCoded <code>av_segment_coded</code> AVCodingScreen CategoryCreated <code>category_created</code> CodeTree CategoryDeleted <code>category_deleted</code> CodeTree"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006%20-%20Coding-Application/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/controllers/coding_controller.py</code></li> <li><code>src/application/signal_bridge/coding_bridge.py</code></li> <li><code>src/application/signal_bridge/coding_payloads.py</code></li> <li><code>src/application/signal_bridge/coding_converters.py</code></li> <li><code>src/application/services/recent_codes_service.py</code></li> <li><code>src/agent_context/tools/coding.py</code></li> <li><code>src/agent_context/schemas/coding_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/","title":"Coding Controller Core","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#description","title":"Description","text":"<p>Implement the core CodingController with basic CRUD commands for codes, categories, and text segments. This is the orchestration layer that connects UI/Agent to Domain and Infrastructure.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#controller-class","title":"Controller Class","text":"<ul> <li>[ ] #1 <code>CodingController</code> class in Application layer</li> <li>[ ] #2 Constructor accepts: <code>code_repo</code>, <code>category_repo</code>, <code>segment_repo</code>, <code>event_bus</code></li> <li>[ ] #3 Single instance shared between UI and Agent (via dependency injection)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#code-commands","title":"Code Commands","text":"<ul> <li>[ ] #4 <code>create_code(name, color, category_id?) -&gt; Result[CodeCreated, Failure]</code></li> <li>[ ] #5 <code>rename_code(code_id, new_name) -&gt; Result[CodeRenamed, Failure]</code></li> <li>[ ] #6 <code>change_code_color(code_id, new_color) -&gt; Result[CodeColorChanged, Failure]</code></li> <li>[ ] #7 <code>delete_code(code_id) -&gt; Result[CodeDeleted, Failure]</code></li> <li>[ ] #8 <code>merge_codes(source_code_id, target_code_id) -&gt; Result[CodesMerged, Failure]</code></li> <li>[ ] #9 <code>move_code_to_category(code_id, category_id?) -&gt; Result[CodeMovedToCategory, Failure]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#category-commands","title":"Category Commands","text":"<ul> <li>[ ] #10 <code>create_category(name, parent_id?) -&gt; Result[CategoryCreated, Failure]</code></li> <li>[ ] #11 <code>rename_category(category_id, new_name) -&gt; Result[CategoryRenamed, Failure]</code></li> <li>[ ] #12 <code>delete_category(category_id) -&gt; Result[CategoryDeleted, Failure]</code></li> <li>[ ] #13 <code>move_category(category_id, new_parent_id?) -&gt; Result[CategoryMoved, Failure]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#text-segment-commands","title":"Text Segment Commands","text":"<ul> <li>[ ] #14 <code>apply_code_to_text(code_id, source_id, position: TextPosition) -&gt; Result[SegmentCoded, Failure]</code></li> <li>[ ] #15 <code>remove_text_segment(segment_id) -&gt; Result[SegmentUncoded, Failure]</code></li> <li>[ ] #16 <code>update_segment_memo(segment_id, memo) -&gt; Result[SegmentMemoUpdated, Failure]</code></li> <li>[ ] #17 <code>set_segment_importance(segment_id, importance) -&gt; Result[SegmentImportanceSet, Failure]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#controller-flow-pattern-for-each-command","title":"Controller Flow Pattern (for each command)","text":"<ul> <li>[ ] #18 Fetch current state from repositories</li> <li>[ ] #19 Call domain deriver with command + state</li> <li>[ ] #20 On Success: persist via repository, publish event to EventBus</li> <li>[ ] #21 On Failure: return Failure, no side effects</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#query-methods-read-only","title":"Query Methods (read-only)","text":"<ul> <li>[ ] #22 <code>get_all_codes() -&gt; List[Code]</code></li> <li>[ ] #23 <code>get_all_categories() -&gt; List[Category]</code></li> <li>[ ] #24 <code>get_segments_for_source(source_id) -&gt; List[Segment]</code></li> <li>[ ] #25 <code>get_segments_for_code(code_id) -&gt; List[Segment]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#implementation-notes","title":"Implementation Notes","text":"<p>fDDD Pattern: <pre><code>class CodingController:\n    def create_code(self, name: str, color: Color, category_id: CategoryId | None = None) -&gt; Result[CodeCreated, Failure]:\n        # 1. Build state from repos\n        state = CodingState(\n            existing_codes=tuple(self.code_repo.get_all()),\n            existing_categories=tuple(self.category_repo.get_all()),\n        )\n\n        # 2. Call pure deriver\n        result = derive_create_code(name, color, category_id, state)\n\n        # 3. Handle result\n        match result:\n            case CodeCreated() as event:\n                self.code_repo.save_from_event(event)\n                self.event_bus.publish(event)\n                return Success(event)\n            case Failure() as failure:\n                return failure\n</code></pre></p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.01%20-%20Coding-Controller-Core/#files","title":"Files","text":"<ul> <li><code>src/application/controllers/coding_controller.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.02%20-%20Image-and-AV-Coding-Commands/","title":"Image and AV Coding Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.02%20-%20Image-and-AV-Coding-Commands/#description","title":"Description","text":"<p>Implement controller commands for image region and A/V time range coding. Publishes media-specific events.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.02%20-%20Image-and-AV-Coding-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.02%20-%20Image-and-AV-Coding-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>apply_code_to_image(code_id, source_id, region: ImageRegion) -&gt; Result[ImageSegmentCoded, Failure]</code></li> <li>[ ] #2 <code>apply_code_to_av(code_id, source_id, time_range: TimeRange, transcript: Optional[str]) -&gt; Result[AVSegmentCoded, Failure]</code></li> <li>[ ] #3 <code>remove_image_segment(segment_id) -&gt; Result[ImageSegmentUncoded, Failure]</code></li> <li>[ ] #4 <code>remove_av_segment(segment_id) -&gt; Result[AVSegmentUncoded, Failure]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.02%20-%20Image-and-AV-Coding-Commands/#deriver-functions-pure-in-functional-core","title":"Deriver Functions (Pure, in Functional Core)","text":"<ul> <li>[ ] #5 <code>derive_image_segment(code_id, source_id, region, owner) -&gt; Result[ImageSegment, Failure]</code></li> <li>Checks: is_code_exists, is_source_image_type, is_region_within_bounds</li> <li>[ ] #6 <code>derive_av_segment(code_id, source_id, time_range, transcript, owner) -&gt; Result[AVSegment, Failure]</code></li> <li>Checks: is_code_exists, is_source_av_type, is_time_range_valid</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.02%20-%20Image-and-AV-Coding-Commands/#invariants-pure-predicate-functions","title":"Invariants (Pure predicate functions)","text":"<ul> <li>[ ] #7 <code>is_source_image_type(source: Source) -&gt; bool</code> - validates source is ImageSource</li> <li>[ ] #8 <code>is_source_av_type(source: Source) -&gt; bool</code> - validates source is AudioSource or VideoSource</li> <li>[ ] #9 <code>is_region_within_bounds(region, source) -&gt; bool</code> - x+width &lt;= source.width, y+height &lt;= source.height</li> <li>[ ] #10 <code>is_time_range_within_duration(time_range, source) -&gt; bool</code> - end_ms &lt;= source.duration_ms</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.02%20-%20Image-and-AV-Coding-Commands/#controller-flow","title":"Controller Flow","text":"<ul> <li>[ ] #11 Controller: fetch state \u2192 call deriver \u2192 on success: persist + publish event</li> <li>[ ] #12 Publishes media-specific events (ImageSegmentCoded, AVSegmentCoded) to Event Bus</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.03%20-%20Auto-Coding-Commands/","title":"Auto-Coding Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.03%20-%20Auto-Coding-Commands/#description","title":"Description","text":"<p>Implement controller commands for auto-coding operations. Find matches and apply codes in batch with undo support.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.03%20-%20Auto-Coding-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.03%20-%20Auto-Coding-Commands/#controller-commands-imperative-shell-coordinates-io","title":"Controller Commands (Imperative Shell - coordinates I/O)","text":"<ul> <li>[ ] #1 <code>auto_code_exact(code_id, source_id, text, match_type) -&gt; Result[AutoCodeBatchCompleted, Failure]</code></li> <li>[ ] #2 <code>auto_code_fragments(code_id, source_id, text, threshold) -&gt; Result[AutoCodeBatchCompleted, Failure]</code></li> <li>[ ] #3 <code>mark_speakers(source_id) -&gt; Result[SpeakersMarked, Failure]</code></li> <li>[ ] #4 <code>undo_auto_code(batch_id) -&gt; Result[AutoCodeBatchUndone, Failure]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.03%20-%20Auto-Coding-Commands/#deriver-functions-pure-in-functional-core","title":"Deriver Functions (Pure, in Functional Core)","text":"<ul> <li>[ ] #5 <code>derive_auto_code_matches(source_text, pattern, match_type) -&gt; List[TextPosition]</code> - pure text matching</li> <li>[ ] #6 <code>derive_speaker_patterns(source_text) -&gt; List[SpeakerMatch]</code> - detects \"Name:\", \"[Name]\", \"{Name}\"</li> <li>[ ] #7 <code>derive_batch_segments(matches, code_id, source_id, batch_id) -&gt; List[Segment]</code> - creates segment entities</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.03%20-%20Auto-Coding-Commands/#controller-flow-per-fddd-pattern","title":"Controller Flow (per fDDD pattern)","text":"<ul> <li>[ ] #8 Controller: fetch state (code, source) \u2192 call deriver \u2192 persist batch \u2192 publish event</li> <li>[ ] #9 On deriver failure, return Failure without side effects</li> <li>[ ] #10 On success, emit AutoCodeBatchStarted, then AutoCodeBatchCompleted events</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.03%20-%20Auto-Coding-Commands/#progress-reporting","title":"Progress Reporting","text":"<ul> <li>[ ] #11 <code>progress_callback: Callable[[int, int], None]</code> optional parameter (current, total)</li> <li>[ ] #12 Callback invoked during batch creation for UI progress display</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.04%20-%20Navigation-Queries/","title":"Navigation Queries","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.04%20-%20Navigation-Queries/#description","title":"Description","text":"<p>Implement controller queries for navigating between code instances. Used by prev/next buttons in code tree.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.04%20-%20Navigation-Queries/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.04%20-%20Navigation-Queries/#controller-query-methods-read-path-cqrs-lite","title":"Controller Query Methods (Read Path - CQRS-lite)","text":"<ul> <li>[ ] #1 <code>get_next_segment(code_id, current_segment_id) -&gt; Optional[SegmentNavigation]</code></li> <li>[ ] #2 <code>get_prev_segment(code_id, current_segment_id) -&gt; Optional[SegmentNavigation]</code></li> <li>[ ] #3 <code>get_all_segments_for_code(code_id) -&gt; List[SegmentNavigation]</code></li> <li>[ ] #4 <code>get_segment_index(code_id, segment_id) -&gt; Tuple[int, int]</code> - returns (current_index, total_count)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.04%20-%20Navigation-Queries/#query-dto-read-only-for-ui-navigation","title":"Query DTO (Read-only, for UI navigation)","text":"<ul> <li>[ ] #5 <code>SegmentNavigation</code> DTO: segment_id, source_id, source_name, position (TextPosition | ImageRegion | TimeRange)</li> <li>[ ] #6 DTO is frozen dataclass, not domain entity</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.04%20-%20Navigation-Queries/#ordering","title":"Ordering","text":"<ul> <li>[ ] #7 Segments ordered by: source_id ASC, then position.start ASC</li> <li>[ ] #8 Ordering consistent across all navigation methods</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.04%20-%20Navigation-Queries/#implementation","title":"Implementation","text":"<ul> <li>[ ] #9 Queries are read-only (no state changes, no events published)</li> <li>[ ] #10 Repository method <code>find_ordered_by_code(code_id)</code> provides underlying data</li> <li>[ ] #11 Navigation logic (next/prev) can be pure function over ordered list</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/","title":"Coding Signal Bridge","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/#description","title":"Description","text":"<p>Bridge between domain events and UI signals for the Coding context. Enables UI to observe domain changes from both UI and Agent actions.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/#codingsignalbridge-class","title":"CodingSignalBridge Class","text":"<ul> <li>[ ] #1 Extends BaseSignalBridge from QC-003.01</li> <li>[ ] #2 Singleton instance accessible via <code>CodingSignalBridge.instance()</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/#ui-signals","title":"UI Signals","text":"<ul> <li>[ ] #3 <code>code_created</code> signal - emits CodeCreated payload</li> <li>[ ] #4 <code>code_renamed</code> signal - emits CodeRenamed payload</li> <li>[ ] #5 <code>code_deleted</code> signal - emits CodeDeleted payload</li> <li>[ ] #6 <code>code_color_changed</code> signal - emits CodeColorChanged payload</li> <li>[ ] #7 <code>segment_coded</code> signal - emits SegmentCoded payload</li> <li>[ ] #8 <code>segment_uncoded</code> signal - emits SegmentUncoded payload</li> <li>[ ] #9 <code>category_created</code> signal - emits CategoryCreated payload</li> <li>[ ] #10 <code>category_deleted</code> signal - emits CategoryDeleted payload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/#event-bus-subscription","title":"Event Bus Subscription","text":"<ul> <li>[ ] #11 Subscribe to all Coding context events on EventBus</li> <li>[ ] #12 Event handler maps event type \u2192 corresponding UI signal emission</li> <li>[ ] #13 Dispatcher method routes domain events to converters</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/#thread-safety","title":"Thread Safety","text":"<ul> <li>[ ] #14 Thread-safe emission (inherits from BaseSignalBridge)</li> <li>[ ] #15 Agent operations (from background thread) safely emit to UI thread</li> <li>[ ] #16 UI operations (from UI thread) emit directly</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/#architecture-pattern","title":"Architecture Pattern","text":"<ul> <li>[ ] #17 Bridge is in Application layer - decouples UI from Event Bus</li> <li>[ ] #18 UI widgets connect to bridge signals, not directly to EventBus</li> <li>[ ] #19 Both UI actions and Agent actions trigger same domain events \u2192 same signals</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.05%20-%20Coding-Signal-Bridge/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: - Inherits from <code>QObject</code> via BaseSignalBridge - Signals declared as <code>pyqtSignal(object)</code> - Uses <code>QMetaObject.invokeMethod</code> with <code>Qt.QueuedConnection</code> (via base class)</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/","title":"Signal Payloads","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#description","title":"Description","text":"<p>Define Qt-friendly payload dataclasses for the Coding context. These are the data structures emitted by SignalBridge signals to UI widgets. Payloads are UI-optimized versions of domain events.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#code-payloads","title":"Code Payloads","text":"<ul> <li>[ ] #1 <code>CodeCreatedPayload</code>: code_id (str), name (str), color_hex (str), category_id (str?), owner_name (str)</li> <li>[ ] #2 <code>CodeRenamedPayload</code>: code_id (str), old_name (str), new_name (str)</li> <li>[ ] #3 <code>CodeDeletedPayload</code>: code_id (str), name (str)</li> <li>[ ] #4 <code>CodeColorChangedPayload</code>: code_id (str), old_color_hex (str), new_color_hex (str)</li> <li>[ ] #5 <code>CodesMergedPayload</code>: source_code_id (str), target_code_id (str), segments_moved (int)</li> <li>[ ] #6 <code>CodeMovedToCategoryPayload</code>: code_id (str), old_category_id (str?), new_category_id (str?)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#category-payloads","title":"Category Payloads","text":"<ul> <li>[ ] #7 <code>CategoryCreatedPayload</code>: category_id (str), name (str), parent_id (str?)</li> <li>[ ] #8 <code>CategoryDeletedPayload</code>: category_id (str), name (str)</li> <li>[ ] #9 <code>CategoryRenamedPayload</code>: category_id (str), old_name (str), new_name (str)</li> <li>[ ] #10 <code>CategoryMovedPayload</code>: category_id (str), old_parent_id (str?), new_parent_id (str?)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#segment-payloads","title":"Segment Payloads","text":"<ul> <li>[ ] #11 <code>SegmentCodedPayload</code>: segment_id (str), code_id (str), code_name (str), code_color_hex (str), source_id (str), position_start (int), position_end (int), selected_text (str), owner_name (str)</li> <li>[ ] #12 <code>SegmentUncodedPayload</code>: segment_id (str), code_id (str), source_id (str)</li> <li>[ ] #13 <code>ImageSegmentCodedPayload</code>: segment_id (str), code_id (str), code_name (str), source_id (str), x (int), y (int), width (int), height (int)</li> <li>[ ] #14 <code>AVSegmentCodedPayload</code>: segment_id (str), code_id (str), code_name (str), source_id (str), start_ms (int), end_ms (int), transcript (str?)</li> <li>[ ] #15 <code>SegmentMemoUpdatedPayload</code>: segment_id (str), memo (str?)</li> <li>[ ] #16 <code>SegmentImportanceSetPayload</code>: segment_id (str), importance (int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#batch-operation-payloads","title":"Batch Operation Payloads","text":"<ul> <li>[ ] #17 <code>AutoCodeBatchCompletedPayload</code>: batch_id (str), code_id (str), code_name (str), segments_created (int), source_id (str)</li> <li>[ ] #18 <code>AutoCodeBatchUndonePayload</code>: batch_id (str), segments_removed (int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#payload-design-rules","title":"Payload Design Rules","text":"<ul> <li>[ ] #19 All payloads are frozen dataclasses (immutable)</li> <li>[ ] #20 Use primitive types only (str, int, float, bool) - no domain types</li> <li>[ ] #21 IDs are strings (not typed IDs) for Qt compatibility</li> <li>[ ] #22 Colors are hex strings (not Color value objects)</li> <li>[ ] #23 Include display-ready data (e.g., code_name alongside code_id)</li> <li>[ ] #24 Include owner_name for activity display (not CoderId)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#base-payload-class","title":"Base Payload Class","text":"<ul> <li>[ ] #25 <code>SignalPayload</code> base class with <code>timestamp: str</code> (ISO format)</li> <li>[ ] #26 All payloads inherit from <code>SignalPayload</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#implementation-notes","title":"Implementation Notes","text":"<p>Why separate from Domain Events?</p> <p>Domain events carry domain types (CodeId, Color, etc.) and are for the domain layer. Payloads carry primitive types and are optimized for UI rendering:</p> <pre><code># Domain Event (in domain layer)\n@dataclass(frozen=True)\nclass CodeCreated(DomainEvent):\n    code_id: CodeId          # Typed ID\n    name: str\n    color: Color             # Value object\n    owner: CoderId           # Typed ID\n\n# Signal Payload (in application layer)\n@dataclass(frozen=True)\nclass CodeCreatedPayload(SignalPayload):\n    code_id: str             # String for Qt\n    name: str\n    color_hex: str           # \"#RRGGBB\" for Qt\n    owner_name: str          # Display name\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.06%20-%20Signal-Payloads/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/coding_payloads.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/","title":"Event Converters","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#description","title":"Description","text":"<p>Implement converters that transform domain events into signal payloads. One converter per event type. Converters are pure functions that map domain types to UI-friendly primitives.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#converter-protocol","title":"Converter Protocol","text":"<ul> <li>[ ] #1 <code>EventConverter[E, P]</code> protocol: <code>convert(event: E) -&gt; P</code></li> <li>[ ] #2 Converters are stateless (pure transformation)</li> <li>[ ] #3 Each converter handles one event type</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#code-event-converters","title":"Code Event Converters","text":"<ul> <li>[ ] #4 <code>CodeCreatedConverter</code>: CodeCreated \u2192 CodeCreatedPayload</li> <li>[ ] #5 <code>CodeRenamedConverter</code>: CodeRenamed \u2192 CodeRenamedPayload</li> <li>[ ] #6 <code>CodeDeletedConverter</code>: CodeDeleted \u2192 CodeDeletedPayload</li> <li>[ ] #7 <code>CodeColorChangedConverter</code>: CodeColorChanged \u2192 CodeColorChangedPayload</li> <li>[ ] #8 <code>CodesMergedConverter</code>: CodesMerged \u2192 CodesMergedPayload</li> <li>[ ] #9 <code>CodeMovedToCategoryConverter</code>: CodeMovedToCategory \u2192 CodeMovedToCategoryPayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#category-event-converters","title":"Category Event Converters","text":"<ul> <li>[ ] #10 <code>CategoryCreatedConverter</code>: CategoryCreated \u2192 CategoryCreatedPayload</li> <li>[ ] #11 <code>CategoryDeletedConverter</code>: CategoryDeleted \u2192 CategoryDeletedPayload</li> <li>[ ] #12 <code>CategoryRenamedConverter</code>: CategoryRenamed \u2192 CategoryRenamedPayload</li> <li>[ ] #13 <code>CategoryMovedConverter</code>: CategoryMoved \u2192 CategoryMovedPayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#segment-event-converters","title":"Segment Event Converters","text":"<ul> <li>[ ] #14 <code>SegmentCodedConverter</code>: SegmentCoded \u2192 SegmentCodedPayload</li> <li>[ ] #15 <code>SegmentUncodedConverter</code>: SegmentUncoded \u2192 SegmentUncodedPayload</li> <li>[ ] #16 <code>ImageSegmentCodedConverter</code>: ImageSegmentCoded \u2192 ImageSegmentCodedPayload</li> <li>[ ] #17 <code>AVSegmentCodedConverter</code>: AVSegmentCoded \u2192 AVSegmentCodedPayload</li> <li>[ ] #18 <code>SegmentMemoUpdatedConverter</code>: SegmentMemoUpdated \u2192 SegmentMemoUpdatedPayload</li> <li>[ ] #19 <code>SegmentImportanceSetConverter</code>: SegmentImportanceSet \u2192 SegmentImportanceSetPayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#batch-event-converters","title":"Batch Event Converters","text":"<ul> <li>[ ] #20 <code>AutoCodeBatchCompletedConverter</code>: AutoCodeBatchCompleted \u2192 AutoCodeBatchCompletedPayload</li> <li>[ ] #21 <code>AutoCodeBatchUndoneConverter</code>: AutoCodeBatchUndone \u2192 AutoCodeBatchUndonePayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#conversion-logic","title":"Conversion Logic","text":"<ul> <li>[ ] #22 Convert CodeId \u2192 str via <code>str(code_id)</code></li> <li>[ ] #23 Convert Color \u2192 str via <code>color.to_hex()</code></li> <li>[ ] #24 Convert CoderId \u2192 owner_name via coder lookup (or embed name in event)</li> <li>[ ] #25 Convert datetime \u2192 str via <code>.isoformat()</code></li> <li>[ ] #26 Handle Optional fields (None \u2192 None)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#converter-registry","title":"Converter Registry","text":"<ul> <li>[ ] #27 <code>ConverterRegistry</code> class maps event_type \u2192 converter instance</li> <li>[ ] #28 <code>register(event_type: str, converter: EventConverter)</code> method</li> <li>[ ] #29 <code>get_converter(event_type: str) -&gt; EventConverter | None</code> method</li> <li>[ ] #30 <code>convert(event: DomainEvent) -&gt; SignalPayload</code> convenience method</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#testing","title":"Testing","text":"<ul> <li>[ ] #31 Each converter has unit tests</li> <li>[ ] #32 Tests verify all fields are correctly mapped</li> <li>[ ] #33 Tests verify Optional handling (None cases)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#implementation-notes","title":"Implementation Notes","text":"<p>Converter Example: <pre><code>class CodeCreatedConverter(EventConverter[CodeCreated, CodeCreatedPayload]):\n    def convert(self, event: CodeCreated) -&gt; CodeCreatedPayload:\n        return CodeCreatedPayload(\n            timestamp=event.occurred_at.isoformat(),\n            code_id=str(event.code_id),\n            name=event.name,\n            color_hex=event.color.to_hex(),\n            category_id=str(event.category_id) if event.category_id else None,\n            owner_name=event.owner_name,  # Assume embedded in event\n        )\n</code></pre></p> <p>Registry Usage in SignalBridge: <pre><code>class CodingSignalBridge(BaseSignalBridge):\n    def __init__(self, event_bus: EventBus, registry: ConverterRegistry):\n        self._registry = registry\n        event_bus.subscribe_all(self._on_event)\n\n    def _on_event(self, event: DomainEvent) -&gt; None:\n        payload = self._registry.convert(event)\n        signal = self._get_signal_for_event(event)\n        signal.emit(payload)\n</code></pre></p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.07%20-%20Event-Converters/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/coding_converters.py</code></li> <li><code>src/application/signal_bridge/converter_registry.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.08%20-%20Recent-Codes-Service/","title":"Recent Codes Service","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.08%20-%20Recent-Codes-Service/#description","title":"Description","text":"<p>Track and query recently used codes. Updates on code application, returns last N codes used.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.08%20-%20Recent-Codes-Service/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.08%20-%20Recent-Codes-Service/#service-interface","title":"Service Interface","text":"<ul> <li>[ ] #1 <code>RecentCodesService</code> - tracks and queries recently used codes</li> <li>[ ] #2 <code>get_recent_codes(limit: int = 10) -&gt; List[Code]</code> - returns most recently used codes</li> <li>[ ] #3 <code>clear_recent_codes() -&gt; None</code> - resets recent codes list</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.08%20-%20Recent-Codes-Service/#event-driven-tracking-policy-pattern","title":"Event-Driven Tracking (Policy Pattern)","text":"<ul> <li>[ ] #4 <code>on_segment_coded(event: SegmentCoded)</code> - policy updates recency for event.code_id</li> <li>[ ] #5 Policy subscribes to SegmentCoded events via EventBus</li> <li>[ ] #6 Pure function: <code>record_usage(code_id, timestamp)</code> - no side effects in core</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.08%20-%20Recent-Codes-Service/#persistence-infrastructure","title":"Persistence (Infrastructure)","text":"<ul> <li>[ ] #7 Stored via <code>last_used_at</code> column in CodeRepository (see QC-005.04)</li> <li>[ ] #8 Persists across sessions automatically via SQLite</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.08%20-%20Recent-Codes-Service/#query-read-path","title":"Query (Read Path)","text":"<ul> <li>[ ] #9 Query uses <code>CodeRepository.find_recent(limit)</code> method</li> <li>[ ] #10 Returns frozen Code entities (immutable)</li> <li>[ ] #11 Excludes deleted codes automatically</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.08%20-%20Recent-Codes-Service/#integration","title":"Integration","text":"<ul> <li>[ ] #12 Service is Application layer component</li> <li>[ ] #13 UI calls service for quick-access code list</li> <li>[ ] #14 Agent can also query recent codes for context</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.09%20-%20Agent-Tool-Schemas/","title":"Agent Tool Schemas","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.09%20-%20Agent-Tool-Schemas/#description","title":"Description","text":"<p>Add agent tool schemas for auto-coding and media coding operations. Register with agent server.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.09%20-%20Agent-Tool-Schemas/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.09%20-%20Agent-Tool-Schemas/#agent-tool-schemas","title":"Agent Tool Schemas","text":"<ul> <li>[ ] #1 <code>auto_code_exact</code> tool schema:</li> <li>Input: code_id, source_id, text, match_type (exact|startswith|contains|endswith|regex)</li> <li>Output: batch_id, segments_created (count)</li> <li> <p>Trust Level: SUGGEST (requires user approval before execution)</p> </li> <li> <p>[ ] #2 <code>auto_code_fragments</code> tool schema:</p> </li> <li>Input: code_id, source_id, text, similarity_threshold (0.0-1.0)</li> <li>Output: batch_id, segments_created (count)</li> <li> <p>Trust Level: SUGGEST</p> </li> <li> <p>[ ] #3 <code>mark_speakers</code> tool schema:</p> </li> <li>Input: source_id, speaker_format (auto|colon|bracket|brace)</li> <li>Output: speakers_detected (list), codes_created (list)</li> <li> <p>Trust Level: SUGGEST</p> </li> <li> <p>[ ] #4 <code>apply_code_to_image</code> tool schema:</p> </li> <li>Input: code_id, source_id, x, y, width, height</li> <li>Output: segment_id</li> <li> <p>Trust Level: NOTIFY (executes, user notified)</p> </li> <li> <p>[ ] #5 <code>apply_code_to_av</code> tool schema:</p> </li> <li>Input: code_id, source_id, start_ms, end_ms, transcript (optional)</li> <li>Output: segment_id</li> <li> <p>Trust Level: NOTIFY</p> </li> <li> <p>[ ] #6 <code>set_importance</code> tool schema:</p> </li> <li>Input: segment_id, importance (0|1)</li> <li>Output: success (bool)</li> <li>Trust Level: NOTIFY</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.09%20-%20Agent-Tool-Schemas/#schema-structure","title":"Schema Structure","text":"<ul> <li>[ ] #7 Each schema defines: name, description, inputSchema (JSON Schema), trust_level</li> <li>[ ] #8 Schemas registered with agent server on startup</li> <li>[ ] #9 Resource URIs defined: <code>qualcoder://coding/tools/{tool_name}</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.09%20-%20Agent-Tool-Schemas/#controller-integration","title":"Controller Integration","text":"<ul> <li>[ ] #10 Each agent tool invokes corresponding Controller command</li> <li>[ ] #11 Controller returns Result[Event, Failure] \u2192 tool returns success/error</li> <li>[ ] #12 Agent actions emit same domain events as UI actions (unified event stream)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-006.09%20-%20Agent-Tool-Schemas/#implementation-notes","title":"Implementation Notes","text":"<p>For MCP (Model Context Protocol): - Schemas follow MCP Tool Schema specification - Registered via MCP server's tool registration API - URIs use MCP resource format</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007%20-%20Coding-Presentation/","title":"Coding Presentation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007%20-%20Coding-Presentation/#description","title":"Description","text":"<p>Build the UI screens for the Coding bounded context with agent observation.</p> <p>Agent-First: UI shows agent activity. Agent actions appear with badges. Approval dialogs for Require trust level.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007%20-%20Coding-Presentation/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Text coding screen (mockup: <code>code_text.html</code>)</li> <li>[ ] Image coding screen (mockup: <code>code_image.html</code>)</li> <li>[ ] Audio/Video coding screen (mockup: <code>code_av.html</code>)</li> <li>[ ] PDF coding screen (mockup: <code>code_pdf.html</code>)</li> <li>[ ] Code tree panel (shared widget)</li> <li>[ ] Segment list panel (shared widget)</li> <li>[ ] Agent activity badges on agent-created items</li> <li>[ ] Approval dialog for Require-level operations</li> <li>[ ] Signal bridge (domain events \u2192 Qt signals)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007%20-%20Coding-Presentation/#subtasks","title":"Subtasks","text":"ID Subtask Status QC-007.1 Code Tree Widget To Do QC-007.2 Segment List Widget To Do QC-007.3 Text Coding Screen To Do QC-007.4 Image Coding Screen To Do QC-007.5 A/V Coding Screen To Do QC-007.6 PDF Coding Screen To Do QC-007.7 Agent Activity Badges To Do QC-007.8 Approval Dialog To Do"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007%20-%20Coding-Presentation/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/coding/</code></li> <li><code>src/presentation/widgets/agent_badge.py</code></li> <li><code>src/presentation/dialogs/approval_dialog.py</code></li> <li>Mockups: <code>mockups/code_*.html</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.01%20-%20Text-Highlighting-System/","title":"Text Highlighting System","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.01%20-%20Text-Highlighting-System/#description","title":"Description","text":"<p>Implement text highlighting with color backgrounds for coded segments. Support overlapping highlights with transparency.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.01%20-%20Text-Highlighting-System/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] #1 <code>highlight_range(start, end, color)</code> method applies background color to text range</li> <li>[x] #2 <code>clear_highlights()</code> method removes all highlights</li> <li>[x] #3 Overlapping highlights display with transparency/blending</li> <li>[x] #4 Bold formatting for text segments with memos attached</li> <li>[x] #5 Underline formatting for overlapping code regions</li> <li>[x] #6 Line numbers displayed in left margin</li> <li>[x] #7 Dynamic text color (light/dark) based on background highlight</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.01%20-%20Text-Highlighting-System/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/organisms/text_editor_panel.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.01%20-%20Text-Highlighting-System/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: - Uses <code>QTextEdit</code> with <code>QTextCharFormat</code> for formatting - Reference: QualCoder <code>code_text.py</code> highlighting methods</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.02%20-%20Code-Application-Workflow/","title":"Code Application Workflow","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.02%20-%20Code-Application-Workflow/#description","title":"Description","text":"<p>Implement the core workflow for applying codes to text selections. Wire signals between text selection and code application. Update highlights and code counts on application.</p> <p>Note: This task depends on QC-007.21 (ViewModel Integration) for the signals to actually trigger domain operations.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.02%20-%20Code-Application-Workflow/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.02%20-%20Code-Application-Workflow/#keyboard-actions-handlers-exist-need-viewmodel-wiring","title":"Keyboard Actions (handlers exist, need viewmodel wiring)","text":"<ul> <li>[x] #1 Apply selected code to text selection via Q key (quick mark)</li> <li>[ ] #2 In-vivo coding: create new code from selected text (V key) - deferred to separate task</li> <li>[x] #3 Apply code from recent codes submenu (R key)</li> <li>[x] #4 Remove code at cursor position (U key - unmark)</li> <li>[x] #5 Undo last unmark operation (Ctrl+Z)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.02%20-%20Code-Application-Workflow/#visual-feedback","title":"Visual Feedback","text":"<ul> <li>[ ] #6 Visual feedback (flash/highlight) on code application - deferred (signal exists, animation not implemented)</li> <li>[ ] #7 Code counts update in tree after apply/remove - deferred (updates via segments_changed signal)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.02%20-%20Code-Application-Workflow/#signal-definitions-ui-layer","title":"Signal Definitions (UI layer)","text":"<ul> <li>[x] #8 <code>text_selected</code> signal enables code application buttons</li> <li>[x] #9 <code>code_selected</code> signal sets active code for quick-mark</li> <li>[x] #10 <code>code_applied</code> signal triggers highlight update</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.02%20-%20Code-Application-Workflow/#implementation-notes","title":"Implementation Notes","text":"<p>Current State: Core workflow is complete. Q/U/Ctrl+Z/R keys work end-to-end through the viewmodel to the database. V key (in-vivo) and flash animation are deferred.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.02%20-%20Code-Application-Workflow/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/text_coding.py</code> - action handlers</li> <li><code>src/presentation/organisms/text_editor_panel.py</code> - signals</li> <li><code>src/presentation/organisms/codes_panel.py</code> - count updates</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.03%20-%20Context-Menus/","title":"Context Menus","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.03%20-%20Context-Menus/#description","title":"Description","text":"<p>Implement context menus for text editor and code tree. Text menu: mark/unmark/memo/annotate. Code tree menu: add/rename/delete/color/move.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.03%20-%20Context-Menus/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.03%20-%20Context-Menus/#text-editor-context-menu","title":"Text Editor Context Menu","text":"<ul> <li>[ ] #1 Mark with selected code action</li> <li>[ ] #2 Mark with recent code (submenu with last 10 codes)</li> <li>[ ] #3 Mark with new code (opens code dialog)</li> <li>[ ] #4 In-vivo code (create code from selection text)</li> <li>[ ] #5 Unmark code at cursor</li> <li>[ ] #6 Add memo to coded segment</li> <li>[ ] #7 Toggle important flag on coded segment</li> <li>[ ] #8 Annotate selection</li> <li>[ ] #9 Copy to clipboard</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.03%20-%20Context-Menus/#code-tree-context-menu","title":"Code Tree Context Menu","text":"<ul> <li>[ ] #10 Add new code to category</li> <li>[ ] #11 Add new sub-category</li> <li>[ ] #12 Rename code/category</li> <li>[ ] #13 View/edit code memo</li> <li>[ ] #14 Delete code/category (with confirmation)</li> <li>[ ] #15 Change code color (color picker dialog)</li> <li>[ ] #16 Move code to different category</li> <li>[ ] #17 Show all files coded with this code</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.03%20-%20Context-Menus/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/organisms/text_editor_panel.py</code> - text context menu</li> <li><code>src/presentation/organisms/codes_panel.py</code> - tree context menu</li> <li><code>src/presentation/dialogs/color_picker_dialog.py</code> - new file</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.04%20-%20Selection-Popup-Component/","title":"Selection Popup Component","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.04%20-%20Selection-Popup-Component/#description","title":"Description","text":"<p>Implement the selection popup that appears when text is selected. Shows quick actions for coding. Currently SelectionPopup exists but is hidden/unused.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.04%20-%20Selection-Popup-Component/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] #1 Show popup on text selection</li> <li>[x] #2 Position near selection cursor</li> <li>[x] #3 Quick Code action (Q key equivalent)</li> <li>[x] #4 Memo action (M key equivalent)</li> <li>[x] #5 Annotate action (A key equivalent)</li> <li>[x] #6 In-vivo code action (V key equivalent)</li> <li>[ ] #7 Recent codes quick access (deferred)</li> <li>[x] #8 Disappear when selection cleared</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.05%20-%20Signal-Routing-Completion/","title":"Signal Routing Completion","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.05%20-%20Signal-Routing-Completion/#description","title":"Description","text":"<p>Connect orphaned signals to handlers. Currently several signals are defined but not routed: navigation_clicked, code_applied, ai_chat_clicked, ai_suggest_clicked, media_type_changed, search_changed.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.05%20-%20Signal-Routing-Completion/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] #1 CodesPanel.navigation_clicked connected,TextEditorPanel.code_applied connected,DetailsPanel.ai_chat_clicked connected,DetailsPanel.ai_suggest_clicked connected,CodingToolbar.media_type_changed connected,CodingToolbar.search_changed connected</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.06%20-%20Code-Tree-Enhancements/","title":"Code Tree Enhancements","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.06%20-%20Code-Tree-Enhancements/#description","title":"Description","text":"<p>Enhance the code tree panel with full interaction support. Currently has basic display but missing context menu, drag-drop, search, and selection tracking.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.06%20-%20Code-Tree-Enhancements/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Context menu for code operations,Drag-and-drop reorganization,Code search/filter input,Sort options (name/count/color),Selection tracking (get_selected_code),Recent codes tracking (last 10),Important codes filter toggle</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.07%20-%20Auto-Coding-Features/","title":"Auto-Coding Features","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.07%20-%20Auto-Coding-Features/#description","title":"Description","text":"<p>Implement automatic coding features: exact match, fragment/sentence matching, speaker detection. Include undo capability for batch operations.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.07%20-%20Auto-Coding-Features/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Auto-code exact text matches (all/first/last),Auto-code similar fragments/sentences,Mark speakers pattern detection,Progress indicator for batch operations,Undo last auto-code batch,Preview matches before applying</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.08%20-%20Memo-System/","title":"Memo System","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.08%20-%20Memo-System/#description","title":"Description","text":"<p>Implement memo functionality for files, codes, and coded segments. Allow creating, editing, and viewing memos with author/timestamp metadata.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.08%20-%20Memo-System/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 File memo dialog,Code memo dialog,Segment memo dialog,Memo indicator in text (bold),View all memos panel,Memo author and timestamp display,Edit existing memos</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.09%20-%20Search-in-Text/","title":"Search in Text","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.09%20-%20Search-in-Text/#description","title":"Description","text":"<p>Implement text search functionality with highlighting and navigation. Search box already exists in toolbar but logic is not implemented.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.09%20-%20Search-in-Text/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Search input connected to logic,Case-sensitive toggle,Regex support,Search all files toggle,Highlight matches in document,Navigate prev/next match,Match counter display (X/Y)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.10%20-%20Keyboard-Shortcuts/","title":"Keyboard Shortcuts","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.10%20-%20Keyboard-Shortcuts/#description","title":"Description","text":"<p>Implement keyboard shortcuts for coding operations. Q=quick mark, U=unmark, N=new code, V=in-vivo, M=memo, A=annotate, O=cycle overlaps, etc.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.10%20-%20Keyboard-Shortcuts/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.10%20-%20Keyboard-Shortcuts/#coding-operations","title":"Coding Operations","text":"<ul> <li>[x] #1 <code>Q</code> - Quick mark selection with selected code</li> <li>[x] #2 <code>U</code> - Unmark code at cursor position</li> <li>[x] #3 <code>N</code> - Open new code dialog (emits signal)</li> <li>[x] #4 <code>V</code> - In-vivo code (create code from selection)</li> <li>[x] #5 <code>M</code> - Add/edit memo for segment at cursor (handler ready)</li> <li>[x] #6 <code>A</code> - Annotate selection (handler ready)</li> <li>[x] #7 <code>R</code> - Show recent codes menu</li> <li>[x] #8 <code>I</code> - Toggle important flag on segment (handler ready)</li> <li>[x] #9 <code>Ctrl+Z</code> - Undo last unmark</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.10%20-%20Keyboard-Shortcuts/#navigation","title":"Navigation","text":"<ul> <li>[x] #10 <code>Ctrl+F</code> - Focus search box</li> <li>[ ] #11 <code>Ctrl+1</code> - Go to next file (deferred)</li> <li>[ ] #12 <code>Ctrl+2</code> - Go to latest coded file (deferred)</li> <li>[x] #13 <code>O</code> - Cycle through overlapping codes at cursor</li> <li>[ ] #14 <code>B</code> - Set bookmark at cursor (deferred)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.10%20-%20Keyboard-Shortcuts/#code-boundary-adjustment","title":"Code Boundary Adjustment","text":"<ul> <li>[ ] #15 <code>Shift+Left</code> - Extend code boundary left (deferred - requires segment editing)</li> <li>[ ] #16 <code>Shift+Right</code> - Extend code boundary right (deferred)</li> <li>[ ] #17 <code>Alt+Left</code> - Shrink code from right (deferred)</li> <li>[ ] #18 <code>Alt+Right</code> - Shrink code from left (deferred)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.10%20-%20Keyboard-Shortcuts/#display","title":"Display","text":"<ul> <li>[x] #19 <code>H</code> - Toggle side panels visibility</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.10%20-%20Keyboard-Shortcuts/#implementation","title":"Implementation","text":"<ul> <li>Implement via <code>QShortcut</code> in <code>TextCodingScreen</code></li> <li>Reference: QualCoder <code>code_text.py</code> <code>keyPressEvent</code> method</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.11%20-%20Image-Coding-Screen/","title":"Image Coding Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.11%20-%20Image-Coding-Screen/#description","title":"Description","text":"<p>Build the image coding screen for coding regions on images. Similar to text coding but with rectangle/polygon selection on images.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.11%20-%20Image-Coding-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Image display panel with zoom/pan,Rectangle region selection,Polygon region selection,Apply code to selected region,Region list panel,Code tree integration,Mockup reference: code_image.html</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.12%20-%20A-V-Coding-Screen/","title":"A/V Coding Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.12%20-%20A-V-Coding-Screen/#description","title":"Description","text":"<p>Build the audio/video coding screen with timeline-based segment selection. Code time ranges on audio/video files.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.12%20-%20A-V-Coding-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Media player with playback controls,Timeline with waveform/thumbnails,Time range selection,Apply code to time range,Segment list with timestamps,Playback segment on click,Transcription panel integration,Mockup reference: code_av.html</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.13%20-%20Agent-Activity-Badges/","title":"Agent Activity Badges","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.13%20-%20Agent-Activity-Badges/#description","title":"Description","text":"<p>Add visual badges to indicate items created or modified by AI agents. Show on codes, segments, and tree items.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.13%20-%20Agent-Activity-Badges/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 AgentBadge component with AI icon,Badge on agent-created codes in tree,Badge on agent-applied segments,Tooltip showing agent action details,Filter toggle to show only agent items,Distinct styling from human-created items</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.14%20-%20Approval-Dialog/","title":"Approval Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.14%20-%20Approval-Dialog/#description","title":"Description","text":"<p>Modal dialog for approving agent actions that require user confirmation (Require trust level). Shows action details and approve/reject options.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.14%20-%20Approval-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Modal approval dialog component,Action details display,Approve and Reject buttons,Don't ask again checkbox,Batch approval for multiple actions,Integration with trust level system</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.15%20-%20Annotation-System/","title":"Annotation System","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.15%20-%20Annotation-System/#description","title":"Description","text":"<p>Implement annotations for adding inline comments to text. Different from memos - annotations are visible markers in the text itself.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.15%20-%20Annotation-System/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Create annotation on text selection,Annotation indicator in text,Edit existing annotations,View all annotations panel,Annotation metadata (author/date),Delete annotation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.16%20-%20Code-Position-Adjustment/","title":"Code Position Adjustment","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.16%20-%20Code-Position-Adjustment/#description","title":"Description","text":"<p>Allow users to adjust the start/end positions of coded segments using keyboard or context menu.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.16%20-%20Code-Position-Adjustment/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Extend code left (Shift+Left),Extend code right (Shift+Right),Shrink from left (Alt+Right),Shrink from right (Alt+Left),Change start position via context menu,Change end position via context menu,Visual feedback during adjustment</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.17%20-%20PDF-Coding-Screen/","title":"PDF Coding Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.17%20-%20PDF-Coding-Screen/#description","title":"Description","text":"<p>Build the PDF coding screen for coding text and regions in PDF documents. Handle both text selection and image region coding.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.17%20-%20PDF-Coding-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 PDF viewer with page navigation,Text selection in PDF,Region selection for images/figures,Apply code to selection,Page thumbnails navigation,Zoom controls,Mockup reference: code_pdf.html</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.18%20-%20AI-Chat-Integration/","title":"AI Chat Integration","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.18%20-%20AI-Chat-Integration/#description","title":"Description","text":"<p>Connect the AI Chat button in details panel to launch the AI chat interface. Provide context about selected code and current document.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.18%20-%20AI-Chat-Integration/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Route ai_chat_clicked signal to handler,Launch AI chat dialog/panel,Pass context (selected code and document),Display chat history,Handle AI responses</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.19%20-%20AI-Code-Suggestions/","title":"AI Code Suggestions","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.19%20-%20AI-Code-Suggestions/#description","title":"Description","text":"<p>Connect the Suggest Codes button to request AI-generated code suggestions based on selected text and existing codes.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.19%20-%20AI-Code-Suggestions/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Route ai_suggest_clicked signal to handler,Request suggestions from AI service,Display suggestions in panel,Allow accept/reject suggestions,Apply accepted suggestions as codes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.20%20-%20Segment-List-Widget/","title":"Segment List Widget","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.20%20-%20Segment-List-Widget/#description","title":"Description","text":"<p>Create a widget to display list of coded segments for a selected code. Show text preview and allow navigation to segment in document.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.20%20-%20Segment-List-Widget/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 List coded segments with text preview,Navigate to segment in document on click,Edit segment option,Delete segment option,Show segment metadata (coder/date),Sort by position or date</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/","title":"ViewModel Integration","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#description","title":"Description","text":"<p>Wire the presentation layer to the application layer via TextCodingViewModel. This is the critical \"glue\" that connects UI signals to domain operations. Without this, code application workflows exist in the UI but don't persist to the database.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#text-selection-capture","title":"Text Selection Capture","text":"<ul> <li>[x] #1 TextEditorPanel emits <code>text_selected(start, end, text)</code> when user selects text</li> <li>[ ] #2 Selection popup appears on text selection (deferred to QC-007.04)</li> <li>[x] #3 Clearing selection emits <code>text_deselected</code> signal</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#viewmodel-command-methods","title":"ViewModel Command Methods","text":"<ul> <li>[x] #4 <code>apply_code_to_selection(code_id, source_id, start, end)</code> calls controller.apply_code()</li> <li>[x] #5 <code>remove_segment(segment_id)</code> calls controller.remove_code()</li> <li>[x] #6 <code>create_code(name, color)</code> calls controller.create_code()</li> <li>[x] #7 All methods return Result for error handling</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#screen-to-viewmodel-wiring","title":"Screen-to-ViewModel Wiring","text":"<ul> <li>[x] #8 Screen <code>code_applied</code> signal routes to viewmodel.apply_code_to_selection()</li> <li>[x] #9 Screen <code>code_removed</code> signal routes to viewmodel.remove_segment()</li> <li>[ ] #10 Screen <code>code_created</code> signal routes to viewmodel.create_code() (deferred to QC-007.02 V-key)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#viewmodel-to-screen-wiring","title":"ViewModel-to-Screen Wiring","text":"<ul> <li>[x] #11 ViewModel <code>codes_changed</code> signal updates CodesPanel</li> <li>[x] #12 ViewModel <code>segments_changed</code> signal updates TextEditorPanel highlights</li> <li>[x] #13 ViewModel <code>error_occurred</code> signal emits on failure</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#source-document-tracking","title":"Source Document Tracking","text":"<ul> <li>[x] #14 Screen tracks <code>_source_id</code> for current document</li> <li>[x] #15 <code>set_current_source(source_id)</code> method updates tracking</li> <li>[x] #16 ViewModel receives source_id with each operation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#implementation-notes","title":"Implementation Notes","text":"<p>Signal Flow: <pre><code>User selects text \u2192 TextEditorPanel.text_selected\n                  \u2192 Screen enables quick-mark\nUser presses Q    \u2192 Screen.quick_mark()\n                  \u2192 Screen.code_applied.emit(code_id, start, end)\n                  \u2192 ViewModel.apply_code_to_selection()\n                  \u2192 Controller.apply_code()\n                  \u2192 Repository.save()\n                  \u2192 EventBus.publish(SegmentCoded)\n                  \u2192 SignalBridge.segment_coded.emit()\n                  \u2192 ViewModel.segments_changed.emit()\n                  \u2192 Screen._on_segments_changed()\n                  \u2192 TextEditorPanel.highlight_range()\n</code></pre></p> <p>Files: - <code>src/presentation/organisms/text_editor_panel.py</code> - add selection signals - <code>src/presentation/viewmodels/text_coding_viewmodel.py</code> - implement methods - <code>src/presentation/screens/text_coding.py</code> - wire signals</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-007.21%20-%20ViewModel-Integration/#files","title":"Files","text":"<ul> <li><code>src/presentation/organisms/text_editor_panel.py</code></li> <li><code>src/presentation/viewmodels/text_coding_viewmodel.py</code></li> <li><code>src/presentation/screens/text_coding.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008%20-%20Source-Domain/","title":"Source Domain","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008%20-%20Source-Domain/#description","title":"Description","text":"<p>Define the domain layer for Source Management: entities, events, invariants, derivers, and agent tool schemas.</p> <p>Agent-First: Agent tool schemas defined so AI can list and read sources.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008%20-%20Source-Domain/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Entities: Source, Folder, SourceMetadata</li> <li>[ ] Value objects: MediaType, FilePath</li> <li>[ ] Domain events (SourceImported, SourceDeleted, etc.)</li> <li>[ ] Invariants and derivers</li> <li>[ ] Agent tool schemas (list_sources, read_source, get_source_text)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008%20-%20Source-Domain/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/source/entities.py</code></li> <li><code>src/domain/source/events.py</code></li> <li><code>src/agent_context/schemas/source_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.01%20-%20Source-Events/","title":"Source Events","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.01%20-%20Source-Events/#description","title":"Description","text":"<p>Additional domain events: SourceRenamed, SourceMoved, SourceMemoUpdated, SpeakersDetected, SpeakerCodeCreated, SourceCaseLinked, SourceCaseUnlinked, SourceTranscribed, SurveyImported, SourceExported</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.01%20-%20Source-Events/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.01%20-%20Source-Events/#source-lifecycle-events-frozen-dataclasses-extending-domainevent","title":"Source Lifecycle Events (frozen dataclasses extending DomainEvent)","text":"<ul> <li>[ ] #1 <code>SourceRenamed</code> event: source_id, old_name, new_name</li> <li>[ ] #2 <code>SourceMemoUpdated</code> event: source_id, old_memo, new_memo</li> <li>[ ] #3 <code>SourceDeleted</code> event: source_id, source_type, had_segments (bool)</li> <li>[ ] #4 <code>SourceExported</code> event: source_id, export_path, format</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.01%20-%20Source-Events/#transcript-events","title":"Transcript Events","text":"<ul> <li>[ ] #5 <code>SourceTranscribed</code> event: source_id, transcript_length, language (optional)</li> <li>[ ] #6 <code>SpeakersDetected</code> event: source_id, speakers (list of speaker names), pattern_format</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.01%20-%20Source-Events/#cross-context-events-published-language","title":"Cross-Context Events (Published Language)","text":"<ul> <li>[ ] #7 <code>SourceCaseLinked</code> event: source_id, case_id, position (optional for partial)</li> <li>[ ] #8 <code>SourceCaseUnlinked</code> event: source_id, case_id</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.01%20-%20Source-Events/#survey-events","title":"Survey Events","text":"<ul> <li>[ ] #9 <code>SurveyImported</code> event: source_ids (list), row_count, column_count, attribute_types_created</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.01%20-%20Source-Events/#event-structure","title":"Event Structure","text":"<ul> <li>[ ] #10 All events follow standard structure: event_id, event_type, aggregate_id, occurred_at, caused_by, payload</li> <li>[ ] #11 Events registered in Source context event catalog</li> <li>[ ] #12 Cross-context events (SourceCaseLinked) are Published Language for Case context</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/","title":"Speaker Entity","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/#description","title":"Description","text":"<p>Speaker entity with name, color, position ranges. SpeakerFormat value object for pattern matching (Name:, [Name], {Name}). Supports transcript speaker extraction.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/#speaker-value-object-frozen-dataclass","title":"Speaker Value Object (frozen dataclass)","text":"<ul> <li>[ ] #1 <code>Speaker</code> value object: name (str), color (Color), occurrences (int)</li> <li>[ ] #2 Immutable - no identity, compared by value</li> <li>[ ] #3 Factory method: <code>Speaker.create(name, color=None)</code> - auto-assigns color if not provided</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/#speakerformat-enum","title":"SpeakerFormat Enum","text":"<ul> <li>[ ] #4 <code>SpeakerFormat</code> enum: COLON (\"Name:\"), BRACKET (\"[Name]\"), BRACE (\"{Name}\"), AUTO (detect)</li> <li>[ ] #5 Each format has regex pattern: <code>pattern() -&gt; str</code> method</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/#speakermatch-value-object-frozen-dataclass","title":"SpeakerMatch Value Object (frozen dataclass)","text":"<ul> <li>[ ] #6 <code>SpeakerMatch</code> value object: speaker_name, format, positions (List[TextPosition])</li> <li>[ ] #7 Represents detected speaker occurrences in transcript</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/#pure-functions-derivers","title":"Pure Functions (Derivers)","text":"<ul> <li>[ ] #8 <code>detect_speakers(text: str, format: SpeakerFormat) -&gt; List[SpeakerMatch]</code> - pure text analysis</li> <li>[ ] #9 <code>extract_speaker_name(match: re.Match, format: SpeakerFormat) -&gt; str</code> - extracts name from regex match</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/#invariants","title":"Invariants","text":"<ul> <li>[ ] #10 <code>is_valid_speaker_name(name: str) -&gt; bool</code> - non-empty, reasonable length</li> <li>[ ] #11 <code>is_speaker_unique(name: str, existing: List[Speaker]) -&gt; bool</code> - no duplicates</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.02%20-%20Speaker-Entity/#integration-with-coding-context","title":"Integration with Coding Context","text":"<ul> <li>[ ] #12 Speakers can be converted to Codes via <code>CreateSpeakerCodes</code> command</li> <li>[ ] #13 Speaker \u2192 Code mapping preserves name and color</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/","title":"Survey Import Types","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/#description","title":"Description","text":"<p>Value objects for survey import: SurveyColumn, SurveyConfig, DelimiterType. Support CSV column mapping and text collation options.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/#delimitertype-enum","title":"DelimiterType Enum","text":"<ul> <li>[ ] #1 <code>DelimiterType</code> enum: COMMA, TAB, SEMICOLON, PIPE, AUTO</li> <li>[ ] #2 <code>char() -&gt; str</code> method returns actual delimiter character</li> <li>[ ] #3 <code>detect(sample: str) -&gt; DelimiterType</code> static method for auto-detection</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/#surveycolumn-value-object-frozen-dataclass","title":"SurveyColumn Value Object (frozen dataclass)","text":"<ul> <li>[ ] #4 <code>SurveyColumn</code> value object: index (int), name (str), column_type (ColumnType), sample_values (List[str])</li> <li>[ ] #5 <code>ColumnType</code> enum: TEXT, NUMERIC, DATE, IDENTIFIER, SKIP</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/#surveyconfig-value-object-frozen-dataclass","title":"SurveyConfig Value Object (frozen dataclass)","text":"<ul> <li>[ ] #6 <code>SurveyConfig</code>: delimiter, has_header (bool), columns (List[SurveyColumn]), collation_mode</li> <li>[ ] #7 <code>CollationMode</code> enum: PER_COLUMN (each column \u2192 source), PER_ROW (each row \u2192 source), SINGLE (all \u2192 one source)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/#columnmapping-value-object","title":"ColumnMapping Value Object","text":"<ul> <li>[ ] #8 <code>ColumnMapping</code>: column_index, target_type (SOURCE_TEXT | CASE_ATTRIBUTE | SKIP)</li> <li>[ ] #9 For CASE_ATTRIBUTE: attribute_name, attribute_type</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #10 <code>parse_csv_preview(content: str, config: SurveyConfig, rows: int = 5) -&gt; List[List[str]]</code></li> <li>[ ] #11 <code>infer_column_types(samples: List[List[str]]) -&gt; List[ColumnType]</code> - auto-detect types</li> <li>[ ] #12 <code>validate_config(config: SurveyConfig) -&gt; Result[SurveyConfig, ConfigError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.03%20-%20Survey-Import-Types/#invariants","title":"Invariants","text":"<ul> <li>[ ] #13 <code>is_valid_column_index(index: int, columns: List) -&gt; bool</code></li> <li>[ ] #14 <code>has_text_columns(config: SurveyConfig) -&gt; bool</code> - at least one text column required</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/","title":"Pseudonym Entity","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#description","title":"Description","text":"<p>Define domain entity for Pseudonym management. Pseudonyms replace real names/identifiable information for research ethics compliance.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Module: <code>pseudonyms.py</code></li> <li>Storage: <code>pseudonyms.json</code> in project folder</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#entity-pseudonymmapping","title":"Entity: PseudonymMapping","text":"<ul> <li>[ ] #1 <code>original: str</code> - Original text to replace (min 2 chars)</li> <li>[ ] #2 <code>pseudonym: str</code> - Replacement text (min 3 chars or auto-generated)</li> <li>[ ] #3 <code>created_date: datetime</code></li> <li>[ ] #4 Case-sensitive matching</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#value-objects","title":"Value Objects","text":"<ul> <li>[ ] #5 <code>OriginalText</code> - validated, min 2 chars</li> <li>[ ] #6 <code>PseudonymText</code> - validated, min 3 chars</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#domain-events","title":"Domain Events","text":"<ul> <li>[ ] #7 <code>PseudonymCreated(original, pseudonym)</code></li> <li>[ ] #8 <code>PseudonymDeleted(original)</code></li> <li>[ ] #9 <code>PseudonymsApplied(file_id, replacement_count)</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #10 <code>generate_random_pseudonym(length=8) -&gt; str</code></li> <li>[ ] #11 <code>apply_pseudonyms(text, mappings) -&gt; tuple[str, int]</code> (returns text and count)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#validation","title":"Validation","text":"<ul> <li>[ ] #12 Unique originals (no duplicates)</li> <li>[ ] #13 Unique pseudonyms (no duplicates)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/source/pseudonym.py</code></li> <li><code>src/domain/source/events.py</code> (extend)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.04%20-%20Pseudonym-Entity/#agent-first-considerations","title":"Agent-First Considerations","text":"<p>Agent should NOT have access to pseudonym mappings (privacy protection).</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.05%20-%20Reference-Entity/","title":"Reference Entity","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.05%20-%20Reference-Entity/#description","title":"Description","text":"<p>Define domain entity for bibliographic References. References link source files to academic citations (journal articles, books, etc.).</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.05%20-%20Reference-Entity/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Modules: <code>manage_references.py</code>, <code>ris.py</code></li> <li>Features: RIS import, link to source files</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.05%20-%20Reference-Entity/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.05%20-%20Reference-Entity/#entity-reference","title":"Entity: Reference","text":"<ul> <li>[ ] #1 <code>id: ReferenceId</code></li> <li>[ ] #2 <code>ref_type: ReferenceType</code> (article, book, chapter, thesis, etc.)</li> <li>[ ] #3 <code>authors: list[str]</code></li> <li>[ ] #4 <code>title: str</code></li> <li>[ ] #5 <code>year: int | None</code></li> <li>[ ] #6 <code>journal: str | None</code></li> <li>[ ] #7 <code>volume: str | None</code>, <code>issue: str | None</code>, <code>pages: str | None</code></li> <li>[ ] #8 <code>doi: str | None</code>, <code>url: str | None</code></li> <li>[ ] #9 <code>keywords: list[str]</code></li> <li>[ ] #10 <code>abstract: str | None</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.05%20-%20Reference-Entity/#value-objects","title":"Value Objects","text":"<ul> <li>[ ] #11 <code>ReferenceId</code></li> <li>[ ] #12 <code>ReferenceType</code> enum (ARTICLE, BOOK, CHAPTER, THESIS, REPORT, WEB)</li> <li>[ ] #13 <code>Author</code> (for structured author names if needed)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.05%20-%20Reference-Entity/#domain-events","title":"Domain Events","text":"<ul> <li>[ ] #14 <code>ReferenceImported(ref_id, source)</code></li> <li>[ ] #15 <code>ReferenceUpdated(ref_id)</code></li> <li>[ ] #16 <code>ReferenceDeleted(ref_id)</code></li> <li>[ ] #17 <code>ReferenceLinkedToFile(ref_id, file_id)</code></li> <li>[ ] #18 <code>ReferenceUnlinkedFromFile(ref_id, file_id)</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-008.05%20-%20Reference-Entity/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/source/reference.py</code></li> <li><code>src/domain/source/events.py</code> (extend)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009%20-%20Source-Infrastructure/","title":"Source Infrastructure","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009%20-%20Source-Infrastructure/#description","title":"Description","text":"<p>Implement repositories and file system adapters for Source Management.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009%20-%20Source-Infrastructure/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] SourceRepository (SQLite)</li> <li>[ ] FileSystemAdapter (import/export files)</li> <li>[ ] TextExtractor (PDF text extraction)</li> <li>[ ] MediaHandler (A/V processing)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009%20-%20Source-Infrastructure/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/repositories/source/</code></li> <li><code>src/infrastructure/adapters/filesystem.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.01%20-%20Source-Query-Methods/","title":"Source Query Methods","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.01%20-%20Source-Query-Methods/#description","title":"Description","text":"<p>Repository query methods: find_all with filtering/sorting, find_by_type, find_by_case, find_linked, count_by_type, get_statistics. Support pagination for large source lists.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.01%20-%20Source-Query-Methods/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.01%20-%20Source-Query-Methods/#repository-methods-sourcerepository","title":"Repository Methods (SourceRepository)","text":"<ul> <li>[ ] #1 <code>find_all(filter: SourceFilter, sort: SortSpec, page: PageSpec) -&gt; Page[Source]</code></li> <li>[ ] #2 <code>find_by_type(source_type: SourceType) -&gt; List[Source]</code> - TEXT, IMAGE, AUDIO, VIDEO, PDF</li> <li>[ ] #3 <code>find_by_case(case_id: CaseId) -&gt; List[Source]</code> - sources linked to case</li> <li>[ ] #4 <code>find_linked() -&gt; List[Source]</code> - externally linked files (not copied)</li> <li>[ ] #5 <code>count_by_type() -&gt; Dict[SourceType, int]</code> - aggregate counts</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.01%20-%20Source-Query-Methods/#query-dtos-read-only","title":"Query DTOs (Read-only)","text":"<ul> <li>[ ] #6 <code>SourceFilter</code> value object: name_pattern, source_types, date_range, has_segments (bool)</li> <li>[ ] #7 <code>SortSpec</code> value object: field (name|date|type|segments), direction (ASC|DESC)</li> <li>[ ] #8 <code>PageSpec</code> value object: offset, limit (default 50)</li> <li>[ ] #9 <code>Page[T]</code> generic: items, total_count, has_more</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.01%20-%20Source-Query-Methods/#statistics-query","title":"Statistics Query","text":"<ul> <li>[ ] #10 <code>get_statistics() -&gt; SourceStatistics</code> - total files, by type, total size, coded count</li> <li>[ ] #11 <code>SourceStatistics</code> DTO: total_count, by_type (dict), total_size_bytes, coded_count, uncoded_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.01%20-%20Source-Query-Methods/#immutability","title":"Immutability","text":"<ul> <li>[ ] #12 All returned entities are frozen dataclasses</li> <li>[ ] #13 Repository converts SQLite rows \u2192 domain Source entities via factory</li> <li>[ ] #14 Queries are read-only, never modify state</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.02%20-%20File-System-Adapter/","title":"File System Adapter","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.02%20-%20File-System-Adapter/#description","title":"Description","text":"<p>FileSystemAdapter: copy_to_project, link_external, detect_encoding, check_duplicate, validate_file_type, export_file. Handle large files (&gt;2GB) with linking.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.02%20-%20File-System-Adapter/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.02%20-%20File-System-Adapter/#filesystemadapter-interface-infrastructure-adapter","title":"FileSystemAdapter Interface (Infrastructure Adapter)","text":"<ul> <li>[ ] #1 <code>copy_to_project(source_path: Path, project_dir: Path) -&gt; Result[Path, FileError]</code></li> <li>[ ] #2 <code>link_external(source_path: Path) -&gt; Result[Path, FileError]</code> - stores path reference only</li> <li>[ ] #3 <code>export_file(source: Source, dest_path: Path) -&gt; Result[Path, FileError]</code></li> <li>[ ] #4 <code>delete_file(path: Path) -&gt; Result[None, FileError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.02%20-%20File-System-Adapter/#validation-methods","title":"Validation Methods","text":"<ul> <li>[ ] #5 <code>detect_encoding(path: Path) -&gt; Encoding</code> - returns UTF-8, Latin-1, etc.</li> <li>[ ] #6 <code>check_duplicate(filename: str, project_dir: Path) -&gt; bool</code> - true if name exists</li> <li>[ ] #7 <code>validate_file_type(path: Path) -&gt; Result[SourceType, UnsupportedFormat]</code></li> <li>[ ] #8 <code>get_file_size(path: Path) -&gt; int</code> - returns bytes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.02%20-%20File-System-Adapter/#large-file-handling","title":"Large File Handling","text":"<ul> <li>[ ] #9 Files &gt; 2GB automatically linked (not copied)</li> <li>[ ] #10 <code>LARGE_FILE_THRESHOLD = 2 * 1024 * 1024 * 1024</code> constant</li> <li>[ ] #11 <code>should_link(path: Path) -&gt; bool</code> - true if size &gt; threshold</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.02%20-%20File-System-Adapter/#result-types-explicit-effects","title":"Result Types (Explicit Effects)","text":"<ul> <li>[ ] #12 <code>FileError</code> union type: FileNotFound, PermissionDenied, DiskFull, IOError</li> <li>[ ] #13 All methods return Result[T, FileError] for explicit error handling</li> <li>[ ] #14 No exceptions thrown - errors returned as values</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.02%20-%20File-System-Adapter/#pure-functions-can-be-tested-without-file-system","title":"Pure Functions (can be tested without file system)","text":"<ul> <li>[ ] #15 <code>generate_unique_filename(name: str, existing: Set[str]) -&gt; str</code> - adds suffix if needed</li> <li>[ ] #16 <code>parse_media_type(extension: str) -&gt; Optional[SourceType]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.03%20-%20Document-Text-Extractor/","title":"Document Text Extractor","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.03%20-%20Document-Text-Extractor/#description","title":"Description","text":"<p>Text extraction adapters: PDF (with page info), DOCX, ODT, RTF, EPUB, HTML. Return extracted text with position mapping for coding.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.03%20-%20Document-Text-Extractor/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.03%20-%20Document-Text-Extractor/#textextractor-protocol-interface","title":"TextExtractor Protocol (Interface)","text":"<ul> <li>[ ] #1 <code>TextExtractor</code> protocol: <code>extract(path: Path) -&gt; Result[ExtractedText, ExtractionError]</code></li> <li>[ ] #2 Each format has dedicated implementation: PDFExtractor, DocxExtractor, etc.</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.03%20-%20Document-Text-Extractor/#extractedtext-value-object-frozen-dataclass","title":"ExtractedText Value Object (frozen dataclass)","text":"<ul> <li>[ ] #3 <code>ExtractedText</code>: text (str), page_breaks (List[int]), metadata (Dict)</li> <li>[ ] #4 <code>page_breaks</code> stores character positions where pages change (for PDF)</li> <li>[ ] #5 <code>metadata</code>: title, author, page_count, word_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.03%20-%20Document-Text-Extractor/#format-specific-extractors","title":"Format-Specific Extractors","text":"<ul> <li>[ ] #6 <code>PDFExtractor</code>: uses pdfminer or PyMuPDF, tracks page boundaries</li> <li>[ ] #7 <code>DocxExtractor</code>: uses python-docx, preserves paragraph breaks</li> <li>[ ] #8 <code>OdtExtractor</code>: uses odfpy, handles OpenDocument format</li> <li>[ ] #9 <code>HtmlExtractor</code>: uses BeautifulSoup, strips tags preserving structure</li> <li>[ ] #10 <code>EpubExtractor</code>: extracts text from EPUB chapters in order</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.03%20-%20Document-Text-Extractor/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #11 <code>ExtractionError</code> union: UnsupportedFormat, CorruptFile, PasswordProtected, ExtractionFailed</li> <li>[ ] #12 Returns Result[ExtractedText, ExtractionError] - no exceptions</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.03%20-%20Document-Text-Extractor/#factory-pattern","title":"Factory Pattern","text":"<ul> <li>[ ] #13 <code>TextExtractorFactory.for_file(path: Path) -&gt; Optional[TextExtractor]</code></li> <li>[ ] #14 Factory selects extractor based on file extension</li> <li>[ ] #15 Returns None for unsupported formats</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.04%20-%20CSV-Parser-Adapter/","title":"CSV Parser Adapter","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.04%20-%20CSV-Parser-Adapter/#description","title":"Description","text":"<p>CSV parsing adapter for survey import: detect delimiter, parse headers, preview rows, stream large files. Support various encodings.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.04%20-%20CSV-Parser-Adapter/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.04%20-%20CSV-Parser-Adapter/#csvparseradapter-interface","title":"CSVParserAdapter Interface","text":"<ul> <li>[ ] #1 <code>detect_delimiter(sample: str) -&gt; DelimiterType</code> - analyzes first N lines</li> <li>[ ] #2 <code>parse_headers(path: Path, delimiter: DelimiterType) -&gt; List[str]</code></li> <li>[ ] #3 <code>preview_rows(path: Path, config: SurveyConfig, limit: int = 10) -&gt; List[List[str]]</code></li> <li>[ ] #4 <code>stream_rows(path: Path, config: SurveyConfig) -&gt; Iterator[List[str]]</code> - memory efficient</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.04%20-%20CSV-Parser-Adapter/#encoding-detection","title":"Encoding Detection","text":"<ul> <li>[ ] #5 <code>detect_encoding(path: Path) -&gt; Encoding</code> - uses chardet or similar</li> <li>[ ] #6 Supported encodings: UTF-8, UTF-16, Latin-1, CP1252, ASCII</li> <li>[ ] #7 Falls back to UTF-8 with error replacement if detection fails</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.04%20-%20CSV-Parser-Adapter/#validation","title":"Validation","text":"<ul> <li>[ ] #8 <code>validate_csv(path: Path, config: SurveyConfig) -&gt; Result[CSVValidation, CSVError]</code></li> <li>[ ] #9 <code>CSVValidation</code>: row_count, column_count, empty_rows, inconsistent_rows</li> <li>[ ] #10 <code>CSVError</code> union: FileNotFound, EncodingError, MalformedCSV, InconsistentColumns</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.04%20-%20CSV-Parser-Adapter/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #11 <code>parse_row(line: str, delimiter: str) -&gt; List[str]</code> - handles quoted fields</li> <li>[ ] #12 <code>infer_column_types(rows: List[List[str]]) -&gt; List[ColumnType]</code> - based on sample</li> <li>[ ] #13 <code>clean_value(value: str) -&gt; str</code> - trims whitespace, normalizes quotes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.04%20-%20CSV-Parser-Adapter/#streaming-support","title":"Streaming Support","text":"<ul> <li>[ ] #14 Large files (&gt;100MB) processed via streaming, not loaded into memory</li> <li>[ ] #15 Progress callback: <code>on_progress(rows_processed: int, total_rows: int)</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/","title":"Media File Validator","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/#description","title":"Description","text":"<p>Media file validation: check format support, extract metadata (duration, resolution), validate file integrity. Support mp3, mp4, wav, mkv, mov.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/#mediavalidator-interface","title":"MediaValidator Interface","text":"<ul> <li>[ ] #1 <code>validate(path: Path) -&gt; Result[MediaInfo, MediaError]</code></li> <li>[ ] #2 <code>is_supported_format(path: Path) -&gt; bool</code> - checks extension and magic bytes</li> <li>[ ] #3 <code>extract_metadata(path: Path) -&gt; Result[MediaMetadata, MediaError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/#mediainfo-value-object-frozen-dataclass","title":"MediaInfo Value Object (frozen dataclass)","text":"<ul> <li>[ ] #4 <code>MediaInfo</code>: media_type (AUDIO|VIDEO|IMAGE), format, is_valid, metadata</li> <li>[ ] #5 <code>AudioMetadata</code>: duration_ms, sample_rate, channels, bitrate, codec</li> <li>[ ] #6 <code>VideoMetadata</code>: duration_ms, width, height, fps, codec, has_audio</li> <li>[ ] #7 <code>ImageMetadata</code>: width, height, format, color_mode</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/#supported-formats","title":"Supported Formats","text":"<ul> <li>[ ] #8 Audio: mp3, wav, ogg, flac, m4a, aac</li> <li>[ ] #9 Video: mp4, mkv, mov, avi, webm</li> <li>[ ] #10 Image: jpg, jpeg, png, gif, bmp, tiff</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/#validation-checks","title":"Validation Checks","text":"<ul> <li>[ ] #11 File exists and is readable</li> <li>[ ] #12 Magic bytes match expected format (not just extension)</li> <li>[ ] #13 File is not corrupted (can be opened by media library)</li> <li>[ ] #14 Duration &gt; 0 for audio/video</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/#error-types","title":"Error Types","text":"<ul> <li>[ ] #15 <code>MediaError</code> union: FileNotFound, UnsupportedFormat, CorruptFile, MetadataExtractionFailed</li> <li>[ ] #16 Returns Result[T, MediaError] - explicit error handling</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.05%20-%20Media-File-Validator/#implementation","title":"Implementation","text":"<ul> <li>[ ] #17 Uses ffprobe or similar for audio/video metadata</li> <li>[ ] #18 Uses Pillow for image metadata</li> <li>[ ] #19 Adapter wraps external tools, provides clean interface</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/","title":"Pseudonym Repository","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#description","title":"Description","text":"<p>Repository and services for Pseudonym persistence and application.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Storage: <code>pseudonyms.json</code> file in project folder</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#pseudonymrepository-interface","title":"PseudonymRepository Interface","text":"<ul> <li>[ ] #1 <code>get_all() -&gt; list[PseudonymMapping]</code></li> <li>[ ] #2 <code>add(mapping: PseudonymMapping) -&gt; Result[None, DuplicateError]</code></li> <li>[ ] #3 <code>delete(original: str) -&gt; Result[None, NotFoundError]</code></li> <li>[ ] #4 <code>find_by_original(original: str) -&gt; PseudonymMapping | None</code></li> <li>[ ] #5 <code>find_by_pseudonym(pseudonym: str) -&gt; PseudonymMapping | None</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#json-implementation","title":"JSON Implementation","text":"<ul> <li>[ ] #6 Load from <code>{project_path}/pseudonyms.json</code></li> <li>[ ] #7 Save on each modification</li> <li>[ ] #8 Handle missing file (create empty)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#pseudonymservice","title":"PseudonymService","text":"<ul> <li>[ ] #9 <code>apply_to_file(file_id) -&gt; int</code> (returns replacement count)</li> <li>[ ] #10 <code>apply_to_all_files() -&gt; dict[int, int]</code> (file_id \u2192 count)</li> <li>[ ] #11 <code>preview_replacements(file_id) -&gt; list[tuple[str, str, int]]</code> (original, pseudonym, position)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#safety","title":"Safety","text":"<ul> <li>[ ] #12 Backup file before applying pseudonyms</li> <li>[ ] #13 Transaction-wrapped file updates</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/source/pseudonym_repository.py</code></li> <li><code>src/infrastructure/source/pseudonym_service.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.06%20-%20Pseudonym-Repository/#storage-format","title":"Storage Format","text":"<pre><code>{\n  \"mappings\": [\n    {\"original\": \"John Smith\", \"pseudonym\": \"Participant A\", \"created\": \"2026-01-30\"}\n  ]\n}\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/","title":"Reference Repository","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/#description","title":"Description","text":"<p>Repository and RIS importer for bibliographic References.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Tables: <code>refs</code>, <code>source_refs</code> (linking table)</li> <li>Module: <code>ris.py</code> for RIS parsing</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/#referencerepository-interface","title":"ReferenceRepository Interface","text":"<ul> <li>[ ] #1 <code>create(reference: Reference) -&gt; ReferenceId</code></li> <li>[ ] #2 <code>get_by_id(id: ReferenceId) -&gt; Reference | None</code></li> <li>[ ] #3 <code>get_all() -&gt; list[Reference]</code></li> <li>[ ] #4 <code>get_by_file(file_id: int) -&gt; list[Reference]</code></li> <li>[ ] #5 <code>update(reference: Reference) -&gt; None</code></li> <li>[ ] #6 <code>delete(id: ReferenceId) -&gt; None</code></li> <li>[ ] #7 <code>link_to_file(ref_id, file_id) -&gt; None</code></li> <li>[ ] #8 <code>unlink_from_file(ref_id, file_id) -&gt; None</code></li> <li>[ ] #9 <code>get_files_for_reference(ref_id) -&gt; list[int]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/#risimporter-service","title":"RISImporter Service","text":"<ul> <li>[ ] #10 <code>parse_ris_file(path) -&gt; list[Reference]</code></li> <li>[ ] #11 Map RIS tags to Reference fields (using rispy TAG_KEY_MAPPING)</li> <li>[ ] #12 Handle multiple reference types</li> <li>[ ] #13 <code>detect_duplicates(references) -&gt; list[tuple[Reference, Reference]]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/#sqlite-implementation","title":"SQLite Implementation","text":"<ul> <li>[ ] #14 <code>refs</code> table with all fields</li> <li>[ ] #15 <code>source_refs</code> linking table (fid, refid)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/source/reference_repository.py</code></li> <li><code>src/infrastructure/source/ris_importer.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-009.07%20-%20Reference-Repository/#database-schema","title":"Database Schema","text":"<pre><code>CREATE TABLE refs (\n    refid INTEGER PRIMARY KEY,\n    reftype TEXT,\n    authors TEXT,  -- JSON array\n    title TEXT,\n    year INTEGER,\n    journal TEXT,\n    volume TEXT,\n    issue TEXT,\n    pages TEXT,\n    doi TEXT,\n    url TEXT,\n    keywords TEXT,  -- JSON array\n    abstract TEXT\n);\n\nCREATE TABLE source_refs (\n    id INTEGER PRIMARY KEY,\n    fid INTEGER REFERENCES source(id),\n    refid INTEGER REFERENCES refs(refid)\n);\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010%20-%20Source-Application/","title":"Source Application","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010%20-%20Source-Application/#description","title":"Description","text":"<p>Implement the application layer for Source Management with Agent tool registration.</p> <p>Agent-First: Controller serves both UI and agent. Agent tools registered.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010%20-%20Source-Application/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] SourceController implementation</li> <li>[ ] Import commands (ImportFile, ImportFolder)</li> <li>[ ] Delete and organize commands</li> <li>[ ] Events published for state changes</li> <li>[ ] SignalBridge wiring complete (domain events \u2192 Qt signals)</li> <li>[ ] Agent tools registered (list_sources, read_source)</li> <li>[ ] Trust level enforcement</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010%20-%20Source-Application/#subtasks","title":"Subtasks","text":"<p>Ordered by dependency flow: Controller \u2192 Commands \u2192 Wiring \u2192 Agent</p> ID Subtask Status Wires Controller &amp; Commands QC-010.01 File Import Commands To Do Controller \u2192 Deriver \u2192 Repo QC-010.02 File Management Commands To Do Controller \u2192 Deriver \u2192 Repo QC-010.03 Speaker Detection Commands To Do Controller \u2192 Deriver \u2192 Repo QC-010.04 Case Linking Commands To Do Controller \u2192 Deriver \u2192 Repo QC-010.05 Survey Import Command To Do Controller \u2192 Batch Import QC-010.08 Pseudonym Commands To Do Controller \u2192 Deriver \u2192 Repo QC-010.09 Reference Commands To Do Controller \u2192 Deriver \u2192 Repo Signal Bridge Wiring QC-010.06 Source Signal Bridge To Do EventBus \u2192 Bridge \u2192 Qt Signals QC-010.10 Signal Payloads To Do Event \u2192 Payload DTOs QC-010.11 Event Converters To Do Converter per event type Agent Integration QC-010.07 Source Agent Tools To Do MCP schemas + registration QC-010.12 Integration Tests To Do End-to-end flow tests"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010%20-%20Source-Application/#event-flow-map","title":"Event Flow Map","text":"Domain Event Signal Bridge Signal UI Subscribers SourceImported <code>source_imported</code> SourceTable, ActivityPanel SourceRenamed <code>source_renamed</code> SourceTable SourceDeleted <code>source_deleted</code> SourceTable, CodingScreens SourceMemoUpdated <code>source_memo_updated</code> SourcePreview SpeakerDetected <code>speaker_detected</code> SpeakerDialog TranscriptUpdated <code>transcript_updated</code> AVCodingScreen TextExtracted <code>text_extracted</code> PDFCodingScreen CaseLinked <code>case_linked</code> CaseLinkingPanel CaseUnlinked <code>case_unlinked</code> CaseLinkingPanel"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010%20-%20Source-Application/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/controllers/source_controller.py</code></li> <li><code>src/application/signal_bridge/source_bridge.py</code></li> <li><code>src/application/signal_bridge/source_payloads.py</code></li> <li><code>src/application/signal_bridge/source_converters.py</code></li> <li><code>src/agent_context/tools/source.py</code></li> <li><code>src/agent_context/schemas/source_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/","title":"File Import Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/#description","title":"Description","text":"<p>Commands: ImportFile (copy), ImportLinkedFile (reference), ImportFolder (batch). Handle encoding detection, duplicate check, progress reporting.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>import_file(path: Path, copy: bool = True) -&gt; Result[SourceImported, ImportError]</code></li> <li>[ ] #2 <code>import_linked_file(path: Path) -&gt; Result[SourceImported, ImportError]</code> - reference only</li> <li>[ ] #3 <code>import_folder(folder: Path, recursive: bool) -&gt; Result[BatchImportCompleted, ImportError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/#deriver-functions-pure-in-functional-core","title":"Deriver Functions (Pure, in Functional Core)","text":"<ul> <li>[ ] #4 <code>derive_source_entity(path, source_type, encoding, owner) -&gt; Result[Source, ImportError]</code></li> <li>[ ] #5 <code>derive_import_decision(file_size, is_media) -&gt; ImportMode</code> - COPY or LINK</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/#import-flow-per-fddd-pattern","title":"Import Flow (per fDDD pattern)","text":"<ul> <li>[ ] #6 Controller: validate file \u2192 detect type \u2192 detect encoding \u2192 call deriver \u2192 persist \u2192 publish event</li> <li>[ ] #7 On success: emit SourceImported event with source_id, source_type, path</li> <li>[ ] #8 On failure: return ImportError without side effects</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/#validation-invariants","title":"Validation (Invariants)","text":"<ul> <li>[ ] #9 <code>is_supported_file_type(path: Path) -&gt; bool</code></li> <li>[ ] #10 <code>is_duplicate_filename(name: str, existing: List[str]) -&gt; bool</code></li> <li>[ ] #11 <code>is_file_accessible(path: Path) -&gt; bool</code> - readable, not locked</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/#progress-reporting","title":"Progress Reporting","text":"<ul> <li>[ ] #12 <code>progress_callback: Optional[Callable[[int, int, str], None]]</code> - (current, total, filename)</li> <li>[ ] #13 Callback invoked per file during folder import</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.01%20-%20File-Import-Commands/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #14 <code>ImportError</code> union: FileNotFound, UnsupportedFormat, DuplicateName, EncodingError, DiskFull</li> <li>[ ] #15 Returns Result[T, ImportError] - explicit error values, no exceptions</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.02%20-%20File-Management-Commands/","title":"File Management Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.02%20-%20File-Management-Commands/#description","title":"Description","text":"<p>Commands: RenameSource, BulkRenameSource (pattern), DeleteSource (with undo), ExportSource, UpdateSourceMemo. Emit domain events.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.02%20-%20File-Management-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.02%20-%20File-Management-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>rename_source(source_id, new_name) -&gt; Result[SourceRenamed, RenameError]</code></li> <li>[ ] #2 <code>bulk_rename_sources(source_ids, pattern, start_num) -&gt; Result[BulkRenameCompleted, RenameError]</code></li> <li>[ ] #3 <code>delete_source(source_id) -&gt; Result[SourceDeleted, DeleteError]</code></li> <li>[ ] #4 <code>export_source(source_id, dest_path) -&gt; Result[SourceExported, ExportError]</code></li> <li>[ ] #5 <code>update_source_memo(source_id, memo) -&gt; Result[SourceMemoUpdated, UpdateError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.02%20-%20File-Management-Commands/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #6 <code>derive_rename_event(source, new_name, existing_names) -&gt; Result[SourceRenamed, RenameError]</code></li> <li>[ ] #7 <code>derive_bulk_rename(sources, pattern, start) -&gt; List[Tuple[SourceId, str]]</code> - generates new names</li> <li>[ ] #8 <code>derive_delete_event(source, has_segments) -&gt; Result[SourceDeleted, DeleteError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.02%20-%20File-Management-Commands/#invariants","title":"Invariants","text":"<ul> <li>[ ] #9 <code>is_name_unique(name: str, existing: List[str]) -&gt; bool</code></li> <li>[ ] #10 <code>is_source_deletable(source_id, segments) -&gt; bool</code> - warns if has coded segments</li> <li>[ ] #11 <code>is_valid_rename_pattern(pattern: str) -&gt; bool</code> - must contain {n} placeholder</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.02%20-%20File-Management-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #12 On success: persist change \u2192 publish domain event \u2192 return Result</li> <li>[ ] #13 Events: SourceRenamed, SourceDeleted, SourceMemoUpdated, SourceExported</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.02%20-%20File-Management-Commands/#undo-support","title":"Undo Support","text":"<ul> <li>[ ] #14 Delete stores source in soft-delete state (can be restored)</li> <li>[ ] #15 <code>restore_source(source_id) -&gt; Result[SourceRestored, RestoreError]</code> for undo</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.03%20-%20Speaker-Detection-Commands/","title":"Speaker Detection Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.03%20-%20Speaker-Detection-Commands/#description","title":"Description","text":"<p>Commands: DetectSpeakers (extract from transcript), CreateSpeakerCodes (create codes for speakers). Support multiple speaker formats.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.03%20-%20Speaker-Detection-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.03%20-%20Speaker-Detection-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>detect_speakers(source_id, format: SpeakerFormat = AUTO) -&gt; Result[SpeakersDetected, DetectionError]</code></li> <li>[ ] #2 <code>create_speaker_codes(source_id, speakers: List[Speaker]) -&gt; Result[SpeakerCodesCreated, CreateError]</code></li> <li>[ ] #3 <code>detect_and_create_speakers(source_id) -&gt; Result[SpeakerCodesCreated, Error]</code> - combined operation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.03%20-%20Speaker-Detection-Commands/#deriver-functions-pure-in-functional-core","title":"Deriver Functions (Pure, in Functional Core)","text":"<ul> <li>[ ] #4 <code>detect_speakers(text: str, format: SpeakerFormat) -&gt; List[SpeakerMatch]</code> - pure text analysis</li> <li>[ ] #5 <code>derive_speaker_codes(speakers: List[Speaker], owner) -&gt; List[Code]</code> - creates Code entities</li> <li>[ ] #6 <code>assign_speaker_colors(speakers: List[str]) -&gt; Dict[str, Color]</code> - auto-assigns distinct colors</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.03%20-%20Speaker-Detection-Commands/#speaker-detection-pure-functions","title":"Speaker Detection (Pure Functions)","text":"<ul> <li>[ ] #7 Detects patterns: \"Name:\" (colon), \"[Name]\" (bracket), \"{Name}\" (brace)</li> <li>[ ] #8 AUTO format tries all patterns, uses most frequent</li> <li>[ ] #9 Returns speaker names with occurrence count and positions</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.03%20-%20Speaker-Detection-Commands/#cross-context-coordination","title":"Cross-Context Coordination","text":"<ul> <li>[ ] #10 Creates \"Speakers\" category in Coding context if not exists</li> <li>[ ] #11 Creates Code for each speaker with auto-assigned color</li> <li>[ ] #12 Emits SpeakersDetected event (Source context) + CodeCreated events (Coding context)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.03%20-%20Speaker-Detection-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #13 <code>SpeakersDetected</code> event: source_id, speakers (list), format_used</li> <li>[ ] #14 <code>SpeakerCodesCreated</code> event: source_id, code_ids (list), category_id</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/","title":"Case Linking Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/#description","title":"Description","text":"<p>Commands: LinkSourceToCase, UnlinkSourceFromCase, BulkLinkSources. Cross-context command coordinating with Cases domain.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>link_source_to_case(source_id, case_id, position: Optional[TextPosition]) -&gt; Result[SourceCaseLinked, LinkError]</code></li> <li>[ ] #2 <code>unlink_source_from_case(source_id, case_id) -&gt; Result[SourceCaseUnlinked, UnlinkError]</code></li> <li>[ ] #3 <code>bulk_link_sources(source_ids: List[SourceId], case_id) -&gt; Result[BulkLinkCompleted, LinkError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #4 <code>derive_link_event(source, case, position) -&gt; Result[SourceCaseLinked, LinkError]</code></li> <li>[ ] #5 <code>derive_partial_link(source, case, start, end) -&gt; Result[SourceCaseLinked, LinkError]</code> - partial text</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/#invariants","title":"Invariants","text":"<ul> <li>[ ] #6 <code>is_source_exists(source_id) -&gt; bool</code></li> <li>[ ] #7 <code>is_case_exists(case_id) -&gt; bool</code></li> <li>[ ] #8 <code>is_link_unique(source_id, case_id) -&gt; bool</code> - not already linked</li> <li>[ ] #9 <code>is_position_valid(position, source) -&gt; bool</code> - for partial links</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/#cross-context-coordination-published-language","title":"Cross-Context Coordination (Published Language)","text":"<ul> <li>[ ] #10 Source context emits <code>SourceCaseLinked</code> / <code>SourceCaseUnlinked</code> events</li> <li>[ ] #11 Case context subscribes to these events to update its membership model</li> <li>[ ] #12 Events form the contract between Source and Case bounded contexts</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/#event-structure","title":"Event Structure","text":"<ul> <li>[ ] #13 <code>SourceCaseLinked</code> event: source_id, case_id, link_type (FULL|PARTIAL), position (optional)</li> <li>[ ] #14 <code>SourceCaseUnlinked</code> event: source_id, case_id</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.04%20-%20Case-Linking-Commands/#partial-linking","title":"Partial Linking","text":"<ul> <li>[ ] #15 Partial link stores TextPosition (start, end) for text segment of source</li> <li>[ ] #16 Full link has position = None (entire source linked)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/","title":"Survey Import Command","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/#description","title":"Description","text":"<p>Command: ImportSurvey. Parse CSV with configured delimiter, map columns to attributes, collate text responses into sources.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/#controller-command-imperative-shell","title":"Controller Command (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>import_survey(path: Path, config: SurveyConfig) -&gt; Result[SurveyImported, ImportError]</code></li> <li>[ ] #2 <code>preview_survey(path: Path, config: SurveyConfig, rows: int = 10) -&gt; Result[SurveyPreview, PreviewError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #3 <code>derive_sources_from_survey(rows, config, owner) -&gt; List[Source]</code> - creates Source entities</li> <li>[ ] #4 <code>derive_cases_from_survey(rows, config, owner) -&gt; List[Case]</code> - creates Case entities if configured</li> <li>[ ] #5 <code>derive_attributes_from_columns(columns, config) -&gt; List[AttributeType]</code> - auto-creates types</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/#collation-modes","title":"Collation Modes","text":"<ul> <li>[ ] #6 <code>PER_COLUMN</code>: Each text column becomes a separate source</li> <li>[ ] #7 <code>PER_ROW</code>: Each row becomes a source (concatenated text columns)</li> <li>[ ] #8 <code>SINGLE</code>: All text collated into single source</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/#cross-context-coordination","title":"Cross-Context Coordination","text":"<ul> <li>[ ] #9 Creates Cases from identifier column (if configured)</li> <li>[ ] #10 Creates AttributeTypes in Case context (if attribute columns mapped)</li> <li>[ ] #11 Links Sources to Cases based on row correspondence</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #12 <code>SurveyImported</code> event: source_ids, case_ids (if created), attribute_types_created, row_count</li> <li>[ ] #13 Individual SourceImported events for each created source</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.05%20-%20Survey-Import-Command/#progress-reporting","title":"Progress Reporting","text":"<ul> <li>[ ] #14 <code>progress_callback: Optional[Callable[[int, int], None]]</code> - (rows_processed, total_rows)</li> <li>[ ] #15 Streaming processing for large files (&gt;100MB)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/","title":"Source Signal Bridge","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/#description","title":"Description","text":"<p>Bridge between domain events and UI signals for the Source context. Enable UI observation of source changes from both UI and Agent. Thread-safe emission.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/#sourcesignalbridge-class","title":"SourceSignalBridge Class","text":"<ul> <li>[ ] #1 Extends BaseSignalBridge from QC-003.01</li> <li>[ ] #2 Singleton instance accessible via <code>SourceSignalBridge.instance()</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/#ui-signals","title":"UI Signals","text":"<ul> <li>[ ] #3 <code>source_imported</code> signal - emits SourceImported payload</li> <li>[ ] #4 <code>source_renamed</code> signal - emits SourceRenamed payload</li> <li>[ ] #5 <code>source_deleted</code> signal - emits SourceDeleted payload</li> <li>[ ] #6 <code>source_memo_updated</code> signal - emits SourceMemoUpdated payload</li> <li>[ ] #7 <code>speakers_detected</code> signal - emits SpeakersDetected payload</li> <li>[ ] #8 <code>source_case_linked</code> signal - emits SourceCaseLinked payload</li> <li>[ ] #9 <code>survey_imported</code> signal - emits SurveyImported payload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/#event-bus-subscription","title":"Event Bus Subscription","text":"<ul> <li>[ ] #10 Subscribe to all Source context events on EventBus at initialization</li> <li>[ ] #11 Event handler maps event type \u2192 corresponding UI signal emission</li> <li>[ ] #12 Dispatcher method routes domain events to converters</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/#thread-safety","title":"Thread Safety","text":"<ul> <li>[ ] #13 Thread-safe emission (inherits from BaseSignalBridge)</li> <li>[ ] #14 Agent operations (from background thread) safely emit to UI thread</li> <li>[ ] #15 UI operations (from UI thread) emit directly</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/#architecture-pattern","title":"Architecture Pattern","text":"<ul> <li>[ ] #16 Bridge is in Application layer - decouples UI from Event Bus</li> <li>[ ] #17 UI widgets connect to bridge signals, not directly to EventBus</li> <li>[ ] #18 Follows same pattern as CodingSignalBridge (QC-006.04)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.06%20-%20Source-Signal-Bridge/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: - Inherits from <code>QObject</code> via BaseSignalBridge - Signals declared as <code>pyqtSignal(object)</code> - Uses <code>QMetaObject.invokeMethod</code> with <code>Qt.QueuedConnection</code> (via base class)</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.07%20-%20Source-Agent-Tools/","title":"Source Agent Tools","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.07%20-%20Source-Agent-Tools/#description","title":"Description","text":"<p>Agent tools: import_file (NOTIFY), rename_source (NOTIFY), delete_source (REQUIRE), detect_speakers (SUGGEST), import_survey (REQUIRE). Register with agent server.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.07%20-%20Source-Agent-Tools/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.07%20-%20Source-Agent-Tools/#agent-tool-schemas","title":"Agent Tool Schemas","text":"<ul> <li>[ ] #1 <code>import_file</code> tool schema:</li> <li>Input: path (str), copy (bool, default true)</li> <li>Output: source_id, source_type, name</li> <li> <p>Trust Level: NOTIFY (executes, user notified)</p> </li> <li> <p>[ ] #2 <code>rename_source</code> tool schema:</p> </li> <li>Input: source_id, new_name</li> <li>Output: success (bool), old_name, new_name</li> <li> <p>Trust Level: NOTIFY</p> </li> <li> <p>[ ] #3 <code>delete_source</code> tool schema:</p> </li> <li>Input: source_id</li> <li>Output: success (bool), deleted_segments_count</li> <li> <p>Trust Level: REQUIRE (requires explicit approval - destructive)</p> </li> <li> <p>[ ] #4 <code>detect_speakers</code> tool schema:</p> </li> <li>Input: source_id, format (auto|colon|bracket|brace)</li> <li>Output: speakers (list of names), count</li> <li> <p>Trust Level: SUGGEST (proposes action, user approves)</p> </li> <li> <p>[ ] #5 <code>import_survey</code> tool schema:</p> </li> <li>Input: path, delimiter, has_header, column_mappings</li> <li>Output: sources_created, cases_created, rows_processed</li> <li>Trust Level: REQUIRE (bulk operation, needs approval)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.07%20-%20Source-Agent-Tools/#read-only-tools-autonomous","title":"Read-Only Tools (AUTONOMOUS)","text":"<ul> <li>[ ] #6 <code>list_sources</code> tool: filter by type, return source list</li> <li>[ ] #7 <code>get_source_text</code> tool: return source content for analysis</li> <li>[ ] #8 Trust Level: AUTONOMOUS (read-only, no approval needed)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.07%20-%20Source-Agent-Tools/#schema-structure","title":"Schema Structure","text":"<ul> <li>[ ] #9 Each schema defines: name, description, inputSchema (JSON Schema), trust_level</li> <li>[ ] #10 Schemas registered with agent server on startup</li> <li>[ ] #11 Resource URIs: <code>qualcoder://sources/tools/{tool_name}</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.07%20-%20Source-Agent-Tools/#controller-integration","title":"Controller Integration","text":"<ul> <li>[ ] #12 Each agent tool invokes corresponding Controller command</li> <li>[ ] #13 Controller returns Result[Event, Failure] \u2192 tool returns success/error</li> <li>[ ] #14 Agent actions emit same domain events as UI actions</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.07%20-%20Source-Agent-Tools/#implementation-notes","title":"Implementation Notes","text":"<p>For MCP (Model Context Protocol): - Schemas follow MCP Tool Schema specification - Registered via MCP server's tool registration API</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.08%20-%20Pseudonym-Commands/","title":"Pseudonym Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.08%20-%20Pseudonym-Commands/#description","title":"Description","text":"<p>Application layer commands for Pseudonym management.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.08%20-%20Pseudonym-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.08%20-%20Pseudonym-Commands/#controller-commands","title":"Controller Commands","text":"<ul> <li>[ ] #1 <code>add_pseudonym(original, pseudonym?) -&gt; Result[PseudonymMapping, Error]</code></li> <li>[ ] #2 <code>delete_pseudonym(original) -&gt; Result[None, NotFoundError]</code></li> <li>[ ] #3 <code>list_pseudonyms() -&gt; list[PseudonymMapping]</code></li> <li>[ ] #4 <code>generate_pseudonym() -&gt; str</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.08%20-%20Pseudonym-Commands/#apply-commands","title":"Apply Commands","text":"<ul> <li>[ ] #5 <code>preview_apply(file_ids?) -&gt; dict[int, list[Match]]</code></li> <li>[ ] #6 <code>apply_pseudonyms(file_ids?) -&gt; Result[ApplyReport, Error]</code></li> <li>[ ] #7 <code>ApplyReport</code>: files_modified, total_replacements, backup_path</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.08%20-%20Pseudonym-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #8 Publish <code>PseudonymCreated</code> on add</li> <li>[ ] #9 Publish <code>PseudonymDeleted</code> on delete</li> <li>[ ] #10 Publish <code>PseudonymsApplied</code> on apply</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.08%20-%20Pseudonym-Commands/#validation","title":"Validation","text":"<ul> <li>[ ] #11 Check for duplicate original text</li> <li>[ ] #12 Check for duplicate pseudonym text</li> <li>[ ] #13 Validate minimum lengths</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.08%20-%20Pseudonym-Commands/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/source/pseudonym_controller.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.09%20-%20Reference-Commands/","title":"Reference Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.09%20-%20Reference-Commands/#description","title":"Description","text":"<p>Application layer commands for Reference/Bibliography management.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.09%20-%20Reference-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.09%20-%20Reference-Commands/#crud-commands","title":"CRUD Commands","text":"<ul> <li>[ ] #1 <code>create_reference(data) -&gt; Result[ReferenceId, ValidationError]</code></li> <li>[ ] #2 <code>update_reference(ref_id, data) -&gt; Result[None, Error]</code></li> <li>[ ] #3 <code>delete_reference(ref_id) -&gt; Result[None, NotFoundError]</code></li> <li>[ ] #4 <code>get_reference(ref_id) -&gt; Reference | None</code></li> <li>[ ] #5 <code>list_references(filter?) -&gt; list[Reference]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.09%20-%20Reference-Commands/#import-commands","title":"Import Commands","text":"<ul> <li>[ ] #6 <code>import_ris_file(path) -&gt; Result[ImportReport, ImportError]</code></li> <li>[ ] #7 <code>ImportReport</code>: imported_count, skipped_duplicates, errors</li> <li>[ ] #8 <code>preview_ris_import(path) -&gt; list[Reference]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.09%20-%20Reference-Commands/#linking-commands","title":"Linking Commands","text":"<ul> <li>[ ] #9 <code>link_reference_to_file(ref_id, file_id) -&gt; Result[None, Error]</code></li> <li>[ ] #10 <code>unlink_reference_from_file(ref_id, file_id) -&gt; Result[None, Error]</code></li> <li>[ ] #11 <code>get_references_for_file(file_id) -&gt; list[Reference]</code></li> <li>[ ] #12 <code>get_files_for_reference(ref_id) -&gt; list[SourceFile]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.09%20-%20Reference-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #13 Publish domain events for all operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.09%20-%20Reference-Commands/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/source/reference_controller.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/","title":"Signal Payloads (Source)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#description","title":"Description","text":"<p>Define Qt-friendly payload dataclasses for the Source context. These are emitted by SignalBridge signals to UI widgets.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#source-payloads","title":"Source Payloads","text":"<ul> <li>[ ] #1 <code>SourceImportedPayload</code>: source_id (str), name (str), media_type (str), file_path (str), size_bytes (int)</li> <li>[ ] #2 <code>SourceRenamedPayload</code>: source_id (str), old_name (str), new_name (str)</li> <li>[ ] #3 <code>SourceDeletedPayload</code>: source_id (str), name (str)</li> <li>[ ] #4 <code>SourceMemoUpdatedPayload</code>: source_id (str), memo (str?)</li> <li>[ ] #5 <code>TextExtractedPayload</code>: source_id (str), char_count (int), preview (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#speaker-payloads","title":"Speaker Payloads","text":"<ul> <li>[ ] #6 <code>SpeakerDetectedPayload</code>: source_id (str), speakers (list[str]), pattern_used (str)</li> <li>[ ] #7 <code>SpeakerCreatedPayload</code>: speaker_id (str), name (str), source_id (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#transcript-payloads","title":"Transcript Payloads","text":"<ul> <li>[ ] #8 <code>TranscriptUpdatedPayload</code>: source_id (str), transcript_preview (str), word_count (int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#case-linking-payloads","title":"Case Linking Payloads","text":"<ul> <li>[ ] #9 <code>CaseLinkedPayload</code>: source_id (str), case_id (str), case_name (str), position_start (int?), position_end (int?)</li> <li>[ ] #10 <code>CaseUnlinkedPayload</code>: source_id (str), case_id (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#batch-operation-payloads","title":"Batch Operation Payloads","text":"<ul> <li>[ ] #11 <code>FolderImportedPayload</code>: folder_path (str), sources_count (int), sources (list[str])</li> <li>[ ] #12 <code>SurveyImportedPayload</code>: file_path (str), cases_count (int), sources_count (int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#design-rules","title":"Design Rules","text":"<ul> <li>[ ] #13 All payloads are frozen dataclasses</li> <li>[ ] #14 Use primitive types only (str, int, float, bool)</li> <li>[ ] #15 Include display-ready data (e.g., case_name alongside case_id)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.10%20-%20Signal-Payloads/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/source_payloads.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.11%20-%20Event-Converters/","title":"Event Converters (Source)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.11%20-%20Event-Converters/#description","title":"Description","text":"<p>Implement converters that transform Source domain events into signal payloads.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.11%20-%20Event-Converters/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.11%20-%20Event-Converters/#converters","title":"Converters","text":"<ul> <li>[ ] #1 <code>SourceImportedConverter</code>: SourceImported \u2192 SourceImportedPayload</li> <li>[ ] #2 <code>SourceRenamedConverter</code>: SourceRenamed \u2192 SourceRenamedPayload</li> <li>[ ] #3 <code>SourceDeletedConverter</code>: SourceDeleted \u2192 SourceDeletedPayload</li> <li>[ ] #4 <code>SourceMemoUpdatedConverter</code>: SourceMemoUpdated \u2192 SourceMemoUpdatedPayload</li> <li>[ ] #5 <code>TextExtractedConverter</code>: TextExtracted \u2192 TextExtractedPayload</li> <li>[ ] #6 <code>SpeakerDetectedConverter</code>: SpeakerDetected \u2192 SpeakerDetectedPayload</li> <li>[ ] #7 <code>TranscriptUpdatedConverter</code>: TranscriptUpdated \u2192 TranscriptUpdatedPayload</li> <li>[ ] #8 <code>CaseLinkedConverter</code>: CaseLinked \u2192 CaseLinkedPayload</li> <li>[ ] #9 <code>CaseUnlinkedConverter</code>: CaseUnlinked \u2192 CaseUnlinkedPayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.11%20-%20Event-Converters/#registry","title":"Registry","text":"<ul> <li>[ ] #10 Register all converters in <code>SourceConverterRegistry</code></li> <li>[ ] #11 Registry used by SourceSignalBridge</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.11%20-%20Event-Converters/#testing","title":"Testing","text":"<ul> <li>[ ] #12 Unit tests for each converter</li> <li>[ ] #13 Tests verify all fields mapped correctly</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-010.11%20-%20Event-Converters/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/source_converters.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011%20-%20Source-Presentation/","title":"Source Presentation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011%20-%20Source-Presentation/#description","title":"Description","text":"<p>Build the UI screens for Source Management with agent observation.</p> <p>Agent-First: Shows when agent is reading sources. Import actions by agent show badges.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011%20-%20Source-Presentation/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] File manager screen (mockup: <code>phase1_file_manager.html</code>)</li> <li>[ ] Import dialog</li> <li>[ ] Source preview panels</li> <li>[ ] Folder tree widget</li> <li>[ ] Agent activity badges on agent-imported sources</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011%20-%20Source-Presentation/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/sources/</code></li> <li>Mockup: <code>mockups/phase1_file_manager.html</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.01%20-%20Sources-Table-Panel/","title":"Sources Table Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.01%20-%20Sources-Table-Panel/#description","title":"Description","text":"<p>Main file/source list table with sorting, filtering, and column management. Reference: QualCoder manage_files.py table display features.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.01%20-%20Sources-Table-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.01%20-%20Sources-Table-Panel/#table-display","title":"Table Display","text":"<ul> <li>[ ] #1 Table with columns: checkbox, name (with icon), type, date added, cases, origin, status</li> <li>[ ] #2 Sortable columns (click header to sort ascending/descending)</li> <li>[ ] #3 Column show/hide via header context menu</li> <li>[ ] #4 Resizable column widths</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.01%20-%20Sources-Table-Panel/#filtering","title":"Filtering","text":"<ul> <li>[ ] #5 Filter rows by exact value match</li> <li>[ ] #6 Filter rows by partial text (like)</li> <li>[ ] #7 Hide rows matching pattern</li> <li>[ ] #8 Show all rows (reset filters)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.01%20-%20Sources-Table-Panel/#display-profiles","title":"Display Profiles","text":"<ul> <li>[ ] #9 Save current display configuration (columns, widths, filters)</li> <li>[ ] #10 Load saved display profile</li> <li>[ ] #11 Delete saved display profile</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.01%20-%20Sources-Table-Panel/#selection-status","title":"Selection &amp; Status","text":"<ul> <li>[ ] #12 Single row selection</li> <li>[ ] #13 Multi-row selection (Ctrl+click, Shift+click)</li> <li>[ ] #14 File count display: \"Showing X of Y files\"</li> <li>[ ] #15 Status badges (Coded, Transcribing, Imported, In Progress)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.01%20-%20Sources-Table-Panel/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/organisms/sources_table_panel.py</code></li> <li>Uses DataTable design system component</li> <li>Reference: QualCoder <code>manage_files.py</code> lines 200-600</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.02%20-%20File-Import-Dialog/","title":"File Import Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.02%20-%20File-Import-Dialog/#description","title":"Description","text":"<p>Modal dialog for importing files with drag-drop support. Support text, audio, video, image, PDF formats. Reference: QualCoder import_files method.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.02%20-%20File-Import-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.02%20-%20File-Import-Dialog/#import-ui","title":"Import UI","text":"<ul> <li>[ ] #1 Modal dialog with drag-and-drop zone</li> <li>[ ] #2 Browse button to open file picker</li> <li>[ ] #3 Supported file types display (txt, docx, odt, pdf, mp3, mp4, jpg, png)</li> <li>[ ] #4 Multi-file selection in file picker</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.02%20-%20File-Import-Dialog/#import-options","title":"Import Options","text":"<ul> <li>[ ] #5 Import into project (copy files)</li> <li>[ ] #6 Link external files (reference without copying)</li> <li>[ ] #7 Large files (&gt;2GB) automatically linked</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.02%20-%20File-Import-Dialog/#validation-processing","title":"Validation &amp; Processing","text":"<ul> <li>[ ] #8 Duplicate filename detection and warning</li> <li>[ ] #9 Character encoding detection for text files</li> <li>[ ] #10 Import progress indicator with file count</li> <li>[ ] #11 Error handling for unsupported/corrupt files</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.02%20-%20File-Import-Dialog/#file-type-support","title":"File Type Support","text":"<ul> <li>[ ] #12 Text files: txt, docx, odt, rtf, md, html, epub</li> <li>[ ] #13 Media files: mp3, mp4, wav, mkv, mov</li> <li>[ ] #14 Images: jpg, jpeg, png, gif</li> <li>[ ] #15 Documents: pdf (with text extraction)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.02%20-%20File-Import-Dialog/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/dialogs/file_import_dialog.py</code></li> <li>Uses DropZone design system component</li> <li>Reference: QualCoder <code>manage_files.py</code> import methods</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.03%20-%20Source-Stats-Panel/","title":"Source Stats Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.03%20-%20Source-Stats-Panel/#description","title":"Description","text":"<p>Statistics cards showing file counts by type (text, audio, video, image, PDF) and totals. Uses StatCard design system component.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.03%20-%20Source-Stats-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 StatCard for each file type with icon and count,Total files count,Total storage size,Coded vs uncoded ratio,Click stat to filter table by type</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.04%20-%20Source-Preview-Panel/","title":"Source Preview Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.04%20-%20Source-Preview-Panel/#description","title":"Description","text":"<p>Quick preview panel for selected source. Shows text preview, metadata, associated cases/codes count. Different preview modes for each file type.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.04%20-%20Source-Preview-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Text file preview (first N characters),Image thumbnail preview,Audio/video metadata display,PDF page preview,File metadata display (size/date/type),Associated cases count,Associated codes count,Quick actions (view full/code/memo)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.05%20-%20File-Viewer-Dialogs/","title":"File Viewer Dialogs","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.05%20-%20File-Viewer-Dialogs/#description","title":"Description","text":"<p>Full file viewing dialogs for each file type. Text viewer, image viewer with zoom, audio/video player, PDF viewer with page navigation.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.05%20-%20File-Viewer-Dialogs/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Text file viewer with syntax highlighting,Image viewer with zoom/pan controls,Audio player with playback controls and timeline,Video player with playback controls,PDF viewer with page navigation,View original file option</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.06%20-%20File-Attributes-Panel/","title":"File Attributes Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.06%20-%20File-Attributes-Panel/#description","title":"Description","text":"<p>Panel for managing file attributes and metadata. Add custom attributes, edit values inline, support for bibliography/reference fields.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.06%20-%20File-Attributes-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Attribute columns in table (dynamic),Add custom attribute dialog,Edit attribute values inline,Attribute type validation (text/numeric/date),Predefined reference attributes (Author/Title/Year/Journal),Date picker for date attributes,Export attributes to file</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.07%20-%20Speaker-Detection-Dialog/","title":"Speaker Detection Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.07%20-%20Speaker-Detection-Dialog/#description","title":"Description","text":"<p>Dialog for extracting and marking speakers from transcripts. Auto-detect speaker patterns, create codes for speakers. Reference: QualCoder get_speaker_names.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.07%20-%20Speaker-Detection-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Automatic speaker extraction from transcript,Support multiple speaker formats (Name: / [Name] / {Name}),Speaker frequency display,Create codes for each speaker,Rename speakers before creating codes,Speaker color assignment,Speakers category auto-creation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.08%20-%20Case-Linking-Panel/","title":"Case Linking Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.08%20-%20Case-Linking-Panel/#description","title":"Description","text":"<p>UI for linking files to cases. Assign cases to files, view case-file relationships, link partial text portions to cases.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.08%20-%20Case-Linking-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Assign case to file dialog,Multi-case assignment support,View files by case filter,Partial text linking to case,Case-file relationship indicator in table,Remove file from case option</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.09%20-%20File-Memo-Dialog/","title":"File Memo Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.09%20-%20File-Memo-Dialog/#description","title":"Description","text":"<p>Dialog for adding and editing file memos/notes. Markdown support, memo indicator in table.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.09%20-%20File-Memo-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Memo editor dialog with markdown support,Clear memo button,Memo indicator in file table,Tooltip preview of memo content,Memo author and timestamp display,View all file memos panel</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.10%20-%20File-Management-Operations/","title":"File Management Operations","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.10%20-%20File-Management-Operations/#description","title":"Description","text":"<p>UI for file operations: create text file, rename, bulk rename, delete, export. Include undo functionality.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.10%20-%20File-Management-Operations/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Create new text file dialog,Rename file dialog,Bulk rename with pattern (prefix + number),Delete file with confirmation,Export file to directory,Undo rename operation,Link/unlink external file toggle</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/","title":"Source Management Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/#description","title":"Description","text":"<p>Main screen composing all source management organisms. Implements ScreenProtocol for AppShell integration. Reference: mockups/phase1_file_manager.html</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/#layout-structure","title":"Layout Structure","text":"<ul> <li>[ ] #1 Top: SourceManagementToolbar</li> <li>[ ] #2 Stats row: SourceStatsPanel (file type counts)</li> <li>[ ] #3 Main area: SourcesTablePanel (file list)</li> <li>[ ] #4 Right sidebar (optional): SourcePreviewPanel</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/#organism-integration","title":"Organism Integration","text":"<ul> <li>[ ] #5 Toolbar connected to action handlers</li> <li>[ ] #6 Table selection updates preview panel</li> <li>[ ] #7 Stats cards filter table when clicked</li> <li>[ ] #8 Context menus wired to operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/#screenprotocol-implementation","title":"ScreenProtocol Implementation","text":"<ul> <li>[ ] #9 <code>get_toolbar_content()</code> returns toolbar</li> <li>[ ] #10 <code>get_content()</code> returns main content</li> <li>[ ] #11 <code>get_status_message()</code> returns file count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/#data-loading","title":"Data Loading","text":"<ul> <li>[ ] #12 <code>load_data(SourceManagementDataDTO)</code> populates all panels</li> <li>[ ] #13 Sample data function for demo mode</li> <li>[ ] #14 Real-time updates on file operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/#action-handlers","title":"Action Handlers","text":"<ul> <li>[ ] #15 Import handler opens FileImportDialog</li> <li>[ ] #16 Create handler opens create text file dialog</li> <li>[ ] #17 Delete handler with confirmation</li> <li>[ ] #18 Export handler with file picker</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.11%20-%20Source-Management-Screen/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/sources/source_management_screen.py</code></li> <li><code>src/presentation/pages/source_management_page.py</code></li> <li>Reference: mockups/phase1_file_manager.html</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.12%20-%20Source-Management-Toolbar/","title":"Source Management Toolbar","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.12%20-%20Source-Management-Toolbar/#description","title":"Description","text":"<p>Toolbar for source management screen with action buttons: Import, Link, Create, Export, Search. Uses design system Toolbar components.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.12%20-%20Source-Management-Toolbar/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Import button with dropdown (files/folder/survey),Link external files button,Create new text file button,Export selected files button,Search/filter input box,View toggle (table/grid/list),Refresh button</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.13%20-%20Source-Context-Menus/","title":"Source Context Menus","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.13%20-%20Source-Context-Menus/#description","title":"Description","text":"<p>Context menus for file table rows and column headers. Actions: view, code, memo, rename, export, delete, case assignment.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.13%20-%20Source-Context-Menus/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Row context menu (view/code/memo/rename/export/delete),Column header context menu (show/hide/sort),Assign case to file option,Open in external app option,Copy reference (APA/Vancouver format),URL detection and open in browser</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.14%20-%20Survey-Import-Dialog/","title":"Survey Import Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.14%20-%20Survey-Import-Dialog/#description","title":"Description","text":"<p>Special dialog for importing survey data from CSV files. Configure delimiter, select columns, collate text responses.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.14%20-%20Survey-Import-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 CSV file selection,Delimiter configuration (comma/tab/semicolon),Column preview and selection,Attribute column mapping,Text collation options (per column/per answer),Import progress indicator</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.15%20-%20Linked-Files-Management/","title":"Linked Files Management","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.15%20-%20Linked-Files-Management/#description","title":"Description","text":"<p>Dialog for managing externally linked files. Repair broken links, convert between linked and imported.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.15%20-%20Linked-Files-Management/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Manage Links dialog,Broken link detection and display,Replace broken link with new path,Search for file path suggestions,Convert linked to imported,Convert imported to linked,Link status indicator in table</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.16%20-%20Agent-Activity-for-Sources/","title":"Agent Activity for Sources","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.16%20-%20Agent-Activity-for-Sources/#description","title":"Description","text":"<p>Agent integration for source management. Show badges for agent-imported files, activity indicators during processing.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.16%20-%20Agent-Activity-for-Sources/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent badge on agent-imported sources,Activity indicator during AI processing,Import status updates in real-time,Agent action in file history,Filter to show agent-imported files only</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.17%20-%20Source-Keyboard-Shortcuts/","title":"Source Keyboard Shortcuts","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.17%20-%20Source-Keyboard-Shortcuts/#description","title":"Description","text":"<p>Keyboard shortcuts for source management. Navigation, selection, quick actions.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.17%20-%20Source-Keyboard-Shortcuts/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Ctrl+I to open import dialog,Delete key to delete selected,F2 to rename selected,Ctrl+A to select all,Arrow keys for navigation,Enter to view selected file,Ctrl+F to focus search</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.18%20-%20PDF-Conversion-Dialog/","title":"PDF Conversion Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.18%20-%20PDF-Conversion-Dialog/#description","title":"Description","text":"<p>Dialog for converting PDF pages to images. Useful for image coding of PDF figures and diagrams.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.18%20-%20PDF-Conversion-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 PDF to images conversion option,Page range selection,Output format selection (JPG/PNG),Resolution/quality settings,Progress indicator,Preview converted images</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/","title":"Pseudonym Manager Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/#description","title":"Description","text":"<p>UI for managing pseudonyms and applying them to source files.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Module: <code>pseudonyms.py</code> - <code>Pseudonyms</code> dialog class</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/#pseudonym-table","title":"Pseudonym Table","text":"<ul> <li>[ ] #1 Columns: Original | Pseudonym | Created Date</li> <li>[ ] #2 Click row to delete (with confirmation)</li> <li>[ ] #3 Sortable columns</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/#add-pseudonym-form","title":"Add Pseudonym Form","text":"<ul> <li>[ ] #4 Original text input field</li> <li>[ ] #5 Pseudonym input field (optional)</li> <li>[ ] #6 Auto-generate button (fills random pseudonym)</li> <li>[ ] #7 Add button</li> <li>[ ] #8 Validation feedback (too short, duplicate)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/#apply-pseudonyms","title":"Apply Pseudonyms","text":"<ul> <li>[ ] #9 \"Apply to Files\" button</li> <li>[ ] #10 File selection dialog (or apply to all)</li> <li>[ ] #11 Preview replacements before applying</li> <li>[ ] #12 Confirmation dialog with replacement counts</li> <li>[ ] #13 Progress indicator during apply</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/#integration","title":"Integration","text":"<ul> <li>[ ] #14 Accessible from Sources menu</li> <li>[ ] #15 Context menu on source file: \"Add selection as pseudonym\"</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.19%20-%20Pseudonym-Manager-Screen/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/sources/pseudonym_screen.py</code></li> <li><code>src/presentation/dialogs/apply_pseudonyms_dialog.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/","title":"Reference Manager Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/#description","title":"Description","text":"<p>UI for managing bibliographic references and linking them to source files.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Module: <code>manage_references.py</code> - <code>DialogReferenceManager</code> class</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/#reference-table","title":"Reference Table","text":"<ul> <li>[ ] #1 Columns: ID, Title, Authors, Year, Journal, Type</li> <li>[ ] #2 Sortable and filterable columns</li> <li>[ ] #3 Context menu (edit, delete, view linked files)</li> <li>[ ] #4 Double-click to edit</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/#reference-editor-dialog","title":"Reference Editor Dialog","text":"<ul> <li>[ ] #5 All reference fields editable</li> <li>[ ] #6 Reference type dropdown</li> <li>[ ] #7 Authors list editor</li> <li>[ ] #8 Keywords list editor</li> <li>[ ] #9 Abstract text area</li> <li>[ ] #10 Link/unlink source files panel</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/#ris-import-dialog","title":"RIS Import Dialog","text":"<ul> <li>[ ] #11 File picker for .ris files</li> <li>[ ] #12 Preview imported references in table</li> <li>[ ] #13 Highlight potential duplicates</li> <li>[ ] #14 Select which to import</li> <li>[ ] #15 Import button with progress</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/#source-file-integration","title":"Source File Integration","text":"<ul> <li>[ ] #16 Show linked references in Source Stats Panel</li> <li>[ ] #17 Context menu on source file: \"Link Reference\"</li> <li>[ ] #18 Quick reference picker dialog</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-011.20%20-%20Reference-Manager-Screen/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/sources/reference_screen.py</code></li> <li><code>src/presentation/dialogs/reference_editor.py</code></li> <li><code>src/presentation/dialogs/ris_import_dialog.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012%20-%20Case-Domain/","title":"Case Domain","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012%20-%20Case-Domain/#description","title":"Description","text":"<p>Define the domain layer for Case Management: entities, events, invariants, derivers, and agent tool schemas.</p> <p>Agent-First: Agent tool schemas so AI can create cases and assign attributes.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012%20-%20Case-Domain/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Entities: Case, Attribute, AttributeValue</li> <li>[ ] Value objects: AttributeType</li> <li>[ ] Domain events (CaseCreated, MemberAdded, etc.)</li> <li>[ ] Invariants and derivers</li> <li>[ ] Agent tool schemas (create_case, list_cases, add_member, set_attribute)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012%20-%20Case-Domain/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/case/entities.py</code></li> <li><code>src/domain/case/events.py</code></li> <li><code>src/agent_context/schemas/case_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/","title":"Case Events","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/#description","title":"Description","text":"<p>Additional domain events: CaseRenamed, CaseMemoUpdated, CaseDeleted, CaseMemberAdded, CaseMemberRemoved, AttributeTypeCreated, AttributeTypeRenamed, AttributeTypeDeleted, AttributeValueSet, AttributeValueCleared, CasesImported</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/#case-lifecycle-events-frozen-dataclasses-extending-domainevent","title":"Case Lifecycle Events (frozen dataclasses extending DomainEvent)","text":"<ul> <li>[ ] #1 <code>CaseCreated</code> event: case_id, name, owner</li> <li>[ ] #2 <code>CaseRenamed</code> event: case_id, old_name, new_name</li> <li>[ ] #3 <code>CaseMemoUpdated</code> event: case_id, old_memo, new_memo</li> <li>[ ] #4 <code>CaseDeleted</code> event: case_id, name, member_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/#membership-events","title":"Membership Events","text":"<ul> <li>[ ] #5 <code>CaseMemberAdded</code> event: case_id, source_id, link_type (FULL|PARTIAL), position (optional)</li> <li>[ ] #6 <code>CaseMemberRemoved</code> event: case_id, source_id</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/#attribute-type-events","title":"Attribute Type Events","text":"<ul> <li>[ ] #7 <code>AttributeTypeCreated</code> event: attribute_type_id, name, value_type (character|numeric|date)</li> <li>[ ] #8 <code>AttributeTypeRenamed</code> event: attribute_type_id, old_name, new_name</li> <li>[ ] #9 <code>AttributeTypeDeleted</code> event: attribute_type_id, name, affected_cases_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/#attribute-value-events","title":"Attribute Value Events","text":"<ul> <li>[ ] #10 <code>AttributeValueSet</code> event: case_id, attribute_type_id, old_value, new_value</li> <li>[ ] #11 <code>AttributeValueCleared</code> event: case_id, attribute_type_id, old_value</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/#batch-events","title":"Batch Events","text":"<ul> <li>[ ] #12 <code>CasesImported</code> event: case_ids (list), source (csv|xlsx), row_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.01%20-%20Case-Events/#event-structure","title":"Event Structure","text":"<ul> <li>[ ] #13 All events follow standard structure: event_id, event_type, aggregate_id, occurred_at, caused_by, payload</li> <li>[ ] #14 Events registered in Case context event catalog</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.02%20-%20Partial-Case-Linking/","title":"Partial Case Linking","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.02%20-%20Partial-Case-Linking/#description","title":"Description","text":"<p>Value objects for partial case-file linking: CaseMemberPosition (start, end positions for partial text). Support linking text segments to cases.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.02%20-%20Partial-Case-Linking/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.02%20-%20Partial-Case-Linking/#casemembership-value-object-frozen-dataclass","title":"CaseMembership Value Object (frozen dataclass)","text":"<ul> <li>[ ] #1 <code>CaseMembership</code>: case_id, source_id, link_type (LinkType), position (Optional[TextPosition]), owner</li> <li>[ ] #2 <code>LinkType</code> enum: FULL (entire source), PARTIAL (text segment)</li> <li>[ ] #3 For FULL link: position is None</li> <li>[ ] #4 For PARTIAL link: position contains TextPosition (start, end)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.02%20-%20Partial-Case-Linking/#textposition-value-object-reuse-from-coding-domain","title":"TextPosition Value Object (reuse from Coding domain)","text":"<ul> <li>[ ] #5 <code>TextPosition</code>: start (int), end (int)</li> <li>[ ] #6 Methods: <code>length() -&gt; int</code>, <code>overlaps(other) -&gt; bool</code>, <code>contains(pos) -&gt; bool</code></li> <li>[ ] #7 Immutable - compared by value</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.02%20-%20Partial-Case-Linking/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #8 <code>create_full_membership(case_id, source_id, owner) -&gt; CaseMembership</code></li> <li>[ ] #9 <code>create_partial_membership(case_id, source_id, start, end, owner) -&gt; CaseMembership</code></li> <li>[ ] #10 <code>is_membership_overlap(m1, m2) -&gt; bool</code> - detects overlapping partial links</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.02%20-%20Partial-Case-Linking/#invariants","title":"Invariants","text":"<ul> <li>[ ] #11 <code>is_valid_partial_position(position, source) -&gt; bool</code> - within source bounds</li> <li>[ ] #12 <code>is_unique_membership(case_id, source_id, position, existing) -&gt; bool</code> - no duplicate links</li> <li>[ ] #13 <code>is_position_non_empty(position) -&gt; bool</code> - start &lt; end</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.02%20-%20Partial-Case-Linking/#auto-assignment-support","title":"Auto-Assignment Support","text":"<ul> <li>[ ] #14 <code>find_text_by_markers(source_text, start_marker, end_marker) -&gt; List[TextPosition]</code></li> <li>[ ] #15 Supports auto-assignment of partial text to cases by marker patterns</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/","title":"Attribute Type Conversion","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/#description","title":"Description","text":"<p>Support attribute type conversion (text to numeric, etc). Define conversion rules and validation.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/#attributetype-value-object-frozen-dataclass","title":"AttributeType Value Object (frozen dataclass)","text":"<ul> <li>[ ] #1 <code>AttributeType</code>: attribute_type_id, name, value_type (ValueType), owner</li> <li>[ ] #2 <code>ValueType</code> enum: CHARACTER, NUMERIC, DATE</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/#conversion-rules-pure-functions","title":"Conversion Rules (Pure Functions)","text":"<ul> <li>[ ] #3 <code>can_convert(from_type: ValueType, to_type: ValueType, values: List[str]) -&gt; bool</code></li> <li>[ ] #4 <code>convert_value(value: str, from_type: ValueType, to_type: ValueType) -&gt; Result[str, ConversionError]</code></li> <li>[ ] #5 <code>validate_all_values(values: List[str], target_type: ValueType) -&gt; ValidationResult</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/#conversion-matrix","title":"Conversion Matrix","text":"<ul> <li>[ ] #6 CHARACTER \u2192 NUMERIC: valid if all values are numeric strings</li> <li>[ ] #7 CHARACTER \u2192 DATE: valid if all values parse as dates</li> <li>[ ] #8 NUMERIC \u2192 CHARACTER: always valid (trivial conversion)</li> <li>[ ] #9 NUMERIC \u2192 DATE: invalid (not meaningful)</li> <li>[ ] #10 DATE \u2192 CHARACTER: always valid (format to string)</li> <li>[ ] #11 DATE \u2192 NUMERIC: invalid (not meaningful)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/#validationresult-value-object","title":"ValidationResult Value Object","text":"<ul> <li>[ ] #12 <code>ValidationResult</code>: is_valid (bool), invalid_values (List[Tuple[case_id, value]]), conversion_count</li> <li>[ ] #13 Shows which specific values would fail conversion</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/#invariants","title":"Invariants","text":"<ul> <li>[ ] #14 <code>is_valid_numeric(value: str) -&gt; bool</code> - can parse as float</li> <li>[ ] #15 <code>is_valid_date(value: str, formats: List[str]) -&gt; bool</code> - can parse with given formats</li> <li>[ ] #16 <code>is_conversion_safe(values, target_type) -&gt; bool</code> - all values convertible</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-012.03%20-%20Attribute-Type-Conversion/#event","title":"Event","text":"<ul> <li>[ ] #17 <code>AttributeTypeConverted</code> event: attribute_type_id, old_type, new_type, values_converted</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013%20-%20Case-Infrastructure/","title":"Case Infrastructure","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013%20-%20Case-Infrastructure/#description","title":"Description","text":"<p>Implement repositories for Case Management.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013%20-%20Case-Infrastructure/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] CaseRepository (SQLite)</li> <li>[ ] AttributeRepository (SQLite)</li> <li>[ ] Membership tracking</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013%20-%20Case-Infrastructure/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/repositories/case/</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.01%20-%20Case-Query-Methods/","title":"Case Query Methods","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.01%20-%20Case-Query-Methods/#description","title":"Description","text":"<p>Repository query methods: find_all with filtering/sorting, find_by_attribute_value, get_case_statistics, find_members_by_case, count_by_attribute.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.01%20-%20Case-Query-Methods/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.01%20-%20Case-Query-Methods/#caserepository-query-methods","title":"CaseRepository Query Methods","text":"<ul> <li>[ ] #1 <code>find_all(filter: CaseFilter, sort: SortSpec) -&gt; List[Case]</code></li> <li>[ ] #2 <code>find_by_attribute_value(attribute_type_id, value) -&gt; List[Case]</code></li> <li>[ ] #3 <code>find_members_by_case(case_id) -&gt; List[CaseMembership]</code></li> <li>[ ] #4 <code>count_by_attribute(attribute_type_id) -&gt; Dict[str, int]</code> - value \u2192 count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.01%20-%20Case-Query-Methods/#query-dtos-read-only","title":"Query DTOs (Read-only)","text":"<ul> <li>[ ] #5 <code>CaseFilter</code>: name_pattern, attribute_filters (List[AttributeFilter]), has_members (bool)</li> <li>[ ] #6 <code>AttributeFilter</code>: attribute_type_id, operator (eq|ne|gt|lt|contains), value</li> <li>[ ] #7 <code>CaseWithMembers</code> DTO: case_id, name, memo, member_count, attribute_values</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.01%20-%20Case-Query-Methods/#statistics-query","title":"Statistics Query","text":"<ul> <li>[ ] #8 <code>get_case_statistics() -&gt; CaseStatistics</code></li> <li>[ ] #9 <code>CaseStatistics</code> DTO: total_count, with_members_count, attribute_type_count, avg_members_per_case</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.01%20-%20Case-Query-Methods/#membership-queries","title":"Membership Queries","text":"<ul> <li>[ ] #10 <code>find_cases_by_source(source_id) -&gt; List[Case]</code> - cases containing source</li> <li>[ ] #11 <code>find_partial_memberships(case_id) -&gt; List[CaseMembership]</code> - partial links only</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.01%20-%20Case-Query-Methods/#immutability","title":"Immutability","text":"<ul> <li>[ ] #12 All returned entities are frozen dataclasses</li> <li>[ ] #13 Query methods are read-only, never modify state</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.02%20-%20Attribute-Repository/","title":"Attribute Repository","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.02%20-%20Attribute-Repository/#description","title":"Description","text":"<p>AttributeTypeRepository: CRUD for attribute types. AttributeValueRepository: store/retrieve attribute values with type validation.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.02%20-%20Attribute-Repository/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.02%20-%20Attribute-Repository/#attributetyperepository-methods","title":"AttributeTypeRepository Methods","text":"<ul> <li>[ ] #1 <code>save(attribute_type: AttributeType) -&gt; AttributeTypeId</code></li> <li>[ ] #2 <code>find_by_id(attribute_type_id) -&gt; Optional[AttributeType]</code></li> <li>[ ] #3 <code>find_all() -&gt; List[AttributeType]</code></li> <li>[ ] #4 <code>find_by_name(name: str) -&gt; Optional[AttributeType]</code></li> <li>[ ] #5 <code>delete(attribute_type_id) -&gt; bool</code></li> <li>[ ] #6 <code>update_type(attribute_type_id, new_value_type: ValueType) -&gt; bool</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.02%20-%20Attribute-Repository/#attributevaluerepository-methods","title":"AttributeValueRepository Methods","text":"<ul> <li>[ ] #7 <code>set_value(case_id, attribute_type_id, value: str) -&gt; None</code></li> <li>[ ] #8 <code>get_value(case_id, attribute_type_id) -&gt; Optional[str]</code></li> <li>[ ] #9 <code>get_all_values_for_case(case_id) -&gt; Dict[AttributeTypeId, str]</code></li> <li>[ ] #10 <code>get_all_values_for_type(attribute_type_id) -&gt; Dict[CaseId, str]</code></li> <li>[ ] #11 <code>clear_value(case_id, attribute_type_id) -&gt; bool</code></li> <li>[ ] #12 <code>bulk_set_values(case_id, values: Dict[AttributeTypeId, str]) -&gt; None</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.02%20-%20Attribute-Repository/#type-validation","title":"Type Validation","text":"<ul> <li>[ ] #13 Validate value against AttributeType.value_type before storing</li> <li>[ ] #14 Return <code>Result[None, ValidationError]</code> on type mismatch</li> <li>[ ] #15 Support NULL/empty values for all types</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.02%20-%20Attribute-Repository/#cascade-operations","title":"Cascade Operations","text":"<ul> <li>[ ] #16 <code>delete_type_cascade(attribute_type_id)</code> - removes all values for type</li> <li>[ ] #17 <code>delete_case_cascade(case_id)</code> - removes all values for case</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.02%20-%20Attribute-Repository/#immutability","title":"Immutability","text":"<ul> <li>[ ] #18 Returns frozen AttributeType entities</li> <li>[ ] #19 Values stored as strings, converted on read based on type</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/","title":"Case Import/Export Adapters","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/#description","title":"Description","text":"<p>CSV/XLSX import adapter: parse headers, map columns. Excel export adapter: generate XLSX with formatting. Handle various encodings.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/#caseimportadapter-interface","title":"CaseImportAdapter Interface","text":"<ul> <li>[ ] #1 <code>parse_headers(path: Path) -&gt; List[str]</code> - extract column names</li> <li>[ ] #2 <code>preview_rows(path: Path, limit: int = 10) -&gt; List[Dict[str, str]]</code></li> <li>[ ] #3 <code>import_cases(path: Path, mapping: ColumnMapping) -&gt; Result[ImportResult, ImportError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/#format-support","title":"Format Support","text":"<ul> <li>[ ] #4 <code>CSVCaseImporter</code>: handles CSV with delimiter detection</li> <li>[ ] #5 <code>XLSXCaseImporter</code>: handles Excel files, reads first sheet</li> <li>[ ] #6 Factory: <code>CaseImporterFactory.for_file(path) -&gt; CaseImporter</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/#columnmapping-value-object","title":"ColumnMapping Value Object","text":"<ul> <li>[ ] #7 <code>ColumnMapping</code>: name_column (int), attribute_columns (Dict[int, AttributeTypeId])</li> <li>[ ] #8 Supports auto-create of AttributeTypes from unmapped columns</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/#caseexportadapter-interface","title":"CaseExportAdapter Interface","text":"<ul> <li>[ ] #9 <code>export_to_xlsx(cases: List[Case], attributes: List[AttributeType], path: Path) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #10 Generates formatted XLSX with headers, column widths, data types</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/#export-formatting","title":"Export Formatting","text":"<ul> <li>[ ] #11 First row: column headers (Case Name, then attribute names)</li> <li>[ ] #12 Numeric columns formatted as numbers</li> <li>[ ] #13 Date columns formatted with date format</li> <li>[ ] #14 Auto-width columns based on content</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-013.03%20-%20Case-Import-Export-Adapters/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #15 <code>ImportError</code> union: FileNotFound, InvalidFormat, DuplicateCaseName, EncodingError</li> <li>[ ] #16 <code>ExportError</code> union: FileNotWritable, DiskFull, ExportFailed</li> <li>[ ] #17 Returns Result[T, Error] - explicit error handling</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014%20-%20Case-Application/","title":"Case Application","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014%20-%20Case-Application/#description","title":"Description","text":"<p>Implement the application layer for Case Management with Agent tool registration.</p> <p>Agent-First: Controller serves both UI and agent. Agent tools registered.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014%20-%20Case-Application/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] CaseController implementation</li> <li>[ ] CRUD commands for cases</li> <li>[ ] Membership commands (AddMember, RemoveMember)</li> <li>[ ] Attribute commands</li> <li>[ ] Events published for state changes</li> <li>[ ] SignalBridge wiring complete (domain events \u2192 Qt signals)</li> <li>[ ] Agent tools registered</li> <li>[ ] Trust level enforcement</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014%20-%20Case-Application/#subtasks","title":"Subtasks","text":"<p>Ordered by dependency flow: Controller \u2192 Commands \u2192 Wiring \u2192 Agent</p> ID Subtask Status Wires Controller &amp; Commands QC-014.01 Case CRUD Commands To Do Controller \u2192 Deriver \u2192 Repo QC-014.02 Attribute Commands To Do Controller \u2192 Deriver \u2192 Repo QC-014.03 Case Membership Commands To Do Controller \u2192 Deriver \u2192 Repo QC-014.04 Case Import/Export Commands To Do Controller \u2192 Batch Operations Signal Bridge Wiring QC-014.05 Case Signal Bridge To Do EventBus \u2192 Bridge \u2192 Qt Signals QC-014.07 Signal Payloads To Do Event \u2192 Payload DTOs QC-014.08 Event Converters To Do Converter per event type Agent Integration QC-014.06 Case Agent Tools To Do MCP schemas + registration QC-014.09 Integration Tests To Do End-to-end flow tests"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014%20-%20Case-Application/#event-flow-map","title":"Event Flow Map","text":"Domain Event Signal Bridge Signal UI Subscribers CaseCreated <code>case_created</code> CaseTable, ActivityPanel CaseRenamed <code>case_renamed</code> CaseTable CaseDeleted <code>case_deleted</code> CaseTable CaseMemoUpdated <code>case_memo_updated</code> CaseDetailView MemberAdded <code>member_added</code> CaseFileManager MemberRemoved <code>member_removed</code> CaseFileManager AttributeTypeCreated <code>attribute_type_created</code> AttributeManager AttributeTypeDeleted <code>attribute_type_deleted</code> AttributeManager AttributeValueSet <code>attribute_value_set</code> CaseTable, CaseDetailView"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014%20-%20Case-Application/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/controllers/case_controller.py</code></li> <li><code>src/application/signal_bridge/case_bridge.py</code></li> <li><code>src/application/signal_bridge/case_payloads.py</code></li> <li><code>src/application/signal_bridge/case_converters.py</code></li> <li><code>src/agent_context/tools/case.py</code></li> <li><code>src/agent_context/schemas/case_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.01%20-%20Case-CRUD-Commands/","title":"Case CRUD Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.01%20-%20Case-CRUD-Commands/#description","title":"Description","text":"<p>Commands: CreateCase, RenameCase, DeleteCase, BulkDeleteCases, UpdateCaseMemo. Validate unique names, emit domain events.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.01%20-%20Case-CRUD-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.01%20-%20Case-CRUD-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>create_case(name: str, memo: Optional[str]) -&gt; Result[CaseCreated, CreateError]</code></li> <li>[ ] #2 <code>rename_case(case_id, new_name) -&gt; Result[CaseRenamed, RenameError]</code></li> <li>[ ] #3 <code>delete_case(case_id) -&gt; Result[CaseDeleted, DeleteError]</code></li> <li>[ ] #4 <code>bulk_delete_cases(case_ids: List[CaseId]) -&gt; Result[BulkDeleteCompleted, DeleteError]</code></li> <li>[ ] #5 <code>update_case_memo(case_id, memo) -&gt; Result[CaseMemoUpdated, UpdateError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.01%20-%20Case-CRUD-Commands/#deriver-functions-pure-in-functional-core","title":"Deriver Functions (Pure, in Functional Core)","text":"<ul> <li>[ ] #6 <code>derive_create_case(name, memo, existing_names, owner) -&gt; Result[Case, CreateError]</code></li> <li>[ ] #7 <code>derive_rename_case(case, new_name, existing_names) -&gt; Result[CaseRenamed, RenameError]</code></li> <li>[ ] #8 <code>derive_delete_case(case, member_count) -&gt; Result[CaseDeleted, DeleteError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.01%20-%20Case-CRUD-Commands/#invariants","title":"Invariants","text":"<ul> <li>[ ] #9 <code>is_case_name_unique(name, existing_names) -&gt; bool</code></li> <li>[ ] #10 <code>is_case_name_valid(name) -&gt; bool</code> - non-empty, reasonable length</li> <li>[ ] #11 <code>is_case_deletable(case_id, members) -&gt; bool</code> - warns if has members</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.01%20-%20Case-CRUD-Commands/#controller-flow-per-fddd-pattern","title":"Controller Flow (per fDDD pattern)","text":"<ul> <li>[ ] #12 Controller: validate \u2192 call deriver \u2192 persist \u2192 publish event \u2192 return Result</li> <li>[ ] #13 On deriver failure, return Failure without side effects</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.01%20-%20Case-CRUD-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #14 On success: emit CaseCreated/CaseRenamed/CaseDeleted/CaseMemoUpdated</li> <li>[ ] #15 Events published to EventBus for cross-context notification</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.02%20-%20Attribute-Commands/","title":"Attribute Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.02%20-%20Attribute-Commands/#description","title":"Description","text":"<p>Commands: CreateAttributeType, RenameAttributeType, DeleteAttributeType, ConvertAttributeType, SetAttributeValue, ClearAttributeValue.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.02%20-%20Attribute-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.02%20-%20Attribute-Commands/#attribute-type-commands-controller","title":"Attribute Type Commands (Controller)","text":"<ul> <li>[ ] #1 <code>create_attribute_type(name, value_type: ValueType) -&gt; Result[AttributeTypeCreated, CreateError]</code></li> <li>[ ] #2 <code>rename_attribute_type(attribute_type_id, new_name) -&gt; Result[AttributeTypeRenamed, RenameError]</code></li> <li>[ ] #3 <code>delete_attribute_type(attribute_type_id) -&gt; Result[AttributeTypeDeleted, DeleteError]</code></li> <li>[ ] #4 <code>convert_attribute_type(attribute_type_id, new_type: ValueType) -&gt; Result[AttributeTypeConverted, ConvertError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.02%20-%20Attribute-Commands/#attribute-value-commands-controller","title":"Attribute Value Commands (Controller)","text":"<ul> <li>[ ] #5 <code>set_attribute_value(case_id, attribute_type_id, value) -&gt; Result[AttributeValueSet, SetError]</code></li> <li>[ ] #6 <code>clear_attribute_value(case_id, attribute_type_id) -&gt; Result[AttributeValueCleared, ClearError]</code></li> <li>[ ] #7 <code>bulk_set_attributes(case_id, values: Dict[AttributeTypeId, str]) -&gt; Result[BulkSetCompleted, SetError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.02%20-%20Attribute-Commands/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #8 <code>derive_create_attribute_type(name, value_type, existing_names) -&gt; Result[AttributeType, Error]</code></li> <li>[ ] #9 <code>derive_convert_type(attribute_type, new_type, values) -&gt; Result[ConversionPlan, ConvertError]</code></li> <li>[ ] #10 <code>validate_value_for_type(value, value_type) -&gt; Result[str, ValidationError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.02%20-%20Attribute-Commands/#invariants","title":"Invariants","text":"<ul> <li>[ ] #11 <code>is_attribute_name_unique(name, existing) -&gt; bool</code></li> <li>[ ] #12 <code>is_conversion_valid(from_type, to_type, values) -&gt; bool</code></li> <li>[ ] #13 <code>is_value_valid_for_type(value, value_type) -&gt; bool</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.02%20-%20Attribute-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #14 Events: AttributeTypeCreated, AttributeTypeRenamed, AttributeTypeDeleted, AttributeTypeConverted</li> <li>[ ] #15 Events: AttributeValueSet, AttributeValueCleared</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.03%20-%20Case-Membership-Commands/","title":"Case Membership Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.03%20-%20Case-Membership-Commands/#description","title":"Description","text":"<p>Commands: AddCaseMember, RemoveCaseMember, AddPartialCaseMember (text segment), AutoAssignByMarkers. Coordinate with Source context.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.03%20-%20Case-Membership-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.03%20-%20Case-Membership-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>add_case_member(case_id, source_id) -&gt; Result[CaseMemberAdded, AddError]</code> - full source</li> <li>[ ] #2 <code>add_partial_member(case_id, source_id, start, end) -&gt; Result[CaseMemberAdded, AddError]</code> - text segment</li> <li>[ ] #3 <code>remove_case_member(case_id, source_id) -&gt; Result[CaseMemberRemoved, RemoveError]</code></li> <li>[ ] #4 <code>auto_assign_by_markers(case_id, source_id, start_marker, end_marker) -&gt; Result[AutoAssignCompleted, AssignError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.03%20-%20Case-Membership-Commands/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #5 <code>derive_membership(case, source, position, existing) -&gt; Result[CaseMembership, Error]</code></li> <li>[ ] #6 <code>find_marker_positions(text, start_marker, end_marker) -&gt; List[TextPosition]</code> - pure text analysis</li> <li>[ ] #7 <code>derive_partial_memberships(case, source, positions) -&gt; List[CaseMembership]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.03%20-%20Case-Membership-Commands/#invariants","title":"Invariants","text":"<ul> <li>[ ] #8 <code>is_source_exists(source_id) -&gt; bool</code></li> <li>[ ] #9 <code>is_case_exists(case_id) -&gt; bool</code></li> <li>[ ] #10 <code>is_membership_unique(case_id, source_id, position) -&gt; bool</code></li> <li>[ ] #11 <code>is_position_within_source(position, source) -&gt; bool</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.03%20-%20Case-Membership-Commands/#cross-context-coordination","title":"Cross-Context Coordination","text":"<ul> <li>[ ] #12 Subscribes to SourceCaseLinked/SourceCaseUnlinked events from Source context</li> <li>[ ] #13 Updates membership model when Source context emits linking events</li> <li>[ ] #14 Follows Published Language pattern - events are the contract</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.03%20-%20Case-Membership-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #15 <code>CaseMemberAdded</code> event: case_id, source_id, link_type, position</li> <li>[ ] #16 <code>CaseMemberRemoved</code> event: case_id, source_id</li> <li>[ ] #17 <code>AutoAssignCompleted</code> event: case_id, source_id, segments_added</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/","title":"Case Import/Export Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#description","title":"Description","text":"<p>Commands: ImportCases (from CSV/XLSX), ExportCases (to XLSX). Auto-create attribute types from import headers.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>import_cases(path: Path, mapping: ColumnMapping) -&gt; Result[CasesImported, ImportError]</code></li> <li>[ ] #2 <code>export_cases(case_ids: List[CaseId], path: Path) -&gt; Result[ExportCompleted, ExportError]</code></li> <li>[ ] #3 <code>preview_import(path: Path) -&gt; Result[ImportPreview, PreviewError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #4 <code>derive_cases_from_rows(rows, mapping, existing_names, owner) -&gt; List[Case]</code></li> <li>[ ] #5 <code>derive_attribute_types_from_headers(headers, name_column, existing_types) -&gt; List[AttributeType]</code></li> <li>[ ] #6 <code>derive_attribute_values(rows, mapping, cases) -&gt; Dict[CaseId, Dict[AttributeTypeId, str]]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#import-flow","title":"Import Flow","text":"<ul> <li>[ ] #7 Parse file \u2192 preview \u2192 auto-detect/map columns \u2192 create AttributeTypes \u2192 create Cases \u2192 set values</li> <li>[ ] #8 Duplicate case names: append suffix (e.g., \"Case (2)\")</li> <li>[ ] #9 Progress callback for large files</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#export-flow","title":"Export Flow","text":"<ul> <li>[ ] #10 Fetch cases and attributes \u2192 generate XLSX with headers \u2192 format columns \u2192 save</li> <li>[ ] #11 Default filename suggestion: <code>{project_name}_cases_{date}.xlsx</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#auto-create-attribute-types","title":"Auto-Create Attribute Types","text":"<ul> <li>[ ] #12 Headers not mapped to existing types create new AttributeTypes</li> <li>[ ] #13 Infer ValueType from column content (numeric, date, character)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #14 <code>CasesImported</code> event: case_ids, attribute_types_created, row_count</li> <li>[ ] #15 Individual CaseCreated events for each case (enables UI update)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.04%20-%20Case-Import-Export-Commands/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #16 <code>ImportError</code> union: FileNotFound, InvalidFormat, DuplicateName, EncodingError</li> <li>[ ] #17 <code>ExportError</code> union: FileNotWritable, DiskFull</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/","title":"Case Signal Bridge","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/#description","title":"Description","text":"<p>Bridge between domain events and UI signals for the Case context. Enable UI observation of case changes from both UI and Agent. Thread-safe emission.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/#casesignalbridge-class","title":"CaseSignalBridge Class","text":"<ul> <li>[ ] #1 Extends BaseSignalBridge from QC-003.01</li> <li>[ ] #2 Singleton instance accessible via <code>CaseSignalBridge.instance()</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/#ui-signals","title":"UI Signals","text":"<ul> <li>[ ] #3 <code>case_created</code> signal - emits CaseCreated payload</li> <li>[ ] #4 <code>case_renamed</code> signal - emits CaseRenamed payload</li> <li>[ ] #5 <code>case_deleted</code> signal - emits CaseDeleted payload</li> <li>[ ] #6 <code>case_memo_updated</code> signal - emits CaseMemoUpdated payload</li> <li>[ ] #7 <code>member_added</code> signal - emits CaseMemberAdded payload</li> <li>[ ] #8 <code>member_removed</code> signal - emits CaseMemberRemoved payload</li> <li>[ ] #9 <code>attribute_type_changed</code> signal - emits attribute type payload</li> <li>[ ] #10 <code>attribute_value_changed</code> signal - emits attribute value payload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/#event-bus-subscription","title":"Event Bus Subscription","text":"<ul> <li>[ ] #11 Subscribe to all Case context events on EventBus at initialization</li> <li>[ ] #12 Event handler maps event type \u2192 corresponding UI signal</li> <li>[ ] #13 Dispatcher method routes domain events to converters</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/#thread-safety","title":"Thread Safety","text":"<ul> <li>[ ] #14 Thread-safe emission (inherits from BaseSignalBridge)</li> <li>[ ] #15 Agent operations (from background thread) safely emit to UI thread</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/#architecture-pattern","title":"Architecture Pattern","text":"<ul> <li>[ ] #16 Follows same pattern as CodingSignalBridge and SourceSignalBridge</li> <li>[ ] #17 UI widgets connect to bridge signals, not directly to EventBus</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.05%20-%20Case-Signal-Bridge/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: - Inherits from <code>QObject</code> via BaseSignalBridge - Signals declared as <code>pyqtSignal(object)</code> - Uses <code>QMetaObject.invokeMethod</code> with <code>Qt.QueuedConnection</code> (via base class)</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.06%20-%20Case-Agent-Tools/","title":"Case Agent Tools","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.06%20-%20Case-Agent-Tools/#description","title":"Description","text":"<p>Agent tools: create_case (NOTIFY), delete_case (REQUIRE), set_attribute (NOTIFY), add_member (NOTIFY), import_cases (REQUIRE). Register with agent server.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.06%20-%20Case-Agent-Tools/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.06%20-%20Case-Agent-Tools/#agent-tool-schemas","title":"Agent Tool Schemas","text":"<ul> <li>[ ] #1 <code>create_case</code> tool: Input: name, memo (optional). Output: case_id. Trust: NOTIFY</li> <li>[ ] #2 <code>rename_case</code> tool: Input: case_id, new_name. Output: success. Trust: NOTIFY</li> <li>[ ] #3 <code>delete_case</code> tool: Input: case_id. Output: success, deleted_members. Trust: REQUIRE (destructive)</li> <li>[ ] #4 <code>set_attribute</code> tool: Input: case_id, attribute_name, value. Output: success. Trust: NOTIFY</li> <li>[ ] #5 <code>add_member</code> tool: Input: case_id, source_id, position (optional). Output: success. Trust: NOTIFY</li> <li>[ ] #6 <code>remove_member</code> tool: Input: case_id, source_id. Output: success. Trust: NOTIFY</li> <li>[ ] #7 <code>import_cases</code> tool: Input: path, column_mapping. Output: cases_created. Trust: REQUIRE (bulk)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.06%20-%20Case-Agent-Tools/#read-only-tools-autonomous","title":"Read-Only Tools (AUTONOMOUS)","text":"<ul> <li>[ ] #8 <code>list_cases</code> tool: filter, return case list. Trust: AUTONOMOUS</li> <li>[ ] #9 <code>get_case_attributes</code> tool: case_id, return attributes. Trust: AUTONOMOUS</li> <li>[ ] #10 <code>get_case_members</code> tool: case_id, return source list. Trust: AUTONOMOUS</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.06%20-%20Case-Agent-Tools/#schema-structure","title":"Schema Structure","text":"<ul> <li>[ ] #11 Each schema defines: name, description, inputSchema (JSON Schema), trust_level</li> <li>[ ] #12 Schemas registered with agent server on startup</li> <li>[ ] #13 Resource URIs: <code>qualcoder://cases/tools/{tool_name}</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.06%20-%20Case-Agent-Tools/#controller-integration","title":"Controller Integration","text":"<ul> <li>[ ] #14 Each agent tool invokes corresponding Controller command</li> <li>[ ] #15 Agent actions emit same domain events as UI actions</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.06%20-%20Case-Agent-Tools/#implementation-notes","title":"Implementation Notes","text":"<p>For MCP (Model Context Protocol): - Schemas follow MCP Tool Schema specification - Registered via MCP server's tool registration API</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/","title":"Signal Payloads (Case)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/#description","title":"Description","text":"<p>Define Qt-friendly payload dataclasses for the Case context. These are emitted by SignalBridge signals to UI widgets.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/#case-payloads","title":"Case Payloads","text":"<ul> <li>[ ] #1 <code>CaseCreatedPayload</code>: case_id (str), name (str), owner_name (str)</li> <li>[ ] #2 <code>CaseRenamedPayload</code>: case_id (str), old_name (str), new_name (str)</li> <li>[ ] #3 <code>CaseDeletedPayload</code>: case_id (str), name (str)</li> <li>[ ] #4 <code>CaseMemoUpdatedPayload</code>: case_id (str), memo (str?)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/#membership-payloads","title":"Membership Payloads","text":"<ul> <li>[ ] #5 <code>MemberAddedPayload</code>: case_id (str), case_name (str), source_id (str), source_name (str), position_start (int?), position_end (int?)</li> <li>[ ] #6 <code>MemberRemovedPayload</code>: case_id (str), source_id (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/#attribute-payloads","title":"Attribute Payloads","text":"<ul> <li>[ ] #7 <code>AttributeTypeCreatedPayload</code>: attribute_type_id (str), name (str), value_type (str)</li> <li>[ ] #8 <code>AttributeTypeDeletedPayload</code>: attribute_type_id (str), name (str)</li> <li>[ ] #9 <code>AttributeValueSetPayload</code>: case_id (str), case_name (str), attribute_name (str), value (str), value_type (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/#batch-operation-payloads","title":"Batch Operation Payloads","text":"<ul> <li>[ ] #10 <code>CasesImportedPayload</code>: file_path (str), cases_count (int)</li> <li>[ ] #11 <code>CasesExportedPayload</code>: file_path (str), cases_count (int), format (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/#design-rules","title":"Design Rules","text":"<ul> <li>[ ] #12 All payloads are frozen dataclasses</li> <li>[ ] #13 Use primitive types only</li> <li>[ ] #14 Include display-ready names alongside IDs</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.07%20-%20Signal-Payloads/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/case_payloads.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.08%20-%20Event-Converters/","title":"Event Converters (Case)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.08%20-%20Event-Converters/#description","title":"Description","text":"<p>Implement converters that transform Case domain events into signal payloads.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.08%20-%20Event-Converters/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.08%20-%20Event-Converters/#converters","title":"Converters","text":"<ul> <li>[ ] #1 <code>CaseCreatedConverter</code>: CaseCreated \u2192 CaseCreatedPayload</li> <li>[ ] #2 <code>CaseRenamedConverter</code>: CaseRenamed \u2192 CaseRenamedPayload</li> <li>[ ] #3 <code>CaseDeletedConverter</code>: CaseDeleted \u2192 CaseDeletedPayload</li> <li>[ ] #4 <code>CaseMemoUpdatedConverter</code>: CaseMemoUpdated \u2192 CaseMemoUpdatedPayload</li> <li>[ ] #5 <code>MemberAddedConverter</code>: MemberAdded \u2192 MemberAddedPayload</li> <li>[ ] #6 <code>MemberRemovedConverter</code>: MemberRemoved \u2192 MemberRemovedPayload</li> <li>[ ] #7 <code>AttributeTypeCreatedConverter</code>: AttributeTypeCreated \u2192 AttributeTypeCreatedPayload</li> <li>[ ] #8 <code>AttributeTypeDeletedConverter</code>: AttributeTypeDeleted \u2192 AttributeTypeDeletedPayload</li> <li>[ ] #9 <code>AttributeValueSetConverter</code>: AttributeValueSet \u2192 AttributeValueSetPayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.08%20-%20Event-Converters/#registry","title":"Registry","text":"<ul> <li>[ ] #10 Register all converters in <code>CaseConverterRegistry</code></li> <li>[ ] #11 Registry used by CaseSignalBridge</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.08%20-%20Event-Converters/#testing","title":"Testing","text":"<ul> <li>[ ] #12 Unit tests for each converter</li> <li>[ ] #13 Tests verify all fields mapped correctly</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-014.08%20-%20Event-Converters/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/case_converters.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015%20-%20Case-Presentation/","title":"Case Presentation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015%20-%20Case-Presentation/#description","title":"Description","text":"<p>Build the UI screens for Case Management with agent observation.</p> <p>Agent-First: Shows agent-created cases with badges. Agent assignments visible.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015%20-%20Case-Presentation/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Case manager screen (mockup: <code>manage_cases.html</code>)</li> <li>[ ] Attribute manager screen (mockup: <code>manage_attributes.html</code>)</li> <li>[ ] Case detail view</li> <li>[ ] Membership editor</li> <li>[ ] Agent activity badges</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015%20-%20Case-Presentation/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/cases/</code></li> <li>Mockups: <code>mockups/manage_cases.html</code>, <code>mockups/manage_attributes.html</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.01%20-%20Case-Table-Panel/","title":"Case Table Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.01%20-%20Case-Table-Panel/#description","title":"Description","text":"<p>Main case list table with columns for name, memo, files linked, and all attributes. Sortable, filterable, multi-select. Reference: QualCoder cases.py</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.01%20-%20Case-Table-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Table with columns (name/memo/files/attributes),Sortable by name or attribute,Column show/hide management,Row filtering (exact/like/hide),Multi-row selection,Inline cell editing for name and attributes,Case count display</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.02%20-%20Case-CRUD-Operations/","title":"Case CRUD Operations","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.02%20-%20Case-CRUD-Operations/#description","title":"Description","text":"<p>UI for case create, edit, delete operations. Add case dialog, rename inline, delete with confirmation.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.02%20-%20Case-CRUD-Operations/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Add case dialog with name validation,Inline rename via double-click,Delete case with confirmation,Duplicate name prevention,Case memo editor dialog,Bulk delete selected cases</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.03%20-%20Case-Attribute-Manager/","title":"Case Attribute Manager","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.03%20-%20Case-Attribute-Manager/#description","title":"Description","text":"<p>Dialog for managing case attributes. Add/edit/delete attribute types, assign to cases/files/journals.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.03%20-%20Case-Attribute-Manager/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Attribute list with type and assignment,Add attribute dialog (text/numeric/date),Rename attribute,Delete attribute with cascade,Attribute type conversion,Attribute memo support,Unique name validation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.04%20-%20Case-File-Manager-Dialog/","title":"Case-File Manager Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.04%20-%20Case-File-Manager-Dialog/#description","title":"Description","text":"<p>Dialog for linking files to cases. Add/remove files, link entire or partial content, auto-assign with markers.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.04%20-%20Case-File-Manager-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 File list with assignment status,Add files to case button,Remove files from case,Hide assigned files toggle,Partial text linking support,Auto-assign with start/end markers,Text highlighting for linked segments</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.05%20-%20Case-Detail-View/","title":"Case Detail View","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.05%20-%20Case-Detail-View/#description","title":"Description","text":"<p>Split view showing case content: all text segments, media links, file organization. Text browser with highlighting.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.05%20-%20Case-Detail-View/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Split view (table left / content right),Display all text linked to case,Group segments by source file,Media links (images/audio/video),Character position display,Right-click context menu,Clickable media to open viewers</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.06%20-%20Case-Import-Export/","title":"Case Import/Export","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.06%20-%20Case-Import-Export/#description","title":"Description","text":"<p>Import cases from CSV/XLSX with attributes. Export cases with all attributes to Excel.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.06%20-%20Case-Import-Export/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Import from CSV with delimiter config,Import from XLSX,Header row detection,Auto-create attribute types,Duplicate case handling,Export to XLSX with all columns,Export filename suggestion</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.07%20-%20Case-Management-Screen/","title":"Case Management Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.07%20-%20Case-Management-Screen/#description","title":"Description","text":"<p>Main screen composing case table, toolbar, and detail view. Implements ScreenProtocol.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.07%20-%20Case-Management-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Case table panel integration,Toolbar with add/delete/import/export,Detail view split panel,Keyboard shortcuts (Ctrl+1 add / Ctrl+6 delete),ScreenProtocol implementation,Sample data for demo</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.08%20-%20Case-Context-Menus/","title":"Case Context Menus","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.08%20-%20Case-Context-Menus/#description","title":"Description","text":"<p>Context menus for case table rows and column headers. Actions: view, edit memo, file manager, delete.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.08%20-%20Case-Context-Menus/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Row context menu (view/memo/file-manager/delete),Column header menu (show/hide/sort),Attribute value filtering,Copy cell to clipboard,Paste from clipboard</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.09%20-%20Agent-Activity-for-Cases/","title":"Agent Activity for Cases","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.09%20-%20Agent-Activity-for-Cases/#description","title":"Description","text":"<p>Agent badges on agent-created cases. Visual distinction for AI-assigned case memberships.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-015.09%20-%20Agent-Activity-for-Cases/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent badge on AI-created cases,AI assignment indicator in file links,Filter to show agent cases only,Activity log for case operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016%20-%20Analysis-Domain/","title":"Analysis Domain","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016%20-%20Analysis-Domain/#description","title":"Description","text":"<p>Define the domain layer for Analysis: query specifications, report definitions, graph structures, and agent tool schemas.</p> <p>Agent-First: Agent tools so AI can query patterns and answer analytical questions.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016%20-%20Analysis-Domain/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Query specifications (filters, groupings)</li> <li>[ ] Report definitions (frequency, co-occurrence)</li> <li>[ ] Graph structures (nodes, edges)</li> <li>[ ] Export format specifications</li> <li>[ ] Agent tool schemas (query_codes, get_frequency, find_patterns)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016%20-%20Analysis-Domain/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/analysis/entities.py</code></li> <li><code>src/domain/analysis/queries.py</code></li> <li><code>src/agent_context/schemas/analysis_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.01%20-%20Report-Specifications/","title":"Report Specifications","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.01%20-%20Report-Specifications/#description","title":"Description","text":"<p>Report type specifications: FrequencyReport, CodingSummaryReport, CoderComparisonReport, CoOccurrenceMatrix. Each with filter/grouping options.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.01%20-%20Report-Specifications/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.01%20-%20Report-Specifications/#report-value-objects-frozen-dataclasses","title":"Report Value Objects (frozen dataclasses)","text":"<ul> <li>[ ] #1 <code>FrequencyReport</code>: code_frequencies (List[CodeFrequency]), filters, generated_at</li> <li>[ ] #2 <code>CodingSummaryReport</code>: code_summaries (List[CodeSummary]), filters, totals</li> <li>[ ] #3 <code>CoderComparisonReport</code>: agreements, disagreements, kappa_score</li> <li>[ ] #4 <code>CoOccurrenceMatrix</code>: matrix (Dict[CodeId, Dict[CodeId, int]]), codes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.01%20-%20Report-Specifications/#supporting-value-objects","title":"Supporting Value Objects","text":"<ul> <li>[ ] #5 <code>CodeFrequency</code>: code_id, code_name, count, percentage, sources</li> <li>[ ] #6 <code>CodeSummary</code>: code_id, segments (List[SegmentSummary]), total_characters</li> <li>[ ] #7 <code>CoOccurrenceCell</code>: code_a, code_b, overlap_count, edge_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.01%20-%20Report-Specifications/#filter-specifications-frozen-dataclasses","title":"Filter Specifications (frozen dataclasses)","text":"<ul> <li>[ ] #8 <code>ReportFilters</code>: code_ids, source_ids, case_ids, coder_ids, date_range</li> <li>[ ] #9 All filter fields are Optional - None means \"all\"</li> <li>[ ] #10 Filters are composable and immutable</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.01%20-%20Report-Specifications/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #11 <code>apply_filters(segments, filters) -&gt; List[Segment]</code> - pure filtering</li> <li>[ ] #12 <code>calculate_percentage(count, total) -&gt; float</code> - pure calculation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.01%20-%20Report-Specifications/#immutability","title":"Immutability","text":"<ul> <li>[ ] #13 All report types are frozen dataclasses</li> <li>[ ] #14 Reports are generated, never modified</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.02%20-%20Query-Filter-Specifications/","title":"Query Filter Specifications","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.02%20-%20Query-Filter-Specifications/#description","title":"Description","text":"<p>FilterSpec value objects: FileFilter, CaseFilter, CoderFilter, AttributeFilter, DateRangeFilter. Composable filter expressions.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.02%20-%20Query-Filter-Specifications/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.02%20-%20Query-Filter-Specifications/#filter-value-objects-frozen-dataclasses","title":"Filter Value Objects (frozen dataclasses)","text":"<ul> <li>[ ] #1 <code>FileFilter</code>: source_ids (Optional[List]), source_types (Optional[List[SourceType]])</li> <li>[ ] #2 <code>CaseFilter</code>: case_ids (Optional[List]), attribute_filters (Optional[List])</li> <li>[ ] #3 <code>CoderFilter</code>: coder_ids (Optional[List]), include_ai (bool)</li> <li>[ ] #4 <code>DateRangeFilter</code>: start_date (Optional[date]), end_date (Optional[date])</li> <li>[ ] #5 <code>AttributeFilter</code>: attribute_type_id, operator (eq|ne|gt|lt|contains), value</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.02%20-%20Query-Filter-Specifications/#compositefilter-frozen-dataclass","title":"CompositeFilter (frozen dataclass)","text":"<ul> <li>[ ] #6 <code>CompositeFilter</code>: file_filter, case_filter, coder_filter, date_filter, code_ids</li> <li>[ ] #7 All fields Optional - None means \"no filter\" (include all)</li> <li>[ ] #8 Immutable - modifications return new filter instance</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.02%20-%20Query-Filter-Specifications/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #9 <code>apply_filter(segments: List[Segment], filter: CompositeFilter) -&gt; List[Segment]</code></li> <li>[ ] #10 <code>combine_filters(f1, f2) -&gt; CompositeFilter</code> - merges two filters (AND logic)</li> <li>[ ] #11 <code>is_segment_match(segment, filter) -&gt; bool</code> - pure predicate</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.02%20-%20Query-Filter-Specifications/#invariants","title":"Invariants","text":"<ul> <li>[ ] #12 <code>is_valid_date_range(start, end) -&gt; bool</code> - start &lt;= end</li> <li>[ ] #13 <code>is_filter_empty(filter) -&gt; bool</code> - all fields None</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.03%20-%20Graph-Structures/","title":"Graph Structures","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.03%20-%20Graph-Structures/#description","title":"Description","text":"<p>Graph domain types: GraphNode, GraphEdge, GraphConfiguration, GraphLayout. Support network visualization and code relationship mapping.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.03%20-%20Graph-Structures/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.03%20-%20Graph-Structures/#graph-value-objects-frozen-dataclasses","title":"Graph Value Objects (frozen dataclasses)","text":"<ul> <li>[ ] #1 <code>GraphNode</code>: node_id, label, color, node_type (CODE|CATEGORY|FILE|CASE), metadata</li> <li>[ ] #2 <code>GraphEdge</code>: source_id, target_id, weight, edge_type (CONTAINS|OVERLAPS|LINKED)</li> <li>[ ] #3 <code>GraphLayout</code>: nodes (List[NodePosition]), layout_type (TREE|FORCE|CIRCULAR)</li> <li>[ ] #4 <code>NodePosition</code>: node_id, x, y</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.03%20-%20Graph-Structures/#graphconfiguration-frozen-dataclass","title":"GraphConfiguration (frozen dataclass)","text":"<ul> <li>[ ] #5 <code>GraphConfiguration</code>: root_nodes, max_depth, include_types, layout_type</li> <li>[ ] #6 Immutable - changes create new configuration</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.03%20-%20Graph-Structures/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #7 <code>build_graph(codes, categories, config) -&gt; Graph</code> - creates graph structure</li> <li>[ ] #8 <code>calculate_positions(graph, layout_type) -&gt; GraphLayout</code> - layout algorithm</li> <li>[ ] #9 <code>filter_graph(graph, filter) -&gt; Graph</code> - prune nodes/edges</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.03%20-%20Graph-Structures/#graph-algorithms-pure","title":"Graph Algorithms (Pure)","text":"<ul> <li>[ ] #10 <code>find_connected_components(graph) -&gt; List[List[NodeId]]</code></li> <li>[ ] #11 <code>calculate_centrality(graph) -&gt; Dict[NodeId, float]</code></li> <li>[ ] #12 <code>detect_cycles(graph) -&gt; List[List[NodeId]]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.04%20-%20Text-Mining-Types/","title":"Text Mining Types","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.04%20-%20Text-Mining-Types/#description","title":"Description","text":"<p>Text mining value objects: WordFrequency, Collocation, SearchResult, StopWordList. Support word cloud and text analysis features.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.04%20-%20Text-Mining-Types/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.04%20-%20Text-Mining-Types/#text-mining-value-objects-frozen-dataclasses","title":"Text Mining Value Objects (frozen dataclasses)","text":"<ul> <li>[ ] #1 <code>WordFrequency</code>: word (str), count (int), sources (List[SourceId])</li> <li>[ ] #2 <code>Collocation</code>: words (Tuple[str, str]), frequency, pmi_score</li> <li>[ ] #3 <code>SearchResult</code>: source_id, position (TextPosition), context (str), match (str)</li> <li>[ ] #4 <code>StopWordList</code>: words (FrozenSet[str]), language</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.04%20-%20Text-Mining-Types/#textminingconfig-frozen-dataclass","title":"TextMiningConfig (frozen dataclass)","text":"<ul> <li>[ ] #5 <code>TextMiningConfig</code>: min_word_length, stopwords, case_sensitive, stemming</li> <li>[ ] #6 Immutable configuration for text analysis</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.04%20-%20Text-Mining-Types/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #7 <code>tokenize(text, config) -&gt; List[str]</code> - pure tokenization</li> <li>[ ] #8 <code>calculate_word_frequencies(tokens) -&gt; List[WordFrequency]</code></li> <li>[ ] #9 <code>find_collocations(tokens, window_size) -&gt; List[Collocation]</code></li> <li>[ ] #10 <code>search_exact(text, pattern) -&gt; List[SearchResult]</code></li> <li>[ ] #11 <code>search_regex(text, pattern) -&gt; List[SearchResult]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.04%20-%20Text-Mining-Types/#invariants","title":"Invariants","text":"<ul> <li>[ ] #12 <code>is_valid_regex(pattern) -&gt; bool</code></li> <li>[ ] #13 <code>is_valid_word(word, min_length) -&gt; bool</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/","title":"Journal Entity","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#description","title":"Description","text":"<p>Define domain entity for Research Journals (reflexive research diaries). Journals document researcher thinking, decisions, and reflections throughout analysis.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Module: <code>journals.py</code></li> <li>Table: <code>journal</code> (jid, name, jentry, date, owner)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#entity-journal","title":"Entity: Journal","text":"<ul> <li>[ ] #1 <code>id: JournalId</code></li> <li>[ ] #2 <code>name: str</code> - Journal title (unique per project)</li> <li>[ ] #3 <code>content: str</code> - Rich text content (markdown supported)</li> <li>[ ] #4 <code>owner: str</code> - Coder who created it</li> <li>[ ] #5 <code>created_date: datetime</code></li> <li>[ ] #6 <code>modified_date: datetime</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#value-objects","title":"Value Objects","text":"<ul> <li>[ ] #7 <code>JournalId</code></li> <li>[ ] #8 <code>JournalContent</code> (validated, preserves markdown)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#domain-events","title":"Domain Events","text":"<ul> <li>[ ] #9 <code>JournalCreated(journal_id, name, owner)</code></li> <li>[ ] #10 <code>JournalUpdated(journal_id, modified_date)</code></li> <li>[ ] #11 <code>JournalDeleted(journal_id)</code></li> <li>[ ] #12 <code>JournalExported(journal_id, format, path)</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#validation","title":"Validation","text":"<ul> <li>[ ] #13 Name required, unique within project</li> <li>[ ] #14 Owner required</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/analysis/journal.py</code></li> <li><code>src/domain/analysis/events.py</code> (extend)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-016.05%20-%20Journal-Entity/#agent-first-considerations","title":"Agent-First Considerations","text":"<ul> <li>Agent can create journal entries to document its analysis decisions</li> <li>Agent-created entries marked with agent attribution</li> <li>Useful for audit trail of AI-assisted analysis</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017%20-%20Analysis-Infrastructure/","title":"Analysis Infrastructure","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017%20-%20Analysis-Infrastructure/#description","title":"Description","text":"<p>Implement query engines and exporters for Analysis.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017%20-%20Analysis-Infrastructure/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] QueryEngine (execute analysis queries)</li> <li>[ ] ReportGenerator (build reports)</li> <li>[ ] ExcelExporter (XLSX output)</li> <li>[ ] REFIQDAExporter (standard format)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017%20-%20Analysis-Infrastructure/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/analysis/query_engine.py</code></li> <li><code>src/infrastructure/exporters/</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/","title":"Report Query Engines","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/#description","title":"Description","text":"<p>Query engines: FrequencyQueryEngine, CoOccurrenceQueryEngine, CoderComparisonEngine. Execute reports with filter specifications.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/#query-engine-interfaces","title":"Query Engine Interfaces","text":"<ul> <li>[ ] #1 <code>FrequencyQueryEngine.execute(filters: ReportFilters) -&gt; FrequencyReport</code></li> <li>[ ] #2 <code>CoOccurrenceQueryEngine.execute(filters: ReportFilters, mode: OverlapMode) -&gt; CoOccurrenceMatrix</code></li> <li>[ ] #3 <code>CoderComparisonEngine.execute(coder_a, coder_b, filters) -&gt; CoderComparisonReport</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/#implementation-infrastructure-layer","title":"Implementation (Infrastructure Layer)","text":"<ul> <li>[ ] #4 Engines query repositories, never modify state (read-only)</li> <li>[ ] #5 Use optimized SQL queries for aggregations (not in-memory)</li> <li>[ ] #6 Return frozen value objects (immutable reports)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/#frequencyqueryengine","title":"FrequencyQueryEngine","text":"<ul> <li>[ ] #7 Groups segments by code, counts per code</li> <li>[ ] #8 Calculates percentages relative to total</li> <li>[ ] #9 Supports grouping by: code, category, coder, source</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/#cooccurrencequeryengine","title":"CoOccurrenceQueryEngine","text":"<ul> <li>[ ] #10 <code>OverlapMode</code> enum: OVERLAPPING (same position), EDGE_CONNECTED (adjacent)</li> <li>[ ] #11 Builds code \u00d7 code matrix efficiently</li> <li>[ ] #12 Symmetric matrix: cell[a,b] == cell[b,a]</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/#codercomparisonengine","title":"CoderComparisonEngine","text":"<ul> <li>[ ] #13 Calculates Cohen's Kappa for two coders</li> <li>[ ] #14 Identifies agreement/disagreement segments</li> <li>[ ] #15 Returns detailed comparison with per-code breakdown</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.01%20-%20Report-Query-Engines/#performance","title":"Performance","text":"<ul> <li>[ ] #16 Optimized for large datasets (100k+ segments)</li> <li>[ ] #17 Supports progress callback for long-running queries</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/","title":"Text Mining Engine","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/#description","title":"Description","text":"<p>TextMiningEngine: word frequency analysis, collocation detection, exact/regex text search across coded segments.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/#textminingengine-interface","title":"TextMiningEngine Interface","text":"<ul> <li>[ ] #1 <code>calculate_word_frequencies(sources, config) -&gt; List[WordFrequency]</code></li> <li>[ ] #2 <code>find_collocations(sources, config, window_size) -&gt; List[Collocation]</code></li> <li>[ ] #3 <code>search_exact(sources, query) -&gt; List[SearchResult]</code></li> <li>[ ] #4 <code>search_regex(sources, pattern) -&gt; List[SearchResult]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/#configuration","title":"Configuration","text":"<ul> <li>[ ] #5 <code>TextMiningConfig</code>: min_word_length, stopwords, case_sensitive, stemming</li> <li>[ ] #6 Support multiple languages for stopwords</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/#word-frequency-analysis","title":"Word Frequency Analysis","text":"<ul> <li>[ ] #7 Tokenizes text, filters stopwords, counts frequencies</li> <li>[ ] #8 Returns sorted by frequency descending</li> <li>[ ] #9 Includes source distribution per word</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/#collocation-detection","title":"Collocation Detection","text":"<ul> <li>[ ] #10 Finds frequently co-occurring word pairs</li> <li>[ ] #11 Calculates PMI (Pointwise Mutual Information) score</li> <li>[ ] #12 Configurable window size for adjacency</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/#search","title":"Search","text":"<ul> <li>[ ] #13 Exact search: case-sensitive/insensitive option</li> <li>[ ] #14 Regex search: validates pattern before execution</li> <li>[ ] #15 Returns context (surrounding text) with matches</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.02%20-%20Text-Mining-Engine/#performance","title":"Performance","text":"<ul> <li>[ ] #16 Streaming processing for large source collections</li> <li>[ ] #17 Progress callback support</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/","title":"Network Graph Generator","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/#description","title":"Description","text":"<p>NetworkGraphGenerator: build code relationship graphs, calculate node positions, support various layout algorithms.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/#networkgraphgenerator-interface","title":"NetworkGraphGenerator Interface","text":"<ul> <li>[ ] #1 <code>generate_code_graph(codes, categories, config) -&gt; Graph</code></li> <li>[ ] #2 <code>generate_cooccurrence_graph(matrix, threshold) -&gt; Graph</code></li> <li>[ ] #3 <code>calculate_layout(graph, layout_type) -&gt; GraphLayout</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/#layout-algorithms","title":"Layout Algorithms","text":"<ul> <li>[ ] #4 <code>LayoutType.TREE</code>: hierarchical category layout</li> <li>[ ] #5 <code>LayoutType.FORCE</code>: force-directed spring layout</li> <li>[ ] #6 <code>LayoutType.CIRCULAR</code>: codes arranged in circle</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/#graph-building","title":"Graph Building","text":"<ul> <li>[ ] #7 Nodes from codes and categories</li> <li>[ ] #8 Edges from parent-child relationships</li> <li>[ ] #9 Co-occurrence edges from matrix (weighted)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #10 <code>apply_force_layout(graph, iterations) -&gt; List[NodePosition]</code> - pure calculation</li> <li>[ ] #11 <code>apply_tree_layout(graph, root_id) -&gt; List[NodePosition]</code></li> <li>[ ] #12 <code>prune_graph(graph, min_weight) -&gt; Graph</code> - remove weak edges</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/#export","title":"Export","text":"<ul> <li>[ ] #13 Graph exportable to JSON for visualization library</li> <li>[ ] #14 Position data included for rendering</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.03%20-%20Network-Graph-Generator/#configuration","title":"Configuration","text":"<ul> <li>[ ] #15 <code>GraphConfig</code>: max_nodes, min_edge_weight, layout_params</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/","title":"Analysis Exporters","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/#description","title":"Description","text":"<p>Exporters: Excel (XLSX with formatting), PDF (for graphs), Image (PNG for charts). Support all report types.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/#exporter-interfaces","title":"Exporter Interfaces","text":"<ul> <li>[ ] #1 <code>ExcelExporter.export(report, path) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #2 <code>PDFExporter.export(graph, path) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #3 <code>ImageExporter.export(chart, path, format) -&gt; Result[Path, ExportError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/#excel-export-xlsx","title":"Excel Export (XLSX)","text":"<ul> <li>[ ] #4 Support all report types: Frequency, CoOccurrence, CoderComparison</li> <li>[ ] #5 Formatted headers, column widths, number formats</li> <li>[ ] #6 Multiple sheets for complex reports</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/#pdf-export","title":"PDF Export","text":"<ul> <li>[ ] #7 Network graphs rendered to PDF</li> <li>[ ] #8 Configurable page size and orientation</li> <li>[ ] #9 Title and legend included</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/#image-export","title":"Image Export","text":"<ul> <li>[ ] #10 PNG format for charts and graphs</li> <li>[ ] #11 Configurable resolution (DPI)</li> <li>[ ] #12 Transparent background option</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/#csv-export","title":"CSV Export","text":"<ul> <li>[ ] #13 Simple tabular export for data interchange</li> <li>[ ] #14 Configurable delimiter</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.04%20-%20Analysis-Exporters/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #15 <code>ExportError</code> union: FileNotWritable, DiskFull, RenderingFailed</li> <li>[ ] #16 Returns Result[Path, ExportError]</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/","title":"SQL Query Executor","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/#description","title":"Description","text":"<p>Safe read-only SQL executor: validate queries, prevent modifications, track performance. SavedQueryRepository for custom queries.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/#sqlqueryexecutor-interface","title":"SQLQueryExecutor Interface","text":"<ul> <li>[ ] #1 <code>execute(query: str) -&gt; Result[QueryResult, QueryError]</code></li> <li>[ ] #2 <code>validate_query(query: str) -&gt; Result[None, ValidationError]</code></li> <li>[ ] #3 <code>get_performance_stats(query) -&gt; QueryPerformance</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/#safety-validation","title":"Safety Validation","text":"<ul> <li>[ ] #4 Only SELECT statements allowed (read-only)</li> <li>[ ] #5 Reject INSERT, UPDATE, DELETE, DROP, ALTER</li> <li>[ ] #6 Prevent SQL injection via parameterization</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/#queryresult-value-object","title":"QueryResult Value Object","text":"<ul> <li>[ ] #7 <code>QueryResult</code>: columns (List[str]), rows (List[List]), row_count, execution_time_ms</li> <li>[ ] #8 Immutable result</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/#saved-queries-repository","title":"Saved Queries Repository","text":"<ul> <li>[ ] #9 <code>save_query(name, query) -&gt; Result[SavedQueryId, Error]</code></li> <li>[ ] #10 <code>load_query(query_id) -&gt; Optional[SavedQuery]</code></li> <li>[ ] #11 <code>list_saved_queries() -&gt; List[SavedQuery]</code></li> <li>[ ] #12 <code>delete_query(query_id) -&gt; Result[None, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/#default-queries","title":"Default Queries","text":"<ul> <li>[ ] #13 Pre-built queries for common analysis tasks</li> <li>[ ] #14 Template queries with placeholder parameters</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.05%20-%20SQL-Query-Executor/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #15 <code>QueryError</code> union: InvalidSQL, Forbidden, ExecutionFailed, Timeout</li> <li>[ ] #16 Query timeout limit (configurable, default 30s)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/","title":"Journal Repository","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/#description","title":"Description","text":"<p>Repository and export services for Research Journals.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Table: <code>journal</code> in SQLite database</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/#journalrepository-interface","title":"JournalRepository Interface","text":"<ul> <li>[ ] #1 <code>create(journal: Journal) -&gt; JournalId</code></li> <li>[ ] #2 <code>get_by_id(id: JournalId) -&gt; Journal | None</code></li> <li>[ ] #3 <code>get_all() -&gt; list[Journal]</code></li> <li>[ ] #4 <code>get_by_owner(owner: str) -&gt; list[Journal]</code></li> <li>[ ] #5 <code>update(journal: Journal) -&gt; None</code></li> <li>[ ] #6 <code>delete(id: JournalId) -&gt; None</code></li> <li>[ ] #7 <code>search(query: str) -&gt; list[tuple[Journal, list[Match]]]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/#journalexporter-service","title":"JournalExporter Service","text":"<ul> <li>[ ] #8 <code>export_to_text(journal, path) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #9 <code>export_to_markdown(journal, path) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #10 <code>export_to_odt(journal, path) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #11 <code>export_all(journals, path, format) -&gt; Result[Path, ExportError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/#sqlite-implementation","title":"SQLite Implementation","text":"<ul> <li>[ ] #12 Map to existing <code>journal</code> table schema</li> <li>[ ] #13 Full-text search support</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/analysis/journal_repository.py</code></li> <li><code>src/infrastructure/analysis/journal_exporter.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.06%20-%20Journal-Repository/#database-schema","title":"Database Schema","text":"<pre><code>CREATE TABLE journal (\n    jid INTEGER PRIMARY KEY,\n    name TEXT,\n    jentry TEXT,\n    date TEXT,\n    owner TEXT\n);\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/","title":"Codebook Generator","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#description","title":"Description","text":"<p>Generate codebooks - structured documents listing all codes with definitions, categories, and frequencies.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Module: <code>codebook.py</code></li> <li>Features: Hierarchical export to ODT</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#codebookgenerator-service","title":"CodebookGenerator Service","text":"<ul> <li>[ ] #1 <code>generate(options: CodebookOptions) -&gt; Codebook</code></li> <li>[ ] #2 Build hierarchical structure (categories \u2192 subcategories \u2192 codes)</li> <li>[ ] #3 Include code memos/definitions</li> <li>[ ] #4 Calculate code frequencies</li> <li>[ ] #5 Filter by category (optional)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#codebookoptions","title":"CodebookOptions","text":"<ul> <li>[ ] #6 <code>include_memos: bool</code> - Include code definitions</li> <li>[ ] #7 <code>include_frequencies: bool</code> - Include usage counts</li> <li>[ ] #8 <code>include_examples: bool</code> - Include sample coded segments</li> <li>[ ] #9 <code>category_filter: list[int] | None</code> - Filter to specific categories</li> <li>[ ] #10 <code>max_examples: int</code> - Limit examples per code</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#codebook-structure","title":"Codebook Structure","text":"<ul> <li>[ ] #11 <code>Codebook</code>: categories, codes, metadata</li> <li>[ ] #12 <code>CodebookEntry</code>: code_name, color, memo, frequency, examples, children</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#export-formats","title":"Export Formats","text":"<ul> <li>[ ] #13 <code>export_to_text(codebook, path) -&gt; Result[Path, Error]</code></li> <li>[ ] #14 <code>export_to_markdown(codebook, path) -&gt; Result[Path, Error]</code></li> <li>[ ] #15 <code>export_to_odt(codebook, path) -&gt; Result[Path, Error]</code></li> <li>[ ] #16 <code>export_to_xlsx(codebook, path) -&gt; Result[Path, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/analysis/codebook_generator.py</code></li> <li><code>src/infrastructure/analysis/codebook_exporter.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-017.07%20-%20Codebook-Generator/#output-example","title":"Output Example","text":"<pre><code>CODEBOOK: Project Name\nGenerated: 2026-01-30\n\nCategory: Interview Themes\n\u251c\u2500\u2500 Work-Life Balance (freq: 45)\n\u2502   Definition: Statements about balancing professional and personal life\n\u2502   Example: \"I struggle to find time for my family...\"\n\u251c\u2500\u2500 Career Progression (freq: 32)\n\u2502   Definition: Discussions of career advancement\n\u2514\u2500\u2500 Subcategory: Challenges\n    \u251c\u2500\u2500 Time Pressure (freq: 28)\n    \u2514\u2500\u2500 Resource Constraints (freq: 15)\n</code></pre>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018%20-%20Analysis-Application/","title":"Analysis Application","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018%20-%20Analysis-Application/#description","title":"Description","text":"<p>Implement the application layer for Analysis with Agent tool registration.</p> <p>Agent-First: Controller serves both UI and agent. AI can answer analytical questions.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018%20-%20Analysis-Application/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] AnalysisController implementation</li> <li>[ ] Report generation commands</li> <li>[ ] Export commands</li> <li>[ ] Query execution</li> <li>[ ] Events published for state changes</li> <li>[ ] SignalBridge wiring complete (domain events \u2192 Qt signals)</li> <li>[ ] Agent tools registered (query_codes, get_frequency)</li> <li>[ ] AI can answer \"How many segments coded with X?\"</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018%20-%20Analysis-Application/#subtasks","title":"Subtasks","text":"<p>Ordered by dependency flow: Controller \u2192 Commands \u2192 Wiring \u2192 Agent</p> ID Subtask Status Wires Controller &amp; Commands QC-018.01 Report Generation Commands To Do Controller \u2192 Query \u2192 Repo QC-018.02 Export Commands To Do Controller \u2192 Exporter QC-018.03 Text Mining Commands To Do Controller \u2192 NLP Service QC-018.04 Graph Commands To Do Controller \u2192 Graph Builder QC-018.05 SQL Query Commands To Do Controller \u2192 Query Executor QC-018.07 Journal Commands To Do Controller \u2192 Deriver \u2192 Repo QC-018.08 Codebook Export Command To Do Controller \u2192 Exporter Signal Bridge Wiring QC-018.09 Analysis Signal Bridge To Do EventBus \u2192 Bridge \u2192 Qt Signals QC-018.10 Signal Payloads To Do Event \u2192 Payload DTOs QC-018.11 Event Converters To Do Converter per event type Agent Integration QC-018.06 Analysis Agent Tools To Do MCP schemas + registration QC-018.12 Integration Tests To Do End-to-end flow tests"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018%20-%20Analysis-Application/#event-flow-map","title":"Event Flow Map","text":"Domain Event Signal Bridge Signal UI Subscribers ReportGenerated <code>report_generated</code> ReportViewer, ActivityPanel ReportExported <code>report_exported</code> ExportDialog QueryExecuted <code>query_executed</code> SQLQueryInterface ChartGenerated <code>chart_generated</code> ChartsScreen GraphGenerated <code>graph_generated</code> NetworkGraphView WordCloudGenerated <code>wordcloud_generated</code> WordCloudGenerator JournalEntryCreated <code>journal_entry_created</code> JournalPanel JournalEntryUpdated <code>journal_entry_updated</code> JournalPanel"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018%20-%20Analysis-Application/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/controllers/analysis_controller.py</code></li> <li><code>src/application/signal_bridge/analysis_bridge.py</code></li> <li><code>src/application/signal_bridge/analysis_payloads.py</code></li> <li><code>src/application/signal_bridge/analysis_converters.py</code></li> <li><code>src/agent_context/tools/analysis.py</code></li> <li><code>src/agent_context/schemas/analysis_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.01%20-%20Report-Generation-Commands/","title":"Report Generation Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.01%20-%20Report-Generation-Commands/#description","title":"Description","text":"<p>Commands: GenerateFrequencyReport, GenerateCodingSummary, GenerateCoOccurrenceMatrix, GenerateCoderComparison. Apply filters, return report data.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.01%20-%20Report-Generation-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.01%20-%20Report-Generation-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>generate_frequency_report(filters) -&gt; Result[FrequencyReport, Error]</code></li> <li>[ ] #2 <code>generate_coding_summary(filters) -&gt; Result[CodingSummaryReport, Error]</code></li> <li>[ ] #3 <code>generate_cooccurrence_matrix(filters, mode) -&gt; Result[CoOccurrenceMatrix, Error]</code></li> <li>[ ] #4 <code>generate_coder_comparison(coder_a, coder_b, filters) -&gt; Result[CoderComparisonReport, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.01%20-%20Report-Generation-Commands/#controller-flow-per-fddd-pattern","title":"Controller Flow (per fDDD pattern)","text":"<ul> <li>[ ] #5 Fetch segments from repository \u2192 apply filters \u2192 call query engine \u2192 return report</li> <li>[ ] #6 Reports are immutable value objects</li> <li>[ ] #7 No side effects - pure generation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.01%20-%20Report-Generation-Commands/#progress-reporting","title":"Progress Reporting","text":"<ul> <li>[ ] #8 <code>progress_callback: Optional[Callable[[int, int], None]]</code></li> <li>[ ] #9 For large datasets, report generation progress</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.01%20-%20Report-Generation-Commands/#caching-optional","title":"Caching (Optional)","text":"<ul> <li>[ ] #10 Cache recently generated reports</li> <li>[ ] #11 Invalidate cache on segment/code changes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.01%20-%20Report-Generation-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #12 <code>ReportGenerated</code> event: report_type, filters, generation_time_ms</li> <li>[ ] #13 For audit trail and analytics</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/","title":"Export Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/#description","title":"Description","text":"<p>Commands: ExportReportToExcel, ExportGraphToPDF, ExportChartToImage, ExportToCSV. Support all analysis output types.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>export_report_to_excel(report, path) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #2 <code>export_graph_to_pdf(graph, path) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #3 <code>export_chart_to_image(chart, path, format) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #4 <code>export_to_csv(data, path, delimiter) -&gt; Result[Path, ExportError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/#default-path-suggestions","title":"Default Path Suggestions","text":"<ul> <li>[ ] #5 <code>suggest_export_path(report_type, format) -&gt; Path</code></li> <li>[ ] #6 Pattern: <code>{project_name}_{report_type}_{date}.{ext}</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/#export-options","title":"Export Options","text":"<ul> <li>[ ] #7 <code>ExportOptions</code>: include_headers, format_numbers, date_format</li> <li>[ ] #8 Configurable per export</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #9 <code>ReportExported</code> event: report_type, path, format, file_size</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #10 <code>ExportError</code> union: FileNotWritable, DiskFull, InvalidPath</li> <li>[ ] #11 Returns Result[Path, ExportError]</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.02%20-%20Export-Commands/#batch-export","title":"Batch Export","text":"<ul> <li>[ ] #12 <code>export_all_reports(path, formats) -&gt; Result[List[Path], Error]</code></li> <li>[ ] #13 Exports all standard reports to folder</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/","title":"Text Mining Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/#description","title":"Description","text":"<p>Commands: ExecuteWordFrequency, FindCollocations, SearchText (exact/regex). Return results for word cloud and text analysis.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>execute_word_frequency(sources, config) -&gt; Result[List[WordFrequency], Error]</code></li> <li>[ ] #2 <code>find_collocations(sources, config, window) -&gt; Result[List[Collocation], Error]</code></li> <li>[ ] #3 <code>search_text(sources, query, mode) -&gt; Result[List[SearchResult], Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/#search-modes","title":"Search Modes","text":"<ul> <li>[ ] #4 <code>SearchMode</code> enum: EXACT, REGEX, FUZZY</li> <li>[ ] #5 Fuzzy search uses similarity threshold</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/#controller-flow","title":"Controller Flow","text":"<ul> <li>[ ] #6 Fetch sources \u2192 call TextMiningEngine \u2192 return results</li> <li>[ ] #7 Results are immutable value objects</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/#word-cloud-support","title":"Word Cloud Support","text":"<ul> <li>[ ] #8 Word frequencies directly usable for word cloud generation</li> <li>[ ] #9 Configurable max words for display</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/#progress-reporting","title":"Progress Reporting","text":"<ul> <li>[ ] #10 Progress callback for large source collections</li> <li>[ ] #11 <code>progress_callback(sources_processed, total_sources)</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.03%20-%20Text-Mining-Commands/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #12 <code>TextMiningError</code>: InvalidRegex, SourceNotFound, ProcessingFailed</li> <li>[ ] #13 Returns Result[T, TextMiningError]</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/","title":"Graph Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/#description","title":"Description","text":"<p>Commands: GenerateNetworkGraph, SaveGraphConfiguration, LoadGraphConfiguration. Support interactive graph exploration.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>generate_network_graph(config) -&gt; Result[Graph, Error]</code></li> <li>[ ] #2 <code>calculate_layout(graph, layout_type) -&gt; Result[GraphLayout, Error]</code></li> <li>[ ] #3 <code>save_graph_configuration(graph_id, config) -&gt; Result[None, Error]</code></li> <li>[ ] #4 <code>load_graph_configuration(graph_id) -&gt; Result[GraphConfig, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/#graph-types","title":"Graph Types","text":"<ul> <li>[ ] #5 Code hierarchy graph (categories + codes)</li> <li>[ ] #6 Co-occurrence graph (code relationships)</li> <li>[ ] #7 Case-source graph (case memberships)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/#configuration-persistence","title":"Configuration Persistence","text":"<ul> <li>[ ] #8 Save: layout positions, visibility settings, filters</li> <li>[ ] #9 Load: restore exact graph state</li> <li>[ ] #10 Named configurations for reuse</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/#interactive-updates","title":"Interactive Updates","text":"<ul> <li>[ ] #11 <code>update_node_position(graph_id, node_id, x, y) -&gt; Result[None, Error]</code></li> <li>[ ] #12 User can drag nodes, positions saved</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/#export-integration","title":"Export Integration","text":"<ul> <li>[ ] #13 <code>export_graph(graph, path, format) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #14 Formats: PDF, PNG, SVG</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.04%20-%20Graph-Commands/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #15 <code>GraphError</code>: InvalidConfig, NodeNotFound, LayoutFailed</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/","title":"SQL Query Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/#description","title":"Description","text":"<p>Commands: ExecuteSQLQuery (read-only), SaveSQLQuery, LoadSQLQuery, ListSavedQueries. Validate query safety.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>execute_sql_query(query: str) -&gt; Result[QueryResult, QueryError]</code></li> <li>[ ] #2 <code>save_sql_query(name, query) -&gt; Result[SavedQueryId, Error]</code></li> <li>[ ] #3 <code>load_sql_query(query_id) -&gt; Result[SavedQuery, Error]</code></li> <li>[ ] #4 <code>list_saved_queries() -&gt; List[SavedQuery]</code></li> <li>[ ] #5 <code>delete_sql_query(query_id) -&gt; Result[None, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/#query-safety","title":"Query Safety","text":"<ul> <li>[ ] #6 Validate query is read-only (SELECT only)</li> <li>[ ] #7 Reject dangerous operations (DROP, DELETE, etc.)</li> <li>[ ] #8 Timeout protection (default 30 seconds)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/#default-queries","title":"Default Queries","text":"<ul> <li>[ ] #9 Pre-built queries for common tasks</li> <li>[ ] #10 \"All codes with counts\", \"Segments by source\", etc.</li> <li>[ ] #11 User cannot modify default queries</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/#result-handling","title":"Result Handling","text":"<ul> <li>[ ] #12 <code>QueryResult</code>: columns, rows, row_count, execution_time_ms</li> <li>[ ] #13 Results exportable to CSV/Excel</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #14 <code>QueryError</code>: InvalidSQL, Forbidden, Timeout, ExecutionFailed</li> <li>[ ] #15 User-friendly error messages</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.05%20-%20SQL-Query-Commands/#audit-trail","title":"Audit Trail","text":"<ul> <li>[ ] #16 Log executed queries for debugging</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.06%20-%20Analysis-Agent-Tools/","title":"Analysis Agent Tools","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.06%20-%20Analysis-Agent-Tools/#description","title":"Description","text":"<p>Agent tools: get_code_frequency (AUTONOMOUS), get_co_occurrence (AUTONOMOUS), query_codes (AUTONOMOUS), search_text (AUTONOMOUS). Enable AI analytical questions.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.06%20-%20Analysis-Agent-Tools/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.06%20-%20Analysis-Agent-Tools/#agent-tool-schemas-all-autonomous-read-only-analysis","title":"Agent Tool Schemas (All AUTONOMOUS - read-only analysis)","text":"<ul> <li>[ ] #1 <code>get_code_frequency</code> tool:</li> <li>Input: filters (code_ids, source_ids, case_ids optional)</li> <li>Output: frequencies (list of code, count, percentage)</li> <li> <p>Trust: AUTONOMOUS (read-only)</p> </li> <li> <p>[ ] #2 <code>get_co_occurrence</code> tool:</p> </li> <li>Input: filters, mode (overlapping|edge_connected)</li> <li>Output: matrix (code pairs with counts)</li> <li> <p>Trust: AUTONOMOUS</p> </li> <li> <p>[ ] #3 <code>query_codes</code> tool:</p> </li> <li>Input: filters, include_segments (bool)</li> <li>Output: codes with optional segment details</li> <li> <p>Trust: AUTONOMOUS</p> </li> <li> <p>[ ] #4 <code>search_text</code> tool:</p> </li> <li>Input: query (text), mode (exact|regex|fuzzy)</li> <li>Output: matches (source_id, position, context)</li> <li> <p>Trust: AUTONOMOUS</p> </li> <li> <p>[ ] #5 <code>compare_coders</code> tool:</p> </li> <li>Input: coder_a, coder_b, filters</li> <li>Output: kappa_score, agreements, disagreements</li> <li>Trust: AUTONOMOUS</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.06%20-%20Analysis-Agent-Tools/#ai-enabled-questions","title":"AI-Enabled Questions","text":"<ul> <li>[ ] #6 Agent can answer: \"How many segments coded with X?\"</li> <li>[ ] #7 Agent can answer: \"Which codes appear together most often?\"</li> <li>[ ] #8 Agent can answer: \"What is the inter-rater reliability?\"</li> <li>[ ] #9 Agent can answer: \"Find all mentions of 'keyword'\"</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.06%20-%20Analysis-Agent-Tools/#schema-structure","title":"Schema Structure","text":"<ul> <li>[ ] #10 Each schema: name, description, inputSchema (JSON Schema), trust_level</li> <li>[ ] #11 Resource URIs: <code>qualcoder://analysis/tools/{tool_name}</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.06%20-%20Analysis-Agent-Tools/#controller-integration","title":"Controller Integration","text":"<ul> <li>[ ] #12 Tools invoke AnalysisController query methods</li> <li>[ ] #13 Returns data as JSON for agent processing</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.06%20-%20Analysis-Agent-Tools/#implementation-notes","title":"Implementation Notes","text":"<p>For MCP (Model Context Protocol): - Schemas follow MCP Tool Schema specification - All tools are read-only (AUTONOMOUS trust level)</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/","title":"Journal Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#description","title":"Description","text":"<p>Application layer commands for Research Journal management.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#crud-commands","title":"CRUD Commands","text":"<ul> <li>[ ] #1 <code>create_journal(name, content?, owner?) -&gt; Result[JournalId, Error]</code></li> <li>[ ] #2 <code>update_journal(journal_id, content) -&gt; Result[None, Error]</code></li> <li>[ ] #3 <code>rename_journal(journal_id, new_name) -&gt; Result[None, Error]</code></li> <li>[ ] #4 <code>delete_journal(journal_id) -&gt; Result[None, Error]</code></li> <li>[ ] #5 <code>get_journal(journal_id) -&gt; Journal | None</code></li> <li>[ ] #6 <code>list_journals(owner?) -&gt; list[Journal]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#search-commands","title":"Search Commands","text":"<ul> <li>[ ] #7 <code>search_journals(query) -&gt; list[SearchResult]</code></li> <li>[ ] #8 <code>SearchResult</code>: journal, matches (with positions)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#export-commands","title":"Export Commands","text":"<ul> <li>[ ] #9 <code>export_journal(journal_id, format, path) -&gt; Result[Path, Error]</code></li> <li>[ ] #10 <code>export_all_journals(format, path) -&gt; Result[Path, Error]</code></li> <li>[ ] #11 Supported formats: text, markdown, odt</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#auto-save","title":"Auto-Save","text":"<ul> <li>[ ] #12 <code>auto_save_journal(journal_id, content) -&gt; None</code></li> <li>[ ] #13 Debounced save (e.g., 1.5 seconds after last keystroke)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #14 Publish domain events for all operations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/analysis/journal_controller.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.07%20-%20Journal-Commands/#agent-tools","title":"Agent Tools","text":"<ul> <li><code>create_journal(name, content)</code> - Agent can create analysis notes</li> <li><code>append_to_journal(journal_id, content)</code> - Agent can add to existing</li> <li><code>search_journals(query)</code> - Agent can search research notes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/","title":"Codebook Export Command","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/#description","title":"Description","text":"<p>Application layer command for generating and exporting codebooks.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/#generate-command","title":"Generate Command","text":"<ul> <li>[ ] #1 <code>generate_codebook(options?) -&gt; Codebook</code></li> <li>[ ] #2 Default options if not specified</li> <li>[ ] #3 Returns in-memory codebook for preview</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/#export-command","title":"Export Command","text":"<ul> <li>[ ] #4 <code>export_codebook(format, path, options?) -&gt; Result[Path, ExportError]</code></li> <li>[ ] #5 Supported formats: text, markdown, odt, xlsx</li> <li>[ ] #6 Auto-suggest filename: <code>{project_name}_codebook_{date}.{ext}</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/#options-handling","title":"Options Handling","text":"<ul> <li>[ ] #7 Merge user options with defaults</li> <li>[ ] #8 Validate category_filter IDs exist</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #9 <code>CodebookGenerated(format, path, code_count)</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/analysis/codebook_controller.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.08%20-%20Codebook-Export-Command/#agent-tools","title":"Agent Tools","text":"<ul> <li><code>generate_codebook(format, options)</code> - Agent can generate for review</li> <li>Useful for AI to understand existing code structure</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.09%20-%20Analysis-Signal-Bridge/","title":"Analysis Signal Bridge","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.09%20-%20Analysis-Signal-Bridge/#description","title":"Description","text":"<p>Bridge between domain events and UI signals for the Analysis context. Enables UI to observe report generation and export events.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.09%20-%20Analysis-Signal-Bridge/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.09%20-%20Analysis-Signal-Bridge/#analysissignalbridge-class","title":"AnalysisSignalBridge Class","text":"<ul> <li>[ ] #1 Extends BaseSignalBridge from QC-003.01</li> <li>[ ] #2 Singleton instance accessible via <code>AnalysisSignalBridge.instance()</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.09%20-%20Analysis-Signal-Bridge/#ui-signals","title":"UI Signals","text":"<ul> <li>[ ] #3 <code>report_generated</code> signal - emits ReportGenerated payload</li> <li>[ ] #4 <code>report_exported</code> signal - emits ReportExported payload</li> <li>[ ] #5 <code>query_executed</code> signal - emits QueryExecuted payload</li> <li>[ ] #6 <code>chart_generated</code> signal - emits ChartGenerated payload</li> <li>[ ] #7 <code>graph_generated</code> signal - emits GraphGenerated payload</li> <li>[ ] #8 <code>wordcloud_generated</code> signal - emits WordCloudGenerated payload</li> <li>[ ] #9 <code>journal_entry_created</code> signal - emits JournalEntryCreated payload</li> <li>[ ] #10 <code>journal_entry_updated</code> signal - emits JournalEntryUpdated payload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.09%20-%20Analysis-Signal-Bridge/#event-bus-subscription","title":"Event Bus Subscription","text":"<ul> <li>[ ] #11 Subscribe to all Analysis context events on EventBus</li> <li>[ ] #12 Event handler maps event type \u2192 corresponding UI signal emission</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.09%20-%20Analysis-Signal-Bridge/#thread-safety","title":"Thread Safety","text":"<ul> <li>[ ] #13 Thread-safe emission (inherits from BaseSignalBridge)</li> <li>[ ] #14 Long-running report generation (background) safely emits to UI</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.09%20-%20Analysis-Signal-Bridge/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/analysis_bridge.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/","title":"Signal Payloads (Analysis)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/#description","title":"Description","text":"<p>Define Qt-friendly payload dataclasses for the Analysis context. These are emitted by SignalBridge signals to UI widgets.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/#report-payloads","title":"Report Payloads","text":"<ul> <li>[ ] #1 <code>ReportGeneratedPayload</code>: report_id (str), report_type (str), title (str), row_count (int), generated_at (str)</li> <li>[ ] #2 <code>ReportExportedPayload</code>: report_id (str), file_path (str), format (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/#query-payloads","title":"Query Payloads","text":"<ul> <li>[ ] #3 <code>QueryExecutedPayload</code>: query_id (str), sql (str), row_count (int), column_names (list[str]), execution_ms (int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/#visualization-payloads","title":"Visualization Payloads","text":"<ul> <li>[ ] #4 <code>ChartGeneratedPayload</code>: chart_id (str), chart_type (str), title (str), data_points (int)</li> <li>[ ] #5 <code>GraphGeneratedPayload</code>: graph_id (str), node_count (int), edge_count (int)</li> <li>[ ] #6 <code>WordCloudGeneratedPayload</code>: cloud_id (str), word_count (int), top_words (list[str])</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/#journal-payloads","title":"Journal Payloads","text":"<ul> <li>[ ] #7 <code>JournalEntryCreatedPayload</code>: entry_id (str), title (str), created_at (str)</li> <li>[ ] #8 <code>JournalEntryUpdatedPayload</code>: entry_id (str), title (str), updated_at (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/#design-rules","title":"Design Rules","text":"<ul> <li>[ ] #9 All payloads are frozen dataclasses</li> <li>[ ] #10 Use primitive types only</li> <li>[ ] #11 Include summary data for display (counts, titles)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.10%20-%20Signal-Payloads/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/analysis_payloads.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.11%20-%20Event-Converters/","title":"Event Converters (Analysis)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.11%20-%20Event-Converters/#description","title":"Description","text":"<p>Implement converters that transform Analysis domain events into signal payloads.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.11%20-%20Event-Converters/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.11%20-%20Event-Converters/#converters","title":"Converters","text":"<ul> <li>[ ] #1 <code>ReportGeneratedConverter</code>: ReportGenerated \u2192 ReportGeneratedPayload</li> <li>[ ] #2 <code>ReportExportedConverter</code>: ReportExported \u2192 ReportExportedPayload</li> <li>[ ] #3 <code>QueryExecutedConverter</code>: QueryExecuted \u2192 QueryExecutedPayload</li> <li>[ ] #4 <code>ChartGeneratedConverter</code>: ChartGenerated \u2192 ChartGeneratedPayload</li> <li>[ ] #5 <code>GraphGeneratedConverter</code>: GraphGenerated \u2192 GraphGeneratedPayload</li> <li>[ ] #6 <code>WordCloudGeneratedConverter</code>: WordCloudGenerated \u2192 WordCloudGeneratedPayload</li> <li>[ ] #7 <code>JournalEntryCreatedConverter</code>: JournalEntryCreated \u2192 JournalEntryCreatedPayload</li> <li>[ ] #8 <code>JournalEntryUpdatedConverter</code>: JournalEntryUpdated \u2192 JournalEntryUpdatedPayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.11%20-%20Event-Converters/#registry","title":"Registry","text":"<ul> <li>[ ] #9 Register all converters in <code>AnalysisConverterRegistry</code></li> <li>[ ] #10 Registry used by AnalysisSignalBridge</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.11%20-%20Event-Converters/#testing","title":"Testing","text":"<ul> <li>[ ] #11 Unit tests for each converter</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-018.11%20-%20Event-Converters/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/analysis_converters.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019%20-%20Analysis-Presentation/","title":"Analysis Presentation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019%20-%20Analysis-Presentation/#description","title":"Description","text":"<p>Build the UI screens for Analysis &amp; Reports.</p> <p>Agent-First: Reports can be triggered by agent. AI-generated insights shown with attribution.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019%20-%20Analysis-Presentation/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Coding reports screen (mockup: <code>reports_coding.html</code>)</li> <li>[ ] Charts screen (mockup: <code>reports_charts.html</code>)</li> <li>[ ] Comparison screen (mockup: <code>reports_comparison.html</code>)</li> <li>[ ] Graph view screen (mockup: <code>graph_view.html</code>)</li> <li>[ ] Text mining screen (mockup: <code>text_mining.html</code>)</li> <li>[ ] Chart components (bar, pie, matrix)</li> <li>[ ] Agent insight attribution</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019%20-%20Analysis-Presentation/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/analysis/</code></li> <li>Mockups: <code>mockups/reports_*.html</code>, <code>mockups/graph_view.html</code>, <code>mockups/text_mining.html</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.01%20-%20Code-Frequency-Report/","title":"Code Frequency Report","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.01%20-%20Code-Frequency-Report/#description","title":"Description","text":"<p>Report showing code/category frequencies across coders. Tree view with counts, filtering by file/case/coder.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.01%20-%20Code-Frequency-Report/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Tree widget with code frequencies,Multi-coder frequency columns,Sort by total or alphabetically,Filter by file selection,Filter by case selection,Filter by coder,Export to text/Excel</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.02%20-%20Coding-Summary-Report/","title":"Coding Summary Report","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.02%20-%20Coding-Summary-Report/#description","title":"Description","text":"<p>Detailed coding report with coded segments, context, and metadata. Multiple export formats.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.02%20-%20Coding-Summary-Report/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Filter by files/cases/coders,Text limiters (min/max chars),Code count threshold,Text-in-context display,Media links for image/AV,Export TXT/ODT/HTML/XLSX/CSV,Right-click to view original</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.03%20-%20Coder-Comparison-Report/","title":"Coder Comparison Report","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.03%20-%20Coder-Comparison-Report/#description","title":"Description","text":"<p>Cohen's Kappa inter-rater reliability between two coders. Agreement statistics and comparison table.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.03%20-%20Coder-Comparison-Report/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Select two coders to compare,Agreement percentage display,Dual coded percentage,Cohen's Kappa calculation,Disagreement breakdown,Export comparison to Excel,Tree-based code display</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.04%20-%20Code-Co-occurrence-Matrix/","title":"Code Co-occurrence Matrix","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.04%20-%20Code-Co-occurrence-Matrix/#description","title":"Description","text":"<p>Matrix showing code relationships and overlaps. Overlapping and edge-connected codes analysis.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.04%20-%20Code-Co-occurrence-Matrix/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Code-to-code matrix display,Overlapping codes detection,Edge-connected codes,File/attribute filtering,Code/category selection,Hide blank rows/columns,Export to Excel,Cell click interaction</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.05%20-%20Chart-Components/","title":"Chart Components","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.05%20-%20Chart-Components/#description","title":"Description","text":"<p>Reusable chart components: bar, pie, sunburst, treemap, heatmap. All charts are interactive with tooltips and click handling.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.05%20-%20Chart-Components/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: Use Plotly with QtWebEngine for interactive charts.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.05%20-%20Chart-Components/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Bar chart component (frequency/volume),Pie chart component,Sunburst hierarchy chart,Treemap hierarchy chart,Heatmap (files vs codes / cases vs codes),Chart customization options,Export to HTML/image</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.06%20-%20Charts-Screen/","title":"Charts Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.06%20-%20Charts-Screen/#description","title":"Description","text":"<p>Main screen for chart visualizations. Chart type selection, data filtering, customization options.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.06%20-%20Charts-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Chart type selector dropdown,Data dimension selector (frequency/chars/area/time),Category limiter (top N),Count threshold filter,Coder/file/case selection,Chart display area,Export controls</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.07%20-%20Network-Graph-View/","title":"Network Graph View","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.07%20-%20Network-Graph-View/#description","title":"Description","text":"<p>Interactive code/category network diagram. Node selection, zoom/pan, branch navigation, save/load graphs.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.07%20-%20Network-Graph-View/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Acyclic graph layout,Node color customization,Category branch selection,Node count limiting,Interactive zoom/pan,Attach files/cases to graph,Export to PDF/image,Save/load graph configurations</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.08%20-%20Word-Cloud-Generator/","title":"Word Cloud Generator","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.08%20-%20Word-Cloud-Generator/#description","title":"Description","text":"<p>Generate word clouds from coded text segments. Customizable appearance, stopwords, n-grams.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.08%20-%20Word-Cloud-Generator/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Generate from coded segments,Background color selection,Foreground color palettes,N-gram options (1-4 words),Max word count setting,Custom stopwords file,Dimensions configuration,Export visualization</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.09%20-%20Text-Mining-Screen/","title":"Text Mining Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.09%20-%20Text-Mining-Screen/#description","title":"Description","text":"<p>Text analysis with bag of words, vocabulary frequency. File/case/code selection.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.09%20-%20Text-Mining-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Bag of words analysis,Vocabulary frequency table,File or case selection,Code selection filter,Coder filtering,Export selected text,Frequency distribution display</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.10%20-%20SQL-Query-Interface/","title":"SQL Query Interface","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.10%20-%20SQL-Query-Interface/#description","title":"Description","text":"<p>Direct SQL query interface for advanced users. Query editor, results table, export options.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.10%20-%20SQL-Query-Interface/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 SQL query editor with highlighting,Pre-built default queries,Save custom queries,Results in table widget,Export CSV/Excel/TSV,Query performance display,Cell-level interaction</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.11%20-%20Attribute-Filter-Dialog/","title":"Attribute Filter Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.11%20-%20Attribute-Filter-Dialog/#description","title":"Description","text":"<p>Reusable dialog for filtering by file/case attributes. Multiple operators, boolean logic.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.11%20-%20Attribute-Filter-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 File attribute selection,Case attribute selection,Operators (== != &gt; &lt; &gt;= &lt;= like between),AND/OR boolean logic,Tooltip display of criteria,Visual feedback on selection</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.12%20-%20Agent-Insight-Attribution/","title":"Agent Insight Attribution","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.12%20-%20Agent-Insight-Attribution/#description","title":"Description","text":"<p>Show AI-generated insights with attribution badges. Distinguish human vs AI analysis.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.12%20-%20Agent-Insight-Attribution/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 AI badge on agent-generated reports,Insight source attribution,Filter to show AI insights,Activity log for report generation,AI confidence indicators</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/","title":"Journal Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#description","title":"Description","text":"<p>UI for Research Journals - creating, editing, searching, and exporting research diaries.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#original-qualcoder-reference","title":"Original QualCoder Reference","text":"<ul> <li>Module: <code>journals.py</code> - <code>DialogJournals</code> class</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#journal-list-panel","title":"Journal List Panel","text":"<ul> <li>[ ] #1 Table: Name, Date, Owner</li> <li>[ ] #2 Sortable columns</li> <li>[ ] #3 Filter by owner dropdown</li> <li>[ ] #4 Add new journal button</li> <li>[ ] #5 Context menu (rename, delete, export)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#journal-editor-panel","title":"Journal Editor Panel","text":"<ul> <li>[ ] #6 Rich text editor with markdown support</li> <li>[ ] #7 Markdown highlighting (MarkdownHighlighter)</li> <li>[ ] #8 Auto-save indicator</li> <li>[ ] #9 Word count display</li> <li>[ ] #10 Last modified timestamp</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#search-dialog","title":"Search Dialog","text":"<ul> <li>[ ] #11 Search across all journals</li> <li>[ ] #12 Results list with journal name and match context</li> <li>[ ] #13 Click to navigate to match</li> <li>[ ] #14 Highlight search terms in editor</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#export-options","title":"Export Options","text":"<ul> <li>[ ] #15 Export current journal button</li> <li>[ ] #16 Export all journals button</li> <li>[ ] #17 Format selection (text, markdown, ODT)</li> <li>[ ] #18 File picker for destination</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#agent-activity","title":"Agent Activity","text":"<ul> <li>[ ] #19 Agent badge on agent-created journals</li> <li>[ ] #20 Filter to show/hide agent journals</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-019.13%20-%20Journal-Screen/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/analysis/journal_screen.py</code></li> <li><code>src/presentation/widgets/journal_editor.py</code></li> <li><code>src/presentation/dialogs/journal_search_dialog.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020%20-%20Agent-Session-Management/","title":"Agent Session Management","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020%20-%20Agent-Session-Management/#description","title":"Description","text":"<p>Implement session management and statistics tracking for AI agent interactions.</p> <p>Note: Trust levels and agent infrastructure are in M-001. This task adds session lifecycle, statistics, and suggestion queue management.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020%20-%20Agent-Session-Management/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Session lifecycle (create, active, end)</li> <li>[ ] Statistics tracking (actions, approvals, rejections)</li> <li>[ ] Suggestion queue management</li> <li>[ ] Batch operations (approve all, reject all)</li> <li>[ ] Session history persistence</li> <li>[ ] SignalBridge wiring complete (agent events \u2192 Qt signals)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020%20-%20Agent-Session-Management/#subtasks","title":"Subtasks","text":"<p>Ordered by dependency flow: Services \u2192 Wiring \u2192 Testing</p> ID Subtask Status Wires Services QC-020.01 Suggestion Queue Service To Do Service \u2192 Suggestion Store QC-020.02 Agent Statistics Service To Do Service \u2192 Stats Store QC-020.03 Chat Session Service To Do Service \u2192 LLM Client QC-020.04 Trust Level Controller To Do Controller \u2192 Trust Policies QC-020.05 Agent Activity Log To Do Service \u2192 Activity Store Signal Bridge Wiring QC-020.06 Agent Signal Bridge To Do EventBus \u2192 Bridge \u2192 Qt Signals QC-020.07 Signal Payloads To Do Event \u2192 Payload DTOs QC-020.08 Event Converters To Do Converter per event type Testing QC-020.09 Integration Tests To Do End-to-end flow tests"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020%20-%20Agent-Session-Management/#event-flow-map","title":"Event Flow Map","text":"Domain Event Signal Bridge Signal UI Subscribers SuggestionGenerated <code>suggestion_generated</code> SuggestionPanel, ReviewQueue SuggestionApproved <code>suggestion_approved</code> SuggestionPanel, ActivityPanel SuggestionRejected <code>suggestion_rejected</code> SuggestionPanel, ActivityPanel SessionStarted <code>session_started</code> AgentControlPanel SessionEnded <code>session_ended</code> AgentControlPanel TrustLevelChanged <code>trust_level_changed</code> AgentControlPanel AgentActionExecuted <code>agent_action_executed</code> ActivityPanel, Badges AgentMessageReceived <code>agent_message_received</code> AIChatScreen"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020%20-%20Agent-Session-Management/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/services/agent_session_service.py</code></li> <li><code>src/application/services/suggestion_queue_service.py</code></li> <li><code>src/application/signal_bridge/agent_bridge.py</code></li> <li><code>src/application/signal_bridge/agent_payloads.py</code></li> <li><code>src/application/signal_bridge/agent_converters.py</code></li> <li><code>src/infrastructure/repositories/agent/</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.01%20-%20Suggestion-Queue-Service/","title":"Suggestion Queue Service","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.01%20-%20Suggestion-Queue-Service/#description","title":"Description","text":"<p>SuggestionQueueService: queue pending suggestions, priority ordering, batch approve/reject operations, queue capacity limits, FIFO/priority modes.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.01%20-%20Suggestion-Queue-Service/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.01%20-%20Suggestion-Queue-Service/#suggestion-value-object-frozen-dataclass","title":"Suggestion Value Object (frozen dataclass)","text":"<ul> <li>[ ] #1 <code>Suggestion</code>: suggestion_id, tool_name, input_params, trust_level, created_at, priority</li> <li>[ ] #2 <code>SuggestionStatus</code> enum: PENDING, APPROVED, REJECTED, EXPIRED</li> <li>[ ] #3 Immutable - status changes create new Suggestion with updated status</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.01%20-%20Suggestion-Queue-Service/#suggestionqueueservice-interface","title":"SuggestionQueueService Interface","text":"<ul> <li>[ ] #4 <code>enqueue(suggestion: Suggestion) -&gt; Result[SuggestionId, QueueError]</code></li> <li>[ ] #5 <code>approve(suggestion_id) -&gt; Result[SuggestionApproved, ApproveError]</code></li> <li>[ ] #6 <code>reject(suggestion_id) -&gt; Result[SuggestionRejected, RejectError]</code></li> <li>[ ] #7 <code>batch_approve(suggestion_ids: List) -&gt; Result[BatchApproved, Error]</code></li> <li>[ ] #8 <code>batch_reject(suggestion_ids: List) -&gt; Result[BatchRejected, Error]</code></li> <li>[ ] #9 <code>get_pending() -&gt; List[Suggestion]</code> - ordered by priority/time</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.01%20-%20Suggestion-Queue-Service/#queue-configuration","title":"Queue Configuration","text":"<ul> <li>[ ] #10 <code>QueueMode</code> enum: FIFO (first-in-first-out), PRIORITY (by trust level/importance)</li> <li>[ ] #11 <code>max_pending_limit: int</code> - rejects new suggestions when at capacity</li> <li>[ ] #12 <code>expiry_duration: timedelta</code> - auto-expire old suggestions</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.01%20-%20Suggestion-Queue-Service/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #13 <code>SuggestionReceived</code> event: suggestion_id, tool_name, trust_level</li> <li>[ ] #14 <code>SuggestionApproved</code> event: suggestion_id, approved_by</li> <li>[ ] #15 <code>SuggestionRejected</code> event: suggestion_id, rejected_by, reason</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.01%20-%20Suggestion-Queue-Service/#thread-safety","title":"Thread Safety","text":"<ul> <li>[ ] #16 Queue operations are thread-safe (agent runs in separate thread)</li> <li>[ ] #17 Use locks or thread-safe collections for concurrent access</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.02%20-%20Agent-Statistics-Service/","title":"Agent Statistics Service","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.02%20-%20Agent-Statistics-Service/#description","title":"Description","text":"<p>AgentStatisticsService: track actions/minute, approval rate, rejection rate, session totals. Real-time metrics emission.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.02%20-%20Agent-Statistics-Service/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.02%20-%20Agent-Statistics-Service/#statistics-value-objects-frozen-dataclasses","title":"Statistics Value Objects (frozen dataclasses)","text":"<ul> <li>[ ] #1 <code>AgentStatistics</code>: actions_total, actions_per_minute, approval_rate, rejection_rate, session_duration</li> <li>[ ] #2 <code>ActionMetrics</code>: tool_name, count, avg_duration_ms, success_rate</li> <li>[ ] #3 Immutable - recalculated on each query</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.02%20-%20Agent-Statistics-Service/#agentstatisticsservice-interface","title":"AgentStatisticsService Interface","text":"<ul> <li>[ ] #4 <code>record_action(action: AgentAction) -&gt; None</code> - logs action for stats</li> <li>[ ] #5 <code>get_current_statistics() -&gt; AgentStatistics</code> - real-time stats</li> <li>[ ] #6 <code>get_statistics_for_period(start, end) -&gt; AgentStatistics</code> - historical</li> <li>[ ] #7 <code>get_per_tool_metrics() -&gt; Dict[str, ActionMetrics]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.02%20-%20Agent-Statistics-Service/#event-driven-updates","title":"Event-Driven Updates","text":"<ul> <li>[ ] #8 Subscribes to SuggestionApproved/Rejected events</li> <li>[ ] #9 Updates metrics on each action completion</li> <li>[ ] #10 Emits <code>StatisticsUpdated</code> event on significant changes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.02%20-%20Agent-Statistics-Service/#pure-calculation-functions","title":"Pure Calculation Functions","text":"<ul> <li>[ ] #11 <code>calculate_rate(count, total) -&gt; float</code> - pure percentage</li> <li>[ ] #12 <code>calculate_actions_per_minute(actions, duration) -&gt; float</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.02%20-%20Agent-Statistics-Service/#persistence","title":"Persistence","text":"<ul> <li>[ ] #13 Session statistics persisted to SQLite for history</li> <li>[ ] #14 Real-time metrics computed from in-memory state</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.03%20-%20Chat-Session-Service/","title":"Chat Session Service","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.03%20-%20Chat-Session-Service/#description","title":"Description","text":"<p>ChatSessionService: manage AI chat conversations, message history, context tracking, quick prompt handling. Persist conversation history.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.03%20-%20Chat-Session-Service/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.03%20-%20Chat-Session-Service/#chat-value-objects-frozen-dataclasses","title":"Chat Value Objects (frozen dataclasses)","text":"<ul> <li>[ ] #1 <code>ChatMessage</code>: message_id, role (USER|ASSISTANT|SYSTEM), content, timestamp</li> <li>[ ] #2 <code>ChatSession</code>: session_id, messages (List[ChatMessage]), context, created_at</li> <li>[ ] #3 Immutable - new messages create new session state</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.03%20-%20Chat-Session-Service/#chatsessionservice-interface","title":"ChatSessionService Interface","text":"<ul> <li>[ ] #4 <code>create_session() -&gt; ChatSession</code> - starts new conversation</li> <li>[ ] #5 <code>add_message(session_id, role, content) -&gt; Result[ChatMessage, Error]</code></li> <li>[ ] #6 <code>get_session(session_id) -&gt; Optional[ChatSession]</code></li> <li>[ ] #7 <code>get_session_history(limit) -&gt; List[ChatSession]</code></li> <li>[ ] #8 <code>clear_session(session_id) -&gt; Result[None, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.03%20-%20Chat-Session-Service/#context-management","title":"Context Management","text":"<ul> <li>[ ] #9 <code>set_context(session_id, context: CodingContext)</code> - current selection/code</li> <li>[ ] #10 <code>CodingContext</code>: selected_text, source_id, code_id (optional)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.03%20-%20Chat-Session-Service/#quick-prompts","title":"Quick Prompts","text":"<ul> <li>[ ] #11 <code>execute_quick_prompt(prompt_type, context) -&gt; Result[Response, Error]</code></li> <li>[ ] #12 <code>QuickPromptType</code> enum: SUGGEST_CODES, SUMMARIZE, FIND_SIMILAR, EXPLAIN</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.03%20-%20Chat-Session-Service/#persistence","title":"Persistence","text":"<ul> <li>[ ] #13 Sessions persisted to SQLite for history</li> <li>[ ] #14 Load previous sessions on startup</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/","title":"Trust Level Controller","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/#description","title":"Description","text":"<p>TrustLevelController: get/set global trust level, per-tool trust overrides, rate limiting configuration, pause/resume agent operations.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/#trustlevel-enum-from-shared-domain","title":"TrustLevel Enum (from shared domain)","text":"<ul> <li>[ ] #1 <code>TrustLevel</code>: AUTONOMOUS (no approval), NOTIFY (execute + notify), SUGGEST (approval required), REQUIRE (explicit approval)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/#trustlevelcontroller-interface","title":"TrustLevelController Interface","text":"<ul> <li>[ ] #2 <code>get_global_trust_level() -&gt; TrustLevel</code></li> <li>[ ] #3 <code>set_global_trust_level(level: TrustLevel) -&gt; Result[None, Error]</code></li> <li>[ ] #4 <code>get_tool_trust_level(tool_name) -&gt; TrustLevel</code> - per-tool override</li> <li>[ ] #5 <code>set_tool_trust_level(tool_name, level) -&gt; Result[None, Error]</code></li> <li>[ ] #6 <code>reset_to_defaults() -&gt; None</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/#rate-limiting","title":"Rate Limiting","text":"<ul> <li>[ ] #7 <code>get_rate_limit() -&gt; ActionsPerMinute</code></li> <li>[ ] #8 <code>set_rate_limit(actions_per_minute: int) -&gt; Result[None, Error]</code></li> <li>[ ] #9 <code>is_rate_limited() -&gt; bool</code> - check current state</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/#agent-control","title":"Agent Control","text":"<ul> <li>[ ] #10 <code>pause_agent() -&gt; Result[None, Error]</code> - temporarily stop processing</li> <li>[ ] #11 <code>resume_agent() -&gt; Result[None, Error]</code></li> <li>[ ] #12 <code>is_agent_paused() -&gt; bool</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/#persistence","title":"Persistence","text":"<ul> <li>[ ] #13 Trust levels persisted to project settings</li> <li>[ ] #14 Per-tool overrides stored separately</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.04%20-%20Trust-Level-Controller/#events","title":"Events","text":"<ul> <li>[ ] #15 <code>TrustLevelChanged</code> event: old_level, new_level, tool_name (optional)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.05%20-%20Agent-Activity-Log/","title":"Agent Activity Log","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.05%20-%20Agent-Activity-Log/#description","title":"Description","text":"<p>AgentActivityLogService: log all agent actions with timestamps, coder attribution, success/failure status. Query activity history.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.05%20-%20Agent-Activity-Log/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.05%20-%20Agent-Activity-Log/#activityentry-value-object-frozen-dataclass","title":"ActivityEntry Value Object (frozen dataclass)","text":"<ul> <li>[ ] #1 <code>ActivityEntry</code>: entry_id, timestamp, tool_name, action_type, status (SUCCESS|FAILURE|PENDING), coder_id, details</li> <li>[ ] #2 Immutable log entries</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.05%20-%20Agent-Activity-Log/#agentactivitylogservice-interface","title":"AgentActivityLogService Interface","text":"<ul> <li>[ ] #3 <code>log_action(tool_name, action_type, status, details) -&gt; ActivityEntry</code></li> <li>[ ] #4 <code>get_recent_activity(limit: int = 50) -&gt; List[ActivityEntry]</code></li> <li>[ ] #5 <code>get_activity_for_session(session_id) -&gt; List[ActivityEntry]</code></li> <li>[ ] #6 <code>get_activity_by_tool(tool_name) -&gt; List[ActivityEntry]</code></li> <li>[ ] #7 <code>clear_old_entries(older_than: datetime) -&gt; int</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.05%20-%20Agent-Activity-Log/#query-filters","title":"Query Filters","text":"<ul> <li>[ ] #8 <code>ActivityFilter</code>: tool_names, statuses, date_range, coder_id</li> <li>[ ] #9 <code>get_filtered_activity(filter: ActivityFilter) -&gt; List[ActivityEntry]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.05%20-%20Agent-Activity-Log/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #10 <code>ActivityLogged</code> event: entry_id, tool_name, status</li> <li>[ ] #11 Subscribes to all agent action events to auto-log</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.05%20-%20Agent-Activity-Log/#persistence","title":"Persistence","text":"<ul> <li>[ ] #12 Stored in SQLite activity_log table</li> <li>[ ] #13 Indexed by timestamp, tool_name for fast queries</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/","title":"Agent Signal Bridge","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/#description","title":"Description","text":"<p>Bridge between agent events and UI signals. Emit signals for suggestion_received, suggestion_approved/rejected, activity_logged, statistics_updated.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/#agentsignalbridge-class","title":"AgentSignalBridge Class","text":"<ul> <li>[ ] #1 Extends BaseSignalBridge from QC-003.01</li> <li>[ ] #2 Singleton instance accessible via <code>AgentSignalBridge.instance()</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/#ui-signals","title":"UI Signals","text":"<ul> <li>[ ] #3 <code>suggestion_received</code> signal - new suggestion queued</li> <li>[ ] #4 <code>suggestion_approved</code> signal - suggestion approved</li> <li>[ ] #5 <code>suggestion_rejected</code> signal - suggestion rejected</li> <li>[ ] #6 <code>activity_logged</code> signal - agent action logged</li> <li>[ ] #7 <code>statistics_updated</code> signal - stats changed</li> <li>[ ] #8 <code>agent_connected</code> signal - new agent session started</li> <li>[ ] #9 <code>agent_disconnected</code> signal - agent session ended</li> <li>[ ] #10 <code>trust_level_changed</code> signal - trust level modified</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/#event-bus-subscription","title":"Event Bus Subscription","text":"<ul> <li>[ ] #11 Subscribe to all agent-related events on EventBus</li> <li>[ ] #12 Dispatcher maps event type \u2192 signal</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/#thread-safety-critical","title":"Thread Safety (CRITICAL)","text":"<ul> <li>[ ] #13 Agent runs in background thread, UI in main thread</li> <li>[ ] #14 Thread-safe emission (inherits from BaseSignalBridge)</li> <li>[ ] #15 All signal emissions are thread-safe</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/#architecture","title":"Architecture","text":"<ul> <li>[ ] #16 Follows same pattern as other Signal Bridges (Coding, Source, Case)</li> <li>[ ] #17 UI widgets connect to bridge signals for agent activity updates</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.06%20-%20Agent-Signal-Bridge/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: - Inherits from <code>QObject</code> via BaseSignalBridge - Signals declared as <code>pyqtSignal(object)</code> - Uses <code>QMetaObject.invokeMethod</code> with <code>Qt.QueuedConnection</code> (via base class)</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/","title":"Signal Payloads (Agent)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#description","title":"Description","text":"<p>Define Qt-friendly payload dataclasses for the Agent context. These are emitted by SignalBridge signals to UI widgets.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#suggestion-payloads","title":"Suggestion Payloads","text":"<ul> <li>[ ] #1 <code>SuggestionGeneratedPayload</code>: suggestion_id (str), tool_name (str), description (str), confidence (float), preview (str)</li> <li>[ ] #2 <code>SuggestionApprovedPayload</code>: suggestion_id (str), tool_name (str), result_summary (str)</li> <li>[ ] #3 <code>SuggestionRejectedPayload</code>: suggestion_id (str), tool_name (str), reason (str?)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#session-payloads","title":"Session Payloads","text":"<ul> <li>[ ] #4 <code>SessionStartedPayload</code>: session_id (str), model_name (str), started_at (str)</li> <li>[ ] #5 <code>SessionEndedPayload</code>: session_id (str), duration_seconds (int), actions_count (int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#trust-payloads","title":"Trust Payloads","text":"<ul> <li>[ ] #6 <code>TrustLevelChangedPayload</code>: tool_name (str), old_level (str), new_level (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#action-payloads","title":"Action Payloads","text":"<ul> <li>[ ] #7 <code>AgentActionExecutedPayload</code>: action_id (str), tool_name (str), description (str), success (bool), timestamp (str)</li> <li>[ ] #8 <code>AgentMessageReceivedPayload</code>: message_id (str), role (str), content (str), timestamp (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#statistics-payloads","title":"Statistics Payloads","text":"<ul> <li>[ ] #9 <code>AgentStatsUpdatedPayload</code>: session_id (str), total_actions (int), approved (int), rejected (int), pending (int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#design-rules","title":"Design Rules","text":"<ul> <li>[ ] #10 All payloads are frozen dataclasses</li> <li>[ ] #11 Use primitive types only</li> <li>[ ] #12 Include human-readable descriptions for activity display</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.07%20-%20Signal-Payloads/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/agent_payloads.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.08%20-%20Event-Converters/","title":"Event Converters (Agent)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.08%20-%20Event-Converters/#description","title":"Description","text":"<p>Implement converters that transform Agent domain events into signal payloads.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.08%20-%20Event-Converters/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.08%20-%20Event-Converters/#converters","title":"Converters","text":"<ul> <li>[ ] #1 <code>SuggestionGeneratedConverter</code>: SuggestionGenerated \u2192 SuggestionGeneratedPayload</li> <li>[ ] #2 <code>SuggestionApprovedConverter</code>: SuggestionApproved \u2192 SuggestionApprovedPayload</li> <li>[ ] #3 <code>SuggestionRejectedConverter</code>: SuggestionRejected \u2192 SuggestionRejectedPayload</li> <li>[ ] #4 <code>SessionStartedConverter</code>: SessionStarted \u2192 SessionStartedPayload</li> <li>[ ] #5 <code>SessionEndedConverter</code>: SessionEnded \u2192 SessionEndedPayload</li> <li>[ ] #6 <code>TrustLevelChangedConverter</code>: TrustLevelChanged \u2192 TrustLevelChangedPayload</li> <li>[ ] #7 <code>AgentActionExecutedConverter</code>: AgentActionExecuted \u2192 AgentActionExecutedPayload</li> <li>[ ] #8 <code>AgentMessageReceivedConverter</code>: AgentMessageReceived \u2192 AgentMessageReceivedPayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.08%20-%20Event-Converters/#registry","title":"Registry","text":"<ul> <li>[ ] #9 Register all converters in <code>AgentConverterRegistry</code></li> <li>[ ] #10 Registry used by AgentSignalBridge</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.08%20-%20Event-Converters/#testing","title":"Testing","text":"<ul> <li>[ ] #11 Unit tests for each converter</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-020.08%20-%20Event-Converters/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/agent_converters.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021%20-%20Agent-Presentation/","title":"Agent Presentation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021%20-%20Agent-Presentation/#description","title":"Description","text":"<p>Build the dedicated Agent Experience screens.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021%20-%20Agent-Presentation/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] AI Chat screen (mockup: <code>ai_chat.html</code>)</li> <li>Conversational interface for coding assistance</li> <li>Message history with agent responses</li> <li>Quick actions (suggest codes, explain segment)</li> <li>[ ] AI Search screen (mockup: <code>ai_search.html</code>)</li> <li>Semantic search across coded data</li> <li>Natural language queries</li> <li>Results with relevance scores</li> <li>[ ] Review Queue screen (mockup: <code>review_queue.html</code>)</li> <li>Pending suggestions list</li> <li>Batch approve/reject</li> <li>Agent statistics dashboard</li> <li>Session history</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021%20-%20Agent-Presentation/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/screens/agent/ai_chat.py</code></li> <li><code>src/presentation/screens/agent/ai_search.py</code></li> <li><code>src/presentation/screens/agent/review_queue.py</code></li> <li>Mockups: <code>mockups/ai_chat.html</code>, <code>mockups/ai_search.html</code>, <code>mockups/review_queue.html</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.01%20-%20AI-Chat-Screen/","title":"AI Chat Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.01%20-%20AI-Chat-Screen/#description","title":"Description","text":"<p>Conversational interface for AI coding assistance. Message history, quick actions, context-aware responses.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.01%20-%20AI-Chat-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Chat message list (user/assistant bubbles),Message input with send button,Quick prompt buttons (suggest codes/summarize/find similar),Typing indicator during AI response,Message timestamp display,Context panel showing current selection,Chat history persistence</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.02%20-%20AI-Search-Screen/","title":"AI Search Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.02%20-%20AI-Search-Screen/#description","title":"Description","text":"<p>Semantic search across coded data. Natural language queries with relevance scores.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.02%20-%20AI-Search-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Search input for natural language queries,Results list with relevance scores,Snippet preview with highlights,Filter by file/case/code,Click to navigate to source,Search history,Export search results</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.03%20-%20Review-Queue-Screen/","title":"Review Queue Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.03%20-%20Review-Queue-Screen/#description","title":"Description","text":"<p>Pending AI suggestions list for batch approval. Agent statistics dashboard.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.03%20-%20Review-Queue-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Pending suggestions list,Suggestion detail view,Accept/Reject buttons,Batch approve/reject selected,Agent statistics (actions/minute),Session history,Filter by suggestion type</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.04%20-%20Code-Suggestion-Panel/","title":"Code Suggestion Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.04%20-%20Code-Suggestion-Panel/#description","title":"Description","text":"<p>Display AI-suggested codes with confidence scores. Accept/reject actions, reasoning display.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.04%20-%20Code-Suggestion-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Suggestion list with code chips,Confidence score bar (color-coded),Accept button per suggestion,Reject button per suggestion,AI reasoning panel,Bulk accept/reject,Apply to selection action</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.05%20-%20Agent-Activity-Panel/","title":"Agent Activity Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.05%20-%20Agent-Activity-Panel/#description","title":"Description","text":"<p>Real-time activity log showing AI actions. Filter, pause/resume, status indicators.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.05%20-%20Agent-Activity-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Real-time activity log list,Status indicators (completed/pending/queued/rejected/failed),Filter by activity type,Pause/Resume controls,Inline approval buttons,Timestamps and duration,Expand for action details</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.06%20-%20Agent-Control-Panel/","title":"Agent Control Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.06%20-%20Agent-Control-Panel/#description","title":"Description","text":"<p>Settings for connected agents. Trust level configuration, rate limiting, per-tool permissions.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.06%20-%20Agent-Control-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Connected agents list with status,Trust level selector (Autonomous/Notify/Suggest/Require),Per-tool trust overrides,Rate limiting slider (actions/minute),Max pending approvals limit,Pause/Disconnect agent buttons</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.07%20-%20Approval-Dialog-Component/","title":"Approval Dialog Component","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.07%20-%20Approval-Dialog-Component/#description","title":"Description","text":"<p>Modal dialog for approving high-risk agent actions. Shows impact analysis, approve/reject options.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.07%20-%20Approval-Dialog-Component/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Modal approval dialog,Action details display,Impact analysis section,Approve/Reject buttons,Edit Before Approve option,Rejection with reason,Timeout indicator (5 min auto-reject)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.08%20-%20Chat-Message-Components/","title":"Chat Message Components","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.08%20-%20Chat-Message-Components/#description","title":"Description","text":"<p>Design system components for chat: message bubbles, typing indicator, quick prompts.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.08%20-%20Chat-Message-Components/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 MessageBubble component (user/assistant styles),ChatInput with multi-line support,TypingIndicator animated dots,QuickPrompts button row,AIReasoningPanel with border,Timestamp display,Markdown rendering in messages</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.09%20-%20Agent-Badge-Component/","title":"Agent Badge Component","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.09%20-%20Agent-Badge-Component/#description","title":"Description","text":"<p>Reusable badge component for AI-created items. Shows AI icon, tooltip with action details.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-021.09%20-%20Agent-Badge-Component/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 AgentBadge component with AI icon,Tooltip showing action details,Integration with code tree items,Integration with segment highlights,Distinct visual from human items,Filter toggle support</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022%20-%20Collaboration-Domain/","title":"Collaboration Domain","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022%20-%20Collaboration-Domain/#description","title":"Description","text":"<p>Define the domain layer for Collaboration: coders, merging, and comparison.</p> <p>Agent-First: AI is a first-class coder. Agent codings tracked separately for reliability comparison.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022%20-%20Collaboration-Domain/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Entities: Coder (human and AI types), MergeConflict, ComparisonResult</li> <li>[ ] Value objects: CoderType (Human, AI), VisibilityScope</li> <li>[ ] Domain events (CoderCreated, ConflictDetected, MergeCompleted)</li> <li>[ ] Kappa score calculation (pure function)</li> <li>[ ] Agent tool schemas (set_coder, compare_codings)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022%20-%20Collaboration-Domain/#implementation","title":"Implementation","text":"<ul> <li><code>src/domain/collaboration/entities.py</code></li> <li><code>src/domain/collaboration/events.py</code></li> <li><code>src/domain/collaboration/comparison.py</code></li> <li><code>src/agent_context/schemas/collaboration_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/","title":"Collaboration Events","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/#description","title":"Description","text":"<p>Domain events: CoderRenamed, CoderDeleted, CodingOwnershipChanged, ConflictDetected, ConflictResolved, ComparisonCalculated, AICodePromoted.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/#coder-lifecycle-events-frozen-dataclasses-extending-domainevent","title":"Coder Lifecycle Events (frozen dataclasses extending DomainEvent)","text":"<ul> <li>[ ] #1 <code>CoderCreated</code> event: coder_id, name, coder_type (HUMAN|AI)</li> <li>[ ] #2 <code>CoderRenamed</code> event: coder_id, old_name, new_name</li> <li>[ ] #3 <code>CoderDeleted</code> event: coder_id, name, codings_reassigned_to</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/#coding-ownership-events","title":"Coding Ownership Events","text":"<ul> <li>[ ] #4 <code>CodingOwnershipChanged</code> event: segment_id, old_coder_id, new_coder_id</li> <li>[ ] #5 <code>AICodePromoted</code> event: segment_ids (list), from_coder (AI), to_coder (human)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/#merge-events","title":"Merge Events","text":"<ul> <li>[ ] #6 <code>MergeStarted</code> event: merge_id, source_code_id, target_code_id</li> <li>[ ] #7 <code>ConflictDetected</code> event: merge_id, conflict_type, source_item, target_item</li> <li>[ ] #8 <code>ConflictResolved</code> event: merge_id, conflict_id, resolution_strategy</li> <li>[ ] #9 <code>MergeCompleted</code> event: merge_id, segments_reassigned</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/#comparison-events","title":"Comparison Events","text":"<ul> <li>[ ] #10 <code>ComparisonCalculated</code> event: coder_a, coder_b, kappa_score, agreement_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/#ai-specific-events","title":"AI-Specific Events","text":"<ul> <li>[ ] #11 <code>AICoderAutoCreated</code> event: coder_id, agent_session_id - when AI first codes</li> <li>[ ] #12 <code>AIVisibilityToggled</code> event: visible (bool), affected_segments_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.01%20-%20Collaboration-Events/#event-structure","title":"Event Structure","text":"<ul> <li>[ ] #13 All events follow standard structure: event_id, event_type, aggregate_id, occurred_at, caused_by, payload</li> <li>[ ] #14 Events registered in Collaboration context event catalog</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.02%20-%20Comparison-Value-Objects/","title":"Comparison Value Objects","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.02%20-%20Comparison-Value-Objects/#description","title":"Description","text":"<p>Value objects: KappaResult, AgreementMatrix, ComparisonPair, ReliabilityTrend. Support inter-rater reliability calculations.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.02%20-%20Comparison-Value-Objects/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.02%20-%20Comparison-Value-Objects/#kapparesult-value-object-frozen-dataclass","title":"KappaResult Value Object (frozen dataclass)","text":"<ul> <li>[ ] #1 <code>KappaResult</code>: kappa_score (float), interpretation (str), agreement_count, disagreement_count</li> <li>[ ] #2 <code>interpretation()</code> method: \"Poor\"|\"Fair\"|\"Moderate\"|\"Good\"|\"Excellent\"</li> <li>[ ] #3 Immutable - result of pure calculation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.02%20-%20Comparison-Value-Objects/#agreementmatrix-value-object-frozen-dataclass","title":"AgreementMatrix Value Object (frozen dataclass)","text":"<ul> <li>[ ] #4 <code>AgreementMatrix</code>: matrix (Dict[CodeId, Dict[CodeId, int]]), coder_a, coder_b</li> <li>[ ] #5 Matrix cell [a][b] = count where coder_a used code a and coder_b used code b</li> <li>[ ] #6 Methods: <code>get_agreement(code)</code>, <code>get_total_agreements()</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.02%20-%20Comparison-Value-Objects/#comparisonpair-value-object","title":"ComparisonPair Value Object","text":"<ul> <li>[ ] #7 <code>ComparisonPair</code>: segment_id, coder_a_code, coder_b_code, is_agreement (bool)</li> <li>[ ] #8 List of pairs shows detailed comparison</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.02%20-%20Comparison-Value-Objects/#reliabilitytrend-value-object","title":"ReliabilityTrend Value Object","text":"<ul> <li>[ ] #9 <code>ReliabilityTrend</code>: data_points (List[KappaDataPoint]), trend_direction</li> <li>[ ] #10 <code>KappaDataPoint</code>: date, kappa_score, sample_size</li> <li>[ ] #11 Tracks Kappa over time for progress monitoring</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.02%20-%20Comparison-Value-Objects/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #12 <code>calculate_kappa(matrix: AgreementMatrix) -&gt; KappaResult</code> - Cohen's Kappa</li> <li>[ ] #13 <code>interpret_kappa(score: float) -&gt; str</code> - Landis &amp; Koch interpretation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/","title":"Merge Conflict Types","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/#description","title":"Description","text":"<p>Value objects: MergeConflict (overlapping segments), ResolutionStrategy (keep_source/keep_target/keep_both), MergeResult.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/#mergeconflict-value-object-frozen-dataclass","title":"MergeConflict Value Object (frozen dataclass)","text":"<ul> <li>[ ] #1 <code>MergeConflict</code>: conflict_id, conflict_type (NAME|SEGMENT|ATTRIBUTE), source_item, target_item, description</li> <li>[ ] #2 <code>ConflictType</code> enum: NAME (duplicate names), SEGMENT (overlapping codings), ATTRIBUTE (conflicting values)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/#resolutionstrategy-enum","title":"ResolutionStrategy Enum","text":"<ul> <li>[ ] #3 <code>ResolutionStrategy</code>: KEEP_SOURCE, KEEP_TARGET, KEEP_BOTH, RENAME, MERGE</li> <li>[ ] #4 Each strategy has clear semantic: which version to preserve</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/#mergeresolution-value-object-frozen-dataclass","title":"MergeResolution Value Object (frozen dataclass)","text":"<ul> <li>[ ] #5 <code>MergeResolution</code>: conflict_id, strategy, new_name (optional for RENAME)</li> <li>[ ] #6 Immutable - records how conflict was resolved</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/#mergeresult-value-object-frozen-dataclass","title":"MergeResult Value Object (frozen dataclass)","text":"<ul> <li>[ ] #7 <code>MergeResult</code>: merge_id, conflicts_resolved, segments_reassigned, success (bool)</li> <li>[ ] #8 Summary of merge operation</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/#mergeplan-value-object","title":"MergePlan Value Object","text":"<ul> <li>[ ] #9 <code>MergePlan</code>: source_code, target_code, conflicts (List), resolutions (List)</li> <li>[ ] #10 Preview before execution - no side effects</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-022.03%20-%20Merge-Conflict-Types/#pure-functions","title":"Pure Functions","text":"<ul> <li>[ ] #11 <code>detect_conflicts(source_code, target_code, segments) -&gt; List[MergeConflict]</code></li> <li>[ ] #12 <code>apply_resolution(conflict, resolution) -&gt; Result[MergedItem, Error]</code></li> <li>[ ] #13 <code>preview_merge(plan: MergePlan) -&gt; MergePreview</code> - shows what would change</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023%20-%20Collaboration-Infrastructure/","title":"Collaboration Infrastructure","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023%20-%20Collaboration-Infrastructure/#description","title":"Description","text":"<p>Implement repositories and merge engine for Collaboration.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023%20-%20Collaboration-Infrastructure/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] CoderRepository (SQLite)</li> <li>[ ] MergeEngine (conflict detection, resolution strategies)</li> <li>[ ] Ownership tracking in existing repositories</li> <li>[ ] AI coder auto-creation on first agent session</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023%20-%20Collaboration-Infrastructure/#implementation","title":"Implementation","text":"<ul> <li><code>src/infrastructure/repositories/collaboration/</code></li> <li><code>src/infrastructure/merge_engine.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.01%20-%20Coder-Query-Methods/","title":"Coder Query Methods","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.01%20-%20Coder-Query-Methods/#description","title":"Description","text":"<p>Repository methods: find_all_with_statistics, find_codings_by_coder, get_coder_activity_timeline, count_by_type (human/AI).</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.01%20-%20Coder-Query-Methods/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.01%20-%20Coder-Query-Methods/#coderrepository-query-methods","title":"CoderRepository Query Methods","text":"<ul> <li>[ ] #1 <code>find_all() -&gt; List[Coder]</code></li> <li>[ ] #2 <code>find_all_with_statistics() -&gt; List[CoderWithStats]</code></li> <li>[ ] #3 <code>find_by_type(coder_type: CoderType) -&gt; List[Coder]</code> - HUMAN or AI</li> <li>[ ] #4 <code>find_codings_by_coder(coder_id) -&gt; List[Segment]</code></li> <li>[ ] #5 <code>get_coder_activity_timeline(coder_id) -&gt; List[ActivityPoint]</code></li> <li>[ ] #6 <code>count_by_type() -&gt; Dict[CoderType, int]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.01%20-%20Coder-Query-Methods/#query-dtos-read-only","title":"Query DTOs (Read-only)","text":"<ul> <li>[ ] #7 <code>CoderWithStats</code>: coder_id, name, coder_type, coding_count, last_active</li> <li>[ ] #8 <code>ActivityPoint</code>: date, coding_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.01%20-%20Coder-Query-Methods/#ai-coder-queries","title":"AI Coder Queries","text":"<ul> <li>[ ] #9 <code>find_ai_coder() -&gt; Optional[Coder]</code> - returns AI coder if exists</li> <li>[ ] #10 <code>get_ai_coding_count() -&gt; int</code> - total AI codings</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.01%20-%20Coder-Query-Methods/#comparison-queries","title":"Comparison Queries","text":"<ul> <li>[ ] #11 <code>find_overlapping_codings(coder_a, coder_b) -&gt; List[OverlapPair]</code></li> <li>[ ] #12 <code>OverlapPair</code>: segment_a, segment_b, overlap_position</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.01%20-%20Coder-Query-Methods/#immutability","title":"Immutability","text":"<ul> <li>[ ] #13 All returned entities are frozen dataclasses</li> <li>[ ] #14 Queries are read-only, never modify state</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.02%20-%20Kappa-Calculator/","title":"Kappa Calculator","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.02%20-%20Kappa-Calculator/#description","title":"Description","text":"<p>KappaCalculator: compute Cohen's Kappa, Fleiss' Kappa (multi-rater), per-code Kappa breakdown. Pure statistical functions.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.02%20-%20Kappa-Calculator/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.02%20-%20Kappa-Calculator/#kappacalculator-pure-functions-infrastructure","title":"KappaCalculator (Pure Functions - Infrastructure)","text":"<ul> <li>[ ] #1 <code>calculate_cohens_kappa(matrix: AgreementMatrix) -&gt; KappaResult</code> - two coders</li> <li>[ ] #2 <code>calculate_fleiss_kappa(ratings: List[List[int]]) -&gt; KappaResult</code> - multi-rater</li> <li>[ ] #3 <code>calculate_per_code_kappa(matrix, code_id) -&gt; float</code> - single code Kappa</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.02%20-%20Kappa-Calculator/#agreement-matrix-builder","title":"Agreement Matrix Builder","text":"<ul> <li>[ ] #4 <code>build_agreement_matrix(coder_a_segments, coder_b_segments) -&gt; AgreementMatrix</code></li> <li>[ ] #5 Pure function - computes matrix from segment lists</li> <li>[ ] #6 Handles partial overlaps correctly</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.02%20-%20Kappa-Calculator/#statistical-helpers-pure","title":"Statistical Helpers (Pure)","text":"<ul> <li>[ ] #7 <code>calculate_observed_agreement(matrix) -&gt; float</code></li> <li>[ ] #8 <code>calculate_expected_agreement(matrix) -&gt; float</code></li> <li>[ ] #9 <code>calculate_standard_error(kappa, n) -&gt; float</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.02%20-%20Kappa-Calculator/#confidence-interval","title":"Confidence Interval","text":"<ul> <li>[ ] #10 <code>calculate_confidence_interval(kappa, se, confidence=0.95) -&gt; Tuple[float, float]</code></li> <li>[ ] #11 Returns (lower_bound, upper_bound)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.02%20-%20Kappa-Calculator/#edge-cases","title":"Edge Cases","text":"<ul> <li>[ ] #12 Handle perfect agreement (kappa = 1.0)</li> <li>[ ] #13 Handle chance agreement only (kappa = 0.0)</li> <li>[ ] #14 Handle negative kappa (worse than chance)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.03%20-%20Merge-Engine/","title":"Merge Engine","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.03%20-%20Merge-Engine/#description","title":"Description","text":"<p>MergeEngine: detect conflicts between coders, apply resolution strategies, track merge history. Support undo operations.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.03%20-%20Merge-Engine/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.03%20-%20Merge-Engine/#mergeengine-interface-infrastructure","title":"MergeEngine Interface (Infrastructure)","text":"<ul> <li>[ ] #1 <code>detect_conflicts(source_code, target_code) -&gt; List[MergeConflict]</code></li> <li>[ ] #2 <code>preview_merge(source_code, target_code, resolutions) -&gt; MergePreview</code></li> <li>[ ] #3 <code>execute_merge(plan: MergePlan) -&gt; Result[MergeCompleted, MergeError]</code></li> <li>[ ] #4 <code>rollback_merge(merge_id) -&gt; Result[MergeRolledBack, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.03%20-%20Merge-Engine/#conflict-detection-pure-functions","title":"Conflict Detection (Pure Functions)","text":"<ul> <li>[ ] #5 <code>find_name_conflicts(source, target, existing) -&gt; List[MergeConflict]</code></li> <li>[ ] #6 <code>find_segment_conflicts(source_segments, target_segments) -&gt; List[MergeConflict]</code></li> <li>[ ] #7 All detection functions are pure - no side effects</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.03%20-%20Merge-Engine/#merge-execution","title":"Merge Execution","text":"<ul> <li>[ ] #8 Transaction-wrapped: all or nothing</li> <li>[ ] #9 Reassigns segments from source to target code</li> <li>[ ] #10 Deletes source code after reassignment</li> <li>[ ] #11 Creates audit trail of changes</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.03%20-%20Merge-Engine/#rollback-support","title":"Rollback Support","text":"<ul> <li>[ ] #12 Merge history stored for undo</li> <li>[ ] #13 <code>MergeHistory</code>: merge_id, source_code, target_code, affected_segments, timestamp</li> <li>[ ] #14 Rollback restores source code and reassigns segments back</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.03%20-%20Merge-Engine/#result-types","title":"Result Types","text":"<ul> <li>[ ] #15 <code>MergeError</code> union: ConflictsUnresolved, CodeNotFound, TransactionFailed</li> <li>[ ] #16 Returns Result[T, MergeError] - explicit error handling</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.04%20-%20Ownership-Tracking/","title":"Ownership Tracking","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.04%20-%20Ownership-Tracking/#description","title":"Description","text":"<p>Add coder_id to segment storage. Track who coded each segment. Support ownership transfer on promote/merge.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.04%20-%20Ownership-Tracking/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.04%20-%20Ownership-Tracking/#schema-changes","title":"Schema Changes","text":"<ul> <li>[ ] #1 Add <code>coder_id</code> column to segment tables (code_text, code_image, code_av)</li> <li>[ ] #2 Foreign key to coder table</li> <li>[ ] #3 Migration for existing data (default to first human coder)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.04%20-%20Ownership-Tracking/#repository-methods","title":"Repository Methods","text":"<ul> <li>[ ] #4 <code>get_segment_owner(segment_id) -&gt; CoderId</code></li> <li>[ ] #5 <code>set_segment_owner(segment_id, coder_id) -&gt; Result[None, Error]</code></li> <li>[ ] #6 <code>transfer_ownership(segment_ids, from_coder, to_coder) -&gt; int</code></li> <li>[ ] #7 <code>find_segments_by_owner(coder_id) -&gt; List[Segment]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.04%20-%20Ownership-Tracking/#ownership-transfer-for-promotionmerge","title":"Ownership Transfer (for Promotion/Merge)","text":"<ul> <li>[ ] #8 <code>promote_ai_codings(segment_ids, human_coder_id) -&gt; Result[int, Error]</code></li> <li>[ ] #9 Batch transfer for efficiency</li> <li>[ ] #10 Emits CodingOwnershipChanged events</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.04%20-%20Ownership-Tracking/#query-support","title":"Query Support","text":"<ul> <li>[ ] #11 Segments include owner in query results</li> <li>[ ] #12 Filter segments by owner in repository queries</li> <li>[ ] #13 Index on coder_id for fast owner queries</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-023.04%20-%20Ownership-Tracking/#ai-coder-auto-creation","title":"AI Coder Auto-Creation","text":"<ul> <li>[ ] #14 Create AI coder on first agent coding if not exists</li> <li>[ ] #15 AI coder has special CoderType.AI</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024%20-%20Collaboration-Application/","title":"Collaboration Application","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024%20-%20Collaboration-Application/#description","title":"Description","text":"<p>Implement the application layer for Collaboration with Agent tool registration.</p> <p>Agent-First: Agent can identify itself, compare its codings with human coders.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024%20-%20Collaboration-Application/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] CollaborationController implementation</li> <li>[ ] Coder management commands</li> <li>[ ] Merge commands with conflict handling</li> <li>[ ] Comparison commands</li> <li>[ ] Events published for state changes</li> <li>[ ] SignalBridge wiring complete (domain events \u2192 Qt signals)</li> <li>[ ] Agent tools registered (set_coder, compare_codings)</li> <li>[ ] Promote AI coding to human coding</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024%20-%20Collaboration-Application/#subtasks","title":"Subtasks","text":"<p>Ordered by dependency flow: Controller \u2192 Commands \u2192 Wiring \u2192 Agent</p> ID Subtask Status Wires Controller &amp; Commands QC-024.01 Coder Management Commands To Do Controller \u2192 Deriver \u2192 Repo QC-024.02 Merge Commands To Do Controller \u2192 Merge Deriver \u2192 Repo QC-024.03 Comparison Commands To Do Controller \u2192 Comparison Service QC-024.04 AI Promotion Commands To Do Controller \u2192 Deriver \u2192 Repo Signal Bridge Wiring QC-024.05 Collaboration Signal Bridge To Do EventBus \u2192 Bridge \u2192 Qt Signals QC-024.07 Signal Payloads To Do Event \u2192 Payload DTOs QC-024.08 Event Converters To Do Converter per event type Agent Integration QC-024.06 Collaboration Agent Tools To Do MCP schemas + registration QC-024.09 Integration Tests To Do End-to-end flow tests"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024%20-%20Collaboration-Application/#event-flow-map","title":"Event Flow Map","text":"Domain Event Signal Bridge Signal UI Subscribers CoderCreated <code>coder_created</code> CoderSelector, CoderManager CoderSwitched <code>coder_switched</code> CoderSelector, StatusBar CoderVisibilityChanged <code>coder_visibility_changed</code> CoderSelector, CodingScreens MergeStarted <code>merge_started</code> MergeDialog ConflictDetected <code>conflict_detected</code> MergeDialog ConflictResolved <code>conflict_resolved</code> MergeDialog MergeCompleted <code>merge_completed</code> MergeDialog, ActivityPanel ComparisonGenerated <code>comparison_generated</code> ComparisonScreen CodingPromoted <code>coding_promoted</code> CoderManager, ActivityPanel"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024%20-%20Collaboration-Application/#implementation","title":"Implementation","text":"<ul> <li><code>src/application/controllers/collaboration_controller.py</code></li> <li><code>src/application/signal_bridge/collaboration_bridge.py</code></li> <li><code>src/application/signal_bridge/collaboration_payloads.py</code></li> <li><code>src/application/signal_bridge/collaboration_converters.py</code></li> <li><code>src/agent_context/tools/collaboration.py</code></li> <li><code>src/agent_context/schemas/collaboration_tools.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.01%20-%20Coder-Management-Commands/","title":"Coder Management Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.01%20-%20Coder-Management-Commands/#description","title":"Description","text":"<p>Commands: CreateCoder, RenameCoder, DeleteCoder (with coding reassignment), GetCoderStatistics. Handle AI coder auto-creation.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.01%20-%20Coder-Management-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.01%20-%20Coder-Management-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>create_coder(name, coder_type: CoderType) -&gt; Result[CoderCreated, Error]</code></li> <li>[ ] #2 <code>rename_coder(coder_id, new_name) -&gt; Result[CoderRenamed, Error]</code></li> <li>[ ] #3 <code>delete_coder(coder_id, reassign_to: CoderId) -&gt; Result[CoderDeleted, Error]</code></li> <li>[ ] #4 <code>get_coder_statistics(coder_id) -&gt; CoderStatistics</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.01%20-%20Coder-Management-Commands/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #5 <code>derive_create_coder(name, type, existing_names) -&gt; Result[Coder, Error]</code></li> <li>[ ] #6 <code>derive_delete_coder(coder, codings, reassign_to) -&gt; Result[DeletePlan, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.01%20-%20Coder-Management-Commands/#ai-coder-auto-creation","title":"AI Coder Auto-Creation","text":"<ul> <li>[ ] #7 <code>ensure_ai_coder_exists() -&gt; Coder</code> - creates if not exists</li> <li>[ ] #8 Called automatically on first agent coding</li> <li>[ ] #9 AI coder name: \"AI Assistant\" (configurable)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.01%20-%20Coder-Management-Commands/#invariants","title":"Invariants","text":"<ul> <li>[ ] #10 <code>is_coder_name_unique(name, existing) -&gt; bool</code></li> <li>[ ] #11 <code>is_coder_deletable(coder_id, codings) -&gt; bool</code> - must reassign first</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.01%20-%20Coder-Management-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #12 CoderCreated, CoderRenamed, CoderDeleted events</li> <li>[ ] #13 AICoderAutoCreated event when AI coder first created</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.02%20-%20Merge-Commands/","title":"Merge Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.02%20-%20Merge-Commands/#description","title":"Description","text":"<p>Commands: DetectConflicts, MergeCodes (with resolution), ResolveConflict, PreviewMerge. Support undo.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.02%20-%20Merge-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.02%20-%20Merge-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>detect_conflicts(source_code_id, target_code_id) -&gt; List[MergeConflict]</code></li> <li>[ ] #2 <code>preview_merge(source_code_id, target_code_id, resolutions) -&gt; MergePreview</code></li> <li>[ ] #3 <code>execute_merge(plan: MergePlan) -&gt; Result[MergeCompleted, MergeError]</code></li> <li>[ ] #4 <code>resolve_conflict(conflict_id, resolution: ResolutionStrategy) -&gt; Result[None, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.02%20-%20Merge-Commands/#mergepreview-value-object","title":"MergePreview Value Object","text":"<ul> <li>[ ] #5 <code>MergePreview</code>: segments_to_reassign, conflicts_resolved, will_delete_code</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.02%20-%20Merge-Commands/#controller-flow","title":"Controller Flow","text":"<ul> <li>[ ] #6 Detect \u2192 Preview \u2192 User reviews \u2192 Resolve conflicts \u2192 Execute</li> <li>[ ] #7 Transaction-wrapped execution</li> <li>[ ] #8 Rollback support via undo</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.02%20-%20Merge-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #9 <code>MergeStarted</code> event when user initiates</li> <li>[ ] #10 <code>ConflictDetected</code> event for each conflict found</li> <li>[ ] #11 <code>ConflictResolved</code> event when user resolves</li> <li>[ ] #12 <code>MergeCompleted</code> event on success</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.02%20-%20Merge-Commands/#error-handling","title":"Error Handling","text":"<ul> <li>[ ] #13 <code>MergeError</code>: UnresolvedConflicts, CodeNotFound, CircularReference</li> <li>[ ] #14 Returns Result[T, MergeError]</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/","title":"Comparison Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/#description","title":"Description","text":"<p>Commands: CompareCoders (calculate Kappa), GetAgreementMatrix, ExportReliabilityReport. Support AI vs human comparison.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>compare_coders(coder_a, coder_b, filters) -&gt; Result[CoderComparisonReport, Error]</code></li> <li>[ ] #2 <code>get_agreement_matrix(coder_a, coder_b) -&gt; AgreementMatrix</code></li> <li>[ ] #3 <code>export_reliability_report(comparison, path) -&gt; Result[Path, ExportError]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/#ai-vs-human-comparison","title":"AI vs Human Comparison","text":"<ul> <li>[ ] #4 <code>compare_ai_with_human(human_coder_id) -&gt; CoderComparisonReport</code></li> <li>[ ] #5 Special case for evaluating AI coder performance</li> <li>[ ] #6 Identifies where AI agrees/disagrees with human</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #7 <code>derive_comparison(coder_a_segments, coder_b_segments) -&gt; ComparisonData</code></li> <li>[ ] #8 <code>derive_kappa(matrix) -&gt; KappaResult</code> - delegates to KappaCalculator</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/#comparison-filters","title":"Comparison Filters","text":"<ul> <li>[ ] #9 <code>ComparisonFilter</code>: code_ids, source_ids, date_range</li> <li>[ ] #10 Filter comparison to specific subset</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #11 <code>ComparisonCalculated</code> event: coder_a, coder_b, kappa_score</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.03%20-%20Comparison-Commands/#export","title":"Export","text":"<ul> <li>[ ] #12 Export to XLSX with formatted Kappa table</li> <li>[ ] #13 Include per-code breakdown</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/","title":"AI Promotion Commands","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/#description","title":"Description","text":"<p>Commands: PromoteAICoding (transfer AI codings to human coder), ToggleAIVisibility (show/hide AI codings in view).</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/#controller-commands-imperative-shell","title":"Controller Commands (Imperative Shell)","text":"<ul> <li>[ ] #1 <code>promote_ai_coding(segment_ids, to_coder_id) -&gt; Result[AICodePromoted, Error]</code></li> <li>[ ] #2 <code>promote_all_ai_codings(to_coder_id) -&gt; Result[AICodePromoted, Error]</code></li> <li>[ ] #3 <code>toggle_ai_visibility(visible: bool) -&gt; Result[AIVisibilityToggled, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/#promotion-logic","title":"Promotion Logic","text":"<ul> <li>[ ] #4 Transfers ownership from AI coder to specified human coder</li> <li>[ ] #5 Preserves all segment data (code, position, memo, importance)</li> <li>[ ] #6 Batch operation for efficiency</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/#visibility-toggle","title":"Visibility Toggle","text":"<ul> <li>[ ] #7 <code>is_ai_visible() -&gt; bool</code> - current visibility state</li> <li>[ ] #8 When hidden: AI codings excluded from UI display</li> <li>[ ] #9 When visible: AI codings shown with AI badge</li> <li>[ ] #10 Persisted per-project setting</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/#deriver-functions-pure","title":"Deriver Functions (Pure)","text":"<ul> <li>[ ] #11 <code>derive_promotion(ai_segments, target_coder) -&gt; PromotionPlan</code></li> <li>[ ] #12 <code>validate_promotion(segments, target) -&gt; Result[None, Error]</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/#event-publishing","title":"Event Publishing","text":"<ul> <li>[ ] #13 <code>AICodePromoted</code> event: segment_ids, from_coder (AI), to_coder</li> <li>[ ] #14 <code>AIVisibilityToggled</code> event: visible, affected_segments_count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.04%20-%20AI-Promotion-Commands/#invariants","title":"Invariants","text":"<ul> <li>[ ] #15 <code>is_ai_coder(coder_id) -&gt; bool</code> - validate source is AI</li> <li>[ ] #16 <code>is_human_coder(coder_id) -&gt; bool</code> - validate target is human</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/","title":"Collaboration Signal Bridge","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/#description","title":"Description","text":"<p>Bridge between collaboration events and UI signals. Emit signals for coder events, merge events, comparison results. Enable real-time UI updates.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/#collaborationsignalbridge-class","title":"CollaborationSignalBridge Class","text":"<ul> <li>[ ] #1 Extends BaseSignalBridge from QC-003.01</li> <li>[ ] #2 Singleton instance accessible via <code>CollaborationSignalBridge.instance()</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/#ui-signals","title":"UI Signals","text":"<ul> <li>[ ] #3 <code>coder_created</code> signal - new coder (human or AI)</li> <li>[ ] #4 <code>coder_renamed</code> signal - coder name changed</li> <li>[ ] #5 <code>coder_deleted</code> signal - coder removed</li> <li>[ ] #6 <code>merge_started</code> signal - merge operation began</li> <li>[ ] #7 <code>conflict_detected</code> signal - merge conflict found</li> <li>[ ] #8 <code>merge_completed</code> signal - merge finished</li> <li>[ ] #9 <code>comparison_calculated</code> signal - Kappa calculated</li> <li>[ ] #10 <code>ai_code_promoted</code> signal - AI coding transferred to human</li> <li>[ ] #11 <code>ai_visibility_changed</code> signal - AI coding visibility toggled</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/#event-bus-subscription","title":"Event Bus Subscription","text":"<ul> <li>[ ] #12 Subscribe to all Collaboration context events on EventBus</li> <li>[ ] #13 Dispatcher routes events to appropriate signals</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/#thread-safety","title":"Thread Safety","text":"<ul> <li>[ ] #14 Thread-safe emission (inherits from BaseSignalBridge)</li> <li>[ ] #15 AI coder operations from background thread safely emit to UI thread</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/#architecture","title":"Architecture","text":"<ul> <li>[ ] #16 Follows same pattern as other Signal Bridges (Coding, Source, Case, Agent)</li> <li>[ ] #17 UI connects to bridge for real-time coder/merge/comparison updates</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.05%20-%20Collaboration-Signal-Bridge/#implementation-notes","title":"Implementation Notes","text":"<p>For PyQt6: - Inherits from <code>QObject</code> via BaseSignalBridge - Signals declared as <code>pyqtSignal(object)</code> - Uses <code>QMetaObject.invokeMethod</code> with <code>Qt.QueuedConnection</code> (via base class)</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/","title":"Collaboration Agent Tools","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/#description","title":"Description","text":"<p>Agent tools: get_my_codings (AUTONOMOUS), compare_with_human (AUTONOMOUS), set_coder (NOTIFY). Enable AI self-awareness and comparison.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/#agent-tool-schemas-read-only-autonomous","title":"Agent Tool Schemas (Read-Only - AUTONOMOUS)","text":"<ul> <li>[ ] #1 <code>get_my_codings</code> tool:</li> <li>Input: filters (optional)</li> <li>Output: segments coded by AI</li> <li> <p>Trust: AUTONOMOUS (read own codings)</p> </li> <li> <p>[ ] #2 <code>compare_with_human</code> tool:</p> </li> <li>Input: human_coder_id</li> <li>Output: kappa_score, agreements, disagreements</li> <li>Trust: AUTONOMOUS (read-only comparison)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/#agent-tool-schemas-actions","title":"Agent Tool Schemas (Actions)","text":"<ul> <li>[ ] #3 <code>set_coder</code> tool:</li> <li>Input: coder_name (for self-identification)</li> <li>Output: coder_id</li> <li> <p>Trust: NOTIFY (identifies agent)</p> </li> <li> <p>[ ] #4 <code>list_coders</code> tool:</p> </li> <li>Input: include_ai (bool)</li> <li>Output: coders list</li> <li>Trust: AUTONOMOUS</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/#ai-self-awareness","title":"AI Self-Awareness","text":"<ul> <li>[ ] #5 Agent can query its own coding history</li> <li>[ ] #6 Agent can compare reliability with human coders</li> <li>[ ] #7 Agent can identify which codings are its own</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/#schema-structure","title":"Schema Structure","text":"<ul> <li>[ ] #8 Each schema: name, description, inputSchema, trust_level</li> <li>[ ] #9 Resource URIs: <code>qualcoder://collaboration/tools/{tool_name}</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/#controller-integration","title":"Controller Integration","text":"<ul> <li>[ ] #10 Tools invoke CollaborationController methods</li> <li>[ ] #11 Agent actions emit same events as UI</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.06%20-%20Collaboration-Agent-Tools/#implementation-notes","title":"Implementation Notes","text":"<p>For MCP (Model Context Protocol): - Schemas follow MCP Tool Schema specification - Self-awareness tools enable AI coding comparison workflows</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/","title":"Signal Payloads (Collaboration)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/#description","title":"Description","text":"<p>Define Qt-friendly payload dataclasses for the Collaboration context. These are emitted by SignalBridge signals to UI widgets.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/#coder-payloads","title":"Coder Payloads","text":"<ul> <li>[ ] #1 <code>CoderCreatedPayload</code>: coder_id (str), name (str), coder_type (str), is_ai (bool)</li> <li>[ ] #2 <code>CoderSwitchedPayload</code>: old_coder_id (str?), new_coder_id (str), new_coder_name (str)</li> <li>[ ] #3 <code>CoderVisibilityChangedPayload</code>: coder_id (str), coder_name (str), visible (bool)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/#merge-payloads","title":"Merge Payloads","text":"<ul> <li>[ ] #4 <code>MergeStartedPayload</code>: merge_id (str), source_project (str), target_project (str)</li> <li>[ ] #5 <code>ConflictDetectedPayload</code>: merge_id (str), conflict_type (str), source_item (str), target_item (str), description (str)</li> <li>[ ] #6 <code>ConflictResolvedPayload</code>: merge_id (str), conflict_index (int), resolution (str)</li> <li>[ ] #7 <code>MergeCompletedPayload</code>: merge_id (str), items_merged (int), conflicts_resolved (int)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/#comparison-payloads","title":"Comparison Payloads","text":"<ul> <li>[ ] #8 <code>ComparisonGeneratedPayload</code>: comparison_id (str), coder_a (str), coder_b (str), kappa_score (float), agreement_percent (float)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/#promotion-payloads","title":"Promotion Payloads","text":"<ul> <li>[ ] #9 <code>CodingPromotedPayload</code>: segment_id (str), from_coder (str), to_coder (str), code_name (str)</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/#design-rules","title":"Design Rules","text":"<ul> <li>[ ] #10 All payloads are frozen dataclasses</li> <li>[ ] #11 Use primitive types only</li> <li>[ ] #12 Include coder names for display</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.07%20-%20Signal-Payloads/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/collaboration_payloads.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.08%20-%20Event-Converters/","title":"Event Converters (Collaboration)","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.08%20-%20Event-Converters/#description","title":"Description","text":"<p>Implement converters that transform Collaboration domain events into signal payloads.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.08%20-%20Event-Converters/#acceptance-criteria","title":"Acceptance Criteria","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.08%20-%20Event-Converters/#converters","title":"Converters","text":"<ul> <li>[ ] #1 <code>CoderCreatedConverter</code>: CoderCreated \u2192 CoderCreatedPayload</li> <li>[ ] #2 <code>CoderSwitchedConverter</code>: CoderSwitched \u2192 CoderSwitchedPayload</li> <li>[ ] #3 <code>CoderVisibilityChangedConverter</code>: CoderVisibilityChanged \u2192 CoderVisibilityChangedPayload</li> <li>[ ] #4 <code>MergeStartedConverter</code>: MergeStarted \u2192 MergeStartedPayload</li> <li>[ ] #5 <code>ConflictDetectedConverter</code>: ConflictDetected \u2192 ConflictDetectedPayload</li> <li>[ ] #6 <code>ConflictResolvedConverter</code>: ConflictResolved \u2192 ConflictResolvedPayload</li> <li>[ ] #7 <code>MergeCompletedConverter</code>: MergeCompleted \u2192 MergeCompletedPayload</li> <li>[ ] #8 <code>ComparisonGeneratedConverter</code>: ComparisonGenerated \u2192 ComparisonGeneratedPayload</li> <li>[ ] #9 <code>CodingPromotedConverter</code>: CodingPromoted \u2192 CodingPromotedPayload</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.08%20-%20Event-Converters/#registry","title":"Registry","text":"<ul> <li>[ ] #10 Register all converters in <code>CollaborationConverterRegistry</code></li> <li>[ ] #11 Registry used by CollaborationSignalBridge</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.08%20-%20Event-Converters/#testing","title":"Testing","text":"<ul> <li>[ ] #12 Unit tests for each converter</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-024.08%20-%20Event-Converters/#files","title":"Files","text":"<ul> <li><code>src/application/signal_bridge/collaboration_converters.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025%20-%20Collaboration-Presentation/","title":"Collaboration Presentation","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025%20-%20Collaboration-Presentation/#description","title":"Description","text":"<p>Build the UI components for Collaboration.</p> <p>Agent-First: AI coder visible in coder selector. Comparison shows human vs AI reliability.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025%20-%20Collaboration-Presentation/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Coder selector widget (shows human and AI coders)</li> <li>[ ] Coder manager dialog</li> <li>[ ] Merge UI with conflict display</li> <li>[ ] Comparison report (human vs human, human vs AI)</li> <li>[ ] AI coder visibility toggle</li> <li>[ ] Promote AI coding action</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025%20-%20Collaboration-Presentation/#implementation","title":"Implementation","text":"<ul> <li><code>src/presentation/widgets/coder_selector.py</code></li> <li><code>src/presentation/screens/collaboration/</code></li> <li><code>src/presentation/dialogs/merge_dialog.py</code></li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.01%20-%20Coder-Selector-Widget/","title":"Coder Selector Widget","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.01%20-%20Coder-Selector-Widget/#description","title":"Description","text":"<p>Dropdown widget showing human and AI coders. Used in toolbar and filters.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.01%20-%20Coder-Selector-Widget/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Dropdown list of all coders,Visual distinction for AI coders (icon/badge),Multi-select option for filtering,Current coder indicator,AI coder visibility toggle,Coder count display</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.02%20-%20Coder-Manager-Dialog/","title":"Coder Manager Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.02%20-%20Coder-Manager-Dialog/#description","title":"Description","text":"<p>Dialog for managing coders. Add/edit/delete coders, view coding statistics.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.02%20-%20Coder-Manager-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Coder list with statistics,Add new coder dialog,Edit coder name,Delete coder with confirmation,Coding count per coder,Last active timestamp,AI vs human indicator</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.03%20-%20Coder-Comparison-Screen/","title":"Coder Comparison Screen","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.03%20-%20Coder-Comparison-Screen/#description","title":"Description","text":"<p>Compare coding between two coders (human vs human, human vs AI). Agreement statistics.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.03%20-%20Coder-Comparison-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Select two coders to compare,Side-by-side coded segments view,Agreement/disagreement highlighting,Cohen's Kappa calculation,Statistics breakdown (agree/disagree/dual-coded),Export comparison report,Human vs AI comparison mode</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.04%20-%20Merge-Dialog/","title":"Merge Dialog","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.04%20-%20Merge-Dialog/#description","title":"Description","text":"<p>Dialog for merging codes with conflict resolution. Shows conflicts, resolution options.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.04%20-%20Merge-Dialog/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Source and target code selection,Conflict detection and display,Resolution options (keep source/target/both),Preview merged result,Confirm merge button,Cancel and undo support,Affected segments count</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.05%20-%20Promote-AI-Coding-Action/","title":"Promote AI Coding Action","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.05%20-%20Promote-AI-Coding-Action/#description","title":"Description","text":"<p>UI for promoting AI-suggested codes to confirmed codes. Batch or individual promotion.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.05%20-%20Promote-AI-Coding-Action/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Select AI codes to promote,Preview promotion result,Promote single code button,Batch promote selected,Remove AI badge on promotion,Activity log entry,Undo promotion option</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.06%20-%20Inter-Rater-Reliability-Panel/","title":"Inter-Rater Reliability Panel","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.06%20-%20Inter-Rater-Reliability-Panel/#description","title":"Description","text":"<p>Panel showing inter-rater reliability statistics. Kappa scores, agreement matrices.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.06%20-%20Inter-Rater-Reliability-Panel/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Overall Kappa score display,Per-code Kappa breakdown,Agreement matrix visualization,Coder pair selection,Export reliability report,Trend over time chart</li> </ul>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.07%20-%20AI-Coder-Visibility-Toggle/","title":"AI Coder Visibility Toggle","text":""},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.07%20-%20AI-Coder-Visibility-Toggle/#description","title":"Description","text":"<p>Toggle to show/hide AI coder's work in the coding view. Filter AI-applied codes.</p>"},{"location":"backlog/archive/backlog-archive-v1/v1-architecture-driven/tasks/qc-025.07%20-%20AI-Coder-Visibility-Toggle/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Toggle button in toolbar,Show/hide AI highlights,Show/hide AI codes in tree,Show/hide AI in coder dropdown,Visual state indicator,Persist preference</li> </ul>"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/","title":"Design System Visualization Libraries","text":""},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#context","title":"Context","text":"<p>QualCoder v2 requires visualization components for:</p> <ol> <li>Charts - Code frequency, distributions, trends</li> <li>Network Graphs - Code relationships, co-occurrences</li> <li>Word Clouds - Text analysis visualization</li> <li>PDF Viewing - Document coding with text selection</li> <li>Image Annotation - Region-based coding on images</li> </ol> <p>We evaluated libraries based on:</p> <ul> <li>User Experience (40%) - Interactivity, responsiveness, visual quality</li> <li>Licensing (25%) - Commercial-friendly (MIT/BSD/LGPL preferred)</li> <li>Integration (20%) - PyQt6/PySide6 compatibility</li> <li>Maintenance (15%) - Active development, community support</li> </ul>"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#decision","title":"Decision","text":""},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#accepted-libraries","title":"Accepted Libraries","text":"Component Library License Rationale Charts PyQtGraph MIT Native Qt, 60fps, interactive zoom/pan, handles 1M+ points Network Graphs NetworkX + QGraphicsScene BSD + LGPL Official Qt example, full layout algorithms (spring, circular, planar) Word Clouds wordcloud MIT High quality output, mask support, actively maintained (v1.9.6) PDF Viewing Qt PDF (QPdfDocument) LGPL Native Qt6 module, built-in search, requires PySide6 Image Annotation QGraphicsScene (custom) LGPL Full control, native Qt, reference LabelMe for features"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#secondaryexport-libraries","title":"Secondary/Export Libraries","text":"Component Library License Use Case Static Charts Matplotlib BSD Publication-quality export, reports"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#rejected-libraries","title":"Rejected Libraries","text":"Library License Rejection Reason PyMuPDF AGPL Copyleft - requires open-source or commercial license ($) qpageview GPL-3.0 Copyleft - incompatible with proprietary distribution LabelMe GPL-3.0 Copyleft - use as reference only, not embed PyQt6-Charts GPL Requires commercial license for closed-source pyvis BSD Outputs HTML/JS - not native Qt integration"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#consequences","title":"Consequences","text":""},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#positive","title":"Positive","text":"<ul> <li>All primary libraries are MIT/BSD/LGPL - No licensing concerns for commercial use</li> <li>Native Qt integration - Consistent UX, no web view dependencies</li> <li>Active maintenance - All libraries actively developed (2025-2026 releases)</li> <li>PyQtGraph handles real-time data - Essential for live coding statistics</li> </ul>"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#negative","title":"Negative","text":"<ul> <li>Qt PDF requires PySide6 - May need to evaluate PyQt6 \u2192 PySide6 migration</li> <li>Custom image annotation - More development effort vs. using LabelMe</li> <li>NetworkX graphs require QGraphicsScene wrapper - Custom widget needed</li> </ul>"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#neutral","title":"Neutral","text":"<ul> <li>Matplotlib for export only - Static rendering acceptable for reports</li> <li>wordcloud is static - Interactive word clouds not critical for UX</li> </ul>"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#implementation","title":"Implementation","text":""},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#dependencies-to-add","title":"Dependencies to Add","text":"<pre><code># pyproject.toml\n[project.dependencies]\npyqtgraph = \"&gt;=0.13\"      # MIT - charts, real-time plots\nnetworkx = \"&gt;=3.0\"        # BSD - graph algorithms, layouts\nwordcloud = \"&gt;=1.9\"       # MIT - word cloud generation\nnumpy = \"&gt;=1.24\"          # BSD - required by pyqtgraph/wordcloud\nmatplotlib = \"&gt;=3.8\"      # BSD - export/publication charts\n</code></pre>"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#design-system-components-to-create","title":"Design System Components to Create","text":"Component Base Library Priority <code>ChartWidget</code> PyQtGraph P1 <code>NetworkGraphWidget</code> NetworkX + QGraphicsScene P1 <code>WordCloudWidget</code> wordcloud P2 <code>PDFPageViewer</code> Qt PDF P1 <code>ImageAnnotationLayer</code> QGraphicsScene P1"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#related-tasks","title":"Related Tasks","text":"<ul> <li>QC-019.05 Chart Components</li> <li>QC-019.06 Charts Screen</li> <li>QC-019.07 Network Graph View</li> <li>QC-019.08 Word Cloud Generator</li> <li>QC-007.11 Image Coding Screen</li> <li>QC-007.17 PDF Coding Screen</li> </ul>"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#pyqt6-vs-pyside6-consideration","title":"PyQt6 vs PySide6 Consideration","text":"Aspect PyQt6 PySide6 License GPL or Commercial ($550+) LGPL (free for commercial) Qt PDF Needs separate license Included, LGPL API Nearly identical Nearly identical Migration - ~1 day effort (import changes) <p>Recommendation: Evaluate PySide6 migration in ADR-002 if commercial distribution is planned.</p>"},{"location":"backlog/decisions/decision-001%20design-system-visualization-libraries/#references","title":"References","text":"<ul> <li>PyQtGraph Documentation</li> <li>NetworkX + Qt Example</li> <li>wordcloud GitHub</li> <li>Qt PDF Licensing</li> <li>PyMuPDF AGPL Discussion</li> </ul>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/","title":"Library Alternatives Analysis for Custom Infrastructure","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#context","title":"Context","text":"<p>This document analyzes the custom implementations in the diff against <code>origin/main</code> and evaluates whether existing Python libraries could replace them.</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#summary-of-changes","title":"Summary of Changes","text":"File/Module Lines Purpose <code>src/application/event_bus.py</code> 427 Synchronous pub/sub event bus <code>src/application/signal_bridge/</code> ~600 Qt signal bridging for domain events <code>src/domain/shared/validation.py</code> 310 Validation predicates and helpers <code>src/domain/shared/types.py</code> 161 Result type (Success/Failure) <code>src/domain/coding/derivers.py</code> 637 Pure event derivation functions <code>src/domain/coding/invariants.py</code> 409 Business rule predicates <p>Total custom infrastructure: ~2,544 lines</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#1-eventbus-implementation","title":"1. EventBus Implementation","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#current-implementation","title":"Current Implementation","text":"<ul> <li>Synchronous pub/sub with thread-safety (RLock)</li> <li>Subscription by string type or event class</li> <li><code>subscribe_all()</code> for global handlers</li> <li>Event history for debugging</li> <li>Subscription handles for cleanup</li> </ul>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#library-alternatives","title":"Library Alternatives","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#blinker-recommended-for-simplicity","title":"Blinker (Recommended for simplicity)","text":"<pre><code>from blinker import signal\n\ncode_created = signal('code_created')\n\n@code_created.connect\ndef handle_code_created(sender, **kwargs):\n    pass\n\ncode_created.send(sender=app, event=event)\n</code></pre> <p>Pros: - Flask's signal library, very mature - Simple API, thread-safe - ~1000 GitHub stars, actively maintained - Supports named signals, anonymous signals - Weak reference support</p> <p>Cons: - No built-in event history - No subscribe_all() equivalent (need multiple connections)</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#pypubsub","title":"PyPubSub","text":"<pre><code>from pubsub import pub\n\npub.subscribe(handler, 'coding.code_created')\npub.sendMessage('coding.code_created', event=event)\n</code></pre> <p>Pros: - Mature library, extensive documentation - Built-in debugging/tracing - Topic hierarchy support</p> <p>Cons: - API is more verbose - Less pythonic</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#pydispatcher","title":"PyDispatcher","text":"<pre><code>from pydispatch import dispatcher\n\ndispatcher.connect(handler, signal='code_created', sender=dispatcher.Any)\ndispatcher.send(signal='code_created', sender=self, event=event)\n</code></pre> <p>Pros: - Django's dispatcher foundation - Very flexible sender/signal matching</p> <p>Cons: - API is verbose - Less modern design</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#eventbus-recommendation-keep-custom-implementation","title":"EventBus Recommendation: Keep Custom Implementation","text":"<p>Rationale: 1. Current implementation is only ~400 lines, well-tested 2. Libraries don't provide all features (subscribe_all, event history, type-based subscription) 3. Tight integration with domain event conventions (event_type attribute) 4. Adding a library adds a dependency for minimal gain</p> <p>If replacing: Use Blinker - simplest API, most Pythonic.</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#2-result-type-successfailure","title":"2. Result Type (Success/Failure)","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#current-implementation_1","title":"Current Implementation","text":"<ul> <li>Simple <code>Success[T]</code> and <code>Failure[E]</code> dataclasses</li> <li>Basic <code>map()</code>, <code>unwrap()</code>, <code>is_success()</code>, <code>is_failure()</code></li> </ul>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#library-alternatives_1","title":"Library Alternatives","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#returns-by-dry-python-recommended","title":"returns by dry-python (Recommended)","text":"<pre><code>from returns.result import Result, Success, Failure\n\ndef divide(a: int, b: int) -&gt; Result[float, str]:\n    if b == 0:\n        return Failure(\"division by zero\")\n    return Success(a / b)\n\nresult.map(lambda x: x * 2).unwrap()\n</code></pre> <p>Pros: - Full railway-oriented programming - Rich API: <code>bind()</code>, <code>lash()</code>, <code>alt()</code>, <code>rescue()</code> - Type-safe with mypy plugins - Well-documented, 3k+ GitHub stars - Also provides: <code>Maybe</code>, <code>IO</code>, <code>Future</code>, <code>RequiresContext</code></p> <p>Cons: - Heavier dependency - Learning curve for full API</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#result-lighter-alternative","title":"result (lighter alternative)","text":"<pre><code>from result import Result, Ok, Err\n\nOk(1).map(lambda x: x + 1)  # Ok(2)\nErr(\"boom\").map(lambda x: x + 1)  # Err(\"boom\")\n</code></pre> <p>Pros: - Minimal API, Rust-inspired - Very lightweight</p> <p>Cons: - Less feature-rich than <code>returns</code></p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#result-type-recommendation-consider-returns-library","title":"Result Type Recommendation: Consider <code>returns</code> library","text":"<p>Rationale: 1. Current implementation is minimal (~50 lines of core logic) 2. <code>returns</code> provides significantly more functionality (bind, do notation, async support) 3. Better mypy integration 4. Would improve composition in derivers</p> <p>Migration effort: Low - just change imports, API is compatible.</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#3-validation-utilities","title":"3. Validation Utilities","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#current-implementation_2","title":"Current Implementation","text":"<ul> <li>Predicates: <code>is_non_empty_string()</code>, <code>is_within_length()</code>, etc.</li> <li><code>ValidationResult = ValidationSuccess | ValidationFailure</code></li> <li><code>validate_field()</code>, <code>validate_all()</code> composers</li> </ul>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#library-alternatives_2","title":"Library Alternatives","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#pydantic-v2-most-popular","title":"Pydantic v2 (Most popular)","text":"<pre><code>from pydantic import BaseModel, field_validator, ValidationError\n\nclass CodeCreate(BaseModel):\n    name: str\n    color: str\n\n    @field_validator('name')\n    def name_not_empty(cls, v):\n        if not v.strip():\n            raise ValueError('name cannot be empty')\n        return v\n</code></pre> <p>Pros: - Industry standard for Python validation - Excellent performance (Rust core in v2) - Rich ecosystem, IDE support - JSON Schema generation</p> <p>Cons: - Different paradigm (class-based vs functional predicates) - Would require architectural changes - Overkill for pure predicate functions</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#cerberus","title":"Cerberus","text":"<pre><code>from cerberus import Validator\n\nschema = {'name': {'type': 'string', 'minlength': 1, 'maxlength': 100}}\nv = Validator(schema)\nv.validate({'name': 'Test'})\n</code></pre> <p>Pros: - Schema-based validation - Extensible rules</p> <p>Cons: - Schema-centric, not predicate-centric - Different paradigm</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#validators-lightweight","title":"validators (lightweight)","text":"<pre><code>import validators\n\nvalidators.length('hello', min=1, max=100)\nvalidators.uuid(some_uuid)\n</code></pre> <p>Pros: - Simple predicate functions - Similar to current approach</p> <p>Cons: - Limited scope (URLs, emails, etc.) - Doesn't cover domain-specific rules</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#validation-recommendation-keep-custom-implementation","title":"Validation Recommendation: Keep Custom Implementation","text":"<p>Rationale: 1. Current predicates are domain-specific (hierarchy validation, uniqueness checks) 2. Libraries focus on data validation, not business rule predicates 3. The functional approach (pure predicates) is intentional for testing 4. Current implementation is clean and minimal (~300 lines) 5. Pydantic would require significant architectural changes</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#4-signal-bridge-qt-integration","title":"4. Signal Bridge (Qt Integration)","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#current-implementation_3","title":"Current Implementation","text":"<ul> <li>Thread-safe signal emission from background threads to Qt main thread</li> <li>Event \u2192 Payload converter pattern</li> <li>Activity feed integration</li> <li>Singleton pattern per context</li> </ul>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#library-alternatives_3","title":"Library Alternatives","text":"<p>There are no direct alternatives. This is highly specialized infrastructure that: 1. Bridges domain events to PyQt6 signals 2. Handles Qt's thread-affinity requirements 3. Integrates with the application's activity feed</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#signal-bridge-recommendation-keep-custom-implementation","title":"Signal Bridge Recommendation: Keep Custom Implementation","text":"<p>Rationale: 1. Qt-specific threading requirements 2. Tight integration with domain event patterns 3. No library exists for this exact use case</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#5-derivers-and-invariants","title":"5. Derivers and Invariants","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#current-implementation_4","title":"Current Implementation","text":"<ul> <li>Pure functions: <code>(command, state) \u2192 Event | Failure</code></li> <li>Compose invariants to validate operations</li> <li>Domain-specific business rules</li> </ul>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#library-alternatives_4","title":"Library Alternatives","text":"<p>None applicable. These are domain-specific implementations that encode business rules. Libraries cannot replace domain logic.</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#deriversinvariants-recommendation-keep-custom-implementation","title":"Derivers/Invariants Recommendation: Keep Custom Implementation","text":"<p>Rationale: 1. Domain logic must be custom 2. The functional pattern is the architecture, not replaceable infrastructure</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#decision","title":"Decision","text":"Component Recommendation Rationale EventBus Keep custom Full-featured, well-tested, tight integration Result Type Consider <code>returns</code> Richer API, better typing, low migration cost Validation Keep custom Domain-specific predicates, functional design Signal Bridge Keep custom No alternatives exist Derivers/Invariants Keep custom Domain logic, not infrastructure"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#if-adopting-libraries","title":"If Adopting Libraries","text":"<p>Priority 1: <code>returns</code> for Result type - Install: <code>pip install returns</code> - Benefits: Better composition, mypy plugin, do-notation - Migration: Replace imports, API mostly compatible</p> <p>Priority 2: Consider <code>blinker</code> for simpler use cases - Only if EventBus features (history, subscribe_all) aren't needed - Current EventBus is well-designed; switching adds little value</p>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#dependencies-to-consider-adding","title":"Dependencies to Consider Adding","text":"<pre><code># pyproject.toml\n[project.optional-dependencies]\nddd = [\n    \"returns&gt;=0.22\",  # Result/Maybe/IO monads\n]\n</code></pre>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#consequences","title":"Consequences","text":""},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#positive","title":"Positive","text":"<ul> <li>Custom implementations provide exactly what's needed without unnecessary abstractions</li> <li>~2,500 lines of well-documented, tested code following clean architecture principles</li> <li>Tight integration with Qt and domain event patterns</li> <li>No external dependencies for core infrastructure</li> </ul>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#negative","title":"Negative","text":"<ul> <li>Maintenance burden for custom code</li> <li>Missing advanced features that <code>returns</code> library provides (bind, do-notation, async support)</li> </ul>"},{"location":"backlog/decisions/decision-002%20library-alternatives-analysis/#recommended-action","title":"Recommended Action","text":"<p>Evaluate adopting <code>returns</code> for the Result type to gain better composition primitives, but keep all other custom implementations.</p>"},{"location":"backlog/decisions/decision-003%20localization-framework/","title":"Localization Framework Selection","text":""},{"location":"backlog/decisions/decision-003%20localization-framework/#context","title":"Context","text":"<p>QualCoder v2 requires internationalization (i18n) support to serve a global user base. The application needs to:</p> <ol> <li>Display user interface text in multiple languages</li> <li>Support the 9 languages already translated in v1 (de, en, es, fr, it, ja, pt, sv, zh)</li> <li>Allow community contributions of new translations</li> <li>Optionally support runtime language switching (vs restart requirement)</li> </ol>"},{"location":"backlog/decisions/decision-003%20localization-framework/#qualcoder-v1-approach","title":"QualCoder v1 Approach","text":"<p>QualCoder v1 uses a hybrid localization system:</p> System Format Use Case Files GNU gettext <code>.po</code> \u2192 <code>.mo</code> Python code strings via <code>_()</code> <code>{lang}.po</code>, <code>locale/{lang}/LC_MESSAGES/{lang}.mo</code> Qt Linguist <code>.ts</code> \u2192 <code>.qm</code> Qt Designer UI widgets <code>GUI/app_{lang}.ts</code>, <code>locale/{lang}/app_{lang}.qm</code> <p>Rationale for v1 hybrid: Qt Designer <code>.ui</code> files required Qt Linguist, while Python code used standard gettext.</p> <p>v1 Language Switching: Requires application restart (loads translations at startup in <code>__main__.py:3300-3353</code>).</p>"},{"location":"backlog/decisions/decision-003%20localization-framework/#qualcoder-v2-state","title":"QualCoder v2 State","text":"<ul> <li>No Qt Designer files - All UI is code-only (design system components)</li> <li>PySide6 - Native Qt translation APIs available</li> <li>~100-120 user-facing strings in presentation layer</li> <li>Design system pattern - Theme tokens architecture can be replicated for translations</li> </ul>"},{"location":"backlog/decisions/decision-003%20localization-framework/#decision","title":"Decision","text":"<p>Use Qt Linguist (<code>.ts</code>/<code>.qm</code>) as the sole localization framework.</p>"},{"location":"backlog/decisions/decision-003%20localization-framework/#evaluation-matrix","title":"Evaluation Matrix","text":"Criteria Qt Linguist GNU gettext Winner PySide6 Integration Native, built-in Requires separate setup Qt Linguist Tooling pyside6-linguist, Qt Linguist app xgettext, msgfmt, poedit Tie Plural Forms Native support Native support Tie Context Support XML contexts msgctxt Tie Runtime Language Switch LanguageChange events Requires reload Qt Linguist v1 Compatibility Can convert <code>.po</code> \u2192 <code>.ts</code> Direct reuse gettext Maintenance Burden Single system Hybrid complexity Qt Linguist Qt Designer Support Yes No Qt Linguist"},{"location":"backlog/decisions/decision-003%20localization-framework/#decision-drivers","title":"Decision Drivers","text":"<ol> <li>Single System Simplicity - v2 has no Qt Designer files, so the primary reason for v1's hybrid approach doesn't apply</li> <li>Native PySide6 Support - <code>QTranslator</code>, <code>tr()</code>, and <code>LanguageChange</code> events are first-class citizens</li> <li>Runtime Language Switching - Qt's event system enables language changes without restart</li> <li>Consistent Tooling - <code>pyside6-lupdate</code> and <code>pyside6-lrelease</code> integrate with the build pipeline</li> </ol>"},{"location":"backlog/decisions/decision-003%20localization-framework/#migration-from-v1-translations","title":"Migration from v1 Translations","text":"<p>The <code>.po</code> files from v1 can be converted to <code>.ts</code> format:</p> <pre><code># Using po2ts from translate-toolkit\npo2ts input.po output.ts\n</code></pre> <p>Alternatively, manual extraction of high-value strings for the ~100 strings in v2.</p>"},{"location":"backlog/decisions/decision-003%20localization-framework/#consequences","title":"Consequences","text":""},{"location":"backlog/decisions/decision-003%20localization-framework/#positive","title":"Positive","text":"<ul> <li>Simpler build and maintenance - Single translation system vs hybrid</li> <li>Better IDE tooling - Qt Linguist provides visual context for translators</li> <li>Runtime language switch - Users can change language without restarting</li> <li>Native Qt integration - No impedance mismatch with PySide6</li> <li>Consistent contributor experience - One format to learn</li> </ul>"},{"location":"backlog/decisions/decision-003%20localization-framework/#negative","title":"Negative","text":"<ul> <li>v1 translation migration - Need to convert <code>.po</code> files to <code>.ts</code> format</li> <li>Contributor learning curve - Some contributors familiar with gettext will need to learn Qt Linguist</li> <li>Format lock-in - Qt Linguist format is less universal than gettext</li> </ul>"},{"location":"backlog/decisions/decision-003%20localization-framework/#neutral","title":"Neutral","text":"<ul> <li>Similar translation platform support - Both Weblate and Crowdin support <code>.ts</code> files</li> <li>Comparable tooling quality - Qt Linguist is mature, as is gettext ecosystem</li> </ul>"},{"location":"backlog/decisions/decision-003%20localization-framework/#implementation","title":"Implementation","text":""},{"location":"backlog/decisions/decision-003%20localization-framework/#dependencies","title":"Dependencies","text":"<p>No additional dependencies required - PySide6 includes all necessary modules:</p> <pre><code>from PySide6.QtCore import QTranslator, QCoreApplication, QLocale\n</code></pre>"},{"location":"backlog/decisions/decision-003%20localization-framework/#file-structure","title":"File Structure","text":"<pre><code>src/infrastructure/\n\u251c\u2500\u2500 i18n/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 protocols.py          # TranslationService protocol\n\u2502   \u251c\u2500\u2500 qt_translation.py     # QTranslator implementation\n\u2502   \u2514\u2500\u2500 translations/         # Compiled .qm files\n\u2502       \u251c\u2500\u2500 qualcoder_de.qm\n\u2502       \u251c\u2500\u2500 qualcoder_es.qm\n\u2502       \u251c\u2500\u2500 qualcoder_fr.qm\n\u2502       \u251c\u2500\u2500 qualcoder_it.qm\n\u2502       \u251c\u2500\u2500 qualcoder_ja.qm\n\u2502       \u251c\u2500\u2500 qualcoder_pt.qm\n\u2502       \u251c\u2500\u2500 qualcoder_sv.qm\n\u2502       \u2514\u2500\u2500 qualcoder_zh.qm\n\u2502\ntranslations/                   # Source .ts files (version controlled)\n\u251c\u2500\u2500 qualcoder_de.ts\n\u251c\u2500\u2500 qualcoder_es.ts\n\u251c\u2500\u2500 qualcoder_fr.ts\n\u251c\u2500\u2500 ...\n\u2514\u2500\u2500 qualcoder.pro              # Project file for lupdate\n</code></pre>"},{"location":"backlog/decisions/decision-003%20localization-framework/#build-integration","title":"Build Integration","text":"<pre><code># Extract strings from source\npyside6-lupdate src/ -ts translations/qualcoder_en.ts\n\n# Compile for release\npyside6-lrelease translations/*.ts -qm src/infrastructure/i18n/translations/\n</code></pre>"},{"location":"backlog/decisions/decision-003%20localization-framework/#translation-loading-pattern","title":"Translation Loading Pattern","text":"<pre><code>from PySide6.QtCore import QTranslator, QCoreApplication, QLocale\n\nclass TranslationService:\n    def __init__(self, app: QCoreApplication):\n        self._app = app\n        self._translator = QTranslator()\n        self._current_locale = \"en\"\n\n    def load_language(self, locale_code: str) -&gt; bool:\n        \"\"\"Load translations for the specified locale.\"\"\"\n        path = f\":/translations/qualcoder_{locale_code}.qm\"\n        if self._translator.load(path):\n            self._app.installTranslator(self._translator)\n            self._current_locale = locale_code\n            return True\n        return False\n\n    def switch_language(self, locale_code: str) -&gt; bool:\n        \"\"\"Switch language at runtime (triggers LanguageChange events).\"\"\"\n        self._app.removeTranslator(self._translator)\n        return self.load_language(locale_code)\n</code></pre>"},{"location":"backlog/decisions/decision-003%20localization-framework/#string-marking-convention","title":"String Marking Convention","text":"<pre><code># In presentation layer components\nfrom PySide6.QtCore import QCoreApplication\n\ndef tr(text: str, context: str = \"QualCoder\") -&gt; str:\n    \"\"\"Translation wrapper for consistency.\"\"\"\n    return QCoreApplication.translate(context, text)\n\n# Usage in components\nlabel = QLabel(tr(\"Codes\"))\nbutton.setToolTip(tr(\"Add a new code\"))\n</code></pre>"},{"location":"backlog/decisions/decision-003%20localization-framework/#related-tasks","title":"Related Tasks","text":"<ul> <li>QC-003.03 Localization Analysis (this ADR)</li> <li>QC-003.04 Translation Infrastructure (implementation)</li> <li>QC-003.05 String Extraction and Initial Translations</li> </ul>"},{"location":"backlog/decisions/decision-003%20localization-framework/#references","title":"References","text":"<ul> <li>Qt Internationalization</li> <li>PySide6 Translation Tutorial</li> <li>pyside6-linguist Tool</li> <li>translate-toolkit po2ts</li> <li>QualCoder v1 source: <code>src/qualcoder/__main__.py</code> (lines 3300-3353)</li> </ul>"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/","title":"Design System Visualization Libraries","text":""},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#context","title":"Context","text":"<p>QualCoder v2 requires visualization components for: 1. Charts - Code frequency, distributions, trends 2. Network Graphs - Code relationships, co-occurrences 3. Word Clouds - Text analysis visualization 4. PDF Viewing - Document coding with text selection 5. Image Annotation - Region-based coding on images</p> <p>We evaluated libraries based on: - User Experience (40%) - Interactivity, responsiveness, visual quality - Licensing (25%) - Commercial-friendly (MIT/BSD/LGPL preferred) - Integration (20%) - PyQt6/PySide6 compatibility - Maintenance (15%) - Active development, community support</p>"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#decision","title":"Decision","text":""},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#accepted-libraries","title":"Accepted Libraries","text":"Component Library License Rationale Charts PyQtGraph MIT Native Qt, 60fps, interactive zoom/pan, handles 1M+ points Network Graphs NetworkX + QGraphicsScene BSD + LGPL Official Qt example, full layout algorithms (spring, circular, planar) Word Clouds wordcloud MIT High quality output, mask support, actively maintained (v1.9.6) PDF Viewing Qt PDF (QPdfDocument) LGPL Native Qt6 module, built-in search, requires PySide6 Image Annotation QGraphicsScene (custom) LGPL Full control, native Qt, reference LabelMe for features"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#secondaryexport-libraries","title":"Secondary/Export Libraries","text":"Component Library License Use Case Static Charts Matplotlib BSD Publication-quality export, reports"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#rejected-libraries","title":"Rejected Libraries","text":"Library License Rejection Reason PyMuPDF AGPL Copyleft - requires open-source or commercial license ($) qpageview GPL-3.0 Copyleft - incompatible with proprietary distribution LabelMe GPL-3.0 Copyleft - use as reference only, not embed PyQt6-Charts GPL Requires commercial license for closed-source pyvis BSD Outputs HTML/JS - not native Qt integration"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#consequences","title":"Consequences","text":""},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#positive","title":"Positive","text":"<ul> <li>All primary libraries are MIT/BSD/LGPL - No licensing concerns for commercial use</li> <li>Native Qt integration - Consistent UX, no web view dependencies</li> <li>Active maintenance - All libraries actively developed (2025-2026 releases)</li> <li>PyQtGraph handles real-time data - Essential for live coding statistics</li> </ul>"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#negative","title":"Negative","text":"<ul> <li>Qt PDF requires PySide6 - May need to evaluate PyQt6 \u2192 PySide6 migration</li> <li>Custom image annotation - More development effort vs. using LabelMe</li> <li>NetworkX graphs require QGraphicsScene wrapper - Custom widget needed</li> </ul>"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#neutral","title":"Neutral","text":"<ul> <li>Matplotlib for export only - Static rendering acceptable for reports</li> <li>wordcloud is static - Interactive word clouds not critical for UX</li> </ul>"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#implementation","title":"Implementation","text":""},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#dependencies-to-add","title":"Dependencies to Add","text":"<pre><code># pyproject.toml\n[project.dependencies]\npyqtgraph = \"&gt;=0.13\"      # MIT - charts, real-time plots\nnetworkx = \"&gt;=3.0\"        # BSD - graph algorithms, layouts\nwordcloud = \"&gt;=1.9\"       # MIT - word cloud generation\nnumpy = \"&gt;=1.24\"          # BSD - required by pyqtgraph/wordcloud\nmatplotlib = \"&gt;=3.8\"      # BSD - export/publication charts\n</code></pre>"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#design-system-components-to-create","title":"Design System Components to Create","text":"Component Base Library Priority <code>ChartWidget</code> PyQtGraph P1 <code>NetworkGraphWidget</code> NetworkX + QGraphicsScene P1 <code>WordCloudWidget</code> wordcloud P2 <code>PDFPageViewer</code> Qt PDF P1 <code>ImageAnnotationLayer</code> QGraphicsScene P1"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#related-tasks","title":"Related Tasks","text":"<ul> <li>QC-019.05 Chart Components</li> <li>QC-019.06 Charts Screen</li> <li>QC-019.07 Network Graph View</li> <li>QC-019.08 Word Cloud Generator</li> <li>QC-007.11 Image Coding Screen</li> <li>QC-007.17 PDF Coding Screen</li> </ul>"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#pyqt6-vs-pyside6-consideration","title":"PyQt6 vs PySide6 Consideration","text":"Aspect PyQt6 PySide6 License GPL or Commercial ($550+) LGPL (free for commercial) Qt PDF Needs separate license Included, LGPL API Nearly identical Nearly identical Migration - ~1 day effort (import changes) <p>Recommendation: Evaluate PySide6 migration in ADR-002 if commercial distribution is planned.</p>"},{"location":"backlog/decisions/decision-004%20design-system-visualization-libraries/#references","title":"References","text":"<ul> <li>PyQtGraph Documentation</li> <li>NetworkX + Qt Example</li> <li>wordcloud GitHub</li> <li>Qt PDF Licensing</li> <li>PyMuPDF AGPL Discussion</li> </ul>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/","title":"MCP Transport - HTTP over Stdio","text":""},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#context","title":"Context","text":"<p>QualCoder v2 exposes MCP (Model Context Protocol) tools for AI agent integration. The MCP specification supports multiple transport mechanisms:</p> <ol> <li>stdio - Standard input/output (process-based)</li> <li>HTTP - REST/JSON-RPC over HTTP</li> <li>SSE - Server-Sent Events (deprecated)</li> <li>WebSocket - Bidirectional WebSocket</li> </ol> <p>We needed to choose a transport that allows AI agents (like Claude Code) to interact with a running QualCoder instance while sharing the same <code>AppContext</code>, <code>EventBus</code>, and enabling real-time UI updates.</p>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#decision","title":"Decision","text":"<p>Accepted: HTTP transport embedded in the QualCoder application.</p> <p>The MCP server runs as a background thread inside the QualCoder app on <code>localhost:8765</code>, sharing the same <code>AppContext</code> and <code>EventBus</code> with the Qt UI.</p>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              QualCoder App (Main Process)       \u2502\n\u2502                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  AppContext  \u2502\u25c4\u2500\u2500\u2500\u2502  MCPServerManager    \u2502  \u2502\n\u2502  \u2502  (shared)    \u2502    \u2502  (HTTP on :8765)     \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502  [background thread] \u2502  \u2502\n\u2502         \u2502            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502         \u25bc                      \u25b2               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u2502               \u2502\n\u2502  \u2502  EventBus    \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n\u2502  \u2502 SignalBridge \u2502  (publishes domain events)   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                              \u2502\n\u2502         \u2502                                      \u2502\n\u2502         \u25bc                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                              \u2502\n\u2502  \u2502   Qt UI      \u2502 (receives signals, updates)  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u25b2\n              \u2502 HTTP (localhost:8765)\n              \u2502\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502 Claude Code \u2502\n       \u2502 (MCP Client)\u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#options-considered","title":"Options Considered","text":""},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#option-1-stdio-transport-rejected","title":"Option 1: Stdio Transport (Rejected)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     stdio     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Claude Code \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502 MCP Server  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502 (separate)  \u2502\n                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                              \u250c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2510\n                              \u2502 Shared DB \u2502\n                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                    \u2502\n                              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                              \u2502 QualCoder   \u2502\n                              \u2502 (separate)  \u2502\n                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> Pros Cons Standard MCP transport Separate process - no shared EventBus Simple to implement No real-time UI updates Works with all MCP clients Requires IPC for communication Database conflicts possible <p>Rejected because: Cannot interact with running app. AI actions wouldn't trigger live UI updates.</p>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#option-2-http-transport-embedded-accepted","title":"Option 2: HTTP Transport - Embedded (Accepted)","text":"Pros Cons Shares AppContext with UI Requires HTTP server dependency (aiohttp) Real-time UI updates via SignalBridge Slightly more complex EventBus integration Port management needed Thread-safe via QMetaObject <p>Accepted because: Enables the core use case - AI agents can code documents and researchers see changes in real-time.</p>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#option-3-websocket-transport-future","title":"Option 3: WebSocket Transport (Future)","text":"Pros Cons Bidirectional communication Not standard MCP transport Push notifications to client More implementation effort Lower latency <p>Deferred: HTTP is sufficient for current needs. WebSocket could be added for bidirectional notifications.</p>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#consequences","title":"Consequences","text":""},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#positive","title":"Positive","text":"<ul> <li>Real-time collaboration: When AI applies codes, the UI updates immediately</li> <li>Shared state: AI reads the exact same project state the user sees</li> <li>Thread-safe signals: <code>SignalBridge</code> properly marshals events to Qt main thread</li> <li>Simple configuration: Single <code>.mcp.json</code> file for clients</li> </ul>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#negative","title":"Negative","text":"<ul> <li>Port dependency: Server uses fixed port (8765), may conflict</li> <li>HTTP overhead: Slightly higher latency than stdio</li> <li>Requires running app: MCP only available when QualCoder is open</li> </ul>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#mitigations","title":"Mitigations","text":"<ul> <li>Port can be configured via environment variable</li> <li>HTTP latency is negligible for tool calls (&lt; 10ms local)</li> <li>Future: Add stdio mode for headless/batch operations</li> </ul>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#implementation","title":"Implementation","text":""},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#server-location","title":"Server Location","text":"<p><code>src/shared/infra/mcp_server.py</code></p>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#wiring-in-mainpy","title":"Wiring in main.py","text":"<pre><code>from src.shared.infra.mcp_server import MCPServerManager\n\nclass QualCoderApp:\n    def __init__(self):\n        # ... existing init ...\n        self._mcp_server = MCPServerManager(ctx=self._ctx)\n        self._mcp_server.start()\n\n    def run(self):\n        # ... app.exec() ...\n        self._mcp_server.stop()\n</code></pre>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#client-configuration","title":"Client Configuration","text":"<p><code>.mcp.json</code> in project root:</p> <pre><code>{\n  \"mcpServers\": {\n    \"qualcoder\": {\n      \"type\": \"http\",\n      \"url\": \"http://localhost:8765/mcp\"\n    }\n  }\n}\n</code></pre>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#dependencies","title":"Dependencies","text":"<pre><code>[project.dependencies]\naiohttp = \"&gt;=3.9\"  # MIT - HTTP server for MCP\n</code></pre>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#thread-safety","title":"Thread Safety","text":"<p>The <code>SignalBridge</code> ensures thread-safe signal emission:</p> <ol> <li>MCP tool executes in aiohttp thread</li> <li>Publishes domain event to EventBus</li> <li>SignalBridge catches event in background thread</li> <li>Uses <code>QMetaObject.invokeMethod</code> with <code>QueuedConnection</code></li> <li>Signal emitted on Qt main thread</li> <li>UI slot updates safely</li> </ol> <p>See: <code>src/shared/infra/signal_bridge/base.py:314-336</code></p>"},{"location":"backlog/decisions/decision-005%20mcp-transport-http-over-stdio/#references","title":"References","text":"<ul> <li>MCP Transport Specification</li> <li>Claude Code MCP Documentation</li> <li>Qt Thread Safety</li> </ul>"},{"location":"backlog/tasks/","title":"Tasks","text":"<p>All feature specifications and implementation tasks for QualCoder v2.</p>"},{"location":"backlog/tasks/#task-groups","title":"Task Groups","text":"ID Feature QC-026 Open/Navigate Project QC-027 Manage Sources QC-028 Manage Codes QC-029 Apply Codes to Text QC-030 Apply Codes to Images QC-031 Apply Codes to Audio/Video QC-032 Auto-Code QC-033 Search and Find QC-034 Manage Cases QC-035 Generate Reports QC-036 Collaborate QC-037 Chat with Agent QC-038 Settings and Preferences QC-039 Import/Export Formats QC-040 Data Privacy QC-041 References and Bibliography QC-042 Apply Codes to PDF QC-043 Journals and Memos QC-044 Visualizations QC-045 Complete Coding Context QC-046 Remove Migration Code"},{"location":"backlog/tasks/qc-026%20-%20Open-Navigate-Project/","title":"Open & Navigate Project","text":""},{"location":"backlog/tasks/qc-026%20-%20Open-Navigate-Project/#description","title":"Description","text":"<p>Enable researchers and agents to open projects and navigate between sources and views. This is the entry point to all QualCoder functionality.</p>"},{"location":"backlog/tasks/qc-026%20-%20Open-Navigate-Project/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can open an existing project file</li> <li>[ ] #2 Researcher can create a new project</li> <li>[ ] #3 Researcher can see list of sources in the project</li> <li>[ ] #4 Researcher can switch between different screens/views</li> <li>[ ] #5 Agent can query current project context</li> <li>[ ] #6 Agent can navigate to a specific source or segment</li> </ul>"},{"location":"backlog/tasks/qc-026.01%20-%20Open-Existing-Project/","title":"Open Existing Project","text":""},{"location":"backlog/tasks/qc-026.01%20-%20Open-Existing-Project/#description","title":"Description","text":"<p>As a Researcher, I want to open an existing QualCoder project file so that I can continue my analysis work.</p>"},{"location":"backlog/tasks/qc-026.01%20-%20Open-Existing-Project/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a .qda project file from the file system</li> <li>[ ] #2 The project opens and shows the main workspace</li> <li>[ ] #3 I see my previously saved sources and codes</li> <li>[ ] #4 Recent projects are shown for quick access</li> </ul>"},{"location":"backlog/tasks/qc-026.01%20-%20Open-Existing-Project/#implementation-notes","title":"Implementation Notes","text":""},{"location":"backlog/tasks/qc-026.01%20-%20Open-Existing-Project/#implementation-progress-2026-02-03","title":"Implementation Progress (2026-02-03)","text":"<ul> <li>Fixed startup crash: App now starts without a project open (contexts are None)</li> <li>Fixed _on_open_project() to properly check OperationResult.is_success</li> <li>Added _wire_viewmodels() method to wire FileManagerViewModel after project opens</li> <li>Added E2E smoke tests in test_main_e2e.py:</li> <li>TestSmokeStartup: Verifies app starts without project</li> <li>TestSmokeProjectLifecycle: Tests project open flow</li> </ul> <p>Files changed: - src/main.py - src/tests/e2e/test_main_e2e.py</p>"},{"location":"backlog/tasks/qc-026.02%20-%20Create-New-Project/","title":"Create New Project","text":""},{"location":"backlog/tasks/qc-026.02%20-%20Create-New-Project/#description","title":"Description","text":"<p>As a Researcher, I want to create a new QualCoder project so that I can start a fresh analysis.</p>"},{"location":"backlog/tasks/qc-026.02%20-%20Create-New-Project/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can specify a project name and location</li> <li>[ ] #2 A new empty project is created</li> <li>[ ] #3 I am taken to the main workspace ready to import sources</li> </ul>"},{"location":"backlog/tasks/qc-026.02%20-%20Create-New-Project/#implementation-notes","title":"Implementation Notes","text":""},{"location":"backlog/tasks/qc-026.02%20-%20Create-New-Project/#implementation-progress-2026-02-03","title":"Implementation Progress (2026-02-03)","text":"<ul> <li>Fixed project creation flow: After create_project(), now calls open_project() to initialize bounded contexts</li> <li>Fixed _on_create_project() to properly check OperationResult.is_success</li> <li>After opening, _wire_viewmodels() wires FileManagerViewModel</li> <li>UI switches to file manager screen after successful creation</li> <li>Added E2E smoke tests in test_main_e2e.py:</li> <li>test_create_project_initializes_contexts</li> <li>test_wire_viewmodels_after_project</li> </ul> <p>Files changed: - src/main.py - src/tests/e2e/test_main_e2e.py</p>"},{"location":"backlog/tasks/qc-026.03%20-%20View-Source-List/","title":"View Source List","text":""},{"location":"backlog/tasks/qc-026.03%20-%20View-Source-List/#description","title":"Description","text":"<p>As a Researcher, I want to see all sources in my project so that I can choose what to work on.</p>"},{"location":"backlog/tasks/qc-026.03%20-%20View-Source-List/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see a list of all imported sources</li> <li>[ ] #2 Each source shows its name, type, and status</li> <li>[ ] #3 I can sort and filter the source list</li> <li>[ ] #4 I can double-click a source to open it for coding</li> </ul>"},{"location":"backlog/tasks/qc-026.04%20-%20Switch-Between-Screens/","title":"Switch Between Screens","text":""},{"location":"backlog/tasks/qc-026.04%20-%20Switch-Between-Screens/#description","title":"Description","text":"<p>As a Researcher, I want to navigate between different views (coding, sources, analysis) so that I can access different functionality.</p>"},{"location":"backlog/tasks/qc-026.04%20-%20Switch-Between-Screens/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can switch to the Coding screen</li> <li>[ ] #2 I can switch to the Sources screen</li> <li>[ ] #3 I can switch to the Analysis screen</li> <li>[ ] #4 My current context is preserved when switching</li> <li>[ ] #5 Keyboard shortcuts are available for quick navigation</li> </ul>"},{"location":"backlog/tasks/qc-026.05%20-%20Get-Project-Context/","title":"Get Project Context","text":""},{"location":"backlog/tasks/qc-026.05%20-%20Get-Project-Context/#description","title":"Description","text":"<p>As an AI Agent, I want to query the current project context so that I can understand what the researcher is working on.</p>"},{"location":"backlog/tasks/qc-026.05%20-%20Get-Project-Context/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can get the active project name and path</li> <li>[ ] #2 Agent can get the list of sources in the project</li> <li>[ ] #3 Agent can get the list of codes in the project</li> <li>[ ] #4 Agent can get the currently open source (if any)</li> </ul>"},{"location":"backlog/tasks/qc-026.06%20-%20Navigate-to-Source/","title":"Navigate to Source","text":""},{"location":"backlog/tasks/qc-026.06%20-%20Navigate-to-Source/#description","title":"Description","text":"<p>As an AI Agent, I want to navigate to a specific source or segment so that I can direct the researcher's attention.</p>"},{"location":"backlog/tasks/qc-026.06%20-%20Navigate-to-Source/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can open a specific source by ID</li> <li>[ ] #2 Agent can scroll to a specific position in a source</li> <li>[ ] #3 Agent can highlight a specific segment</li> <li>[ ] #4 Navigation is reflected in the UI immediately</li> </ul>"},{"location":"backlog/tasks/qc-027%20-%20Manage-Sources/","title":"Manage Sources","text":""},{"location":"backlog/tasks/qc-027%20-%20Manage-Sources/#description","title":"Description","text":"<p>Enable researchers and agents to import, organize, and manage research data files (documents, PDFs, images, audio, video).</p>"},{"location":"backlog/tasks/qc-027%20-%20Manage-Sources/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can import text documents</li> <li>[ ] #2 Researcher can import PDF files</li> <li>[ ] #3 Researcher can import image files</li> <li>[ ] #4 Researcher can import audio/video files</li> <li>[ ] #5 Researcher can organize sources into folders</li> <li>[ ] #6 Researcher can view and edit source metadata</li> <li>[ ] #7 Researcher can delete sources</li> <li>[ ] #8 Agent can list all sources</li> <li>[ ] #9 Agent can read source content</li> <li>[ ] #10 Agent can extract metadata from sources</li> <li>[ ] #11 Agent can add a text source to the project</li> </ul>"},{"location":"backlog/tasks/qc-027.01%20-%20Import-Text-Document/","title":"Import Text Document","text":""},{"location":"backlog/tasks/qc-027.01%20-%20Import-Text-Document/#description","title":"Description","text":"<p>As a Researcher, I want to import text documents so that I can analyze textual data.</p>"},{"location":"backlog/tasks/qc-027.01%20-%20Import-Text-Document/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select .txt, .docx, .rtf files from file system</li> <li>[ ] #2 Document text is extracted and stored</li> <li>[ ] #3 I see the imported document in my source list</li> <li>[ ] #4 Original formatting is preserved where possible</li> </ul>"},{"location":"backlog/tasks/qc-027.02%20-%20Import-PDF-Document/","title":"Import PDF Document","text":""},{"location":"backlog/tasks/qc-027.02%20-%20Import-PDF-Document/#description","title":"Description","text":"<p>As a Researcher, I want to import PDF documents so that I can analyze published materials.</p>"},{"location":"backlog/tasks/qc-027.02%20-%20Import-PDF-Document/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select PDF files from file system</li> <li>[ ] #2 Text is extracted from PDF pages</li> <li>[ ] #3 I can choose to import as text or as image</li> <li>[ ] #4 Multi-page PDFs are handled correctly</li> </ul>"},{"location":"backlog/tasks/qc-027.03%20-%20Import-Image-Files/","title":"Import Image Files","text":""},{"location":"backlog/tasks/qc-027.03%20-%20Import-Image-Files/#description","title":"Description","text":"<p>As a Researcher, I want to import images so that I can code visual data.</p>"},{"location":"backlog/tasks/qc-027.03%20-%20Import-Image-Files/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select image files (PNG, JPG, etc.)</li> <li>[ ] #2 Images are displayed in the viewer</li> <li>[ ] #3 I can import multiple images at once</li> <li>[ ] #4 Image metadata (dimensions, date) is captured</li> </ul>"},{"location":"backlog/tasks/qc-027.04%20-%20Import-Audio-Video-Files/","title":"Import Audio Video Files","text":""},{"location":"backlog/tasks/qc-027.04%20-%20Import-Audio-Video-Files/#description","title":"Description","text":"<p>As a Researcher, I want to import audio and video files so that I can analyze multimedia data.</p>"},{"location":"backlog/tasks/qc-027.04%20-%20Import-Audio-Video-Files/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select audio files (MP3, WAV, etc.)</li> <li>[ ] #2 I can select video files (MP4, MOV, etc.)</li> <li>[ ] #3 Media duration is displayed</li> <li>[ ] #4 Playback controls are available</li> </ul>"},{"location":"backlog/tasks/qc-027.05%20-%20Organize-Sources/","title":"Organize Sources","text":""},{"location":"backlog/tasks/qc-027.05%20-%20Organize-Sources/#description","title":"Description","text":"<p>As a Researcher, I want to organize sources into folders so that I can manage large projects.</p>"},{"location":"backlog/tasks/qc-027.05%20-%20Organize-Sources/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can create folders for sources</li> <li>[ ] #2 I can move sources between folders</li> <li>[ ] #3 I can rename folders</li> <li>[ ] #4 Folder structure is reflected in the source list</li> </ul>"},{"location":"backlog/tasks/qc-027.06%20-%20View-Source-Metadata/","title":"View Source Metadata","text":""},{"location":"backlog/tasks/qc-027.06%20-%20View-Source-Metadata/#description","title":"Description","text":"<p>As a Researcher, I want to view and edit source metadata so that I can track important information.</p>"},{"location":"backlog/tasks/qc-027.06%20-%20View-Source-Metadata/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see file name, type, size, and date</li> <li>[ ] #2 I can add a memo/notes to a source</li> <li>[ ] #3 I can see coding statistics for the source</li> <li>[ ] #4 I can edit source properties</li> </ul>"},{"location":"backlog/tasks/qc-027.07%20-%20Delete-Source/","title":"Delete Source","text":""},{"location":"backlog/tasks/qc-027.07%20-%20Delete-Source/#description","title":"Description","text":"<p>As a Researcher, I want to delete sources so that I can remove unwanted data.</p>"},{"location":"backlog/tasks/qc-027.07%20-%20Delete-Source/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a source to delete</li> <li>[ ] #2 I am warned about losing coded segments</li> <li>[ ] #3 Deletion removes source and its coded segments</li> <li>[ ] #4 I can undo deletion immediately after</li> </ul>"},{"location":"backlog/tasks/qc-027.08%20-%20List-Sources/","title":"List Sources","text":""},{"location":"backlog/tasks/qc-027.08%20-%20List-Sources/#description","title":"Description","text":"<p>As an AI Agent, I want to list all sources so that I can understand available data.</p>"},{"location":"backlog/tasks/qc-027.08%20-%20List-Sources/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can get list of all sources with IDs</li> <li>[ ] #2 Agent can filter by source type</li> <li>[ ] #3 Agent can see source metadata</li> <li>[ ] #4 Agent can see coding status per source</li> </ul>"},{"location":"backlog/tasks/qc-027.09%20-%20Read-Source-Content/","title":"Read Source Content","text":""},{"location":"backlog/tasks/qc-027.09%20-%20Read-Source-Content/#description","title":"Description","text":"<p>As an AI Agent, I want to read source content so that I can analyze the data.</p>"},{"location":"backlog/tasks/qc-027.09%20-%20Read-Source-Content/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can get text content of a source</li> <li>[ ] #2 Agent can get content by position range</li> <li>[ ] #3 Agent receives content with position markers</li> <li>[ ] #4 Large sources are paginated</li> </ul>"},{"location":"backlog/tasks/qc-027.10%20-%20Extract-Source-Metadata/","title":"Extract Source Metadata","text":""},{"location":"backlog/tasks/qc-027.10%20-%20Extract-Source-Metadata/#description","title":"Description","text":"<p>As an AI Agent, I want to extract metadata from sources so that I can enrich data automatically.</p>"},{"location":"backlog/tasks/qc-027.10%20-%20Extract-Source-Metadata/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can detect document language</li> <li>[ ] #2 Agent can extract key topics</li> <li>[ ] #3 Agent can suggest source organization</li> <li>[ ] #4 Extraction results require researcher approval</li> </ul>"},{"location":"backlog/tasks/qc-027.11%20-%20Import-Folder-Bulk-Import/","title":"Import Folder (Bulk Import)","text":""},{"location":"backlog/tasks/qc-027.11%20-%20Import-Folder-Bulk-Import/#description","title":"Description","text":"<p>Recursively scan a folder and import all supported files into the database in one operation. Supports images (PNG, JPG, GIF, etc.), videos (MP4, AVI, MOV), audio (MP3, WAV), documents (PDF, DOCX), markdown, and other text files. Eliminates the need to import files one by one.</p>"},{"location":"backlog/tasks/qc-027.11%20-%20Import-Folder-Bulk-Import/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 User can select a folder to import via file dialog</li> <li>[ ] #2 System recursively scans all subfolders</li> <li>[ ] #3 Detects and categorizes files by type (image, video, audio, document, text)</li> <li>[ ] #4 Shows preview of files to be imported with counts by type</li> <li>[ ] #5 User can filter/exclude file types or patterns before import</li> <li>[ ] #6 Progress indicator shows import status</li> <li>[ ] #7 Handles duplicates (skip, replace, or rename)</li> <li>[ ] #8 Creates folder structure as source groups/categories</li> <li>[ ] #9 Reports summary of imported files and any errors</li> <li>[ ] #10 MCP tool available for AI agents to trigger bulk import</li> </ul>"},{"location":"backlog/tasks/qc-028%20-%20Manage-Codes/","title":"Manage Codes","text":""},{"location":"backlog/tasks/qc-028%20-%20Manage-Codes/#description","title":"Description","text":"<p>Enable researchers and agents to create, organize, and manage the coding scheme (codes and categories).</p>"},{"location":"backlog/tasks/qc-028%20-%20Manage-Codes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] #1 Researcher can create new codes with name and color</li> <li>[x] #2 Researcher can organize codes into categories</li> <li>[x] #3 Researcher can rename and recolor codes</li> <li>[ ] #4 Researcher can add memos to codes</li> <li>[x] #5 Researcher can merge duplicate codes</li> <li>[x] #6 Researcher can delete codes</li> <li>[ ] #7 Agent can list all codes</li> <li>[x] #8 Agent can suggest new codes based on content</li> <li>[x] #9 Agent can detect potential duplicate codes</li> <li>[ ] #10 Agent can create a new code with name and color</li> </ul>"},{"location":"backlog/tasks/qc-028%20-%20Manage-Codes/#implementation-notes","title":"Implementation Notes","text":"<p>Added CreateCategoryDialog and DeleteCodeDialog with full black-box E2E tests (16 new tests)</p>"},{"location":"backlog/tasks/qc-028.01%20-%20Create-New-Code/","title":"Create New Code","text":""},{"location":"backlog/tasks/qc-028.01%20-%20Create-New-Code/#description","title":"Description","text":"<p>As a Researcher, I want to create new codes so that I can build my coding scheme.</p>"},{"location":"backlog/tasks/qc-028.01%20-%20Create-New-Code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can enter a code name</li> <li>[ ] #2 I can select a color for the code</li> <li>[ ] #3 I can add a description/memo</li> <li>[ ] #4 The new code appears in my code list</li> <li>[ ] #5 Duplicate names are prevented</li> </ul>"},{"location":"backlog/tasks/qc-028.02%20-%20Create-Code-Category/","title":"Create Code Category","text":""},{"location":"backlog/tasks/qc-028.02%20-%20Create-Code-Category/#description","title":"Description","text":"<p>As a Researcher, I want to create categories so that I can organize codes hierarchically.</p>"},{"location":"backlog/tasks/qc-028.02%20-%20Create-Code-Category/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can create a new category</li> <li>[ ] #2 I can nest categories within categories</li> <li>[ ] #3 I can assign codes to categories</li> <li>[ ] #4 Category hierarchy is visible in code tree</li> </ul>"},{"location":"backlog/tasks/qc-028.03%20-%20Edit-Code-Properties/","title":"Edit Code Properties","text":""},{"location":"backlog/tasks/qc-028.03%20-%20Edit-Code-Properties/#description","title":"Description","text":"<p>As a Researcher, I want to edit code properties so that I can refine my coding scheme.</p>"},{"location":"backlog/tasks/qc-028.03%20-%20Edit-Code-Properties/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can rename a code</li> <li>[ ] #2 I can change a code's color</li> <li>[ ] #3 I can update the code memo</li> <li>[ ] #4 I can move a code to a different category</li> </ul>"},{"location":"backlog/tasks/qc-028.04%20-%20Merge-Codes/","title":"Merge Codes","text":""},{"location":"backlog/tasks/qc-028.04%20-%20Merge-Codes/#description","title":"Description","text":"<p>As a Researcher, I want to merge codes so that I can consolidate my coding scheme.</p>"},{"location":"backlog/tasks/qc-028.04%20-%20Merge-Codes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select two codes to merge</li> <li>[ ] #2 I choose which code name to keep</li> <li>[ ] #3 All segments are transferred to the merged code</li> <li>[ ] #4 The source code is deleted after merge</li> </ul>"},{"location":"backlog/tasks/qc-028.05%20-%20Delete-Code/","title":"Delete Code","text":""},{"location":"backlog/tasks/qc-028.05%20-%20Delete-Code/#description","title":"Description","text":"<p>As a Researcher, I want to delete codes so that I can clean up my coding scheme.</p>"},{"location":"backlog/tasks/qc-028.05%20-%20Delete-Code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a code to delete</li> <li>[ ] #2 I am warned about losing coded segments</li> <li>[ ] #3 I can choose to keep or delete segments</li> <li>[ ] #4 Deletion can be undone immediately</li> </ul>"},{"location":"backlog/tasks/qc-028.06%20-%20List-All-Codes/","title":"List All Codes","text":""},{"location":"backlog/tasks/qc-028.06%20-%20List-All-Codes/#description","title":"Description","text":"<p>As an AI Agent, I want to list all codes so that I can understand the coding scheme.</p>"},{"location":"backlog/tasks/qc-028.06%20-%20List-All-Codes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can get list of all codes with IDs</li> <li>[ ] #2 Agent can see code hierarchy (categories)</li> <li>[ ] #3 Agent can see code usage statistics</li> <li>[ ] #4 Agent can see code descriptions/memos</li> </ul>"},{"location":"backlog/tasks/qc-028.07%20-%20Suggest-New-Code/","title":"Suggest New Code","text":""},{"location":"backlog/tasks/qc-028.07%20-%20Suggest-New-Code/#description","title":"Description","text":"<p>As an AI Agent, I want to suggest new codes so that I can help build the coding scheme.</p>"},{"location":"backlog/tasks/qc-028.07%20-%20Suggest-New-Code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can analyze uncoded content</li> <li>[ ] #2 Agent can propose new code with name and description</li> <li>[ ] #3 Suggestion includes rationale</li> <li>[ ] #4 Researcher must approve before creation</li> </ul>"},{"location":"backlog/tasks/qc-028.08%20-%20Detect-Duplicate-Codes/","title":"Detect Duplicate Codes","text":""},{"location":"backlog/tasks/qc-028.08%20-%20Detect-Duplicate-Codes/#description","title":"Description","text":"<p>As an AI Agent, I want to detect duplicate codes so that I can help consolidate the scheme.</p>"},{"location":"backlog/tasks/qc-028.08%20-%20Detect-Duplicate-Codes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can identify semantically similar codes</li> <li>[ ] #2 Agent can suggest merge candidates</li> <li>[ ] #3 Detection considers code names and usage</li> <li>[ ] #4 Researcher decides on merge actions</li> </ul>"},{"location":"backlog/tasks/qc-029%20-%20Apply-Codes-to-Text/","title":"Apply Codes to Text","text":""},{"location":"backlog/tasks/qc-029%20-%20Apply-Codes-to-Text/#description","title":"Description","text":"<p>Enable researchers and agents to apply semantic codes to selected text segments in documents.</p>"},{"location":"backlog/tasks/qc-029%20-%20Apply-Codes-to-Text/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] #1 Researcher can select text and apply a code</li> <li>[x] #2 Researcher can apply multiple codes to same text</li> <li>[x] #3 Researcher can see coded segments highlighted</li> <li>[x] #4 Researcher can view all segments for a code</li> <li>[x] #5 Researcher can remove coding from a segment</li> <li>[x] #6 Researcher can add memos to segments</li> <li>[ ] #7 Agent can apply code to text range</li> <li>[ ] #8 Agent can suggest codes for uncoded text</li> <li>[ ] #9 Agent can list coded segments</li> <li>[ ] #10 Agent can remove coding from a segment</li> </ul>"},{"location":"backlog/tasks/qc-029.01%20-%20Select-Text-and-Apply-Code/","title":"Select Text and Apply Code","text":""},{"location":"backlog/tasks/qc-029.01%20-%20Select-Text-and-Apply-Code/#description","title":"Description","text":"<p>As a Researcher, I want to select text and apply a code so that I can mark meaningful patterns.</p>"},{"location":"backlog/tasks/qc-029.01%20-%20Select-Text-and-Apply-Code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select any portion of text</li> <li>[ ] #2 I can choose from available codes</li> <li>[ ] #3 The coded segment is highlighted</li> <li>[ ] #4 I receive confirmation of the action</li> <li>[ ] #5 Keyboard shortcuts are available</li> </ul>"},{"location":"backlog/tasks/qc-029.02%20-%20Apply-Multiple-Codes/","title":"Apply Multiple Codes","text":""},{"location":"backlog/tasks/qc-029.02%20-%20Apply-Multiple-Codes/#description","title":"Description","text":"<p>As a Researcher, I want to apply multiple codes to the same text so that I can capture overlapping themes.</p>"},{"location":"backlog/tasks/qc-029.02%20-%20Apply-Multiple-Codes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can apply additional codes to existing segment</li> <li>[ ] #2 Multiple codes are visually distinguished</li> <li>[ ] #3 I can see all codes applied to a segment</li> <li>[ ] #4 I can remove individual codes from multi-coded segment</li> </ul>"},{"location":"backlog/tasks/qc-029.03%20-%20View-Coded-Segments/","title":"View Coded Segments","text":""},{"location":"backlog/tasks/qc-029.03%20-%20View-Coded-Segments/#description","title":"Description","text":"<p>As a Researcher, I want to see coded segments highlighted so that I can understand coding coverage.</p>"},{"location":"backlog/tasks/qc-029.03%20-%20View-Coded-Segments/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Coded text is highlighted with code color</li> <li>[ ] #2 I can toggle highlight visibility</li> <li>[ ] #3 I can filter highlights by code</li> <li>[ ] #4 Overlapping codes are visually clear</li> </ul>"},{"location":"backlog/tasks/qc-029.04%20-%20View-Segments-for-Code/","title":"View Segments for Code","text":""},{"location":"backlog/tasks/qc-029.04%20-%20View-Segments-for-Code/#description","title":"Description","text":"<p>As a Researcher, I want to view all segments for a code so that I can review coded content.</p>"},{"location":"backlog/tasks/qc-029.04%20-%20View-Segments-for-Code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a code and see all its segments</li> <li>[ ] #2 Segments show source context</li> <li>[ ] #3 I can click to navigate to segment in source</li> <li>[ ] #4 I can sort and filter segments</li> </ul>"},{"location":"backlog/tasks/qc-029.05%20-%20Remove-Coding/","title":"Remove Coding","text":""},{"location":"backlog/tasks/qc-029.05%20-%20Remove-Coding/#description","title":"Description","text":"<p>As a Researcher, I want to remove coding from a segment so that I can correct mistakes.</p>"},{"location":"backlog/tasks/qc-029.05%20-%20Remove-Coding/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a coded segment</li> <li>[ ] #2 I can remove the coding</li> <li>[ ] #3 The highlight is removed</li> <li>[ ] #4 I can undo the removal</li> </ul>"},{"location":"backlog/tasks/qc-029.06%20-%20Add-Segment-Memo/","title":"Add Segment Memo","text":""},{"location":"backlog/tasks/qc-029.06%20-%20Add-Segment-Memo/#description","title":"Description","text":"<p>As a Researcher, I want to add memos to segments so that I can capture analytical notes.</p>"},{"location":"backlog/tasks/qc-029.06%20-%20Add-Segment-Memo/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can add a memo to any coded segment</li> <li>[ ] #2 Memo is visible when viewing segment</li> <li>[ ] #3 I can edit and delete memos</li> <li>[ ] #4 Memos are included in exports</li> </ul>"},{"location":"backlog/tasks/qc-029.07%20-%20Apply-Code-to-Text-Range/","title":"Apply Code to Text Range","text":""},{"location":"backlog/tasks/qc-029.07%20-%20Apply-Code-to-Text-Range/#description","title":"Description","text":"<p>As an AI Agent, I want to apply codes to text ranges so that I can assist with coding.</p>"},{"location":"backlog/tasks/qc-029.07%20-%20Apply-Code-to-Text-Range/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can specify source, start, end, and code</li> <li>[ ] #2 Action requires researcher approval</li> <li>[ ] #3 Agent can provide rationale for suggestion</li> <li>[ ] #4 Researcher sees pending suggestions</li> </ul>"},{"location":"backlog/tasks/qc-029.08%20-%20Suggest-Codes-for-Text/","title":"Suggest Codes for Text","text":""},{"location":"backlog/tasks/qc-029.08%20-%20Suggest-Codes-for-Text/#description","title":"Description","text":"<p>As an AI Agent, I want to suggest codes for uncoded text so that I can help complete coding.</p>"},{"location":"backlog/tasks/qc-029.08%20-%20Suggest-Codes-for-Text/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can analyze uncoded text</li> <li>[ ] #2 Agent can suggest appropriate codes</li> <li>[ ] #3 Suggestions include confidence score</li> <li>[ ] #4 Researcher can accept, reject, or modify</li> </ul>"},{"location":"backlog/tasks/qc-029.09%20-%20List-Coded-Segments/","title":"List Coded Segments","text":""},{"location":"backlog/tasks/qc-029.09%20-%20List-Coded-Segments/#description","title":"Description","text":"<p>As an AI Agent, I want to list coded segments so that I can understand coding patterns.</p>"},{"location":"backlog/tasks/qc-029.09%20-%20List-Coded-Segments/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can get all segments for a code</li> <li>[ ] #2 Agent can get all segments in a source</li> <li>[ ] #3 Agent can filter by coder (human vs agent)</li> <li>[ ] #4 Results include position and text</li> </ul>"},{"location":"backlog/tasks/qc-030%20-%20Apply-Codes-to-Images/","title":"Apply Codes to Images","text":""},{"location":"backlog/tasks/qc-030%20-%20Apply-Codes-to-Images/#description","title":"Description","text":"<p>Enable researchers and agents to apply semantic codes to regions within images.</p>"},{"location":"backlog/tasks/qc-030%20-%20Apply-Codes-to-Images/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can draw regions on images</li> <li>[ ] #2 Researcher can apply codes to drawn regions</li> <li>[ ] #3 Researcher can see coded regions as overlays</li> <li>[ ] #4 Researcher can remove coding from regions</li> <li>[ ] #5 Agent can detect regions in images</li> <li>[ ] #6 Agent can apply codes to detected regions</li> <li>[ ] #7 Agent can suggest codes for image content</li> </ul>"},{"location":"backlog/tasks/qc-030.01%20-%20Draw-Region-on-Image/","title":"Draw Region on Image","text":""},{"location":"backlog/tasks/qc-030.01%20-%20Draw-Region-on-Image/#description","title":"Description","text":"<p>As a Researcher, I want to draw regions on images so that I can mark areas for coding.</p>"},{"location":"backlog/tasks/qc-030.01%20-%20Draw-Region-on-Image/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can draw rectangular regions</li> <li>[ ] #2 I can draw freeform regions</li> <li>[ ] #3 I can resize and move regions</li> <li>[ ] #4 Region boundaries are clearly visible</li> </ul>"},{"location":"backlog/tasks/qc-030.02%20-%20Apply-Code-to-Image-Region/","title":"Apply Code to Image Region","text":""},{"location":"backlog/tasks/qc-030.02%20-%20Apply-Code-to-Image-Region/#description","title":"Description","text":"<p>As a Researcher, I want to apply codes to image regions so that I can analyze visual data.</p>"},{"location":"backlog/tasks/qc-030.02%20-%20Apply-Code-to-Image-Region/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a drawn region</li> <li>[ ] #2 I can choose a code to apply</li> <li>[ ] #3 The region shows the code color</li> <li>[ ] #4 I can add a memo to the region</li> </ul>"},{"location":"backlog/tasks/qc-030.03%20-%20View-Coded-Image-Regions/","title":"View Coded Image Regions","text":""},{"location":"backlog/tasks/qc-030.03%20-%20View-Coded-Image-Regions/#description","title":"Description","text":"<p>As a Researcher, I want to see coded regions as overlays so that I can understand coding coverage.</p>"},{"location":"backlog/tasks/qc-030.03%20-%20View-Coded-Image-Regions/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Coded regions are shown with code colors</li> <li>[ ] #2 I can toggle overlay visibility</li> <li>[ ] #3 I can filter by code</li> <li>[ ] #4 Clicking a region shows its details</li> </ul>"},{"location":"backlog/tasks/qc-030.04%20-%20Remove-Image-Region-Coding/","title":"Remove Image Region Coding","text":""},{"location":"backlog/tasks/qc-030.04%20-%20Remove-Image-Region-Coding/#description","title":"Description","text":"<p>As a Researcher, I want to remove coding from image regions so that I can correct mistakes.</p>"},{"location":"backlog/tasks/qc-030.04%20-%20Remove-Image-Region-Coding/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a coded region</li> <li>[ ] #2 I can remove the coding</li> <li>[ ] #3 I can delete the region entirely</li> <li>[ ] #4 Actions can be undone</li> </ul>"},{"location":"backlog/tasks/qc-030.05%20-%20Detect-Image-Regions/","title":"Detect Image Regions","text":""},{"location":"backlog/tasks/qc-030.05%20-%20Detect-Image-Regions/#description","title":"Description","text":"<p>As an AI Agent, I want to detect regions in images so that I can assist with visual coding.</p>"},{"location":"backlog/tasks/qc-030.05%20-%20Detect-Image-Regions/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can detect objects in image</li> <li>[ ] #2 Agent can detect faces</li> <li>[ ] #3 Agent can detect text regions</li> <li>[ ] #4 Detected regions are shown for approval</li> </ul>"},{"location":"backlog/tasks/qc-030.06%20-%20Suggest-Codes-for-Image/","title":"Suggest Codes for Image","text":""},{"location":"backlog/tasks/qc-030.06%20-%20Suggest-Codes-for-Image/#description","title":"Description","text":"<p>As an AI Agent, I want to suggest codes for image content so that I can help with visual analysis.</p>"},{"location":"backlog/tasks/qc-030.06%20-%20Suggest-Codes-for-Image/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can analyze image content</li> <li>[ ] #2 Agent can suggest relevant codes</li> <li>[ ] #3 Suggestions include visual explanation</li> <li>[ ] #4 Researcher approves suggestions</li> </ul>"},{"location":"backlog/tasks/qc-031%20-%20Apply-Codes-to-Audio-Video/","title":"Apply Codes to Audio Video","text":""},{"location":"backlog/tasks/qc-031%20-%20Apply-Codes-to-Audio-Video/#description","title":"Description","text":"<p>Enable researchers and agents to apply semantic codes to time ranges in audio and video files.</p>"},{"location":"backlog/tasks/qc-031%20-%20Apply-Codes-to-Audio-Video/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can play media with transcript</li> <li>[ ] #2 Researcher can mark time ranges</li> <li>[ ] #3 Researcher can apply codes to time ranges</li> <li>[ ] #4 Researcher can see coded ranges on timeline</li> <li>[ ] #5 Agent can transcribe media</li> <li>[ ] #6 Agent can detect speakers</li> <li>[ ] #7 Agent can apply codes to time ranges</li> <li>[ ] #8 Agent can suggest codes from transcript</li> </ul>"},{"location":"backlog/tasks/qc-031.01%20-%20Play-Media-with-Transcript/","title":"Play Media with Transcript","text":""},{"location":"backlog/tasks/qc-031.01%20-%20Play-Media-with-Transcript/#description","title":"Description","text":"<p>As a Researcher, I want to play media with transcript so that I can follow along while listening.</p>"},{"location":"backlog/tasks/qc-031.01%20-%20Play-Media-with-Transcript/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can play audio/video files</li> <li>[ ] #2 Transcript is displayed alongside</li> <li>[ ] #3 Current position is highlighted in transcript</li> <li>[ ] #4 I can click transcript to jump to position</li> </ul>"},{"location":"backlog/tasks/qc-031.02%20-%20Mark-Time-Range/","title":"Mark Time Range","text":""},{"location":"backlog/tasks/qc-031.02%20-%20Mark-Time-Range/#description","title":"Description","text":"<p>As a Researcher, I want to mark time ranges so that I can code specific segments.</p>"},{"location":"backlog/tasks/qc-031.02%20-%20Mark-Time-Range/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can set start and end times</li> <li>[ ] #2 I can adjust range with drag handles</li> <li>[ ] #3 Range is shown on timeline</li> <li>[ ] #4 I can preview the selected range</li> </ul>"},{"location":"backlog/tasks/qc-031.03%20-%20Apply-Code-to-Time-Range/","title":"Apply Code to Time Range","text":""},{"location":"backlog/tasks/qc-031.03%20-%20Apply-Code-to-Time-Range/#description","title":"Description","text":"<p>As a Researcher, I want to apply codes to time ranges so that I can analyze audio/video content.</p>"},{"location":"backlog/tasks/qc-031.03%20-%20Apply-Code-to-Time-Range/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a marked range</li> <li>[ ] #2 I can choose a code to apply</li> <li>[ ] #3 The range shows on timeline with code color</li> <li>[ ] #4 I can add a memo to the range</li> </ul>"},{"location":"backlog/tasks/qc-031.04%20-%20View-Coded-Timeline/","title":"View Coded Timeline","text":""},{"location":"backlog/tasks/qc-031.04%20-%20View-Coded-Timeline/#description","title":"Description","text":"<p>As a Researcher, I want to see coded ranges on timeline so that I can understand coding coverage.</p>"},{"location":"backlog/tasks/qc-031.04%20-%20View-Coded-Timeline/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Coded ranges are shown with code colors</li> <li>[ ] #2 I can click to play a range</li> <li>[ ] #3 I can filter by code</li> <li>[ ] #4 Overlapping ranges are visible</li> </ul>"},{"location":"backlog/tasks/qc-031.05%20-%20Transcribe-Media/","title":"Transcribe Media","text":""},{"location":"backlog/tasks/qc-031.05%20-%20Transcribe-Media/#description","title":"Description","text":"<p>As an AI Agent, I want to transcribe media so that text analysis is possible.</p>"},{"location":"backlog/tasks/qc-031.05%20-%20Transcribe-Media/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can transcribe audio/video</li> <li>[ ] #2 Transcription includes timestamps</li> <li>[ ] #3 Researcher can edit transcription</li> <li>[ ] #4 Multiple language support</li> </ul>"},{"location":"backlog/tasks/qc-031.06%20-%20Detect-Speakers/","title":"Detect Speakers","text":""},{"location":"backlog/tasks/qc-031.06%20-%20Detect-Speakers/#description","title":"Description","text":"<p>As an AI Agent, I want to detect speakers so that conversation analysis is possible.</p>"},{"location":"backlog/tasks/qc-031.06%20-%20Detect-Speakers/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can identify different speakers</li> <li>[ ] #2 Speakers are labeled in transcript</li> <li>[ ] #3 Researcher can rename speakers</li> <li>[ ] #4 Speaker changes are marked on timeline</li> </ul>"},{"location":"backlog/tasks/qc-031.07%20-%20Suggest-Codes-from-Transcript/","title":"Suggest Codes from Transcript","text":""},{"location":"backlog/tasks/qc-031.07%20-%20Suggest-Codes-from-Transcript/#description","title":"Description","text":"<p>As an AI Agent, I want to suggest codes from transcript so that I can help with media coding.</p>"},{"location":"backlog/tasks/qc-031.07%20-%20Suggest-Codes-from-Transcript/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can analyze transcript content</li> <li>[ ] #2 Agent can suggest codes for segments</li> <li>[ ] #3 Suggestions link to time ranges</li> <li>[ ] #4 Researcher approves suggestions</li> </ul>"},{"location":"backlog/tasks/qc-032%20-%20Auto-Code/","title":"Auto-Code","text":""},{"location":"backlog/tasks/qc-032%20-%20Auto-Code/#description","title":"Description","text":"<p>Enable researchers and agents to automatically apply codes based on patterns, keywords, or similarity.</p>"},{"location":"backlog/tasks/qc-032%20-%20Auto-Code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] #1 Researcher can search for text patterns</li> <li>[x] #2 Researcher can preview matches before coding</li> <li>[x] #3 Researcher can apply code to all matches</li> <li>[x] #4 Researcher can undo batch coding</li> <li>[x] #5 Researcher can auto-code by speaker</li> <li>[x] #6 Agent can find similar passages</li> <li>[x] #7 Agent can batch apply codes to similar content</li> <li>[x] #8 Agent can report batch results</li> </ul>"},{"location":"backlog/tasks/qc-032.01%20-%20Search-Text-Pattern/","title":"Search Text Pattern","text":""},{"location":"backlog/tasks/qc-032.01%20-%20Search-Text-Pattern/#description","title":"Description","text":"<p>As a Researcher, I want to search for text patterns so that I can find all occurrences.</p>"},{"location":"backlog/tasks/qc-032.01%20-%20Search-Text-Pattern/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can enter a search pattern</li> <li>[ ] #2 I can use regex for complex patterns</li> <li>[ ] #3 All matches are highlighted</li> <li>[ ] #4 Match count is displayed</li> </ul>"},{"location":"backlog/tasks/qc-032.02%20-%20Preview-Matches/","title":"Preview Matches","text":""},{"location":"backlog/tasks/qc-032.02%20-%20Preview-Matches/#description","title":"Description","text":"<p>As a Researcher, I want to preview matches before coding so that I can verify selections.</p>"},{"location":"backlog/tasks/qc-032.02%20-%20Preview-Matches/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see list of all matches</li> <li>[ ] #2 Each match shows context</li> <li>[ ] #3 I can select/deselect individual matches</li> <li>[ ] #4 I can navigate to any match</li> </ul>"},{"location":"backlog/tasks/qc-032.03%20-%20Apply-Code-to-All-Matches/","title":"Apply Code to All Matches","text":""},{"location":"backlog/tasks/qc-032.03%20-%20Apply-Code-to-All-Matches/#description","title":"Description","text":"<p>As a Researcher, I want to apply a code to all matches so that I can code efficiently.</p>"},{"location":"backlog/tasks/qc-032.03%20-%20Apply-Code-to-All-Matches/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a code to apply</li> <li>[ ] #2 Code is applied to all selected matches</li> <li>[ ] #3 Progress is shown during batch operation</li> <li>[ ] #4 Summary shows count of segments created</li> </ul>"},{"location":"backlog/tasks/qc-032.04%20-%20Undo-Batch-Coding/","title":"Undo Batch Coding","text":""},{"location":"backlog/tasks/qc-032.04%20-%20Undo-Batch-Coding/#description","title":"Description","text":"<p>As a Researcher, I want to undo batch coding so that I can correct mistakes.</p>"},{"location":"backlog/tasks/qc-032.04%20-%20Undo-Batch-Coding/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can undo an entire batch operation</li> <li>[ ] #2 All segments from batch are removed</li> <li>[ ] #3 Undo is available in history</li> <li>[ ] #4 I can redo if needed</li> </ul>"},{"location":"backlog/tasks/qc-032.05%20-%20Auto-Code-by-Speaker/","title":"Auto-Code by Speaker","text":""},{"location":"backlog/tasks/qc-032.05%20-%20Auto-Code-by-Speaker/#description","title":"Description","text":"<p>As a Researcher, I want to auto-code by speaker so that I can quickly code conversations.</p>"},{"location":"backlog/tasks/qc-032.05%20-%20Auto-Code-by-Speaker/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select a speaker from transcript</li> <li>[ ] #2 I can choose a code to apply</li> <li>[ ] #3 All utterances by speaker are coded</li> <li>[ ] #4 I can preview before applying</li> </ul>"},{"location":"backlog/tasks/qc-032.06%20-%20Find-Similar-Passages/","title":"Find Similar Passages","text":""},{"location":"backlog/tasks/qc-032.06%20-%20Find-Similar-Passages/#description","title":"Description","text":"<p>As an AI Agent, I want to find similar passages so that I can help with consistent coding.</p>"},{"location":"backlog/tasks/qc-032.06%20-%20Find-Similar-Passages/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can take a coded segment as reference</li> <li>[ ] #2 Agent finds semantically similar text</li> <li>[ ] #3 Similarity scores are provided</li> <li>[ ] #4 Results are presented for approval</li> </ul>"},{"location":"backlog/tasks/qc-032.07%20-%20Batch-Apply-to-Similar/","title":"Batch Apply to Similar","text":""},{"location":"backlog/tasks/qc-032.07%20-%20Batch-Apply-to-Similar/#description","title":"Description","text":"<p>As an AI Agent, I want to batch apply codes to similar content so that I can assist with coding.</p>"},{"location":"backlog/tasks/qc-032.07%20-%20Batch-Apply-to-Similar/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can apply code to similar passages</li> <li>[ ] #2 Batch requires researcher approval</li> <li>[ ] #3 Researcher can accept/reject individual items</li> <li>[ ] #4 Batch results are tracked</li> </ul>"},{"location":"backlog/tasks/qc-033%20-%20Search-and-Find/","title":"Search and Find","text":""},{"location":"backlog/tasks/qc-033%20-%20Search-and-Find/#description","title":"Description","text":"<p>Enable researchers and agents to search across project data using text and semantic search.</p>"},{"location":"backlog/tasks/qc-033%20-%20Search-and-Find/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can do full-text search</li> <li>[ ] #2 Researcher can filter by code</li> <li>[ ] #3 Researcher can filter by source</li> <li>[ ] #4 Researcher can jump to results</li> <li>[ ] #5 Researcher can save searches</li> <li>[ ] #6 Agent can do semantic search</li> <li>[ ] #7 Agent can find related segments</li> <li>[ ] #8 Agent can answer questions about data</li> </ul>"},{"location":"backlog/tasks/qc-033.01%20-%20Full-Text-Search/","title":"Full-Text Search","text":""},{"location":"backlog/tasks/qc-033.01%20-%20Full-Text-Search/#description","title":"Description","text":"<p>As a Researcher, I want to search all text so that I can find specific content.</p>"},{"location":"backlog/tasks/qc-033.01%20-%20Full-Text-Search/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can enter search terms</li> <li>[ ] #2 Results show matching text with context</li> <li>[ ] #3 Search is case-insensitive by default</li> <li>[ ] #4 Results are ranked by relevance</li> </ul>"},{"location":"backlog/tasks/qc-033.02%20-%20Filter-by-Code/","title":"Filter by Code","text":""},{"location":"backlog/tasks/qc-033.02%20-%20Filter-by-Code/#description","title":"Description","text":"<p>As a Researcher, I want to filter search by code so that I can narrow results.</p>"},{"location":"backlog/tasks/qc-033.02%20-%20Filter-by-Code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select codes to include</li> <li>[ ] #2 I can select codes to exclude</li> <li>[ ] #3 Filters combine with text search</li> <li>[ ] #4 Filter state is visible</li> </ul>"},{"location":"backlog/tasks/qc-033.03%20-%20Filter-by-Source/","title":"Filter by Source","text":""},{"location":"backlog/tasks/qc-033.03%20-%20Filter-by-Source/#description","title":"Description","text":"<p>As a Researcher, I want to filter by source so that I can focus on specific files.</p>"},{"location":"backlog/tasks/qc-033.03%20-%20Filter-by-Source/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select sources to search</li> <li>[ ] #2 I can select source types</li> <li>[ ] #3 I can search within folders</li> <li>[ ] #4 Filter combines with other filters</li> </ul>"},{"location":"backlog/tasks/qc-033.04%20-%20Navigate-to-Result/","title":"Navigate to Result","text":""},{"location":"backlog/tasks/qc-033.04%20-%20Navigate-to-Result/#description","title":"Description","text":"<p>As a Researcher, I want to jump to search results so that I can view context.</p>"},{"location":"backlog/tasks/qc-033.04%20-%20Navigate-to-Result/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can click a result to open source</li> <li>[ ] #2 The matching text is highlighted</li> <li>[ ] #3 I can navigate between results</li> <li>[ ] #4 Source opens at the right position</li> </ul>"},{"location":"backlog/tasks/qc-033.05%20-%20Save-Search/","title":"Save Search","text":""},{"location":"backlog/tasks/qc-033.05%20-%20Save-Search/#description","title":"Description","text":"<p>As a Researcher, I want to save searches so that I can reuse them later.</p>"},{"location":"backlog/tasks/qc-033.05%20-%20Save-Search/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can save current search with a name</li> <li>[ ] #2 Saved searches appear in a list</li> <li>[ ] #3 I can run saved searches</li> <li>[ ] #4 I can delete saved searches</li> </ul>"},{"location":"backlog/tasks/qc-033.06%20-%20Semantic-Search/","title":"Semantic Search","text":""},{"location":"backlog/tasks/qc-033.06%20-%20Semantic-Search/#description","title":"Description","text":"<p>As an AI Agent, I want to do semantic search so that I can find meaning-based matches.</p>"},{"location":"backlog/tasks/qc-033.06%20-%20Semantic-Search/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can search by meaning not just keywords</li> <li>[ ] #2 Results include similarity scores</li> <li>[ ] #3 Agent can explain why results match</li> <li>[ ] #4 Semantic search uses embeddings</li> </ul>"},{"location":"backlog/tasks/qc-033.07%20-%20Find-Related-Segments/","title":"Find Related Segments","text":""},{"location":"backlog/tasks/qc-033.07%20-%20Find-Related-Segments/#description","title":"Description","text":"<p>As an AI Agent, I want to find related segments so that I can help with analysis.</p>"},{"location":"backlog/tasks/qc-033.07%20-%20Find-Related-Segments/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can take a segment as input</li> <li>[ ] #2 Agent finds thematically related segments</li> <li>[ ] #3 Relationships are explained</li> <li>[ ] #4 Results can be used for coding</li> </ul>"},{"location":"backlog/tasks/qc-033.08%20-%20Answer-Data-Questions/","title":"Answer Data Questions","text":""},{"location":"backlog/tasks/qc-033.08%20-%20Answer-Data-Questions/#description","title":"Description","text":"<p>As an AI Agent, I want to answer questions about data so that I can provide insights.</p>"},{"location":"backlog/tasks/qc-033.08%20-%20Answer-Data-Questions/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can answer what questions (frequency)</li> <li>[ ] #2 Agent can answer where questions (location)</li> <li>[ ] #3 Agent can answer who questions (cases)</li> <li>[ ] #4 Answers include evidence from data</li> </ul>"},{"location":"backlog/tasks/qc-034%20-%20Manage-Cases/","title":"Manage Cases","text":""},{"location":"backlog/tasks/qc-034%20-%20Manage-Cases/#description","title":"Description","text":"<p>Enable researchers and agents to organize data into cases (e.g., participants, sites) with attributes.</p>"},{"location":"backlog/tasks/qc-034%20-%20Manage-Cases/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can create cases</li> <li>[ ] #2 Researcher can link sources to cases</li> <li>[ ] #3 Researcher can add case attributes</li> <li>[ ] #4 Researcher can view all data for a case</li> <li>[ ] #5 Agent can list all cases</li> <li>[ ] #6 Agent can suggest case groupings</li> <li>[ ] #7 Agent can compare across cases</li> </ul>"},{"location":"backlog/tasks/qc-034.01%20-%20Create-Case/","title":"Create Case","text":""},{"location":"backlog/tasks/qc-034.01%20-%20Create-Case/#description","title":"Description","text":"<p>As a Researcher, I want to create cases so that I can organize data by participant/site.</p>"},{"location":"backlog/tasks/qc-034.01%20-%20Create-Case/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can create a new case with name</li> <li>[ ] #2 I can add a description</li> <li>[ ] #3 Case appears in case list</li> <li>[ ] #4 I can edit case properties</li> </ul>"},{"location":"backlog/tasks/qc-034.02%20-%20Link-Source-to-Case/","title":"Link Source to Case","text":""},{"location":"backlog/tasks/qc-034.02%20-%20Link-Source-to-Case/#description","title":"Description","text":"<p>As a Researcher, I want to link sources to cases so that I can associate data.</p>"},{"location":"backlog/tasks/qc-034.02%20-%20Link-Source-to-Case/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can link entire source to a case</li> <li>[ ] #2 I can link specific segments to a case</li> <li>[ ] #3 I can see which sources belong to which cases</li> <li>[ ] #4 I can unlink sources from cases</li> </ul>"},{"location":"backlog/tasks/qc-034.03%20-%20Add-Case-Attributes/","title":"Add Case Attributes","text":""},{"location":"backlog/tasks/qc-034.03%20-%20Add-Case-Attributes/#description","title":"Description","text":"<p>As a Researcher, I want to add attributes to cases so that I can capture demographics.</p>"},{"location":"backlog/tasks/qc-034.03%20-%20Add-Case-Attributes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can define attribute types (text, number, date)</li> <li>[ ] #2 I can assign attribute values to cases</li> <li>[ ] #3 I can filter cases by attributes</li> <li>[ ] #4 Attributes are available in reports</li> </ul>"},{"location":"backlog/tasks/qc-034.04%20-%20View-Case-Data/","title":"View Case Data","text":""},{"location":"backlog/tasks/qc-034.04%20-%20View-Case-Data/#description","title":"Description","text":"<p>As a Researcher, I want to view all data for a case so that I can understand a participant.</p>"},{"location":"backlog/tasks/qc-034.04%20-%20View-Case-Data/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see all sources for a case</li> <li>[ ] #2 I can see all coded segments for a case</li> <li>[ ] #3 I can see case attributes</li> <li>[ ] #4 I can navigate to any linked item</li> </ul>"},{"location":"backlog/tasks/qc-034.05%20-%20List-All-Cases/","title":"List All Cases","text":""},{"location":"backlog/tasks/qc-034.05%20-%20List-All-Cases/#description","title":"Description","text":"<p>As an AI Agent, I want to list all cases so that I can understand data organization.</p>"},{"location":"backlog/tasks/qc-034.05%20-%20List-All-Cases/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can get list of all cases</li> <li>[ ] #2 Agent can see case attributes</li> <li>[ ] #3 Agent can see linked sources per case</li> <li>[ ] #4 Agent can see coding statistics per case</li> </ul>"},{"location":"backlog/tasks/qc-034.06%20-%20Suggest-Case-Groupings/","title":"Suggest Case Groupings","text":""},{"location":"backlog/tasks/qc-034.06%20-%20Suggest-Case-Groupings/#description","title":"Description","text":"<p>As an AI Agent, I want to suggest case groupings so that I can help with organization.</p>"},{"location":"backlog/tasks/qc-034.06%20-%20Suggest-Case-Groupings/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can identify patterns in attributes</li> <li>[ ] #2 Agent can suggest meaningful groups</li> <li>[ ] #3 Suggestions include rationale</li> <li>[ ] #4 Researcher approves groupings</li> </ul>"},{"location":"backlog/tasks/qc-034.07%20-%20Compare-Across-Cases/","title":"Compare Across Cases","text":""},{"location":"backlog/tasks/qc-034.07%20-%20Compare-Across-Cases/#description","title":"Description","text":"<p>As an AI Agent, I want to compare across cases so that I can identify patterns.</p>"},{"location":"backlog/tasks/qc-034.07%20-%20Compare-Across-Cases/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can compare coding between cases</li> <li>[ ] #2 Agent can identify unique themes per case</li> <li>[ ] #3 Agent can find common themes across cases</li> <li>[ ] #4 Comparisons support analysis</li> </ul>"},{"location":"backlog/tasks/qc-035%20-%20Generate-Reports/","title":"Generate Reports","text":""},{"location":"backlog/tasks/qc-035%20-%20Generate-Reports/#description","title":"Description","text":"<p>Enable researchers and agents to generate analysis reports and visualizations from coded data.</p>"},{"location":"backlog/tasks/qc-035%20-%20Generate-Reports/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can generate code frequencies</li> <li>[ ] #2 Researcher can generate co-occurrence matrix</li> <li>[ ] #3 Researcher can export data to spreadsheet</li> <li>[ ] #4 Researcher can visualize code distribution</li> <li>[ ] #5 Agent can summarize findings</li> <li>[ ] #6 Agent can identify themes</li> <li>[ ] #7 Agent can generate insight report</li> </ul>"},{"location":"backlog/tasks/qc-035.01%20-%20Generate-Code-Frequencies/","title":"Generate Code Frequencies","text":""},{"location":"backlog/tasks/qc-035.01%20-%20Generate-Code-Frequencies/#description","title":"Description","text":"<p>As a Researcher, I want to see code frequencies so that I understand prevalence.</p>"},{"location":"backlog/tasks/qc-035.01%20-%20Generate-Code-Frequencies/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see count of segments per code</li> <li>[ ] #2 I can filter by source or case</li> <li>[ ] #3 Results show percentages</li> <li>[ ] #4 I can sort by frequency</li> </ul>"},{"location":"backlog/tasks/qc-035.02%20-%20Generate-Co-occurrence-Matrix/","title":"Generate Co-occurrence Matrix","text":""},{"location":"backlog/tasks/qc-035.02%20-%20Generate-Co-occurrence-Matrix/#description","title":"Description","text":"<p>As a Researcher, I want to see code co-occurrence so that I understand relationships.</p>"},{"location":"backlog/tasks/qc-035.02%20-%20Generate-Co-occurrence-Matrix/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see which codes appear together</li> <li>[ ] #2 Matrix shows frequency of co-occurrence</li> <li>[ ] #3 I can filter by proximity</li> <li>[ ] #4 Results can be exported</li> </ul>"},{"location":"backlog/tasks/qc-035.03%20-%20Export-to-Spreadsheet/","title":"Export to Spreadsheet","text":""},{"location":"backlog/tasks/qc-035.03%20-%20Export-to-Spreadsheet/#description","title":"Description","text":"<p>As a Researcher, I want to export data to spreadsheet so that I can analyze externally.</p>"},{"location":"backlog/tasks/qc-035.03%20-%20Export-to-Spreadsheet/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can export codes and segments</li> <li>[ ] #2 Export includes all metadata</li> <li>[ ] #3 I can choose CSV or Excel format</li> <li>[ ] #4 Export includes position data</li> </ul>"},{"location":"backlog/tasks/qc-035.04%20-%20Visualize-Code-Distribution/","title":"Visualize Code Distribution","text":""},{"location":"backlog/tasks/qc-035.04%20-%20Visualize-Code-Distribution/#description","title":"Description","text":"<p>As a Researcher, I want to visualize distributions so that I can see patterns.</p>"},{"location":"backlog/tasks/qc-035.04%20-%20Visualize-Code-Distribution/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see bar charts of code usage</li> <li>[ ] #2 I can see pie charts of proportions</li> <li>[ ] #3 I can compare across sources/cases</li> <li>[ ] #4 Charts can be exported as images</li> </ul>"},{"location":"backlog/tasks/qc-035.05%20-%20Summarize-Findings/","title":"Summarize Findings","text":""},{"location":"backlog/tasks/qc-035.05%20-%20Summarize-Findings/#description","title":"Description","text":"<p>As an AI Agent, I want to summarize findings so that I can help with reporting.</p>"},{"location":"backlog/tasks/qc-035.05%20-%20Summarize-Findings/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can summarize coding patterns</li> <li>[ ] #2 Summary includes key statistics</li> <li>[ ] #3 Summary cites specific examples</li> <li>[ ] #4 Researcher can edit summary</li> </ul>"},{"location":"backlog/tasks/qc-035.06%20-%20Identify-Themes/","title":"Identify Themes","text":""},{"location":"backlog/tasks/qc-035.06%20-%20Identify-Themes/#description","title":"Description","text":"<p>As an AI Agent, I want to identify themes so that I can help with analysis.</p>"},{"location":"backlog/tasks/qc-035.06%20-%20Identify-Themes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can cluster related codes</li> <li>[ ] #2 Agent can suggest theme names</li> <li>[ ] #3 Themes are supported by examples</li> <li>[ ] #4 Researcher validates themes</li> </ul>"},{"location":"backlog/tasks/qc-035.07%20-%20Generate-Insight-Report/","title":"Generate Insight Report","text":""},{"location":"backlog/tasks/qc-035.07%20-%20Generate-Insight-Report/#description","title":"Description","text":"<p>As an AI Agent, I want to generate insight reports so that I can help with writing.</p>"},{"location":"backlog/tasks/qc-035.07%20-%20Generate-Insight-Report/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can create structured report</li> <li>[ ] #2 Report includes methodology section</li> <li>[ ] #3 Report includes findings section</li> <li>[ ] #4 Citations link to source data</li> </ul>"},{"location":"backlog/tasks/qc-036%20-%20Collaborate/","title":"Collaborate","text":""},{"location":"backlog/tasks/qc-036%20-%20Collaborate/#description","title":"Description","text":"<p>Enable multiple coders to work on the same project with comparison and merging capabilities.</p>"},{"location":"backlog/tasks/qc-036%20-%20Collaborate/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can switch coder identity</li> <li>[ ] #2 Researcher can see who coded what</li> <li>[ ] #3 Researcher can compare coding between coders</li> <li>[ ] #4 Researcher can merge coding from multiple coders</li> <li>[ ] #5 Researcher can calculate inter-rater reliability</li> <li>[ ] #6 Agent can detect coding conflicts</li> <li>[ ] #7 Agent can suggest conflict resolutions</li> </ul>"},{"location":"backlog/tasks/qc-036.01%20-%20Switch-Coder-Identity/","title":"Switch Coder Identity","text":""},{"location":"backlog/tasks/qc-036.01%20-%20Switch-Coder-Identity/#description","title":"Description","text":"<p>As a Researcher, I want to switch coder identity so that multiple people can code.</p>"},{"location":"backlog/tasks/qc-036.01%20-%20Switch-Coder-Identity/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select my coder name</li> <li>[ ] #2 New coding is attributed to me</li> <li>[ ] #3 I can create new coder identities</li> <li>[ ] #4 Current coder is shown in UI</li> </ul>"},{"location":"backlog/tasks/qc-036.02%20-%20View-Coding-by-Coder/","title":"View Coding by Coder","text":""},{"location":"backlog/tasks/qc-036.02%20-%20View-Coding-by-Coder/#description","title":"Description","text":"<p>As a Researcher, I want to see who coded what so that I can track contributions.</p>"},{"location":"backlog/tasks/qc-036.02%20-%20View-Coding-by-Coder/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can filter segments by coder</li> <li>[ ] #2 Coder is shown in segment details</li> <li>[ ] #3 I can see coder statistics</li> <li>[ ] #4 Agent coding is distinguished from human</li> </ul>"},{"location":"backlog/tasks/qc-036.03%20-%20Compare-Coders/","title":"Compare Coders","text":""},{"location":"backlog/tasks/qc-036.03%20-%20Compare-Coders/#description","title":"Description","text":"<p>As a Researcher, I want to compare coding between coders so that I can assess consistency.</p>"},{"location":"backlog/tasks/qc-036.03%20-%20Compare-Coders/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select two coders to compare</li> <li>[ ] #2 I can see agreement and disagreement</li> <li>[ ] #3 Differences are highlighted</li> <li>[ ] #4 I can navigate to disagreements</li> </ul>"},{"location":"backlog/tasks/qc-036.04%20-%20Merge-Coding/","title":"Merge Coding","text":""},{"location":"backlog/tasks/qc-036.04%20-%20Merge-Coding/#description","title":"Description","text":"<p>As a Researcher, I want to merge coding from multiple coders so that I can consolidate work.</p>"},{"location":"backlog/tasks/qc-036.04%20-%20Merge-Coding/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select coders to merge</li> <li>[ ] #2 I can resolve conflicts manually</li> <li>[ ] #3 Merged coding is attributed correctly</li> <li>[ ] #4 Original coding is preserved</li> </ul>"},{"location":"backlog/tasks/qc-036.05%20-%20Calculate-Reliability/","title":"Calculate Reliability","text":""},{"location":"backlog/tasks/qc-036.05%20-%20Calculate-Reliability/#description","title":"Description","text":"<p>As a Researcher, I want to calculate inter-rater reliability so that I can validate coding.</p>"},{"location":"backlog/tasks/qc-036.05%20-%20Calculate-Reliability/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can calculate Cohen's Kappa</li> <li>[ ] #2 I can calculate percentage agreement</li> <li>[ ] #3 Results show by code and overall</li> <li>[ ] #4 I can export reliability stats</li> </ul>"},{"location":"backlog/tasks/qc-036.06%20-%20Detect-Coding-Conflicts/","title":"Detect Coding Conflicts","text":""},{"location":"backlog/tasks/qc-036.06%20-%20Detect-Coding-Conflicts/#description","title":"Description","text":"<p>As an AI Agent, I want to detect conflicts so that I can help with reconciliation.</p>"},{"location":"backlog/tasks/qc-036.06%20-%20Detect-Coding-Conflicts/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent identifies overlapping different codes</li> <li>[ ] #2 Agent identifies missing coding</li> <li>[ ] #3 Conflicts are prioritized by severity</li> <li>[ ] #4 Researcher reviews conflicts</li> </ul>"},{"location":"backlog/tasks/qc-036.07%20-%20Suggest-Conflict-Resolutions/","title":"Suggest Conflict Resolutions","text":""},{"location":"backlog/tasks/qc-036.07%20-%20Suggest-Conflict-Resolutions/#description","title":"Description","text":"<p>As an AI Agent, I want to suggest resolutions so that I can help resolve conflicts.</p>"},{"location":"backlog/tasks/qc-036.07%20-%20Suggest-Conflict-Resolutions/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent analyzes conflicting codes</li> <li>[ ] #2 Agent suggests which code fits better</li> <li>[ ] #3 Suggestion includes reasoning</li> <li>[ ] #4 Researcher makes final decision</li> </ul>"},{"location":"backlog/tasks/qc-037%20-%20Chat-with-Agent/","title":"Chat with Agent","text":""},{"location":"backlog/tasks/qc-037%20-%20Chat-with-Agent/#description","title":"Description","text":"<p>Enable researchers to interact with the AI agent through chat, give instructions, and review suggestions.</p>"},{"location":"backlog/tasks/qc-037%20-%20Chat-with-Agent/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can ask questions about data</li> <li>[ ] #2 Researcher can give coding instructions</li> <li>[ ] #3 Researcher can review pending suggestions</li> <li>[ ] #4 Researcher can approve agent actions</li> <li>[ ] #5 Researcher can reject agent actions</li> <li>[ ] #6 Agent can execute multi-step tasks</li> <li>[ ] #7 Agent can present findings clearly</li> <li>[ ] #8 Agent can learn from feedback</li> </ul>"},{"location":"backlog/tasks/qc-037.01%20-%20Ask-Questions-About-Data/","title":"Ask Questions About Data","text":""},{"location":"backlog/tasks/qc-037.01%20-%20Ask-Questions-About-Data/#description","title":"Description","text":"<p>As a Researcher, I want to ask the agent questions so that I can get insights.</p>"},{"location":"backlog/tasks/qc-037.01%20-%20Ask-Questions-About-Data/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can type questions in natural language</li> <li>[ ] #2 Agent answers based on project data</li> <li>[ ] #3 Answers include evidence citations</li> <li>[ ] #4 I can ask follow-up questions</li> </ul>"},{"location":"backlog/tasks/qc-037.02%20-%20Give-Coding-Instructions/","title":"Give Coding Instructions","text":""},{"location":"backlog/tasks/qc-037.02%20-%20Give-Coding-Instructions/#description","title":"Description","text":"<p>As a Researcher, I want to instruct the agent so that it can help with coding.</p>"},{"location":"backlog/tasks/qc-037.02%20-%20Give-Coding-Instructions/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can describe what to code</li> <li>[ ] #2 Agent understands coding intent</li> <li>[ ] #3 Agent proposes action plan</li> <li>[ ] #4 I approve before execution</li> </ul>"},{"location":"backlog/tasks/qc-037.03%20-%20Review-Pending-Suggestions/","title":"Review Pending Suggestions","text":""},{"location":"backlog/tasks/qc-037.03%20-%20Review-Pending-Suggestions/#description","title":"Description","text":"<p>As a Researcher, I want to review suggestions so that I control what gets applied.</p>"},{"location":"backlog/tasks/qc-037.03%20-%20Review-Pending-Suggestions/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see list of pending suggestions</li> <li>[ ] #2 Each suggestion shows details and rationale</li> <li>[ ] #3 I can approve or reject each</li> <li>[ ] #4 I can modify before approving</li> </ul>"},{"location":"backlog/tasks/qc-037.04%20-%20Approve-Agent-Action/","title":"Approve Agent Action","text":""},{"location":"backlog/tasks/qc-037.04%20-%20Approve-Agent-Action/#description","title":"Description","text":"<p>As a Researcher, I want to approve agent actions so that I maintain control.</p>"},{"location":"backlog/tasks/qc-037.04%20-%20Approve-Agent-Action/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can approve individual actions</li> <li>[ ] #2 I can approve batches of actions</li> <li>[ ] #3 Approved actions are executed</li> <li>[ ] #4 I receive confirmation</li> </ul>"},{"location":"backlog/tasks/qc-037.05%20-%20Reject-Agent-Action/","title":"Reject Agent Action","text":""},{"location":"backlog/tasks/qc-037.05%20-%20Reject-Agent-Action/#description","title":"Description","text":"<p>As a Researcher, I want to reject agent actions so that I can correct mistakes.</p>"},{"location":"backlog/tasks/qc-037.05%20-%20Reject-Agent-Action/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can reject individual actions</li> <li>[ ] #2 I can provide rejection reason</li> <li>[ ] #3 Agent learns from rejections</li> <li>[ ] #4 Rejected actions are not applied</li> </ul>"},{"location":"backlog/tasks/qc-037.06%20-%20Execute-Multi-Step-Task/","title":"Execute Multi-Step Task","text":""},{"location":"backlog/tasks/qc-037.06%20-%20Execute-Multi-Step-Task/#description","title":"Description","text":"<p>As an AI Agent, I want to execute complex tasks so that I can be truly helpful.</p>"},{"location":"backlog/tasks/qc-037.06%20-%20Execute-Multi-Step-Task/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can break down complex requests</li> <li>[ ] #2 Agent can execute steps in sequence</li> <li>[ ] #3 Progress is shown to researcher</li> <li>[ ] #4 Researcher can pause or cancel</li> </ul>"},{"location":"backlog/tasks/qc-037.07%20-%20Present-Findings-Clearly/","title":"Present Findings Clearly","text":""},{"location":"backlog/tasks/qc-037.07%20-%20Present-Findings-Clearly/#description","title":"Description","text":"<p>As an AI Agent, I want to present findings clearly so that researchers understand.</p>"},{"location":"backlog/tasks/qc-037.07%20-%20Present-Findings-Clearly/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent formats responses readably</li> <li>[ ] #2 Agent includes relevant visualizations</li> <li>[ ] #3 Agent cites sources in data</li> <li>[ ] #4 Agent summarizes key points</li> </ul>"},{"location":"backlog/tasks/qc-037.08%20-%20Learn-from-Feedback/","title":"Learn from Feedback","text":""},{"location":"backlog/tasks/qc-037.08%20-%20Learn-from-Feedback/#description","title":"Description","text":"<p>As an AI Agent, I want to learn from feedback so that I improve over time.</p>"},{"location":"backlog/tasks/qc-037.08%20-%20Learn-from-Feedback/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent tracks approval/rejection patterns</li> <li>[ ] #2 Agent adjusts suggestions based on feedback</li> <li>[ ] #3 Agent asks clarifying questions</li> <li>[ ] #4 Agent improves with use</li> </ul>"},{"location":"backlog/tasks/qc-038%20-%20Settings-and-Preferences/","title":"Settings and Preferences","text":""},{"location":"backlog/tasks/qc-038%20-%20Settings-and-Preferences/#description","title":"Description","text":"<p>Enable researchers to customize the application appearance, behavior, and backup settings.</p>"},{"location":"backlog/tasks/qc-038%20-%20Settings-and-Preferences/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[x] #1 Researcher can change UI theme (dark, light, colors)</li> <li>[x] #2 Researcher can configure font size and family</li> <li>[x] #3 Researcher can select application language</li> <li>[x] #4 Researcher can configure automatic backups</li> <li>[x] #5 Researcher can set timestamp format for AV coding</li> <li>[x] #6 Researcher can configure speaker name format</li> <li>[ ] #7 Agent can read current settings for context</li> </ul>"},{"location":"backlog/tasks/qc-038%20-%20Settings-and-Preferences/#implementation-notes","title":"Implementation Notes","text":"<p>Settings feature fully implemented with DDD architecture:</p> <p>Domain Layer (<code>src/domain/settings/</code>): - Entities: ThemePreference, FontPreference, LanguagePreference, BackupConfig, AVCodingConfig, UserSettings - Events: ThemeChanged, FontChanged, LanguageChanged, BackupConfigChanged, AVCodingConfigChanged - Derivers: Pure validation functions for each setting type - Invariants: Valid values and validators</p> <p>Infrastructure Layer (<code>src/infrastructure/settings/</code>): - UserSettingsRepository: JSON file persistence with platform-specific paths</p> <p>Application Layer (<code>src/application/settings/</code>): - SettingsControllerImpl: 5-step controller pattern - Commands: ChangeTheme, ChangeFont, ChangeLanguage, ChangeBackupConfig, ChangeAVCodingConfig</p> <p>Presentation Layer: - SettingsDialog: Tabbed UI (Appearance, Language, Backup, AV Coding) - SettingsViewModel: Transforms domain to DTOs - AppShell integration: Settings button with gear icon in menu bar</p> <p>Tests: - 66 unit tests (derivers, repository, controller) - 17 E2E tests (dialog, persistence, round-trip) - 6 integration tests (AppShell settings button)</p>"},{"location":"backlog/tasks/qc-038.01%20-%20Configure-Backups/","title":"Configure Backups","text":""},{"location":"backlog/tasks/qc-038.01%20-%20Configure-Backups/#description","title":"Description","text":"<p>As a Researcher, I want to configure automatic backups so that my work is protected.</p>"},{"location":"backlog/tasks/qc-038.01%20-%20Configure-Backups/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can enable/disable automatic backup on project open</li> <li>[ ] #2 I can set number of backups to retain (1-20)</li> <li>[ ] #3 I can choose whether to include AV files in backups</li> <li>[ ] #4 I can manually create a backup anytime</li> </ul>"},{"location":"backlog/tasks/qc-038.02%20-%20Change-UI-Theme/","title":"Change UI Theme","text":""},{"location":"backlog/tasks/qc-038.02%20-%20Change-UI-Theme/#description","title":"Description","text":"<p>As a Researcher, I want to change the UI theme so that I can work comfortably.</p>"},{"location":"backlog/tasks/qc-038.02%20-%20Change-UI-Theme/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can choose from multiple themes (dark, light, colors)</li> <li>[ ] #2 Theme applies immediately</li> <li>[ ] #3 Theme preference is saved</li> </ul>"},{"location":"backlog/tasks/qc-038.03%20-%20Configure-Fonts/","title":"Configure Fonts","text":""},{"location":"backlog/tasks/qc-038.03%20-%20Configure-Fonts/#description","title":"Description","text":"<p>As a Researcher, I want to configure fonts so that text is readable for me.</p>"},{"location":"backlog/tasks/qc-038.03%20-%20Configure-Fonts/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can change font family</li> <li>[ ] #2 I can change font size for UI</li> <li>[ ] #3 I can change font size for documents</li> </ul>"},{"location":"backlog/tasks/qc-038.04%20-%20Select-Language/","title":"Select Language","text":""},{"location":"backlog/tasks/qc-038.04%20-%20Select-Language/#description","title":"Description","text":"<p>As a Researcher, I want to select my preferred language so that I can use the app in my language.</p>"},{"location":"backlog/tasks/qc-038.04%20-%20Select-Language/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can choose from available languages</li> <li>[ ] #2 UI updates to selected language</li> <li>[ ] #3 Language preference is saved</li> </ul>"},{"location":"backlog/tasks/qc-038.05%20-%20Configure-Timestamp-Format/","title":"Configure Timestamp Format","text":""},{"location":"backlog/tasks/qc-038.05%20-%20Configure-Timestamp-Format/#description","title":"Description","text":"<p>As a Researcher, I want to configure timestamp format so that AV coding matches my preference.</p>"},{"location":"backlog/tasks/qc-038.05%20-%20Configure-Timestamp-Format/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can choose timestamp format (mm:ss, hh:mm:ss, etc.)</li> <li>[ ] #2 Format applies to all AV coding displays</li> </ul>"},{"location":"backlog/tasks/qc-039%20-%20Import-Export-Formats/","title":"Import Export Formats","text":""},{"location":"backlog/tasks/qc-039%20-%20Import-Export-Formats/#description","title":"Description","text":"<p>Enable researchers to exchange projects and data with other QDA tools and formats.</p>"},{"location":"backlog/tasks/qc-039%20-%20Import-Export-Formats/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can export project in REFI-QDA format</li> <li>[ ] #2 Researcher can import project from REFI-QDA format</li> <li>[ ] #3 Researcher can import from RQDA (R-based QDA)</li> <li>[ ] #4 Researcher can export codebook as document</li> <li>[ ] #5 Researcher can export coded text as HTML</li> <li>[ ] #6 Researcher can import survey data from CSV</li> <li>[ ] #7 Researcher can import plain text code list</li> <li>[ ] #8 Agent can suggest export format based on use case</li> <li>[ ] #9 Agent can export data in requested format</li> <li>[ ] #10 Agent can import from URL or text</li> </ul>"},{"location":"backlog/tasks/qc-039.01%20-%20Export-REFI-QDA-Project/","title":"Export REFI-QDA Project","text":""},{"location":"backlog/tasks/qc-039.01%20-%20Export-REFI-QDA-Project/#description","title":"Description","text":"<p>As a Researcher, I want to export my project in REFI-QDA format so that I can share with other QDA tools.</p>"},{"location":"backlog/tasks/qc-039.01%20-%20Export-REFI-QDA-Project/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can export project as REFI-QDA XML</li> <li>[ ] #2 Export includes codes, categories, and codings</li> <li>[ ] #3 Export validates against REFI-QDA schema</li> </ul>"},{"location":"backlog/tasks/qc-039.02%20-%20Import-REFI-QDA-Project/","title":"Import REFI-QDA Project","text":""},{"location":"backlog/tasks/qc-039.02%20-%20Import-REFI-QDA-Project/#description","title":"Description","text":"<p>As a Researcher, I want to import a REFI-QDA project so that I can work with data from other tools.</p>"},{"location":"backlog/tasks/qc-039.02%20-%20Import-REFI-QDA-Project/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select REFI-QDA XML file</li> <li>[ ] #2 Codes and categories are imported</li> <li>[ ] #3 Codings are mapped correctly</li> </ul>"},{"location":"backlog/tasks/qc-039.03%20-%20Import-RQDA-Project/","title":"Import RQDA Project","text":""},{"location":"backlog/tasks/qc-039.03%20-%20Import-RQDA-Project/#description","title":"Description","text":"<p>As a Researcher, I want to import an RQDA project so that I can migrate from R-based QDA.</p>"},{"location":"backlog/tasks/qc-039.03%20-%20Import-RQDA-Project/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select RQDA database file</li> <li>[ ] #2 Codes and codings are imported</li> <li>[ ] #3 Cases are mapped</li> </ul>"},{"location":"backlog/tasks/qc-039.04%20-%20Export-Codebook/","title":"Export Codebook","text":""},{"location":"backlog/tasks/qc-039.04%20-%20Export-Codebook/#description","title":"Description","text":"<p>As a Researcher, I want to export my codebook so that I can document my coding scheme.</p>"},{"location":"backlog/tasks/qc-039.04%20-%20Export-Codebook/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can export codebook as document (ODT)</li> <li>[ ] #2 Export includes code names and descriptions</li> <li>[ ] #3 Export can include memos</li> </ul>"},{"location":"backlog/tasks/qc-039.05%20-%20Export-Coded-Text-as-HTML/","title":"Export Coded Text as HTML","text":""},{"location":"backlog/tasks/qc-039.05%20-%20Export-Coded-Text-as-HTML/#description","title":"Description","text":"<p>As a Researcher, I want to export coded text as HTML so that I can share findings.</p>"},{"location":"backlog/tasks/qc-039.05%20-%20Export-Coded-Text-as-HTML/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Coded segments are highlighted</li> <li>[ ] #2 Media links are included</li> <li>[ ] #3 Export is viewable in browser</li> </ul>"},{"location":"backlog/tasks/qc-039.06%20-%20Import-Survey-Data/","title":"Import Survey Data","text":""},{"location":"backlog/tasks/qc-039.06%20-%20Import-Survey-Data/#description","title":"Description","text":"<p>As a Researcher, I want to import survey data from CSV so that I can add case attributes.</p>"},{"location":"backlog/tasks/qc-039.06%20-%20Import-Survey-Data/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select CSV file with headers</li> <li>[ ] #2 First column maps to case identifier</li> <li>[ ] #3 Other columns become attributes</li> </ul>"},{"location":"backlog/tasks/qc-039.07%20-%20Import-Code-List/","title":"Import Code List","text":""},{"location":"backlog/tasks/qc-039.07%20-%20Import-Code-List/#description","title":"Description","text":"<p>As a Researcher, I want to import a code list so that I can quickly set up my coding scheme.</p>"},{"location":"backlog/tasks/qc-039.07%20-%20Import-Code-List/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can import plain text code list</li> <li>[ ] #2 Indentation creates categories</li> <li>[ ] #3 Colors can be auto-assigned</li> </ul>"},{"location":"backlog/tasks/qc-040%20-%20Data-Privacy/","title":"Data Privacy","text":""},{"location":"backlog/tasks/qc-040%20-%20Data-Privacy/#description","title":"Description","text":"<p>Enable researchers to anonymize sensitive data and manage speaker identification in transcripts.</p>"},{"location":"backlog/tasks/qc-040%20-%20Data-Privacy/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can create pseudonyms for sensitive names</li> <li>[ ] #2 Researcher can apply pseudonyms across all sources</li> <li>[ ] #3 Researcher can detect speakers in transcripts</li> <li>[ ] #4 Researcher can convert speaker names to codes</li> <li>[ ] #5 Agent can suggest anonymization candidates</li> <li>[ ] #6 Agent can auto-detect speaker patterns</li> </ul>"},{"location":"backlog/tasks/qc-040.01%20-%20Create-Pseudonyms/","title":"Create Pseudonyms","text":""},{"location":"backlog/tasks/qc-040.01%20-%20Create-Pseudonyms/#description","title":"Description","text":"<p>As a Researcher, I want to create pseudonyms so that I can anonymize sensitive names.</p>"},{"location":"backlog/tasks/qc-040.01%20-%20Create-Pseudonyms/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can create pseudonym mappings (real name \u2192 alias)</li> <li>[ ] #2 Pseudonyms are stored securely</li> <li>[ ] #3 I can edit and delete pseudonyms</li> </ul>"},{"location":"backlog/tasks/qc-040.02%20-%20Apply-Pseudonyms/","title":"Apply Pseudonyms","text":""},{"location":"backlog/tasks/qc-040.02%20-%20Apply-Pseudonyms/#description","title":"Description","text":"<p>As a Researcher, I want to apply pseudonyms across sources so that data is anonymized.</p>"},{"location":"backlog/tasks/qc-040.02%20-%20Apply-Pseudonyms/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can apply pseudonyms to selected sources</li> <li>[ ] #2 All instances are replaced</li> <li>[ ] #3 Original text is preserved (reversible)</li> </ul>"},{"location":"backlog/tasks/qc-040.03%20-%20Detect-Speakers/","title":"Detect Speakers","text":""},{"location":"backlog/tasks/qc-040.03%20-%20Detect-Speakers/#description","title":"Description","text":"<p>As a Researcher, I want to detect speakers in transcripts so that I can identify participants.</p>"},{"location":"backlog/tasks/qc-040.03%20-%20Detect-Speakers/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 System detects speaker patterns (e.g., 'John:')</li> <li>[ ] #2 I can configure speaker format</li> <li>[ ] #3 Detected speakers are listed</li> </ul>"},{"location":"backlog/tasks/qc-040.04%20-%20Convert-Speakers-to-Codes/","title":"Convert Speakers to Codes","text":""},{"location":"backlog/tasks/qc-040.04%20-%20Convert-Speakers-to-Codes/#description","title":"Description","text":"<p>As a Researcher, I want to convert speaker names to codes so that I can analyze by speaker.</p>"},{"location":"backlog/tasks/qc-040.04%20-%20Convert-Speakers-to-Codes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Each speaker becomes a code</li> <li>[ ] #2 Speaker segments are auto-coded</li> <li>[ ] #3 I can review before applying</li> </ul>"},{"location":"backlog/tasks/qc-040.05%20-%20Suggest-Anonymization/","title":"Suggest Anonymization","text":""},{"location":"backlog/tasks/qc-040.05%20-%20Suggest-Anonymization/#description","title":"Description","text":"<p>As an AI Agent, I want to suggest anonymization candidates so that I can help protect privacy.</p>"},{"location":"backlog/tasks/qc-040.05%20-%20Suggest-Anonymization/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent identifies potential names/identifiers</li> <li>[ ] #2 Agent suggests pseudonyms</li> <li>[ ] #3 Researcher approves suggestions</li> </ul>"},{"location":"backlog/tasks/qc-041%20-%20References-and-Bibliography/","title":"References and Bibliography","text":""},{"location":"backlog/tasks/qc-041%20-%20References-and-Bibliography/#description","title":"Description","text":"<p>Enable researchers to manage academic references and link them to research findings.</p>"},{"location":"backlog/tasks/qc-041%20-%20References-and-Bibliography/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can import references in RIS format</li> <li>[ ] #2 Researcher can view and edit reference metadata</li> <li>[ ] #3 Researcher can link references to coded segments</li> <li>[ ] #4 Researcher can export bibliography</li> <li>[ ] #5 Agent can suggest relevant references</li> <li>[ ] #6 Agent can cite references in reports</li> </ul>"},{"location":"backlog/tasks/qc-041.01%20-%20Import-RIS-References/","title":"Import RIS References","text":""},{"location":"backlog/tasks/qc-041.01%20-%20Import-RIS-References/#description","title":"Description","text":"<p>As a Researcher, I want to import references in RIS format so that I can manage my bibliography.</p>"},{"location":"backlog/tasks/qc-041.01%20-%20Import-RIS-References/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select RIS file</li> <li>[ ] #2 References are parsed and stored</li> <li>[ ] #3 Metadata (author, title, year) is extracted</li> </ul>"},{"location":"backlog/tasks/qc-041.02%20-%20View-and-Edit-References/","title":"View and Edit References","text":""},{"location":"backlog/tasks/qc-041.02%20-%20View-and-Edit-References/#description","title":"Description","text":"<p>As a Researcher, I want to view and edit references so that I can maintain accurate citations.</p>"},{"location":"backlog/tasks/qc-041.02%20-%20View-and-Edit-References/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can see list of all references</li> <li>[ ] #2 I can edit reference metadata</li> <li>[ ] #3 I can delete references</li> </ul>"},{"location":"backlog/tasks/qc-041.03%20-%20Link-References-to-Segments/","title":"Link References to Segments","text":""},{"location":"backlog/tasks/qc-041.03%20-%20Link-References-to-Segments/#description","title":"Description","text":"<p>As a Researcher, I want to link references to coded segments so that I can cite sources.</p>"},{"location":"backlog/tasks/qc-041.03%20-%20Link-References-to-Segments/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can link a reference to a segment</li> <li>[ ] #2 Linked references are visible on segments</li> <li>[ ] #3 I can navigate from segment to reference</li> </ul>"},{"location":"backlog/tasks/qc-041.04%20-%20Export-Bibliography/","title":"Export Bibliography","text":""},{"location":"backlog/tasks/qc-041.04%20-%20Export-Bibliography/#description","title":"Description","text":"<p>As a Researcher, I want to export my bibliography so that I can use it in my writing.</p>"},{"location":"backlog/tasks/qc-041.04%20-%20Export-Bibliography/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can export all references</li> <li>[ ] #2 Export in common formats (RIS, BibTeX)</li> <li>[ ] #3 Can filter by linked segments</li> </ul>"},{"location":"backlog/tasks/qc-042%20-%20Apply-Codes-to-PDF/","title":"Apply Codes to PDF","text":""},{"location":"backlog/tasks/qc-042%20-%20Apply-Codes-to-PDF/#description","title":"Description","text":"<p>Enable researchers and agents to apply codes to PDF documents with page-level tracking.</p>"},{"location":"backlog/tasks/qc-042%20-%20Apply-Codes-to-PDF/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can view PDF pages in coding interface</li> <li>[ ] #2 Researcher can select text in PDF and apply codes</li> <li>[ ] #3 Researcher can draw regions on PDF pages</li> <li>[ ] #4 Researcher can see coded segments by page</li> <li>[ ] #5 Agent can apply codes to PDF text ranges</li> <li>[ ] #6 Agent can suggest codes for PDF content</li> </ul>"},{"location":"backlog/tasks/qc-042.01%20-%20View-PDF-Pages/","title":"View PDF Pages","text":""},{"location":"backlog/tasks/qc-042.01%20-%20View-PDF-Pages/#description","title":"Description","text":"<p>As a Researcher, I want to view PDF pages in the coding interface so that I can code PDF content.</p>"},{"location":"backlog/tasks/qc-042.01%20-%20View-PDF-Pages/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 PDF displays in coding panel</li> <li>[ ] #2 I can navigate between pages</li> <li>[ ] #3 Page number is shown</li> </ul>"},{"location":"backlog/tasks/qc-042.02%20-%20Select-PDF-Text-and-Apply-Code/","title":"Select PDF Text and Apply Code","text":""},{"location":"backlog/tasks/qc-042.02%20-%20Select-PDF-Text-and-Apply-Code/#description","title":"Description","text":"<p>As a Researcher, I want to select text in PDF and apply codes so that I can code PDF documents.</p>"},{"location":"backlog/tasks/qc-042.02%20-%20Select-PDF-Text-and-Apply-Code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select text in PDF</li> <li>[ ] #2 I can apply code to selected text</li> <li>[ ] #3 Page number is tracked with coding</li> </ul>"},{"location":"backlog/tasks/qc-042.03%20-%20Draw-Regions-on-PDF/","title":"Draw Regions on PDF","text":""},{"location":"backlog/tasks/qc-042.03%20-%20Draw-Regions-on-PDF/#description","title":"Description","text":"<p>As a Researcher, I want to draw regions on PDF pages so that I can code images and figures.</p>"},{"location":"backlog/tasks/qc-042.03%20-%20Draw-Regions-on-PDF/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can draw rectangular regions</li> <li>[ ] #2 I can apply code to region</li> <li>[ ] #3 Regions are visible as overlays</li> </ul>"},{"location":"backlog/tasks/qc-042.04%20-%20View-PDF-Codings-by-Page/","title":"View PDF Codings by Page","text":""},{"location":"backlog/tasks/qc-042.04%20-%20View-PDF-Codings-by-Page/#description","title":"Description","text":"<p>As a Researcher, I want to see codings organized by page so that I can review PDF coding.</p>"},{"location":"backlog/tasks/qc-042.04%20-%20View-PDF-Codings-by-Page/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Codings are grouped by page</li> <li>[ ] #2 I can navigate to coded pages</li> <li>[ ] #3 Page context is shown</li> </ul>"},{"location":"backlog/tasks/qc-042.05%20-%20Agent-Apply-PDF-Codes/","title":"Agent Apply PDF Codes","text":""},{"location":"backlog/tasks/qc-042.05%20-%20Agent-Apply-PDF-Codes/#description","title":"Description","text":"<p>As an AI Agent, I want to apply codes to PDF content so that I can assist with PDF coding.</p>"},{"location":"backlog/tasks/qc-042.05%20-%20Agent-Apply-PDF-Codes/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can code text ranges in PDF</li> <li>[ ] #2 Page information is included</li> <li>[ ] #3 Suggestions require approval</li> </ul>"},{"location":"backlog/tasks/qc-043%20-%20Journals-and-Memos/","title":"Journals and Memos","text":""},{"location":"backlog/tasks/qc-043%20-%20Journals-and-Memos/#description","title":"Description","text":"<p>Enable researchers to document their research process, decisions, and reflections.</p>"},{"location":"backlog/tasks/qc-043%20-%20Journals-and-Memos/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can create research journals</li> <li>[ ] #2 Researcher can add timestamped journal entries</li> <li>[ ] #3 Researcher can edit project memo</li> <li>[ ] #4 Researcher can add annotations to text (separate from codes)</li> <li>[ ] #5 Researcher can bookmark positions in files</li> <li>[ ] #6 Researcher can export journals</li> <li>[ ] #7 Agent can read journals for context</li> <li>[ ] #8 Agent can suggest journal entries based on activity</li> </ul>"},{"location":"backlog/tasks/qc-043.01%20-%20Create-Research-Journal/","title":"Create Research Journal","text":""},{"location":"backlog/tasks/qc-043.01%20-%20Create-Research-Journal/#description","title":"Description","text":"<p>As a Researcher, I want to create research journals so that I can document my process.</p>"},{"location":"backlog/tasks/qc-043.01%20-%20Create-Research-Journal/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can create named journals</li> <li>[ ] #2 I can have multiple journals</li> <li>[ ] #3 Journals are listed in sidebar</li> </ul>"},{"location":"backlog/tasks/qc-043.02%20-%20Add-Journal-Entry/","title":"Add Journal Entry","text":""},{"location":"backlog/tasks/qc-043.02%20-%20Add-Journal-Entry/#description","title":"Description","text":"<p>As a Researcher, I want to add journal entries so that I can record my thoughts.</p>"},{"location":"backlog/tasks/qc-043.02%20-%20Add-Journal-Entry/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can add entries with timestamp</li> <li>[ ] #2 Entries support rich text</li> <li>[ ] #3 Entries are saved automatically</li> </ul>"},{"location":"backlog/tasks/qc-043.03%20-%20Edit-Project-Memo/","title":"Edit Project Memo","text":""},{"location":"backlog/tasks/qc-043.03%20-%20Edit-Project-Memo/#description","title":"Description","text":"<p>As a Researcher, I want to edit the project memo so that I can document project-level notes.</p>"},{"location":"backlog/tasks/qc-043.03%20-%20Edit-Project-Memo/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can access project memo</li> <li>[ ] #2 Memo supports rich text</li> <li>[ ] #3 Memo is saved with project</li> </ul>"},{"location":"backlog/tasks/qc-043.04%20-%20Add-Text-Annotations/","title":"Add Text Annotations","text":""},{"location":"backlog/tasks/qc-043.04%20-%20Add-Text-Annotations/#description","title":"Description","text":"<p>As a Researcher, I want to add annotations to text so that I can make notes separate from codes.</p>"},{"location":"backlog/tasks/qc-043.04%20-%20Add-Text-Annotations/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can select text and add annotation</li> <li>[ ] #2 Annotations are visually distinct from codes</li> <li>[ ] #3 I can view all annotations</li> </ul>"},{"location":"backlog/tasks/qc-043.05%20-%20Bookmark-Positions/","title":"Bookmark Positions","text":""},{"location":"backlog/tasks/qc-043.05%20-%20Bookmark-Positions/#description","title":"Description","text":"<p>As a Researcher, I want to bookmark positions in files so that I can quickly return to them.</p>"},{"location":"backlog/tasks/qc-043.05%20-%20Bookmark-Positions/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can bookmark current position</li> <li>[ ] #2 I can see list of bookmarks</li> <li>[ ] #3 I can jump to bookmark</li> </ul>"},{"location":"backlog/tasks/qc-043.06%20-%20Export-Journals/","title":"Export Journals","text":""},{"location":"backlog/tasks/qc-043.06%20-%20Export-Journals/#description","title":"Description","text":"<p>As a Researcher, I want to export journals so that I can include them in reports.</p>"},{"location":"backlog/tasks/qc-043.06%20-%20Export-Journals/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can export journal as document</li> <li>[ ] #2 Entries include timestamps</li> <li>[ ] #3 Can select date range</li> </ul>"},{"location":"backlog/tasks/qc-043.07%20-%20Agent-Read-Journals/","title":"Agent Read Journals","text":""},{"location":"backlog/tasks/qc-043.07%20-%20Agent-Read-Journals/#description","title":"Description","text":"<p>As an AI Agent, I want to read journals so that I can understand research context.</p>"},{"location":"backlog/tasks/qc-043.07%20-%20Agent-Read-Journals/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can access journal content</li> <li>[ ] #2 Agent uses journals for context</li> <li>[ ] #3 Private notes (after #####) are excluded</li> </ul>"},{"location":"backlog/tasks/qc-044%20-%20Visualizations/","title":"Visualizations","text":""},{"location":"backlog/tasks/qc-044%20-%20Visualizations/#description","title":"Description","text":"<p>Enable researchers to visualize coding patterns through graphs, charts, and word clouds.</p>"},{"location":"backlog/tasks/qc-044%20-%20Visualizations/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Researcher can view code network graph</li> <li>[ ] #2 Researcher can view code hierarchy as tree graph</li> <li>[ ] #3 Researcher can generate bar and pie charts</li> <li>[ ] #4 Researcher can generate word clouds from coded text</li> <li>[ ] #5 Researcher can customize visualization appearance</li> <li>[ ] #6 Researcher can export visualizations</li> <li>[ ] #7 Agent can generate visualizations on request</li> <li>[ ] #8 Agent can explain patterns in visualizations</li> </ul>"},{"location":"backlog/tasks/qc-044.01%20-%20View-Code-Network-Graph/","title":"View Code Network Graph","text":""},{"location":"backlog/tasks/qc-044.01%20-%20View-Code-Network-Graph/#description","title":"Description","text":"<p>As a Researcher, I want to view a code network graph so that I can see relationships.</p>"},{"location":"backlog/tasks/qc-044.01%20-%20View-Code-Network-Graph/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Codes are shown as nodes</li> <li>[ ] #2 Relationships are shown as lines</li> <li>[ ] #3 I can drag and arrange nodes</li> </ul>"},{"location":"backlog/tasks/qc-044.02%20-%20View-Code-Hierarchy-Tree/","title":"View Code Hierarchy Tree","text":""},{"location":"backlog/tasks/qc-044.02%20-%20View-Code-Hierarchy-Tree/#description","title":"Description","text":"<p>As a Researcher, I want to view code hierarchy as a tree so that I can see structure.</p>"},{"location":"backlog/tasks/qc-044.02%20-%20View-Code-Hierarchy-Tree/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Categories and codes shown as tree</li> <li>[ ] #2 I can expand/collapse branches</li> <li>[ ] #3 Colors match code colors</li> </ul>"},{"location":"backlog/tasks/qc-044.03%20-%20Generate-Charts/","title":"Generate Charts","text":""},{"location":"backlog/tasks/qc-044.03%20-%20Generate-Charts/#description","title":"Description","text":"<p>As a Researcher, I want to generate charts so that I can visualize frequencies.</p>"},{"location":"backlog/tasks/qc-044.03%20-%20Generate-Charts/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can create bar charts</li> <li>[ ] #2 I can create pie charts</li> <li>[ ] #3 I can filter by files/cases</li> </ul>"},{"location":"backlog/tasks/qc-044.04%20-%20Generate-Word-Cloud/","title":"Generate Word Cloud","text":""},{"location":"backlog/tasks/qc-044.04%20-%20Generate-Word-Cloud/#description","title":"Description","text":"<p>As a Researcher, I want to generate word clouds so that I can see common terms.</p>"},{"location":"backlog/tasks/qc-044.04%20-%20Generate-Word-Cloud/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Word cloud from coded text</li> <li>[ ] #2 Word size reflects frequency</li> <li>[ ] #3 I can filter by codes</li> </ul>"},{"location":"backlog/tasks/qc-044.05%20-%20Customize-Visualizations/","title":"Customize Visualizations","text":""},{"location":"backlog/tasks/qc-044.05%20-%20Customize-Visualizations/#description","title":"Description","text":"<p>As a Researcher, I want to customize visualizations so that they fit my needs.</p>"},{"location":"backlog/tasks/qc-044.05%20-%20Customize-Visualizations/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can change colors and fonts</li> <li>[ ] #2 I can resize elements</li> <li>[ ] #3 Settings are saved</li> </ul>"},{"location":"backlog/tasks/qc-044.06%20-%20Export-Visualizations/","title":"Export Visualizations","text":""},{"location":"backlog/tasks/qc-044.06%20-%20Export-Visualizations/#description","title":"Description","text":"<p>As a Researcher, I want to export visualizations so that I can use them in reports.</p>"},{"location":"backlog/tasks/qc-044.06%20-%20Export-Visualizations/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 I can export as image (PNG, SVG)</li> <li>[ ] #2 I can copy to clipboard</li> <li>[ ] #3 Resolution is configurable</li> </ul>"},{"location":"backlog/tasks/qc-044.07%20-%20Agent-Generate-Visualizations/","title":"Agent Generate Visualizations","text":""},{"location":"backlog/tasks/qc-044.07%20-%20Agent-Generate-Visualizations/#description","title":"Description","text":"<p>As an AI Agent, I want to generate visualizations so that I can help with analysis.</p>"},{"location":"backlog/tasks/qc-044.07%20-%20Agent-Generate-Visualizations/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Agent can create charts on request</li> <li>[ ] #2 Agent suggests appropriate visualization</li> <li>[ ] #3 Agent explains patterns</li> </ul>"},{"location":"backlog/tasks/qc-045%20-%20Complete-Coding-Context/","title":"Complete Coding Context","text":""},{"location":"backlog/tasks/qc-045%20-%20Complete-Coding-Context/#description","title":"Description","text":"<p>Technical enabler: Complete all Coding context implementations to enable QC-028, QC-029, QC-030, QC-031, QC-032 user stories. Focus scope before expanding to other contexts.</p>"},{"location":"backlog/tasks/qc-045%20-%20Complete-Coding-Context/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Image Coding screen implemented (QC-030)</li> <li>[ ] #2 AV Coding screen implemented (QC-031)</li> <li>[ ] #3 All Researcher coding stories completable</li> <li>[ ] #4 All Agent coding stories completable</li> </ul>"},{"location":"backlog/tasks/qc-045.01%20-%20Implement-Image-Coding-Controller/","title":"Implement Image Coding Controller","text":""},{"location":"backlog/tasks/qc-045.01%20-%20Implement-Image-Coding-Controller/#description","title":"Description","text":"<p>Create ImageCodingController in application layer to handle image region coding operations. Uses existing ImageSegment and ImageRegion domain entities.</p>"},{"location":"backlog/tasks/qc-045.01%20-%20Implement-Image-Coding-Controller/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Controller creates ImageSegments for drawn regions</li> <li>[ ] #2 Controller applies codes to image regions</li> <li>[ ] #3 Controller removes image segment coding</li> <li>[ ] #4 Controller updates image segment memo</li> <li>[ ] #5 Signal bridge emits image segment events</li> <li>[ ] #6 Unit tests cover all operations</li> </ul>"},{"location":"backlog/tasks/qc-045.02%20-%20Implement-Image-Coding-Screen/","title":"Implement Image Coding Screen","text":""},{"location":"backlog/tasks/qc-045.02%20-%20Implement-Image-Coding-Screen/#description","title":"Description","text":"<p>Create ImageCodingScreen in presentation layer with region drawing and code application. Follow TextCodingScreen patterns.</p>"},{"location":"backlog/tasks/qc-045.02%20-%20Implement-Image-Coding-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Image viewer displays source images</li> <li>[ ] #2 User can draw rectangular regions</li> <li>[ ] #3 User can draw freeform polygon regions</li> <li>[ ] #4 Regions resize and move with handles</li> <li>[ ] #5 Code color overlays on regions</li> <li>[ ] #6 Codes panel integrates for selection</li> <li>[ ] #7 Keyboard shortcuts match text coding (Q, V, R, U)</li> </ul>"},{"location":"backlog/tasks/qc-045.03%20-%20Implement-AV-Coding-Controller/","title":"Implement AV Coding Controller","text":""},{"location":"backlog/tasks/qc-045.03%20-%20Implement-AV-Coding-Controller/#description","title":"Description","text":"<p>Create AVCodingController in application layer to handle time range coding operations. Uses existing AVSegment and TimeRange domain entities.</p>"},{"location":"backlog/tasks/qc-045.03%20-%20Implement-AV-Coding-Controller/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Controller creates AVSegments for time ranges</li> <li>[ ] #2 Controller applies codes to time ranges</li> <li>[ ] #3 Controller removes AV segment coding</li> <li>[ ] #4 Controller updates AV segment memo</li> <li>[ ] #5 Signal bridge emits AV segment events</li> <li>[ ] #6 Unit tests cover all operations</li> </ul>"},{"location":"backlog/tasks/qc-045.04%20-%20Implement-AV-Coding-Screen/","title":"Implement AV Coding Screen","text":""},{"location":"backlog/tasks/qc-045.04%20-%20Implement-AV-Coding-Screen/#description","title":"Description","text":"<p>Create AVCodingScreen in presentation layer with timeline editor and time range selection. Support audio and video playback with transcript sync.</p>"},{"location":"backlog/tasks/qc-045.04%20-%20Implement-AV-Coding-Screen/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Media player plays audio and video files</li> <li>[ ] #2 Timeline displays coded time ranges</li> <li>[ ] #3 User can mark time ranges by click-drag</li> <li>[ ] #4 Time ranges show code colors</li> <li>[ ] #5 Transcript panel syncs with playback position</li> <li>[ ] #6 Codes panel integrates for selection</li> <li>[ ] #7 Keyboard shortcuts for mark start/end</li> </ul>"},{"location":"backlog/tasks/qc-046%20-%20Remove-premature-v1%E2%86%92v2-migration-code/","title":"Remove premature v1\u2192v2 migration code","text":""},{"location":"backlog/tasks/qc-046%20-%20Remove-premature-v1%E2%86%92v2-migration-code/#description","title":"Description","text":"<p>QualCoder v2 is a fresh rewrite. Migration infrastructure for upgrading v1 databases is premature and adds unnecessary complexity. The migrations folder (src/shared/infra/migrations/) was deleted. When v2 is complete and users need upgrade paths from v1, migration code should be added based on actual requirements.</p>"},{"location":"backlog/tasks/qc-046%20-%20Remove-premature-v1%E2%86%92v2-migration-code/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] #1 Delete src/shared/infra/migrations/ folder</li> <li>[ ] #2 Verify no code references migrations module</li> </ul>"},{"location":"design/AGENT_CONTEXT_DESIGN/","title":"QualCoder: Agent Context Design","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#ai-first-interface-architecture-for-qualitative-research","title":"AI-First Interface Architecture for Qualitative Research","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#executive-summary","title":"Executive Summary","text":"<p>This document describes the Agent Context - an interface layer that exposes QualCoder's capabilities to external AI systems. Rather than embedding AI inside QualCoder, this architecture makes QualCoder a tool provider that any AI system can operate.</p> <p>Key Principle: The researcher's AI assistant (Claude Code, Gemini CLI, etc.) becomes the primary interface, with QualCoder providing the domain-specific tools and state management.</p>"},{"location":"design/AGENT_CONTEXT_DESIGN/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Architecture Overview</li> <li>Design Philosophy</li> <li>Agent Context Components</li> <li>Protocol Adapters</li> <li>Capability Registry</li> <li>Event Streaming</li> <li>Session Management</li> <li>Security and Trust</li> <li>Integration Patterns</li> <li>Deployment Modes</li> <li>Real-Time UI Observation</li> </ol>"},{"location":"design/AGENT_CONTEXT_DESIGN/#1-architecture-overview","title":"1. Architecture Overview","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#11-high-level-architecture","title":"1.1 High-Level Architecture","text":"<pre><code>graph TB\n    subgraph \"External AI Layer\"\n        CLAUDE[Claude Code&lt;br/&gt;OAuth/Subscription]\n        GEMINI[Gemini CLI&lt;br/&gt;OAuth/Subscription]\n        CHATGPT[ChatGPT CLI&lt;br/&gt;OAuth/Subscription]\n        LOCAL[Local Model&lt;br/&gt;Ollama/LMStudio]\n    end\n\n    subgraph \"Agent Context Layer\"\n        MCP[MCP Server]\n        REST[REST API]\n        WS[WebSocket]\n\n        MCP --&gt; SR[Session Registry]\n        REST --&gt; SR\n        WS --&gt; SR\n\n        SR --&gt; CR[Capability Registry]\n        CR --&gt; CD[Command Dispatcher]\n        CR --&gt; EB[Event Broadcaster]\n    end\n\n    subgraph \"Domain Layer\"\n        CODING[Coding Context]\n        SOURCE[Source Context]\n        CASE[Case Context]\n        ANALYSIS[Analysis Context]\n\n        CODING --&gt; BUS[Event Bus]\n        SOURCE --&gt; BUS\n        CASE --&gt; BUS\n        ANALYSIS --&gt; BUS\n    end\n\n    subgraph \"Infrastructure Layer\"\n        DB[(SQLite)]\n        FS[File System]\n    end\n\n    CLAUDE --&gt;|MCP Protocol| MCP\n    GEMINI --&gt;|HTTP/gRPC| REST\n    CHATGPT --&gt;|HTTP| REST\n    LOCAL --&gt;|HTTP| REST\n\n    CD --&gt; CODING\n    CD --&gt; SOURCE\n    CD --&gt; CASE\n    CD --&gt; ANALYSIS\n\n    BUS --&gt; EB\n\n    CODING --&gt; DB\n    SOURCE --&gt; DB\n    SOURCE --&gt; FS\n\n    style MCP fill:#90EE90\n    style REST fill:#90EE90\n    style WS fill:#90EE90</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#12-interaction-flow","title":"1.2 Interaction Flow","text":"<pre><code>sequenceDiagram\n    participant User\n    participant AI as AI CLI (Claude/Gemini)\n    participant AC as Agent Context\n    participant Domain as Domain Layer\n    participant DB as SQLite\n\n    User-&gt;&gt;AI: \"Help me code these interviews\"\n\n    AI-&gt;&gt;AC: list_resources(\"sources\")\n    AC-&gt;&gt;Domain: query sources\n    Domain-&gt;&gt;DB: SELECT * FROM source\n    DB--&gt;&gt;Domain: source rows\n    Domain--&gt;&gt;AC: Source entities\n    AC--&gt;&gt;AI: [source1, source2, ...]\n\n    AI-&gt;&gt;AC: read_resource(\"sources/1/content\")\n    AC--&gt;&gt;AI: Full transcript text\n\n    Note over AI: AI analyzes text,&lt;br/&gt;identifies themes\n\n    AI-&gt;&gt;AC: call_tool(\"create_code\", {name: \"Anxiety\"})\n    AC-&gt;&gt;Domain: CreateCode command\n    Domain-&gt;&gt;Domain: Deriver validates\n    Domain-&gt;&gt;DB: INSERT INTO code_name\n    Domain-&gt;&gt;Domain: Emit CodeCreated event\n    Domain--&gt;&gt;AC: Success + event\n    AC--&gt;&gt;AI: {code_id: 42}\n    AC--)User: [Event notification if GUI open]\n\n    AI-&gt;&gt;AC: call_tool(\"apply_code\", {...})\n    AC-&gt;&gt;Domain: ApplyCode command\n    Domain--&gt;&gt;AC: Success + SegmentCoded event\n    AC--&gt;&gt;AI: {segment_id: 101}\n\n    AI-&gt;&gt;User: \"I've created the code 'Anxiety' and&lt;br/&gt;applied it to 3 segments...\"</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#2-design-philosophy","title":"2. Design Philosophy","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#21-core-principles","title":"2.1 Core Principles","text":"Principle Description Implementation AI as Primary Interface Users interact through their preferred AI tool QualCoder exposes capabilities, doesn't embed AI Protocol Agnostic Support multiple AI integration protocols MCP, REST, WebSocket, gRPC adapters Subscription Friendly No API keys required if user has AI subscription OAuth delegated to external AI tools Event-Driven AI receives real-time updates about system state Domain events streamed to subscribers Trust Configurable Users control what AI can do autonomously Per-tool permission levels Stateless Interface Agent Context doesn't hold business state All state in Domain Layer"},{"location":"design/AGENT_CONTEXT_DESIGN/#22-comparison-traditional-vs-agent-first","title":"2.2 Comparison: Traditional vs Agent-First","text":"<pre><code>graph LR\n    subgraph \"Traditional: AI as Feature\"\n        U1[User] --&gt; UI1[QualCoder UI]\n        UI1 --&gt; AI1[Embedded AI]\n        AI1 --&gt; API1[API Key Required]\n    end\n\n    subgraph \"Agent-First: AI as Interface\"\n        U2[User] --&gt; AI2[AI CLI]\n        AI2 --&gt; AC2[Agent Context]\n        AC2 --&gt; QC2[QualCoder Domain]\n        AI2 -.-&gt; OAUTH[OAuth/Subscription]\n    end\n\n    style AI2 fill:#90EE90\n    style AC2 fill:#90EE90</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#23-benefits","title":"2.3 Benefits","text":"<pre><code>mindmap\n  root((Agent-First&lt;br/&gt;Architecture))\n    Cost Efficiency\n      Use existing AI subscriptions\n      No per-token API costs\n      Local model option\n    Flexibility\n      Choose preferred AI\n      Switch AI providers freely\n      Multiple AIs simultaneously\n    Natural Interface\n      Conversational interaction\n      Context-aware assistance\n      Research methodology guidance\n    Extensibility\n      New AI tools integrate easily\n      Standard protocols MCP/REST\n      Plugin ecosystem possible\n    Transparency\n      AI actions visible in UI\n      Audit trail of all operations\n      User maintains control</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#3-agent-context-components","title":"3. Agent Context Components","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#31-component-overview","title":"3.1 Component Overview","text":"<pre><code>graph TB\n    subgraph \"Agent Context\"\n        subgraph \"Protocol Layer\"\n            MCP[MCP Server]\n            REST[REST API]\n            WS[WebSocket Server]\n            GRPC[gRPC Server]\n        end\n\n        subgraph \"Core Components\"\n            SM[Session Manager]\n            CR[Capability Registry]\n            CD[Command Dispatcher]\n            EB[Event Broadcaster]\n            TL[Trust Layer]\n        end\n\n        subgraph \"Support Components\"\n            CTX[Context Builder]\n            CACHE[State Cache]\n            LOG[Audit Logger]\n        end\n    end\n\n    MCP --&gt; SM\n    REST --&gt; SM\n    WS --&gt; SM\n    GRPC --&gt; SM\n\n    SM --&gt; CR\n    SM --&gt; TL\n    CR --&gt; CD\n    CR --&gt; EB\n    CD --&gt; CTX\n    EB --&gt; CACHE\n    CD --&gt; LOG\n    EB --&gt; LOG</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#32-component-responsibilities","title":"3.2 Component Responsibilities","text":"Component Responsibility Key Operations Session Manager Track connected AI clients create_session, destroy_session, get_session Capability Registry Define available tools/resources register_tool, register_resource, list_capabilities Command Dispatcher Route tool calls to domain dispatch_command, validate_command Event Broadcaster Stream events to subscribers subscribe, unsubscribe, broadcast Trust Layer Enforce permission policies check_permission, require_approval Context Builder Prepare context for AI consumption build_project_briefing, build_state_summary State Cache Cache frequently accessed state cache_codes, cache_sources, invalidate Audit Logger Record all AI operations log_tool_call, log_event, get_audit_trail"},{"location":"design/AGENT_CONTEXT_DESIGN/#33-component-interactions","title":"3.3 Component Interactions","text":"<pre><code>sequenceDiagram\n    participant Proto as Protocol Adapter\n    participant SM as Session Manager\n    participant TL as Trust Layer\n    participant CR as Capability Registry\n    participant CD as Command Dispatcher\n    participant Domain as Domain Layer\n\n    Proto-&gt;&gt;SM: Incoming request\n    SM-&gt;&gt;SM: Validate session\n    SM-&gt;&gt;CR: Get capability definition\n    CR--&gt;&gt;SM: Tool/Resource definition\n    SM-&gt;&gt;TL: Check permission\n\n    alt Permission Denied\n        TL--&gt;&gt;SM: Denied\n        SM--&gt;&gt;Proto: Error: Unauthorized\n    else Requires Approval\n        TL--&gt;&gt;SM: Requires approval\n        SM-&gt;&gt;SM: Queue for user approval\n        SM--&gt;&gt;Proto: Pending approval\n    else Permitted\n        TL--&gt;&gt;SM: Permitted\n        SM-&gt;&gt;CD: Dispatch command\n        CD-&gt;&gt;Domain: Execute\n        Domain--&gt;&gt;CD: Result + Events\n        CD--&gt;&gt;SM: Result\n        SM--&gt;&gt;Proto: Response\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#4-protocol-adapters","title":"4. Protocol Adapters","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#41-supported-protocols","title":"4.1 Supported Protocols","text":"<pre><code>graph TB\n    subgraph \"Protocol Adapters\"\n        subgraph \"MCP Adapter\"\n            MCP_TOOLS[Tools Handler]\n            MCP_RES[Resources Handler]\n            MCP_PROMPT[Prompts Handler]\n            MCP_NOTIFY[Notifications]\n        end\n\n        subgraph \"REST Adapter\"\n            REST_CMD[POST /commands/*]\n            REST_STATE[GET /state/*]\n            REST_EVENTS[GET /events SSE]\n        end\n\n        subgraph \"WebSocket Adapter\"\n            WS_BIDIR[Bidirectional Channel]\n            WS_SUB[Event Subscriptions]\n        end\n\n        subgraph \"CLI Adapter\"\n            CLI_STDIN[Stdin Commands]\n            CLI_STDOUT[Stdout Responses]\n            CLI_STDERR[Stderr Events]\n        end\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#42-mcp-server-design-for-claude-code","title":"4.2 MCP Server Design (for Claude Code)","text":"<pre><code>graph TB\n    subgraph \"MCP Server Implementation\"\n        INIT[Server Initialization]\n\n        subgraph \"Handlers\"\n            TOOLS[tools/list&lt;br/&gt;tools/call]\n            RES[resources/list&lt;br/&gt;resources/read]\n            PROMPTS[prompts/list&lt;br/&gt;prompts/get]\n            NOTIFY[notifications/send]\n        end\n\n        subgraph \"Tool Categories\"\n            T_CODING[Coding Tools]\n            T_SOURCE[Source Tools]\n            T_CASE[Case Tools]\n            T_ANALYSIS[Analysis Tools]\n            T_SEARCH[Search Tools]\n        end\n\n        subgraph \"Resource Categories\"\n            R_PROJECT[Project State]\n            R_CODES[Code Resources]\n            R_SOURCES[Source Resources]\n            R_SEGMENTS[Segment Resources]\n        end\n    end\n\n    INIT --&gt; TOOLS\n    INIT --&gt; RES\n    INIT --&gt; PROMPTS\n    INIT --&gt; NOTIFY\n\n    TOOLS --&gt; T_CODING\n    TOOLS --&gt; T_SOURCE\n    TOOLS --&gt; T_CASE\n    TOOLS --&gt; T_ANALYSIS\n    TOOLS --&gt; T_SEARCH\n\n    RES --&gt; R_PROJECT\n    RES --&gt; R_CODES\n    RES --&gt; R_SOURCES\n    RES --&gt; R_SEGMENTS</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#43-protocol-comparison","title":"4.3 Protocol Comparison","text":"Aspect MCP REST WebSocket gRPC Primary Use Claude Code Generic AI Real-time apps High performance Communication Stdio/HTTP HTTP Persistent HTTP/2 Events Notifications SSE Native push Streaming Schema JSON Schema OpenAPI Custom Protobuf Auth Session-based Token/OAuth Token mTLS"},{"location":"design/AGENT_CONTEXT_DESIGN/#44-rest-api-design","title":"4.4 REST API Design","text":"<pre><code>graph LR\n    subgraph \"REST Endpoints\"\n        subgraph \"Commands POST\"\n            C1[/commands/coding/apply_code]\n            C2[/commands/coding/create_code]\n            C3[/commands/coding/merge_codes]\n            C4[/commands/source/import]\n            C5[/commands/case/create]\n            C6[/commands/analysis/generate_report]\n        end\n\n        subgraph \"State GET\"\n            S1[/state/project]\n            S2[/state/codes]\n            S3[/state/codes/:id]\n            S4[/state/sources]\n            S5[/state/sources/:id/content]\n            S6[/state/segments?filter=...]\n            S7[/state/cases]\n        end\n\n        subgraph \"Events\"\n            E1[/events/stream SSE]\n            E2[/events/history]\n        end\n\n        subgraph \"Session\"\n            SS1[/session/create]\n            SS2[/session/destroy]\n            SS3[/session/heartbeat]\n        end\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#5-capability-registry","title":"5. Capability Registry","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#51-tool-definitions","title":"5.1 Tool Definitions","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#511-coding-tools","title":"5.1.1 Coding Tools","text":"Tool Name Description Parameters Returns Trust Level <code>create_code</code> Create a new code in codebook name, color?, memo?, category_id? code_id Suggest <code>rename_code</code> Rename existing code code_id, new_name success Suggest <code>delete_code</code> Delete a code code_id success Require <code>merge_codes</code> Merge source into target code source_code_id, target_code_id success Require <code>apply_code</code> Apply code to segment code_id, source_id, start, end, memo? segment_id Notify <code>remove_code</code> Remove code from segment segment_id success Notify <code>create_category</code> Create code category name, parent_id?, memo? category_id Suggest <code>move_code</code> Move code to category code_id, category_id success Notify"},{"location":"design/AGENT_CONTEXT_DESIGN/#512-source-tools","title":"5.1.2 Source Tools","text":"Tool Name Description Parameters Returns Trust Level <code>import_source</code> Import file as source file_path, name? source_id Suggest <code>import_text</code> Import text content directly content, name source_id Suggest <code>rename_source</code> Rename source source_id, new_name success Notify <code>delete_source</code> Delete source source_id success Require <code>update_memo</code> Update source memo source_id, memo success Auto"},{"location":"design/AGENT_CONTEXT_DESIGN/#513-case-tools","title":"5.1.3 Case Tools","text":"Tool Name Description Parameters Returns Trust Level <code>create_case</code> Create research case name, memo? case_id Suggest <code>delete_case</code> Delete case case_id success Require <code>add_source_to_case</code> Add full source to case case_id, source_id success Notify <code>add_segment_to_case</code> Add segment to case case_id, source_id, start, end success Notify <code>set_case_attribute</code> Set attribute value case_id, attribute_name, value success Notify"},{"location":"design/AGENT_CONTEXT_DESIGN/#514-analysis-tools","title":"5.1.4 Analysis Tools","text":"Tool Name Description Parameters Returns Trust Level <code>generate_frequency_report</code> Code frequency analysis filters? job_id Auto <code>generate_cooccurrence_report</code> Code co-occurrence matrix filters? job_id Auto <code>generate_coder_comparison</code> Inter-rater reliability coder_ids, filters? job_id Auto <code>export_report</code> Export report to file report_id, format file_path Auto"},{"location":"design/AGENT_CONTEXT_DESIGN/#515-search-tools","title":"5.1.5 Search Tools","text":"Tool Name Description Parameters Returns Trust Level <code>search_text</code> Full-text search in sources query, filters? matches[] Auto <code>search_semantic</code> Semantic similarity search query, k?, filters? matches[] Auto <code>search_codes</code> Search code names/memos query codes[] Auto <code>find_similar_segments</code> Find similar coded segments segment_id, k? segments[] Auto"},{"location":"design/AGENT_CONTEXT_DESIGN/#52-resource-definitions","title":"5.2 Resource Definitions","text":"<pre><code>graph TB\n    subgraph \"Resource URIs\"\n        subgraph \"Project Resources\"\n            P1[qualcoder://project/state]\n            P2[qualcoder://project/briefing]\n            P3[qualcoder://project/statistics]\n            P4[qualcoder://project/settings]\n        end\n\n        subgraph \"Code Resources\"\n            C1[qualcoder://codes]\n            C2[qualcoder://codes/:id]\n            C3[qualcoder://codes/:id/segments]\n            C4[qualcoder://categories]\n            C5[qualcoder://categories/:id]\n        end\n\n        subgraph \"Source Resources\"\n            S1[qualcoder://sources]\n            S2[qualcoder://sources/:id]\n            S3[qualcoder://sources/:id/content]\n            S4[qualcoder://sources/:id/segments]\n            S5[qualcoder://sources/:id/annotations]\n        end\n\n        subgraph \"Segment Resources\"\n            SEG1[qualcoder://segments?code_id=X]\n            SEG2[qualcoder://segments?source_id=X]\n            SEG3[qualcoder://segments?case_id=X]\n            SEG4[qualcoder://segments/:id]\n        end\n\n        subgraph \"Case Resources\"\n            CS1[qualcoder://cases]\n            CS2[qualcoder://cases/:id]\n            CS3[qualcoder://cases/:id/members]\n            CS4[qualcoder://cases/:id/attributes]\n        end\n\n        subgraph \"Report Resources\"\n            R1[qualcoder://reports]\n            R2[qualcoder://reports/:id]\n            R3[qualcoder://reports/:id/data]\n        end\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#53-resource-schema-examples","title":"5.3 Resource Schema Examples","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#project-briefing-resource","title":"Project Briefing Resource","text":"<pre><code>URI: qualcoder://project/briefing\n\nReturns:\n{\n  \"project_name\": \"Healthcare Experience Study\",\n  \"description\": \"Qualitative analysis of patient interviews...\",\n  \"research_questions\": [\n    \"How do patients experience chronic pain management?\",\n    \"What role does family support play in recovery?\"\n  ],\n  \"methodology\": \"Grounded Theory\",\n  \"coding_progress\": {\n    \"total_sources\": 15,\n    \"coded_sources\": 8,\n    \"total_codes\": 47,\n    \"total_segments\": 312\n  },\n  \"code_summary\": {\n    \"top_codes\": [\n      {\"name\": \"Pain Management\", \"count\": 45},\n      {\"name\": \"Family Support\", \"count\": 38},\n      {\"name\": \"Healthcare Access\", \"count\": 31}\n    ],\n    \"recent_codes\": [\"Coping Strategies\", \"Medication Concerns\"]\n  },\n  \"recent_activity\": [\n    {\"action\": \"coded\", \"source\": \"Interview_P05\", \"timestamp\": \"...\"},\n    {\"action\": \"created_code\", \"code\": \"Emotional Impact\", \"timestamp\": \"...\"}\n  ]\n}\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#codes-list-resource","title":"Codes List Resource","text":"<pre><code>URI: qualcoder://codes\n\nReturns:\n{\n  \"codes\": [\n    {\n      \"code_id\": 42,\n      \"name\": \"Pain Management\",\n      \"color\": \"#FF6B6B\",\n      \"memo\": \"Experiences and strategies for managing chronic pain\",\n      \"category\": {\"id\": 5, \"name\": \"Health Experiences\"},\n      \"segment_count\": 45,\n      \"created_at\": \"2024-01-15T10:30:00Z\",\n      \"owner\": \"researcher1\"\n    },\n    ...\n  ],\n  \"categories\": [\n    {\n      \"category_id\": 5,\n      \"name\": \"Health Experiences\",\n      \"parent_id\": null,\n      \"code_count\": 12\n    },\n    ...\n  ]\n}\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#54-prompt-templates","title":"5.4 Prompt Templates","text":"<p>Pre-built prompts for common research tasks that AI can use:</p> Prompt Name Description Context Required <code>grounded_theory_open_coding</code> Guide for initial open coding source content, existing codes <code>thematic_analysis</code> Thematic analysis approach source content, research questions <code>axial_coding</code> Connect categories in grounded theory codes, segments, categories <code>selective_coding</code> Identify core category codes, relationships <code>summarize_code</code> Generate summary of coded content code, all segments <code>compare_cases</code> Compare coding across cases cases, segments <code>identify_patterns</code> Find patterns in coded data codes, co-occurrences <code>write_memo</code> Generate analytical memo code/category, segments"},{"location":"design/AGENT_CONTEXT_DESIGN/#6-event-streaming","title":"6. Event Streaming","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#61-event-flow-architecture","title":"6.1 Event Flow Architecture","text":"<pre><code>graph TB\n    subgraph \"Domain Layer\"\n        DC[Domain Controllers]\n        DC --&gt; |emit| EB[Event Bus]\n    end\n\n    subgraph \"Agent Context\"\n        EB --&gt; EF[Event Filter]\n        EF --&gt; |per session| ES[Event Serializer]\n        ES --&gt; EP[Event Publisher]\n\n        subgraph \"Subscribers\"\n            S1[Session 1: Claude]\n            S2[Session 2: Gemini]\n            S3[Session 3: Local UI]\n        end\n\n        EP --&gt; S1\n        EP --&gt; S2\n        EP --&gt; S3\n    end\n\n    subgraph \"Event Store\"\n        EB --&gt; STORE[(Event Log)]\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#62-event-categories","title":"6.2 Event Categories","text":"<pre><code>graph TB\n    subgraph \"Domain Events\"\n        subgraph \"Coding Events\"\n            CE1[CodeCreated]\n            CE2[CodeRenamed]\n            CE3[CodeDeleted]\n            CE4[CodesMerged]\n            CE5[SegmentCoded]\n            CE6[SegmentUncoded]\n            CE7[CategoryCreated]\n            CE8[CategoryDeleted]\n        end\n\n        subgraph \"Source Events\"\n            SE1[SourceImported]\n            SE2[SourceRenamed]\n            SE3[SourceDeleted]\n            SE4[TextExtracted]\n        end\n\n        subgraph \"Case Events\"\n            CSE1[CaseCreated]\n            CSE2[CaseDeleted]\n            CSE3[MemberAdded]\n            CSE4[AttributeSet]\n        end\n\n        subgraph \"Analysis Events\"\n            AE1[ReportStarted]\n            AE2[ReportCompleted]\n            AE3[ReportFailed]\n        end\n\n        subgraph \"System Events\"\n            SYS1[ProjectOpened]\n            SYS2[ProjectClosed]\n            SYS3[SessionConnected]\n            SYS4[SessionDisconnected]\n        end\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#63-event-subscription-model","title":"6.3 Event Subscription Model","text":"<pre><code>sequenceDiagram\n    participant AI as AI Client\n    participant AC as Agent Context\n    participant EB as Event Bus\n\n    AI-&gt;&gt;AC: subscribe([\"coding.*\", \"source.imported\"])\n    AC-&gt;&gt;AC: Register subscription for session\n    AC--&gt;&gt;AI: subscription_id\n\n    Note over EB: Domain event occurs\n\n    EB-&gt;&gt;AC: CodeCreated event\n    AC-&gt;&gt;AC: Check subscriptions\n    AC-&gt;&gt;AC: Session matches \"coding.*\"\n    AC-&gt;&gt;AI: Push: CodeCreated event\n\n    EB-&gt;&gt;AC: CaseCreated event\n    AC-&gt;&gt;AC: Check subscriptions\n    AC-&gt;&gt;AC: No match for this session\n    Note over AC: Event not sent to this AI\n\n    AI-&gt;&gt;AC: unsubscribe(subscription_id)\n    AC--&gt;&gt;AI: OK</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#64-event-schema","title":"6.4 Event Schema","text":"<pre><code>Event Structure:\n{\n  \"event_id\": \"evt_abc123\",\n  \"event_type\": \"coding.segment_coded\",\n  \"timestamp\": \"2024-01-15T10:30:00.123Z\",\n  \"aggregate_type\": \"Segment\",\n  \"aggregate_id\": \"seg_456\",\n  \"caused_by\": {\n    \"session_id\": \"sess_789\",\n    \"client_type\": \"claude_code\",\n    \"user\": \"researcher1\"\n  },\n  \"payload\": {\n    \"segment_id\": \"seg_456\",\n    \"code_id\": 42,\n    \"code_name\": \"Pain Management\",\n    \"source_id\": 1,\n    \"source_name\": \"Interview_P01.txt\",\n    \"start_pos\": 1250,\n    \"end_pos\": 1380,\n    \"selected_text\": \"The pain was constant...\"\n  },\n  \"metadata\": {\n    \"correlation_id\": \"corr_xyz\",\n    \"sequence_number\": 1547\n  }\n}\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#65-event-delivery-guarantees","title":"6.5 Event Delivery Guarantees","text":"Guarantee Implementation At-least-once Events persisted before acknowledgment Ordering Per-aggregate ordering via sequence numbers Replay Event store supports replay from sequence Filtering Server-side filtering by subscription Backpressure Client acknowledgment, buffering limits"},{"location":"design/AGENT_CONTEXT_DESIGN/#7-session-management","title":"7. Session Management","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#71-session-lifecycle","title":"7.1 Session Lifecycle","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; Connecting: Client connects\n\n    Connecting --&gt; Authenticating: Protocol handshake\n    Authenticating --&gt; Failed: Auth failed\n    Authenticating --&gt; Active: Auth success\n\n    Failed --&gt; [*]\n\n    Active --&gt; Active: Tool calls, events\n    Active --&gt; Idle: No activity\n    Idle --&gt; Active: New activity\n    Idle --&gt; Expired: Timeout\n\n    Active --&gt; Disconnecting: Client disconnect\n    Idle --&gt; Disconnecting: Client disconnect\n    Expired --&gt; Disconnecting: Force cleanup\n\n    Disconnecting --&gt; [*]: Cleanup complete</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#72-session-data-model","title":"7.2 Session Data Model","text":"<pre><code>classDiagram\n    class Session {\n        +session_id: str\n        +client_type: ClientType\n        +client_name: str\n        +created_at: datetime\n        +last_activity: datetime\n        +status: SessionStatus\n        +subscriptions: List~Subscription~\n        +context: SessionContext\n    }\n\n    class ClientType {\n        &lt;&lt;enumeration&gt;&gt;\n        CLAUDE_CODE\n        GEMINI_CLI\n        REST_CLIENT\n        LOCAL_UI\n        CUSTOM\n    }\n\n    class SessionStatus {\n        &lt;&lt;enumeration&gt;&gt;\n        CONNECTING\n        ACTIVE\n        IDLE\n        DISCONNECTING\n    }\n\n    class Subscription {\n        +subscription_id: str\n        +event_patterns: List~str~\n        +created_at: datetime\n    }\n\n    class SessionContext {\n        +project_id: str\n        +user_id: str\n        +trust_level: TrustLevel\n        +preferences: Dict\n    }\n\n    Session --&gt; ClientType\n    Session --&gt; SessionStatus\n    Session --&gt; \"*\" Subscription\n    Session --&gt; SessionContext</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#73-multi-session-handling","title":"7.3 Multi-Session Handling","text":"<pre><code>graph TB\n    subgraph \"Concurrent Sessions\"\n        S1[Session 1&lt;br/&gt;Claude Code&lt;br/&gt;User: Alice]\n        S2[Session 2&lt;br/&gt;Gemini CLI&lt;br/&gt;User: Alice]\n        S3[Session 3&lt;br/&gt;Local UI&lt;br/&gt;User: Alice]\n        S4[Session 4&lt;br/&gt;Claude Code&lt;br/&gt;User: Bob]\n    end\n\n    subgraph \"Session Manager\"\n        SM[Session Registry]\n        LOCK[Conflict Detection]\n        SYNC[State Sync]\n    end\n\n    subgraph \"Conflict Scenarios\"\n        C1[Same entity modified&lt;br/&gt;by multiple sessions]\n        C2[Concurrent deletes]\n        C3[Interleaved operations]\n    end\n\n    S1 --&gt; SM\n    S2 --&gt; SM\n    S3 --&gt; SM\n    S4 --&gt; SM\n\n    SM --&gt; LOCK\n    SM --&gt; SYNC\n\n    LOCK --&gt; C1\n    LOCK --&gt; C2\n    LOCK --&gt; C3</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#74-conflict-resolution-strategy","title":"7.4 Conflict Resolution Strategy","text":"Scenario Strategy Implementation Same code renamed by two sessions Last-write-wins Version number check Code deleted while being applied Reject late operation Optimistic locking Concurrent segment creation Allow both No conflict (different IDs) Same segment modified Last-write-wins with notification Event to other sessions"},{"location":"design/AGENT_CONTEXT_DESIGN/#8-security-and-trust","title":"8. Security and Trust","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#81-trust-level-model","title":"8.1 Trust Level Model","text":"<pre><code>graph TB\n    subgraph \"Trust Levels\"\n        AUTO[Autonomous&lt;br/&gt;Execute immediately]\n        NOTIFY[Notify&lt;br/&gt;Execute + inform user]\n        SUGGEST[Suggest&lt;br/&gt;Queue for approval]\n        REQUIRE[Require&lt;br/&gt;Block until approved]\n    end\n\n    subgraph \"Tool Risk Categories\"\n        LOW[Low Risk&lt;br/&gt;Read operations&lt;br/&gt;Search, reports]\n        MEDIUM[Medium Risk&lt;br/&gt;Create operations&lt;br/&gt;Add codes, segments]\n        HIGH[High Risk&lt;br/&gt;Modify operations&lt;br/&gt;Rename, move]\n        CRITICAL[Critical Risk&lt;br/&gt;Destroy operations&lt;br/&gt;Delete, merge]\n    end\n\n    LOW --&gt; AUTO\n    MEDIUM --&gt; NOTIFY\n    HIGH --&gt; SUGGEST\n    CRITICAL --&gt; REQUIRE</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#82-default-trust-configuration","title":"8.2 Default Trust Configuration","text":"Tool Category Default Trust Can Override To Read/Query Autonomous - Search Autonomous - Report Generation Autonomous Notify Create Code Suggest Notify, Autonomous Apply Code Notify Suggest, Autonomous Rename Suggest Notify Delete Require Suggest Merge Require Suggest Bulk Operations Require -"},{"location":"design/AGENT_CONTEXT_DESIGN/#83-approval-workflow","title":"8.3 Approval Workflow","text":"<pre><code>sequenceDiagram\n    participant AI as AI Client\n    participant AC as Agent Context\n    participant UI as QualCoder UI\n    participant User\n\n    AI-&gt;&gt;AC: call_tool(\"delete_code\", {code_id: 42})\n    AC-&gt;&gt;AC: Check trust level: REQUIRE\n\n    AC-&gt;&gt;UI: Queue approval request\n    AC--&gt;&gt;AI: {status: \"pending_approval\", request_id: \"req_123\"}\n\n    UI-&gt;&gt;User: Show approval dialog\n    Note over UI: \"Claude wants to delete&lt;br/&gt;code 'Pain Management'&lt;br/&gt;[Approve] [Reject]\"\n\n    alt User Approves\n        User-&gt;&gt;UI: Click Approve\n        UI-&gt;&gt;AC: approve(request_id)\n        AC-&gt;&gt;AC: Execute delete_code\n        AC--&gt;&gt;AI: Event: ApprovalGranted\n        AC--&gt;&gt;AI: Event: CodeDeleted\n    else User Rejects\n        User-&gt;&gt;UI: Click Reject\n        UI-&gt;&gt;AC: reject(request_id, reason?)\n        AC--&gt;&gt;AI: Event: ApprovalDenied\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#84-security-boundaries","title":"8.4 Security Boundaries","text":"<pre><code>graph TB\n    subgraph \"External AI\"\n        AI[AI Client]\n    end\n\n    subgraph \"Agent Context Security\"\n        AUTH[Authentication]\n        AUTHZ[Authorization]\n        RATE[Rate Limiting]\n        AUDIT[Audit Logging]\n        VALID[Input Validation]\n    end\n\n    subgraph \"Protected Domain\"\n        DOMAIN[Domain Layer]\n        DATA[(Database)]\n    end\n\n    AI --&gt; AUTH\n    AUTH --&gt; AUTHZ\n    AUTHZ --&gt; RATE\n    RATE --&gt; VALID\n    VALID --&gt; DOMAIN\n    DOMAIN --&gt; DATA\n\n    AUDIT -.-&gt; AUTH\n    AUDIT -.-&gt; AUTHZ\n    AUDIT -.-&gt; VALID\n    AUDIT -.-&gt; DOMAIN</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#85-rate-limiting","title":"8.5 Rate Limiting","text":"Limit Type Default Purpose Requests/minute 60 Prevent runaway AI Tool calls/minute 30 Limit mutations Events/second 100 Backpressure Pending approvals 10 Prevent queue overflow"},{"location":"design/AGENT_CONTEXT_DESIGN/#9-integration-patterns","title":"9. Integration Patterns","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#91-claude-code-integration-mcp","title":"9.1 Claude Code Integration (MCP)","text":"<pre><code>sequenceDiagram\n    participant User\n    participant Claude as Claude Code CLI\n    participant MCP as QualCoder MCP Server\n    participant QC as QualCoder Domain\n\n    Note over User,Claude: User starts Claude Code&lt;br/&gt;with QualCoder MCP configured\n\n    Claude-&gt;&gt;MCP: Initialize connection (stdio)\n    MCP--&gt;&gt;Claude: Server capabilities\n\n    Claude-&gt;&gt;MCP: tools/list\n    MCP--&gt;&gt;Claude: Available tools\n\n    Claude-&gt;&gt;MCP: resources/list\n    MCP--&gt;&gt;Claude: Available resources\n\n    User-&gt;&gt;Claude: \"What codes do I have?\"\n    Claude-&gt;&gt;MCP: resources/read \"qualcoder://codes\"\n    MCP-&gt;&gt;QC: Query codes\n    QC--&gt;&gt;MCP: Code list\n    MCP--&gt;&gt;Claude: Code data\n    Claude-&gt;&gt;User: \"You have 47 codes including...\"\n\n    User-&gt;&gt;Claude: \"Apply 'Anxiety' to line 45-50 in Interview 1\"\n    Claude-&gt;&gt;MCP: tools/call \"apply_code\" {...}\n    MCP-&gt;&gt;QC: ApplyCode command\n    QC--&gt;&gt;MCP: Success + SegmentCoded event\n    MCP--&gt;&gt;Claude: Result\n    Claude-&gt;&gt;User: \"Done! Applied 'Anxiety' to that segment.\"</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#92-mcp-server-configuration","title":"9.2 MCP Server Configuration","text":"<pre><code># claude_code_config.json (user's Claude Code config)\n\n{\n  \"mcpServers\": {\n    \"qualcoder\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"qualcoder.agent_context.mcp_server\"],\n      \"env\": {\n        \"QUALCODER_PROJECT\": \"/path/to/project.qda\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#93-gemini-cli-integration-rest","title":"9.3 Gemini CLI Integration (REST)","text":"<pre><code>sequenceDiagram\n    participant User\n    participant Gemini as Gemini CLI\n    participant REST as QualCoder REST API\n    participant QC as QualCoder Domain\n\n    Note over User,REST: QualCoder runs REST server&lt;br/&gt;Gemini configured with endpoint\n\n    Gemini-&gt;&gt;REST: POST /session/create\n    REST--&gt;&gt;Gemini: {session_id, capabilities}\n\n    User-&gt;&gt;Gemini: \"Show me uncoded sources\"\n    Gemini-&gt;&gt;REST: GET /state/sources?coded=false\n    REST-&gt;&gt;QC: Query\n    QC--&gt;&gt;REST: Sources\n    REST--&gt;&gt;Gemini: Source list\n    Gemini-&gt;&gt;User: \"3 sources haven't been coded...\"\n\n    User-&gt;&gt;Gemini: \"Start coding the first one\"\n    Gemini-&gt;&gt;REST: GET /state/sources/1/content\n    REST--&gt;&gt;Gemini: Content\n\n    Note over Gemini: Analyzes content...\n\n    Gemini-&gt;&gt;REST: POST /commands/coding/create_code\n    REST-&gt;&gt;QC: CreateCode command\n    QC--&gt;&gt;REST: Success\n    REST--&gt;&gt;Gemini: {code_id: 42}\n\n    Gemini-&gt;&gt;REST: POST /commands/coding/apply_code\n    REST--&gt;&gt;Gemini: Success</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#94-local-model-integration-ollama","title":"9.4 Local Model Integration (Ollama)","text":"<pre><code>graph TB\n    subgraph \"User's Machine\"\n        subgraph \"QualCoder\"\n            QC[QualCoder App]\n            AC[Agent Context]\n            EA[Embedded Agent]\n        end\n\n        subgraph \"Local AI\"\n            OLLAMA[Ollama Server]\n            MODEL[llama3.2 / codellama]\n        end\n    end\n\n    QC --&gt; AC\n    AC --&gt; EA\n    EA --&gt;|HTTP localhost:11434| OLLAMA\n    OLLAMA --&gt; MODEL\n\n    Note1[No internet required]\n    Note2[No API costs]\n    Note3[Data stays local]</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#95-hybrid-mode-multiple-ais","title":"9.5 Hybrid Mode (Multiple AIs)","text":"<pre><code>graph TB\n    subgraph \"AI Clients\"\n        C1[Claude Code&lt;br/&gt;Primary coding]\n        C2[Local Ollama&lt;br/&gt;Quick queries]\n        C3[Gemini&lt;br/&gt;Analysis]\n    end\n\n    subgraph \"Agent Context\"\n        SM[Session Manager]\n\n        S1[Session 1]\n        S2[Session 2]\n        S3[Session 3]\n    end\n\n    subgraph \"QualCoder Domain\"\n        DOMAIN[Shared State]\n    end\n\n    C1 --&gt; S1\n    C2 --&gt; S2\n    C3 --&gt; S3\n\n    S1 --&gt; SM\n    S2 --&gt; SM\n    S3 --&gt; SM\n\n    SM --&gt; DOMAIN</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#10-deployment-modes","title":"10. Deployment Modes","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#101-mode-overview","title":"10.1 Mode Overview","text":"<pre><code>graph TB\n    subgraph \"Mode 1: Desktop with GUI\"\n        M1_GUI[PyQt6 GUI]\n        M1_AC[Agent Context]\n        M1_DOMAIN[Domain]\n        M1_DB[(SQLite)]\n\n        M1_GUI --&gt; M1_DOMAIN\n        M1_AC --&gt; M1_DOMAIN\n        M1_DOMAIN --&gt; M1_DB\n    end\n\n    subgraph \"Mode 2: Headless Server\"\n        M2_AC[Agent Context&lt;br/&gt;REST/MCP/WS]\n        M2_DOMAIN[Domain]\n        M2_DB[(SQLite)]\n\n        M2_AC --&gt; M2_DOMAIN\n        M2_DOMAIN --&gt; M2_DB\n    end\n\n    subgraph \"Mode 3: Hybrid\"\n        M3_GUI[PyQt6 GUI&lt;br/&gt;Optional viewer]\n        M3_AC[Agent Context]\n        M3_DOMAIN[Domain]\n        M3_DB[(SQLite)]\n\n        M3_GUI -.-&gt; M3_DOMAIN\n        M3_AC --&gt; M3_DOMAIN\n        M3_DOMAIN --&gt; M3_DB\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#102-desktop-mode-gui-primary","title":"10.2 Desktop Mode (GUI Primary)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            QualCoder Desktop            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502         PyQt6 GUI               \u2502    \u2502\n\u2502  \u2502   (Primary interaction mode)    \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                  \u2502                      \u2502\n\u2502                  \u25bc                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502       Agent Context             \u2502    \u2502\n\u2502  \u2502  (Optional AI assistance)       \u2502    \u2502\n\u2502  \u2502  \u2022 MCP server on localhost      \u2502    \u2502\n\u2502  \u2502  \u2022 User can connect Claude Code \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                  \u2502                      \u2502\n\u2502                  \u25bc                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502       Domain Layer              \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nUse case: Traditional researcher who sometimes\nwants AI help but primarily uses GUI\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#103-headless-mode-ai-primary","title":"10.3 Headless Mode (AI Primary)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         QualCoder Server                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502       Agent Context             \u2502    \u2502\n\u2502  \u2502   (Primary interaction mode)    \u2502    \u2502\n\u2502  \u2502  \u2022 MCP server (stdio/HTTP)      \u2502    \u2502\n\u2502  \u2502  \u2022 REST API                     \u2502    \u2502\n\u2502  \u2502  \u2022 WebSocket for events         \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                  \u2502                      \u2502\n\u2502                  \u25bc                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502       Domain Layer              \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nStarted via:\n$ qualcoder-server --project /path/to/project.qda\n\nUse case: Researcher works entirely through\nClaude Code or other AI interface\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#104-hybrid-mode-gui-as-observer","title":"10.4 Hybrid Mode (GUI as Observer)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        QualCoder Hybrid                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502         PyQt6 GUI               \u2502    \u2502\n\u2502  \u2502   (Observer/approval mode)      \u2502    \u2502\n\u2502  \u2502  \u2022 Shows AI actions in real-time\u2502    \u2502\n\u2502  \u2502  \u2022 Approval dialogs             \u2502    \u2502\n\u2502  \u2502  \u2022 Can intervene/override       \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                  \u2502                      \u2502\n\u2502                  \u25bc                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502       Agent Context             \u2502    \u2502\n\u2502  \u2502   (Primary interaction mode)    \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                  \u2502                      \u2502\n\u2502                  \u25bc                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502       Domain Layer              \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nUse case: Researcher uses AI but wants to\nwatch and approve actions, maintaining control\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#105-startup-sequences","title":"10.5 Startup Sequences","text":"<pre><code>sequenceDiagram\n    participant User\n    participant QC as QualCoder\n    participant AC as Agent Context\n    participant AI as AI CLI\n\n    rect rgb(200, 230, 200)\n        Note over User,AI: Desktop Mode Startup\n        User-&gt;&gt;QC: Launch QualCoder\n        QC-&gt;&gt;QC: Start GUI\n        QC-&gt;&gt;AC: Start Agent Context (background)\n        AC-&gt;&gt;AC: Listen on localhost:PORT\n        Note over User: User works with GUI,&lt;br/&gt;optionally connects AI later\n    end\n\n    rect rgb(200, 200, 230)\n        Note over User,AI: Headless Mode Startup\n        User-&gt;&gt;QC: $ qualcoder-server --project X\n        QC-&gt;&gt;AC: Start Agent Context (foreground)\n        AC-&gt;&gt;AC: Listen on configured interfaces\n        User-&gt;&gt;AI: Start AI CLI with QualCoder config\n        AI-&gt;&gt;AC: Connect\n        Note over User: User works entirely through AI\n    end\n\n    rect rgb(230, 200, 200)\n        Note over User,AI: Hybrid Mode Startup\n        User-&gt;&gt;QC: Launch QualCoder --ai-primary\n        QC-&gt;&gt;AC: Start Agent Context\n        QC-&gt;&gt;QC: Start GUI in observer mode\n        User-&gt;&gt;AI: Start AI CLI\n        AI-&gt;&gt;AC: Connect\n        Note over User: AI is primary, GUI shows activity\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#11-real-time-ui-observation","title":"11. Real-Time UI Observation","text":"<p>This section describes how the PyQt6 GUI stays synchronized with AI agent activity, enabling users to observe, intervene, and approve AI actions in real-time.</p>"},{"location":"design/AGENT_CONTEXT_DESIGN/#111-core-principle-ui-as-event-subscriber","title":"11.1 Core Principle: UI as Event Subscriber","text":"<p>The PyQt6 UI is architecturally identical to external AI clients - it's just another subscriber to the domain event bus. This ensures perfect consistency between what AI sees and what the user sees.</p> <pre><code>graph TB\n    subgraph \"Domain Layer\"\n        CMD[Command Execution]\n        CMD --&gt; EVT[Domain Event]\n        EVT --&gt; BUS[Event Bus]\n    end\n\n    subgraph \"Subscribers - All Equal\"\n        BUS --&gt; AI[AI Client&lt;br/&gt;Claude/Gemini]\n        BUS --&gt; UI[PyQt6 UI&lt;br/&gt;Local Observer]\n        BUS --&gt; LOG[Audit Logger]\n        BUS --&gt; CACHE[State Cache]\n    end\n\n    style AI fill:#90EE90\n    style UI fill:#90EE90</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#112-signal-bridge-architecture","title":"11.2 Signal Bridge Architecture","text":"<p>The Signal Bridge translates domain events into PyQt6 signals for thread-safe UI updates.</p> <pre><code>graph TB\n    subgraph \"Domain Layer\"\n        EB[Event Bus]\n    end\n\n    subgraph \"Signal Bridge\"\n        RECV[Event Receiver&lt;br/&gt;Background Thread]\n        CONV[Signal Converter]\n        EMIT[Qt Signal Emitter]\n\n        EB --&gt; RECV\n        RECV --&gt; CONV\n        CONV --&gt; EMIT\n    end\n\n    subgraph \"PyQt6 UI Thread\"\n        subgraph \"Signal Slots\"\n            S1[on_code_created]\n            S2[on_segment_coded]\n            S3[on_source_imported]\n            S4[on_approval_requested]\n        end\n\n        subgraph \"UI Updates\"\n            U1[Update Code Tree]\n            U2[Highlight Segment]\n            U3[Refresh Source List]\n            U4[Show Approval Dialog]\n        end\n    end\n\n    EMIT --&gt; S1\n    EMIT --&gt; S2\n    EMIT --&gt; S3\n    EMIT --&gt; S4\n\n    S1 --&gt; U1\n    S2 --&gt; U2\n    S3 --&gt; U3\n    S4 --&gt; U4</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#113-event-to-signal-mapping","title":"11.3 Event-to-Signal Mapping","text":"Domain Event Qt Signal UI Handler Visual Effect <code>CodeCreated</code> <code>code_created(code_data)</code> <code>on_code_created()</code> Add to code tree with AI badge <code>CodeDeleted</code> <code>code_deleted(code_id)</code> <code>on_code_deleted()</code> Remove from code tree <code>SegmentCoded</code> <code>segment_coded(segment_data)</code> <code>on_segment_coded()</code> Highlight text, update counts <code>SegmentUncoded</code> <code>segment_uncoded(segment_id)</code> <code>on_segment_uncoded()</code> Remove highlight <code>SourceImported</code> <code>source_imported(source_data)</code> <code>on_source_imported()</code> Add to source list <code>ApprovalRequested</code> <code>approval_requested(request)</code> <code>on_approval_requested()</code> Show approval dialog <code>SessionConnected</code> <code>agent_connected(session)</code> <code>on_agent_connected()</code> Update status bar <code>SessionDisconnected</code> <code>agent_disconnected(session)</code> <code>on_agent_disconnected()</code> Update status bar"},{"location":"design/AGENT_CONTEXT_DESIGN/#114-main-window-layout-with-agent-observation","title":"11.4 Main Window Layout with Agent Observation","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  QualCoder - Healthcare Study                    [Agent: \u25cf Claude Connected]\u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  File  Edit  View  Coding  Cases  Reports  AI  Help                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502     Code Tree       \u2502  \u2502              Source View                    \u2502  \u2502\n\u2502  \u2502                     \u2502  \u2502                                             \u2502  \u2502\n\u2502  \u2502  \u25bc Health Themes    \u2502  \u2502  Interview_P01.txt                         \u2502  \u2502\n\u2502  \u2502    \u251c\u2500 Pain Mgmt  \u25cf  \u2502  \u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502  \u2502\n\u2502  \u2502    \u251c\u2500 Anxiety   \u25cfAI \u2502  \u2502                                             \u2502  \u2502\n\u2502  \u2502    \u2514\u2500 Coping        \u2502  \u2502  \"When I first got the diagnosis, I felt   \u2502  \u2502\n\u2502  \u2502  \u25bc Support          \u2502  \u2502   completely overwhelmed. [The anxiety was \u2502  \u2502\n\u2502  \u2502    \u2514\u2500 Family        \u2502  \u2502   constant]\u208dAnxiety\u208e, keeping me up at     \u2502  \u2502\n\u2502  \u2502                     \u2502  \u2502   night and making it hard to focus...\"    \u2502  \u2502\n\u2502  \u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502  \u2502                    \u2191                        \u2502  \u2502\n\u2502  \u2502  Codes: 47          \u2502  \u2502         [AI just highlighted this]         \u2502  \u2502\n\u2502  \u2502  AI-created: 12     \u2502  \u2502                                             \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  Agent Activity                               [Filter \u25bc] [\u23f8 Pause]  \u2502   \u2502\n\u2502  \u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502   \u2502\n\u2502  \u2502  \u25cf 10:32:15  Claude  Created code \"Anxiety\" (Health Themes)         \u2502   \u2502\n\u2502  \u2502  \u25cf 10:32:18  Claude  Applied \"Anxiety\" to Interview_P01 (pos 127)   \u2502   \u2502\n\u2502  \u2502  \u25cf 10:32:21  Claude  Applied \"Anxiety\" to Interview_P01 (pos 892)   \u2502   \u2502\n\u2502  \u2502  \u25d0 10:32:24  Claude  [PENDING] Create code \"Sleep Disruption\"       \u2502   \u2502\n\u2502  \u2502                                    [\u2713 Approve] [\u2717 Reject] [\u270e Edit]  \u2502   \u2502\n\u2502  \u2502  \u25cb 10:32:25  Claude  [QUEUED] Apply \"Sleep Disruption\" to 3 segments\u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Claude: 3 actions/min \u2502 Pending: 1 \u2502 Trust: Suggest \u2502 [\u2699 Settings]        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#115-agent-activity-panel-design","title":"11.5 Agent Activity Panel Design","text":"<p>The Agent Activity Panel is a dockable widget showing real-time AI operations.</p> <pre><code>classDiagram\n    class AgentActivityPanel {\n        +activity_list: QListWidget\n        +filter_combo: QComboBox\n        +pause_button: QPushButton\n        +settings_button: QPushButton\n        +is_paused: bool\n        +max_items: int\n        +add_activity(activity: ActivityItem)\n        +filter_by_type(event_type: str)\n        +pause_resume()\n        +clear_history()\n    }\n\n    class ActivityItem {\n        +timestamp: datetime\n        +session_id: str\n        +client_name: str\n        +event_type: str\n        +description: str\n        +status: ActivityStatus\n        +payload: dict\n        +request_id: Optional~str~\n    }\n\n    class ActivityStatus {\n        &lt;&lt;enumeration&gt;&gt;\n        COMPLETED\n        PENDING_APPROVAL\n        QUEUED\n        REJECTED\n        FAILED\n    }\n\n    class ActivityItemWidget {\n        +icon: QLabel\n        +timestamp_label: QLabel\n        +client_label: QLabel\n        +description_label: QLabel\n        +action_buttons: QWidget\n        +approve_btn: QPushButton\n        +reject_btn: QPushButton\n        +edit_btn: QPushButton\n    }\n\n    AgentActivityPanel --&gt; \"*\" ActivityItem\n    ActivityItem --&gt; ActivityStatus\n    AgentActivityPanel --&gt; \"*\" ActivityItemWidget</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#activity-item-visual-states","title":"Activity Item Visual States","text":"<pre><code>graph LR\n    subgraph \"Activity Status Icons\"\n        C[\u25cf Completed&lt;br/&gt;Green]\n        P[\u25d0 Pending&lt;br/&gt;Yellow/Pulse]\n        Q[\u25cb Queued&lt;br/&gt;Gray]\n        R[\u2717 Rejected&lt;br/&gt;Red]\n        F[\u26a0 Failed&lt;br/&gt;Orange]\n    end</code></pre> Status Icon Color Animation User Action Completed \u25cf Green None Click to see details Pending Approval \u25d0 Yellow Pulse Approve/Reject/Edit buttons Queued \u25cb Gray None Depends on pending item Rejected \u2717 Red None Can retry if desired Failed \u26a0 Orange None Click to see error"},{"location":"design/AGENT_CONTEXT_DESIGN/#116-source-view-live-updates","title":"11.6 Source View Live Updates","text":"<p>When an AI applies a code to a segment, the Source View updates in real-time.</p> <pre><code>sequenceDiagram\n    participant AI as AI Client\n    participant AC as Agent Context\n    participant Domain as Domain Layer\n    participant Bridge as Signal Bridge\n    participant SV as Source View Widget\n\n    AI-&gt;&gt;AC: apply_code(code_id, source_id, start, end)\n    AC-&gt;&gt;Domain: ApplyCode command\n    Domain-&gt;&gt;Domain: Create segment\n    Domain-&gt;&gt;Domain: Emit SegmentCoded event\n\n    Domain--&gt;&gt;Bridge: SegmentCoded event\n    Bridge-&gt;&gt;Bridge: Convert to Qt signal\n    Bridge-&gt;&gt;SV: segment_coded.emit(segment_data)\n\n    SV-&gt;&gt;SV: Check if source is currently displayed\n    alt Source is displayed\n        SV-&gt;&gt;SV: highlight_range(start, end, code_color)\n        SV-&gt;&gt;SV: add_margin_marker(code_name)\n        SV-&gt;&gt;SV: scroll_to_visible(start)\n        SV-&gt;&gt;SV: flash_highlight(duration=500ms)\n    else Source not displayed\n        SV-&gt;&gt;SV: queue_update(source_id, segment)\n    end\n\n    Note over SV: User sees text highlight&lt;br/&gt;appear with brief flash</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#highlight-animation-sequence","title":"Highlight Animation Sequence","text":"<pre><code>Time 0ms:    Normal text\nTime 50ms:   Highlight appears (code color, 40% opacity)\nTime 100ms:  Flash bright (code color, 80% opacity)\nTime 300ms:  Settle to normal (code color, 40% opacity)\nTime 500ms:  Animation complete, stable highlight\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#117-code-tree-real-time-updates","title":"11.7 Code Tree Real-Time Updates","text":"<p>The Code Tree reflects AI-created codes with visual distinction.</p> <pre><code>graph TB\n    subgraph \"Code Tree Visual Elements\"\n        subgraph \"Human-Created Code\"\n            HC[Pain Management]\n            HC_ICON[\u25cf Standard icon]\n            HC_COUNT[(45)]\n        end\n\n        subgraph \"AI-Created Code\"\n            AC[Anxiety]\n            AC_ICON[\u25cfAI Badge icon]\n            AC_COUNT[(12)]\n            AC_NEW[NEW indicator]\n        end\n\n        subgraph \"Category\"\n            CAT[\u25bc Health Themes]\n        end\n    end\n\n    CAT --&gt; HC\n    CAT --&gt; AC</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#code-tree-update-behavior","title":"Code Tree Update Behavior","text":"Event Tree Update Animation AI creates code Insert node with AI badge Slide-in + highlight AI deletes code Remove node Fade-out AI renames code Update label Brief highlight AI applies code Increment count badge Count pulse AI moves code Relocate in tree Slide animation"},{"location":"design/AGENT_CONTEXT_DESIGN/#118-approval-workflow-ux","title":"11.8 Approval Workflow UX","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#inline-approval-activity-panel","title":"Inline Approval (Activity Panel)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u25d0 10:32:24  Claude  [PENDING] Create code \"Sleep Disruption\"       \u2502\n\u2502              Category: Health Themes                                 \u2502\n\u2502              Memo: \"Instances where participants describe sleep...\"  \u2502\n\u2502                                                                      \u2502\n\u2502              [\u2713 Approve]  [\u2717 Reject]  [\u270e Edit Before Approve]       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#modal-approval-dialog-high-risk-actions","title":"Modal Approval Dialog (High-Risk Actions)","text":"<pre><code>graph TB\n    subgraph \"Approval Dialog\"\n        TITLE[Claude wants to delete code 'Outdated Theme']\n\n        subgraph \"Impact Analysis\"\n            I1[This will remove 23 coded segments]\n            I2[Segments will become uncoded]\n            I3[This action cannot be undone]\n        end\n\n        subgraph \"Actions\"\n            A1[Cancel]\n            A2[Reject with Reason]\n            A3[Approve]\n        end\n    end\n\n    TITLE --&gt; I1\n    I1 --&gt; I2\n    I2 --&gt; I3\n    I3 --&gt; A1\n    I3 --&gt; A2\n    I3 --&gt; A3</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#approval-flow-state-machine","title":"Approval Flow State Machine","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; Requested: AI requests action\n\n    Requested --&gt; DialogShown: UI displays approval\n    DialogShown --&gt; Approved: User clicks Approve\n    DialogShown --&gt; Rejected: User clicks Reject\n    DialogShown --&gt; Editing: User clicks Edit\n    DialogShown --&gt; Timeout: No response (5 min)\n\n    Editing --&gt; Approved: User saves &amp; approves\n    Editing --&gt; Cancelled: User cancels edit\n\n    Approved --&gt; Executing: Agent Context executes\n    Executing --&gt; Completed: Success\n    Executing --&gt; Failed: Error\n\n    Completed --&gt; [*]\n    Failed --&gt; [*]\n    Rejected --&gt; [*]\n    Cancelled --&gt; [*]\n    Timeout --&gt; Rejected: Auto-reject</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#119-control-panel-design","title":"11.9 Control Panel Design","text":"<p>The Control Panel provides user control over AI behavior.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Agent Control Panel                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                     \u2502\n\u2502  Connected Agents                                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  \u25cf Claude Code    Active    3/min    [Pause] [Disconnect]   \u2502   \u2502\n\u2502  \u2502  \u25cb Gemini CLI     Idle      0/min    [Pause] [Disconnect]   \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                     \u2502\n\u2502  Trust Level                              [?]                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  \u25cb Autonomous - AI acts freely (read-only still safe)       \u2502   \u2502\n\u2502  \u2502  \u25cb Notify - AI acts, you're notified                        \u2502   \u2502\n\u2502  \u2502  \u25cf Suggest - AI proposes, you approve (Recommended)         \u2502   \u2502\n\u2502  \u2502  \u25cb Require - All actions need approval                      \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                     \u2502\n\u2502  Per-Tool Overrides                       [Expand \u25bc]               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  create_code:    [Suggest \u25bc]                                \u2502   \u2502\n\u2502  \u2502  apply_code:     [Notify \u25bc]                                 \u2502   \u2502\n\u2502  \u2502  delete_code:    [Require \u25bc] (locked)                       \u2502   \u2502\n\u2502  \u2502  merge_codes:    [Require \u25bc] (locked)                       \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                     \u2502\n\u2502  Rate Limiting                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  Actions per minute:  [30____] (current: 3)                 \u2502   \u2502\n\u2502  \u2502  Max pending approvals: [10____] (current: 1)               \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                                     \u2502\n\u2502  [Pause All Agents]  [Resume All]  [Disconnect All]                \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#1110-visual-indicators-ai-vs-human","title":"11.10 Visual Indicators: AI vs Human","text":"<p>Clear visual distinction between AI-created and human-created items.</p> <pre><code>graph TB\n    subgraph \"Visual Indicator System\"\n        subgraph \"Badges\"\n            B1[AI - Small badge on icon]\n            B2[Human - No badge/default]\n        end\n\n        subgraph \"Colors\"\n            C1[AI actions - Subtle blue tint]\n            C2[Human actions - Standard colors]\n        end\n\n        subgraph \"Icons\"\n            I1[\ud83e\udd16 Robot icon for AI session]\n            I2[\ud83d\udc64 Person icon for human]\n        end\n\n        subgraph \"Tooltips\"\n            T1[Created by Claude at 10:32:15]\n            T2[Created by researcher1 at 09:15:00]\n        end\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#indicator-placement","title":"Indicator Placement","text":"Element AI Indicator Human Indicator Code in tree <code>\u25cfAI</code> badge suffix No badge Segment highlight Blue-tinted border Standard border Activity feed Robot icon + client name Person icon + \"You\" Memo \"AI-generated\" prefix No prefix Tooltip \"Created by {AI name}\" \"Created by {username}\""},{"location":"design/AGENT_CONTEXT_DESIGN/#1111-interaction-modes","title":"11.11 Interaction Modes","text":"<p>Users can choose how they want to work with AI.</p> <pre><code>graph TB\n    subgraph \"Mode: Watch\"\n        W1[See all AI actions]\n        W2[No intervention]\n        W3[AI fully autonomous]\n    end\n\n    subgraph \"Mode: Collaborate\"\n        C1[Work alongside AI]\n        C2[Both make changes]\n        C3[See each other's work]\n    end\n\n    subgraph \"Mode: Supervise\"\n        S1[AI proposes everything]\n        S2[User approves each action]\n        S3[Full control retained]\n    end\n\n    subgraph \"Mode: Review\"\n        R1[AI works in background]\n        R2[User reviews batch later]\n        R3[Accept/reject in bulk]\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#mode-configuration","title":"Mode Configuration","text":"Mode Trust Level Activity Panel Approval Flow Watch Autonomous Read-only log None Collaborate Notify Interactive Notifications only Supervise Suggest/Require Interactive Per-action approval Review Autonomous Batch view Batch approval"},{"location":"design/AGENT_CONTEXT_DESIGN/#1112-notification-system","title":"11.12 Notification System","text":"<p>Non-intrusive notifications for AI activity when user is focused elsewhere.</p> <pre><code>graph TB\n    subgraph \"Notification Types\"\n        N1[Toast - Brief, auto-dismiss]\n        N2[Badge - Count on panel tab]\n        N3[Sound - Optional audio cue]\n        N4[System - OS notification]\n    end\n\n    subgraph \"Notification Triggers\"\n        T1[Action completed]\n        T2[Approval needed]\n        T3[Error occurred]\n        T4[AI connected/disconnected]\n    end\n\n    T1 --&gt; N1\n    T1 --&gt; N2\n    T2 --&gt; N1\n    T2 --&gt; N2\n    T2 --&gt; N3\n    T2 --&gt; N4\n    T3 --&gt; N1\n    T3 --&gt; N3\n    T4 --&gt; N1</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#toast-notification-examples","title":"Toast Notification Examples","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83e\udd16 Claude applied \"Anxiety\" to     \u2502\n\u2502    Interview_P01 (3 segments)       \u2502\n\u2502                        [View] [\u00d7]   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u26a0\ufe0f Claude needs approval to        \u2502\n\u2502    delete code \"Outdated Theme\"     \u2502\n\u2502                      [Review] [\u00d7]   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#1113-undoredo-for-ai-actions","title":"11.13 Undo/Redo for AI Actions","text":"<p>Users can undo AI actions just like their own.</p> <pre><code>sequenceDiagram\n    participant User\n    participant UI as QualCoder UI\n    participant AC as Agent Context\n    participant Domain as Domain Layer\n\n    Note over User,Domain: AI creates a code\n\n    User-&gt;&gt;UI: Press Ctrl+Z (Undo)\n    UI-&gt;&gt;UI: Check undo stack\n    UI-&gt;&gt;UI: Find last action (AI's CodeCreated)\n    UI-&gt;&gt;AC: Undo request (action_id)\n    AC-&gt;&gt;Domain: DeleteCode command (compensating)\n    Domain--&gt;&gt;AC: CodeDeleted event\n    AC--&gt;&gt;UI: Undo complete\n\n    UI-&gt;&gt;UI: Update code tree (remove code)\n    UI-&gt;&gt;UI: Add to redo stack\n\n    Note over User: User sees AI's code removed,&lt;br/&gt;can redo if desired</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#undo-stack-behavior","title":"Undo Stack Behavior","text":"Scenario Undo Behavior AI creates code Delete the code AI applies code to segment Remove the segment coding AI merges codes Cannot undo (destructive) AI deletes code Cannot undo (requires backup)"},{"location":"design/AGENT_CONTEXT_DESIGN/#1114-session-handoff","title":"11.14 Session Handoff","text":"<p>When user switches from AI to manual (or vice versa).</p> <pre><code>sequenceDiagram\n    participant User\n    participant UI as QualCoder UI\n    participant AI as Claude Code\n\n    Note over User,AI: User working in UI\n\n    User-&gt;&gt;UI: Working manually on Interview_P02\n\n    AI-&gt;&gt;UI: Wants to work on Interview_P02\n    UI-&gt;&gt;UI: Detect conflict (same source)\n    UI-&gt;&gt;User: \"Claude wants to code Interview_P02.&lt;br/&gt;Allow? [Yes, I'll watch] [No, I'm working]\"\n\n    alt User allows\n        User-&gt;&gt;UI: Click \"Yes, I'll watch\"\n        UI-&gt;&gt;AI: Source unlocked for AI\n        UI-&gt;&gt;UI: Switch to observer mode for this source\n    else User declines\n        User-&gt;&gt;UI: Click \"No, I'm working\"\n        UI-&gt;&gt;AI: Source busy, work on another\n        AI-&gt;&gt;AI: Choose different source\n    end</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#1115-performance-considerations","title":"11.15 Performance Considerations","text":"<p>Ensuring smooth UI performance during high AI activity.</p> Concern Solution High event rate Batch UI updates (16ms frame budget) Large activity log Virtual scrolling, limit to 1000 items Many highlights Lazy rendering, viewport-only updates Approval queue Max 10 pending, queue rest invisibly Memory usage Prune old activity items periodically <pre><code>graph TB\n    subgraph \"Event Throttling\"\n        E1[Domain Events&lt;br/&gt;100/sec possible]\n        E2[Batch Buffer&lt;br/&gt;Collect for 16ms]\n        E3[UI Update&lt;br/&gt;Single repaint]\n    end\n\n    E1 --&gt; E2\n    E2 --&gt; E3</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#1116-accessibility","title":"11.16 Accessibility","text":"<p>Ensuring AI observation features are accessible.</p> Feature Accessibility Support Activity feed Screen reader announces new items Approval dialogs Keyboard navigable, focus trapped Visual indicators Color + icon (not color alone) Toast notifications ARIA live regions Status changes Audio cues (optional)"},{"location":"design/AGENT_CONTEXT_DESIGN/#appendix-a-mcp-tool-schemas","title":"Appendix A: MCP Tool Schemas","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#create_code-tool","title":"create_code Tool","text":"<pre><code>{\n  \"name\": \"create_code\",\n  \"description\": \"Create a new code in the project codebook. Use this to define a new theme, concept, or category for coding qualitative data.\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": {\n        \"type\": \"string\",\n        \"description\": \"Name of the code (must be unique)\",\n        \"minLength\": 1,\n        \"maxLength\": 100\n      },\n      \"color\": {\n        \"type\": \"string\",\n        \"description\": \"Hex color for the code (e.g., '#FF6B6B')\",\n        \"pattern\": \"^#[0-9A-Fa-f]{6}$\"\n      },\n      \"memo\": {\n        \"type\": \"string\",\n        \"description\": \"Description or definition of what this code represents\"\n      },\n      \"category_id\": {\n        \"type\": \"integer\",\n        \"description\": \"ID of parent category (optional)\"\n      }\n    },\n    \"required\": [\"name\"]\n  }\n}\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#apply_code-tool","title":"apply_code Tool","text":"<pre><code>{\n  \"name\": \"apply_code\",\n  \"description\": \"Apply an existing code to a segment of text in a source document. This creates a coded segment that associates the selected text with the code's meaning.\",\n  \"inputSchema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"code_id\": {\n        \"type\": \"integer\",\n        \"description\": \"ID of the code to apply\"\n      },\n      \"source_id\": {\n        \"type\": \"integer\",\n        \"description\": \"ID of the source document\"\n      },\n      \"start_position\": {\n        \"type\": \"integer\",\n        \"description\": \"Character position where the segment starts\",\n        \"minimum\": 0\n      },\n      \"end_position\": {\n        \"type\": \"integer\",\n        \"description\": \"Character position where the segment ends\",\n        \"minimum\": 0\n      },\n      \"memo\": {\n        \"type\": \"string\",\n        \"description\": \"Optional note about why this code was applied here\"\n      },\n      \"importance\": {\n        \"type\": \"integer\",\n        \"description\": \"Importance level (0-2, where 2 is most important)\",\n        \"minimum\": 0,\n        \"maximum\": 2,\n        \"default\": 0\n      }\n    },\n    \"required\": [\"code_id\", \"source_id\", \"start_position\", \"end_position\"]\n  }\n}\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#appendix-b-event-type-reference","title":"Appendix B: Event Type Reference","text":"Event Type Payload Fields Triggered By <code>coding.code_created</code> code_id, name, color, memo, category_id create_code tool <code>coding.code_renamed</code> code_id, old_name, new_name rename_code tool <code>coding.code_deleted</code> code_id, name, segment_count delete_code tool <code>coding.codes_merged</code> source_code_id, target_code_id, segments_moved merge_codes tool <code>coding.segment_coded</code> segment_id, code_id, source_id, start, end, text apply_code tool <code>coding.segment_uncoded</code> segment_id, code_id, source_id remove_code tool <code>coding.category_created</code> category_id, name, parent_id create_category tool <code>source.imported</code> source_id, name, type, size import_source tool <code>source.deleted</code> source_id, name delete_source tool <code>case.created</code> case_id, name create_case tool <code>case.member_added</code> case_id, source_id, segment_range add_to_case tools <code>analysis.report_started</code> job_id, report_type, filters generate_report tools <code>analysis.report_completed</code> job_id, report_type, result_uri (async completion) <code>session.connected</code> session_id, client_type Client connection <code>session.disconnected</code> session_id, reason Client disconnect"},{"location":"design/AGENT_CONTEXT_DESIGN/#appendix-c-configuration-reference","title":"Appendix C: Configuration Reference","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#agent-context-configuration","title":"Agent Context Configuration","text":"<pre><code># qualcoder_agent.yaml\n\nagent_context:\n  # Protocol settings\n  protocols:\n    mcp:\n      enabled: true\n      transport: stdio  # or http\n      port: 3000       # if http\n    rest:\n      enabled: true\n      host: localhost\n      port: 8080\n    websocket:\n      enabled: true\n      port: 8081\n\n  # Session settings\n  sessions:\n    timeout_minutes: 30\n    max_concurrent: 5\n    heartbeat_interval_seconds: 30\n\n  # Trust settings\n  trust:\n    default_level: suggest  # auto, notify, suggest, require\n    overrides:\n      apply_code: notify\n      delete_code: require\n      search_*: auto\n\n  # Rate limiting\n  rate_limits:\n    requests_per_minute: 60\n    mutations_per_minute: 30\n\n  # Event streaming\n  events:\n    buffer_size: 1000\n    batch_interval_ms: 100\n    default_subscriptions:\n      - \"coding.*\"\n      - \"source.*\"\n      - \"analysis.*\"\n\n  # Logging\n  audit:\n    enabled: true\n    log_path: ~/.qualcoder/agent_audit.log\n    include_payload: true\n</code></pre>"},{"location":"design/AGENT_CONTEXT_DESIGN/#appendix-d-ui-signal-reference","title":"Appendix D: UI Signal Reference","text":""},{"location":"design/AGENT_CONTEXT_DESIGN/#qt-signals-for-agent-events","title":"Qt Signals for Agent Events","text":"Signal Parameters Emitted When <code>agent_connected</code> <code>session_id, client_type, client_name</code> AI client connects <code>agent_disconnected</code> <code>session_id, reason</code> AI client disconnects <code>code_created</code> <code>code_id, name, color, category_id, session_id</code> Code created (AI or human) <code>code_deleted</code> <code>code_id, session_id</code> Code deleted <code>code_renamed</code> <code>code_id, old_name, new_name, session_id</code> Code renamed <code>segment_coded</code> <code>segment_id, code_id, source_id, start, end, session_id</code> Segment coded <code>segment_uncoded</code> <code>segment_id, session_id</code> Segment uncoded <code>approval_requested</code> <code>request_id, action_type, description, payload</code> AI needs approval <code>approval_resolved</code> <code>request_id, approved, reason</code> Approval granted/denied <code>activity_logged</code> <code>activity_item</code> Any AI action for activity feed"},{"location":"design/AGENT_CONTEXT_DESIGN/#signal-connection-example","title":"Signal Connection Example","text":"<pre><code># In MainWindow.__init__\nself.signal_bridge.agent_connected.connect(self.on_agent_connected)\nself.signal_bridge.segment_coded.connect(self.source_view.on_segment_coded)\nself.signal_bridge.approval_requested.connect(self.activity_panel.on_approval_requested)\n\n# Handler example\ndef on_segment_coded(self, segment_id, code_id, source_id, start, end, session_id):\n    if source_id == self.current_source_id:\n        self.source_view.highlight_segment(start, end, self.get_code_color(code_id))\n        self.source_view.flash_highlight(start, end)\n    self.code_tree.increment_count(code_id)\n    if session_id != \"local\":  # AI action\n        self.activity_panel.add_activity(...)\n</code></pre> <p>Document Version: 1.1 Last Updated: 2026-01-29 Changes: Added Section 11 (Real-Time UI Observation) and Appendix D Companion to: FUNCTIONAL_DDD_DESIGN.md</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/","title":"QualCoder: Functional Domain-Driven Design Architecture","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#executive-summary","title":"Executive Summary","text":"<p>This document presents a comprehensive Functional Domain-Driven Design (fDDD) architecture for QualCoder, a qualitative data analysis application. The design emphasizes:</p> <ul> <li>Pure functions over stateful objects</li> <li>Immutable data structures for predictable behavior</li> <li>Explicit effects through a Functional Core / Imperative Shell architecture</li> <li>Type-driven development using Python's type system with runtime validation</li> <li>Event-driven communication between bounded contexts</li> </ul>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Design Philosophy</li> <li>Strategic Design: Bounded Contexts</li> <li>Context Map</li> <li>Tactical Patterns: Functional Approach</li> <li>Bounded Context Deep Dives</li> <li>Event Catalog</li> <li>Cross-Cutting Concerns</li> <li>Data Flow Architecture</li> <li>Migration Strategy</li> </ol>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#1-design-philosophy","title":"1. Design Philosophy","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#11-functional-ddd-principles","title":"1.1 Functional DDD Principles","text":"<pre><code>graph TB\n    subgraph \"Traditional OOP DDD\"\n        A[Entity with Behavior] --&gt; B[Mutable State]\n        B --&gt; C[Side Effects Hidden]\n    end\n\n    subgraph \"Functional DDD\"\n        D[Entity as Data Type] --&gt; E[Immutable Values]\n        E --&gt; F[Pure Functions]\n        F --&gt; G[Explicit Effects]\n    end\n\n    style D fill:#90EE90\n    style E fill:#90EE90\n    style F fill:#90EE90\n    style G fill:#90EE90</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#12-core-tenets","title":"1.2 Core Tenets","text":"Principle Description QualCoder Application Data as Types Entities are type definitions with validation <code>Code</code>, <code>Segment</code>, <code>Case</code> as frozen dataclasses Behavior as Functions Operations are pure functions over data <code>apply_code()</code>, <code>merge_codes()</code> as standalone functions Invariants as Predicates Business rules as boolean-returning functions <code>is_code_name_unique()</code>, <code>is_hierarchy_acyclic()</code> Derivers as Decision Makers Complex logic returns discriminated unions <code>derive_coding_event()</code> returns <code>Success | Failure</code> Controllers as Coordinators Async/IO operations in imperative shell <code>CodingController</code> handles DB and UI coordination"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#13-architecture-layers","title":"1.3 Architecture Layers","text":"<pre><code>graph TB\n    subgraph \"Imperative Shell\"\n        UI[PyQt6 UI Layer]\n        CTRL[Controllers]\n        REPO[Repositories]\n        DB[(SQLite)]\n    end\n\n    subgraph \"Functional Core\"\n        ENT[Entities / Value Objects]\n        INV[Invariants]\n        DER[Derivers]\n        EVT[Domain Events]\n    end\n\n    UI --&gt; CTRL\n    CTRL --&gt; DER\n    CTRL --&gt; REPO\n    DER --&gt; INV\n    DER --&gt; ENT\n    DER --&gt; EVT\n    REPO --&gt; DB\n\n    style ENT fill:#E6F3FF\n    style INV fill:#E6F3FF\n    style DER fill:#E6F3FF\n    style EVT fill:#E6F3FF</code></pre> <p>Functional Core: Pure, testable, no side effects Imperative Shell: Handles I/O, database, UI interactions</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#2-strategic-design-bounded-contexts","title":"2. Strategic Design: Bounded Contexts","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#21-context-overview","title":"2.1 Context Overview","text":"<pre><code>graph TB\n    subgraph \"Core Domain\"\n        CODING[Coding Context]\n        ANALYSIS[Analysis Context]\n    end\n\n    subgraph \"Supporting Domain\"\n        PROJECT[Project Context]\n        SOURCE[Source Management Context]\n        CASE[Case Context]\n        COLLAB[Collaboration Context]\n    end\n\n    subgraph \"Generic Domain\"\n        AI[AI Services Context]\n        EXPORT[Export Context]\n    end\n\n    PROJECT --&gt; CODING\n    SOURCE --&gt; CODING\n    CODING --&gt; ANALYSIS\n    CODING --&gt; CASE\n    COLLAB --&gt; PROJECT\n    AI --&gt; CODING\n    AI --&gt; ANALYSIS\n    ANALYSIS --&gt; EXPORT\n\n    style CODING fill:#FFD700\n    style ANALYSIS fill:#FFD700</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#22-context-responsibilities","title":"2.2 Context Responsibilities","text":"Context Type Responsibility Key Aggregates Coding Core Apply semantic codes to data segments Code, Segment Analysis Core Generate insights from coded data Report, Matrix Project Supporting Lifecycle management of research projects Project Source Management Supporting Import, store, and manage research data Source Case Supporting Group segments into research units Case Collaboration Supporting Multi-coder workflows and merging Coder, MergeOperation AI Services Generic LLM integration and semantic search AISession, VectorStore Export Generic Output generation (REFI-QDA, XLSX) ExportJob"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#3-context-map","title":"3. Context Map","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#31-integration-patterns","title":"3.1 Integration Patterns","text":"<pre><code>graph LR\n    subgraph \"Upstream\"\n        PROJECT[Project Context]\n        SOURCE[Source Context]\n    end\n\n    subgraph \"Core\"\n        CODING[Coding Context]\n    end\n\n    subgraph \"Downstream\"\n        ANALYSIS[Analysis Context]\n        CASE[Case Context]\n        EXPORT[Export Context]\n    end\n\n    PROJECT --&gt;|\"Conformist\"| CODING\n    SOURCE --&gt;|\"Open Host Service\"| CODING\n    CODING --&gt;|\"Published Language\"| ANALYSIS\n    CODING --&gt;|\"Published Language\"| CASE\n    CODING --&gt;|\"Customer/Supplier\"| EXPORT\n\n    AI[AI Context] -.-&gt;|\"Partnership\"| CODING\n    AI -.-&gt;|\"Partnership\"| ANALYSIS\n    COLLAB[Collaboration] --&gt;|\"Anti-Corruption Layer\"| PROJECT</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#32-integration-relationships","title":"3.2 Integration Relationships","text":"Upstream Downstream Pattern Description Project Coding Conformist Coding accepts Project's model Source Coding Open Host Service Source exposes standard API for segment references Coding Analysis Published Language Events define the contract Coding Case Published Language Segment references are immutable Collaboration Project Anti-Corruption Layer Merge logic translates external formats AI Coding/Analysis Partnership Bidirectional collaboration on embeddings"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#4-tactical-patterns-functional-approach","title":"4. Tactical Patterns: Functional Approach","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#41-entity-pattern","title":"4.1 Entity Pattern","text":"<p>Entities are immutable data containers with identity, defined using frozen dataclasses with runtime validation via Pydantic.</p> <pre><code>classDiagram\n    class Entity {\n        &lt;&lt;abstract&gt;&gt;\n        +id: EntityId\n        +created_at: datetime\n        +updated_at: datetime\n    }\n\n    class Code {\n        +code_id: CodeId\n        +name: str\n        +color: Color\n        +memo: Optional~str~\n        +category_id: Optional~CategoryId~\n        +owner: CoderId\n    }\n\n    class TextSegment {\n        +segment_id: SegmentId\n        +source_id: SourceId\n        +code_id: CodeId\n        +start_pos: int\n        +end_pos: int\n        +selected_text: str\n        +importance: int\n        +memo: Optional~str~\n        +owner: CoderId\n    }\n\n    Entity &lt;|-- Code\n    Entity &lt;|-- TextSegment</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#42-value-object-pattern","title":"4.2 Value Object Pattern","text":"<p>Value Objects are immutable and compared by value, not identity.</p> <pre><code>classDiagram\n    class Color {\n        +red: int\n        +green: int\n        +blue: int\n        +to_hex() str\n        +contrast_color() Color\n    }\n\n    class TextPosition {\n        +start: int\n        +end: int\n        +length() int\n        +overlaps(other) bool\n        +contains(other) bool\n    }\n\n    class ImageRegion {\n        +x: int\n        +y: int\n        +width: int\n        +height: int\n        +area() int\n        +intersects(other) bool\n    }\n\n    class TimeRange {\n        +start_ms: int\n        +end_ms: int\n        +duration_ms() int\n        +overlaps(other) bool\n    }</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#43-invariant-pattern","title":"4.3 Invariant Pattern","text":"<p>Invariants are pure predicate functions that validate business rules.</p> <pre><code>flowchart LR\n    subgraph \"Invariant Function\"\n        INPUT[Entity or Value] --&gt; CHECK{Business Rule}\n        CHECK --&gt;|Valid| TRUE[True]\n        CHECK --&gt;|Invalid| FALSE[False]\n    end</code></pre> <p>Invariant Catalog for Coding Context:</p> Invariant Input Rule <code>is_code_name_unique</code> Code, existing_codes No duplicate names in project <code>is_hierarchy_acyclic</code> Category, all_categories No circular parent references <code>is_segment_within_bounds</code> TextSegment, Source Position within source length <code>is_valid_overlap</code> Segment, existing_segments Overlaps are tracked, not prevented <code>can_code_be_deleted</code> Code, segments No segments reference this code <code>is_color_valid</code> Color RGB values 0-255"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#44-deriver-pattern","title":"4.4 Deriver Pattern","text":"<p>Derivers are pure functions that: 1. Accept entities and context as input 2. Compose multiple invariants 3. Return a discriminated union (Result type) of success or failure</p> <pre><code>flowchart TB\n    subgraph \"Deriver: derive_apply_code_event\"\n        INPUT[Command Data + State]\n\n        INV1{is_code_exists?}\n        INV2{is_source_exists?}\n        INV3{is_segment_valid?}\n        INV4{is_user_authorized?}\n\n        INPUT --&gt; INV1\n        INV1 --&gt;|No| FAIL1[CodeNotFound]\n        INV1 --&gt;|Yes| INV2\n        INV2 --&gt;|No| FAIL2[SourceNotFound]\n        INV2 --&gt;|Yes| INV3\n        INV3 --&gt;|No| FAIL3[InvalidSegment]\n        INV3 --&gt;|Yes| INV4\n        INV4 --&gt;|No| FAIL4[Unauthorized]\n        INV4 --&gt;|Yes| SUCCESS[SegmentCoded Event]\n    end\n\n    style SUCCESS fill:#90EE90\n    style FAIL1 fill:#FFB6C1\n    style FAIL2 fill:#FFB6C1\n    style FAIL3 fill:#FFB6C1\n    style FAIL4 fill:#FFB6C1</code></pre> <p>Result Type Pattern:</p> <pre><code>Result[T, E] = Success[T] | Failure[E]\n\nwhere:\n  T = Domain Event (success case)\n  E = Failure Reason (discriminated union of error types)\n</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#45-controller-pattern","title":"4.5 Controller Pattern","text":"<p>Controllers live in the Imperative Shell and coordinate: - Reading state from repositories - Calling derivers with state - Persisting changes based on events - Publishing events to the event bus</p> <pre><code>sequenceDiagram\n    participant UI as PyQt6 UI\n    participant CTRL as Controller\n    participant REPO as Repository\n    participant DER as Deriver\n    participant BUS as Event Bus\n    participant DB as SQLite\n\n    UI-&gt;&gt;CTRL: apply_code(command_data)\n    CTRL-&gt;&gt;REPO: get_code(code_id)\n    REPO-&gt;&gt;DB: SELECT * FROM code_name\n    DB--&gt;&gt;REPO: code_row\n    REPO--&gt;&gt;CTRL: Code entity\n    CTRL-&gt;&gt;REPO: get_source(source_id)\n    REPO--&gt;&gt;CTRL: Source entity\n    CTRL-&gt;&gt;DER: derive_apply_code_event(data, state)\n    DER--&gt;&gt;CTRL: Result[SegmentCoded, Failure]\n\n    alt Success\n        CTRL-&gt;&gt;REPO: save_segment(segment)\n        REPO-&gt;&gt;DB: INSERT INTO code_text\n        CTRL-&gt;&gt;BUS: publish(SegmentCoded)\n        CTRL--&gt;&gt;UI: Success response\n    else Failure\n        CTRL--&gt;&gt;UI: Error response\n    end</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#46-policy-pattern","title":"4.6 Policy Pattern","text":"<p>Policies are reactive event handlers that trigger cross-aggregate or cross-context actions.</p> <pre><code>flowchart LR\n    subgraph \"Event Source\"\n        EVT1[CodeDeleted Event]\n    end\n\n    subgraph \"Policy: on_code_deleted\"\n        LISTEN[Listen for CodeDeleted]\n        ACTION1[Remove orphaned segments]\n        ACTION2[Update category counts]\n        ACTION3[Invalidate AI embeddings]\n    end\n\n    EVT1 --&gt; LISTEN\n    LISTEN --&gt; ACTION1\n    LISTEN --&gt; ACTION2\n    LISTEN --&gt; ACTION3</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#5-bounded-context-deep-dives","title":"5. Bounded Context Deep Dives","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#51-coding-context-core-domain","title":"5.1 Coding Context (Core Domain)","text":"<p>The heart of QualCoder - applying semantic codes to research data.</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#511-aggregate-structure","title":"5.1.1 Aggregate Structure","text":"<pre><code>classDiagram\n    class Code {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +code_id: CodeId\n        +name: str\n        +color: Color\n        +memo: Optional~str~\n        +category_id: Optional~CategoryId~\n        +owner: CoderId\n        +created_at: datetime\n    }\n\n    class Category {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +category_id: CategoryId\n        +name: str\n        +parent_id: Optional~CategoryId~\n        +memo: Optional~str~\n        +owner: CoderId\n    }\n\n    class Segment {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +segment_id: SegmentId\n        +code_id: CodeId\n        +source_id: SourceId\n        +owner: CoderId\n        +memo: Optional~str~\n        +importance: int\n    }\n\n    class TextSegment {\n        +position: TextPosition\n        +selected_text: str\n    }\n\n    class ImageSegment {\n        +region: ImageRegion\n    }\n\n    class AVSegment {\n        +time_range: TimeRange\n        +transcript: Optional~str~\n    }\n\n    Segment &lt;|-- TextSegment\n    Segment &lt;|-- ImageSegment\n    Segment &lt;|-- AVSegment\n\n    Code \"1\" --&gt; \"*\" Segment : coded by\n    Category \"1\" --&gt; \"*\" Code : contains\n    Category \"0..1\" --&gt; \"*\" Category : parent of</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#512-commands-and-events","title":"5.1.2 Commands and Events","text":"<pre><code>flowchart TB\n    subgraph \"Commands\"\n        C1[CreateCode]\n        C2[RenameCode]\n        C3[ChangeCodeColor]\n        C4[DeleteCode]\n        C5[MergeCodes]\n        C6[ApplyCodeToSegment]\n        C7[RemoveCodeFromSegment]\n        C8[MoveCodeToCategory]\n        C9[CreateCategory]\n        C10[DeleteCategory]\n    end\n\n    subgraph \"Success Events\"\n        E1[CodeCreated]\n        E2[CodeRenamed]\n        E3[CodeColorChanged]\n        E4[CodeDeleted]\n        E5[CodesMerged]\n        E6[SegmentCoded]\n        E7[SegmentUncoded]\n        E8[CodeMovedToCategory]\n        E9[CategoryCreated]\n        E10[CategoryDeleted]\n    end\n\n    subgraph \"Failure Events\"\n        F1[CodeNotCreated/NameExists]\n        F2[CodeNotRenamed/NameExists]\n        F3[CodeNotDeleted/HasSegments]\n        F4[SegmentNotCoded/InvalidPosition]\n        F5[CategoryNotDeleted/HasChildren]\n    end\n\n    C1 --&gt; E1\n    C1 --&gt; F1\n    C2 --&gt; E2\n    C2 --&gt; F2\n    C4 --&gt; E4\n    C4 --&gt; F3\n    C6 --&gt; E6\n    C6 --&gt; F4\n    C10 --&gt; E10\n    C10 --&gt; F5</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#513-invariants","title":"5.1.3 Invariants","text":"Invariant Parameters Business Rule <code>is_code_name_unique</code> name, project_codes No two codes share the same name <code>is_category_name_unique</code> name, project_categories No two categories share the same name <code>is_hierarchy_acyclic</code> category, parent_id, all_categories Moving category doesn't create cycle <code>is_segment_position_valid</code> position, source Start &lt; end, both within source bounds <code>is_code_deletable</code> code_id, segments No segments reference this code <code>is_category_deletable</code> category_id, codes, subcategories No codes or children reference category <code>are_codes_mergeable</code> source_code, target_code Both exist, different codes"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#514-deriver-flows","title":"5.1.4 Deriver Flows","text":"<p>Apply Code to Text Segment:</p> <pre><code>stateDiagram-v2\n    [*] --&gt; ValidateCode\n    ValidateCode --&gt; CodeNotFound: Code doesn't exist\n    ValidateCode --&gt; ValidateSource: Code exists\n\n    ValidateSource --&gt; SourceNotFound: Source doesn't exist\n    ValidateSource --&gt; ValidatePosition: Source exists\n\n    ValidatePosition --&gt; InvalidPosition: Out of bounds\n    ValidatePosition --&gt; CheckOverlaps: Valid position\n\n    CheckOverlaps --&gt; CreateSegment: No conflicts\n\n    CreateSegment --&gt; SegmentCoded: Success\n\n    CodeNotFound --&gt; [*]\n    SourceNotFound --&gt; [*]\n    InvalidPosition --&gt; [*]\n    SegmentCoded --&gt; [*]</code></pre> <p>Merge Codes:</p> <pre><code>stateDiagram-v2\n    [*] --&gt; ValidateSourceCode\n    ValidateSourceCode --&gt; SourceCodeNotFound: Doesn't exist\n    ValidateSourceCode --&gt; ValidateTargetCode: Exists\n\n    ValidateTargetCode --&gt; TargetCodeNotFound: Doesn't exist\n    ValidateTargetCode --&gt; CheckSameCode: Exists\n\n    CheckSameCode --&gt; CannotMergeSame: Same code\n    CheckSameCode --&gt; LoadSegments: Different codes\n\n    LoadSegments --&gt; ReassignSegments\n    ReassignSegments --&gt; DeleteSourceCode\n    DeleteSourceCode --&gt; CodesMerged: Success\n\n    SourceCodeNotFound --&gt; [*]\n    TargetCodeNotFound --&gt; [*]\n    CannotMergeSame --&gt; [*]\n    CodesMerged --&gt; [*]</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#52-source-management-context","title":"5.2 Source Management Context","text":"<p>Manages research data files and their content.</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#521-aggregate-structure","title":"5.2.1 Aggregate Structure","text":"<pre><code>classDiagram\n    class Source {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +source_id: SourceId\n        +name: str\n        +memo: Optional~str~\n        +owner: CoderId\n        +created_at: datetime\n    }\n\n    class TextSource {\n        +fulltext: str\n        +char_count: int\n    }\n\n    class ImageSource {\n        +media_path: str\n        +width: int\n        +height: int\n    }\n\n    class AudioSource {\n        +media_path: str\n        +duration_ms: int\n        +transcript: Optional~str~\n    }\n\n    class VideoSource {\n        +media_path: str\n        +duration_ms: int\n        +transcript: Optional~str~\n        +width: int\n        +height: int\n    }\n\n    class PDFSource {\n        +media_path: str\n        +page_count: int\n        +extracted_text: str\n    }\n\n    Source &lt;|-- TextSource\n    Source &lt;|-- ImageSource\n    Source &lt;|-- AudioSource\n    Source &lt;|-- VideoSource\n    Source &lt;|-- PDFSource</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#522-commands-and-events","title":"5.2.2 Commands and Events","text":"Command Success Event Failure Events ImportSource SourceImported ImportFailed/InvalidFormat, ImportFailed/FileTooLarge RenameSource SourceRenamed SourceNotRenamed/NameExists DeleteSource SourceDeleted SourceNotDeleted/HasSegments ExtractText TextExtracted ExtractionFailed UpdateTranscript TranscriptUpdated -"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#53-case-context","title":"5.3 Case Context","text":"<p>Groups coded segments into research units (participants, events, etc.).</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#531-aggregate-structure","title":"5.3.1 Aggregate Structure","text":"<pre><code>classDiagram\n    class Case {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +case_id: CaseId\n        +name: str\n        +memo: Optional~str~\n        +owner: CoderId\n        +created_at: datetime\n    }\n\n    class CaseMembership {\n        &lt;&lt;Value Object&gt;&gt;\n        +case_id: CaseId\n        +source_id: SourceId\n        +position: Optional~TextPosition~\n        +owner: CoderId\n    }\n\n    class CaseAttribute {\n        &lt;&lt;Value Object&gt;&gt;\n        +case_id: CaseId\n        +attribute_type: AttributeType\n        +value: AttributeValue\n    }\n\n    class AttributeType {\n        &lt;&lt;Value Object&gt;&gt;\n        +name: str\n        +value_type: character | numeric | date\n    }\n\n    Case \"1\" --&gt; \"*\" CaseMembership : has members\n    Case \"1\" --&gt; \"*\" CaseAttribute : has attributes</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#532-commands-and-events","title":"5.3.2 Commands and Events","text":"<pre><code>flowchart LR\n    subgraph Commands\n        C1[CreateCase]\n        C2[RenameCase]\n        C3[DeleteCase]\n        C4[AddSourceToCase]\n        C5[AddSegmentToCase]\n        C6[RemoveMemberFromCase]\n        C7[SetCaseAttribute]\n    end\n\n    subgraph Events\n        E1[CaseCreated]\n        E2[CaseRenamed]\n        E3[CaseDeleted]\n        E4[SourceAddedToCase]\n        E5[SegmentAddedToCase]\n        E6[MemberRemovedFromCase]\n        E7[CaseAttributeSet]\n    end\n\n    C1 --&gt; E1\n    C2 --&gt; E2\n    C3 --&gt; E3\n    C4 --&gt; E4\n    C5 --&gt; E5\n    C6 --&gt; E6\n    C7 --&gt; E7</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#54-analysis-context","title":"5.4 Analysis Context","text":"<p>Generates insights and reports from coded data.</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#541-aggregate-structure","title":"5.4.1 Aggregate Structure","text":"<pre><code>classDiagram\n    class Report {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +report_id: ReportId\n        +report_type: ReportType\n        +filters: ReportFilters\n        +generated_at: datetime\n        +owner: CoderId\n    }\n\n    class ReportFilters {\n        &lt;&lt;Value Object&gt;&gt;\n        +code_ids: Optional~List~CodeId~~\n        +source_ids: Optional~List~SourceId~~\n        +case_ids: Optional~List~CaseId~~\n        +coder_ids: Optional~List~CoderId~~\n        +date_range: Optional~DateRange~\n    }\n\n    class FrequencyReport {\n        +results: List~CodeFrequency~\n    }\n\n    class CooccurrenceReport {\n        +matrix: CooccurrenceMatrix\n    }\n\n    class CoderComparisonReport {\n        +agreements: List~Agreement~\n        +disagreements: List~Disagreement~\n        +kappa_score: float\n    }\n\n    class CodeFrequency {\n        &lt;&lt;Value Object&gt;&gt;\n        +code_id: CodeId\n        +count: int\n        +percentage: float\n        +sources: List~SourceId~\n    }\n\n    Report &lt;|-- FrequencyReport\n    Report &lt;|-- CooccurrenceReport\n    Report &lt;|-- CoderComparisonReport\n    Report --&gt; ReportFilters\n    FrequencyReport --&gt; CodeFrequency</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#542-report-generation-flow","title":"5.4.2 Report Generation Flow","text":"<pre><code>sequenceDiagram\n    participant UI as Analysis UI\n    participant CTRL as AnalysisController\n    participant DER as ReportDeriver\n    participant REPO as CodingRepository\n    participant GEN as ReportGenerator\n\n    UI-&gt;&gt;CTRL: generate_frequency_report(filters)\n    CTRL-&gt;&gt;REPO: get_segments_by_filter(filters)\n    REPO--&gt;&gt;CTRL: List[Segment]\n    CTRL-&gt;&gt;REPO: get_codes()\n    REPO--&gt;&gt;CTRL: List[Code]\n\n    CTRL-&gt;&gt;DER: derive_frequency_report(segments, codes, filters)\n    Note over DER: Pure calculation&lt;br/&gt;No side effects\n    DER--&gt;&gt;CTRL: FrequencyReport\n\n    CTRL-&gt;&gt;GEN: render_report(report, format)\n    GEN--&gt;&gt;CTRL: rendered_output\n    CTRL--&gt;&gt;UI: ReportGenerated event + output</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#55-project-context","title":"5.5 Project Context","text":"<p>Manages research project lifecycle.</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#551-aggregate-structure","title":"5.5.1 Aggregate Structure","text":"<pre><code>classDiagram\n    class Project {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +project_id: ProjectId\n        +name: str\n        +database_path: Path\n        +version: int\n        +memo: Optional~str~\n        +about: Optional~str~\n        +created_at: datetime\n        +owner: CoderId\n    }\n\n    class ProjectSettings {\n        &lt;&lt;Value Object&gt;&gt;\n        +language: str\n        +font_size: int\n        +backup_enabled: bool\n        +ai_model: Optional~str~\n        +recent_files: List~Path~\n    }\n\n    class ProjectLock {\n        &lt;&lt;Value Object&gt;&gt;\n        +locked_by: str\n        +locked_at: datetime\n        +heartbeat: datetime\n    }\n\n    Project --&gt; ProjectSettings\n    Project --&gt; ProjectLock</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#552-project-lifecycle","title":"5.5.2 Project Lifecycle","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; Closed\n\n    Closed --&gt; Creating: create_project\n    Creating --&gt; Open: ProjectCreated\n    Creating --&gt; Closed: CreationFailed\n\n    Closed --&gt; Opening: open_project\n    Opening --&gt; CheckLock: Load database\n    CheckLock --&gt; Locked: Another user has lock\n    CheckLock --&gt; AcquireLock: No lock\n    AcquireLock --&gt; Open: Lock acquired\n    Locked --&gt; Closed: Cannot open\n\n    Open --&gt; Saving: save_project\n    Saving --&gt; Open: ProjectSaved\n\n    Open --&gt; Closing: close_project\n    Closing --&gt; ReleaseLock: Release lock\n    ReleaseLock --&gt; Closed: ProjectClosed\n\n    Open --&gt; Backing: backup_project\n    Backing --&gt; Open: BackupCreated</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#56-collaboration-context","title":"5.6 Collaboration Context","text":"<p>Handles multi-coder workflows and project merging.</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#561-aggregate-structure","title":"5.6.1 Aggregate Structure","text":"<pre><code>classDiagram\n    class Coder {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +coder_id: CoderId\n        +name: str\n        +visibility: bool\n    }\n\n    class MergeOperation {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +merge_id: MergeId\n        +source_project: Path\n        +target_project: Path\n        +status: MergeStatus\n        +conflicts: List~Conflict~\n        +resolutions: List~Resolution~\n        +started_at: datetime\n        +completed_at: Optional~datetime~\n    }\n\n    class Conflict {\n        &lt;&lt;Value Object&gt;&gt;\n        +conflict_type: code | category | attribute\n        +source_item: str\n        +target_item: str\n        +description: str\n    }\n\n    class Resolution {\n        &lt;&lt;Value Object&gt;&gt;\n        +conflict: Conflict\n        +strategy: keep_source | keep_target | rename | merge\n        +new_name: Optional~str~\n    }\n\n    MergeOperation --&gt; \"*\" Conflict\n    MergeOperation --&gt; \"*\" Resolution</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#562-merge-workflow","title":"5.6.2 Merge Workflow","text":"<pre><code>flowchart TB\n    START[Start Merge] --&gt; BACKUP[Create Target Backup]\n    BACKUP --&gt; LOAD[Load Source Project]\n    LOAD --&gt; DETECT[Detect Conflicts]\n\n    DETECT --&gt; CODES{Code Conflicts?}\n    CODES --&gt;|Yes| RESOLVE_CODES[Queue Code Conflicts]\n    CODES --&gt;|No| CATS\n    RESOLVE_CODES --&gt; CATS\n\n    CATS{Category Conflicts?}\n    CATS --&gt;|Yes| RESOLVE_CATS[Queue Category Conflicts]\n    CATS --&gt;|No| ATTRS\n    RESOLVE_CATS --&gt; ATTRS\n\n    ATTRS{Attribute Conflicts?}\n    ATTRS --&gt;|Yes| RESOLVE_ATTRS[Queue Attribute Conflicts]\n    ATTRS --&gt;|No| USER_REVIEW\n    RESOLVE_ATTRS --&gt; USER_REVIEW\n\n    USER_REVIEW[Present Conflicts to User]\n    USER_REVIEW --&gt; APPLY[Apply Resolutions]\n    APPLY --&gt; IMPORT[Import Non-Conflicting Items]\n    IMPORT --&gt; VERIFY[Verify Integrity]\n    VERIFY --&gt; COMPLETE[MergeCompleted]\n\n    VERIFY --&gt;|Failed| ROLLBACK[Restore Backup]\n    ROLLBACK --&gt; FAILED[MergeFailed]</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#57-ai-services-context","title":"5.7 AI Services Context","text":"<p>Provides LLM-powered analysis and semantic search.</p>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#571-aggregate-structure","title":"5.7.1 Aggregate Structure","text":"<pre><code>classDiagram\n    class AISession {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +session_id: SessionId\n        +model_config: AIModelConfig\n        +messages: List~ChatMessage~\n        +created_at: datetime\n    }\n\n    class AIModelConfig {\n        &lt;&lt;Value Object&gt;&gt;\n        +provider: openai | blablador | local\n        +model_name: str\n        +api_key: Optional~str~\n        +temperature: float\n        +max_tokens: int\n    }\n\n    class ChatMessage {\n        &lt;&lt;Value Object&gt;&gt;\n        +role: user | assistant | system\n        +content: str\n        +timestamp: datetime\n    }\n\n    class VectorStore {\n        &lt;&lt;Aggregate Root&gt;&gt;\n        +store_id: StoreId\n        +project_id: ProjectId\n        +embedding_model: str\n        +indexed_segments: int\n        +last_updated: datetime\n    }\n\n    class SegmentEmbedding {\n        &lt;&lt;Value Object&gt;&gt;\n        +segment_id: SegmentId\n        +embedding: List~float~\n        +text_content: str\n    }\n\n    AISession --&gt; AIModelConfig\n    AISession --&gt; \"*\" ChatMessage\n    VectorStore --&gt; \"*\" SegmentEmbedding</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#572-ai-query-flow","title":"5.7.2 AI Query Flow","text":"<pre><code>sequenceDiagram\n    participant UI as AI Chat UI\n    participant CTRL as AIController\n    participant VS as VectorStore\n    participant LLM as LLM Provider\n    participant REPO as CodingRepository\n\n    UI-&gt;&gt;CTRL: ask_question(query)\n\n    CTRL-&gt;&gt;VS: semantic_search(query, k=10)\n    VS--&gt;&gt;CTRL: List[SegmentEmbedding]\n\n    CTRL-&gt;&gt;REPO: get_segments(segment_ids)\n    REPO--&gt;&gt;CTRL: List[Segment] with context\n\n    Note over CTRL: Build prompt with&lt;br/&gt;retrieved context\n\n    CTRL-&gt;&gt;LLM: complete(prompt)\n    LLM--&gt;&gt;CTRL: response\n\n    CTRL-&gt;&gt;CTRL: save_message(query, response)\n    CTRL--&gt;&gt;UI: AIResponseGenerated</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#6-event-catalog","title":"6. Event Catalog","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#61-event-categories","title":"6.1 Event Categories","text":"<pre><code>graph TB\n    subgraph \"Project Events\"\n        PE1[ProjectCreated]\n        PE2[ProjectOpened]\n        PE3[ProjectClosed]\n        PE4[ProjectBackedUp]\n    end\n\n    subgraph \"Source Events\"\n        SE1[SourceImported]\n        SE2[SourceRenamed]\n        SE3[SourceDeleted]\n        SE4[TextExtracted]\n    end\n\n    subgraph \"Coding Events\"\n        CE1[CodeCreated]\n        CE2[CodeRenamed]\n        CE3[CodeDeleted]\n        CE4[CodesMerged]\n        CE5[SegmentCoded]\n        CE6[SegmentUncoded]\n        CE7[CategoryCreated]\n        CE8[CategoryDeleted]\n    end\n\n    subgraph \"Case Events\"\n        CSE1[CaseCreated]\n        CSE2[CaseDeleted]\n        CSE3[MemberAddedToCase]\n        CSE4[AttributeSet]\n    end\n\n    subgraph \"Analysis Events\"\n        AE1[ReportGenerated]\n        AE2[ReportExported]\n    end\n\n    subgraph \"Collaboration Events\"\n        COE1[MergeStarted]\n        COE2[ConflictDetected]\n        COE3[ConflictResolved]\n        COE4[MergeCompleted]\n    end</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#62-event-structure","title":"6.2 Event Structure","text":"<p>All events follow a consistent structure:</p> <pre><code>DomainEvent:\n  +event_id: UUID\n  +event_type: str\n  +aggregate_type: str\n  +aggregate_id: str\n  +occurred_at: datetime\n  +caused_by: Optional[CoderId]\n  +payload: Dict[str, Any]\n  +metadata: Dict[str, Any]\n</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#63-event-flow-between-contexts","title":"6.3 Event Flow Between Contexts","text":"<pre><code>flowchart LR\n    subgraph \"Coding Context\"\n        CE[CodeDeleted]\n    end\n\n    subgraph \"Event Bus\"\n        BUS((Event Bus))\n    end\n\n    subgraph \"Consumers\"\n        CASE[Case Context]\n        AI[AI Context]\n        ANALYSIS[Analysis Context]\n    end\n\n    CE --&gt; BUS\n    BUS --&gt; CASE\n    BUS --&gt; AI\n    BUS --&gt; ANALYSIS\n\n    CASE --&gt; |\"Remove orphaned&lt;br/&gt;case memberships\"| CASE\n    AI --&gt; |\"Remove embeddings&lt;br/&gt;for deleted code\"| AI\n    ANALYSIS --&gt; |\"Invalidate cached&lt;br/&gt;reports\"| ANALYSIS</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#7-cross-cutting-concerns","title":"7. Cross-Cutting Concerns","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#71-error-handling-strategy","title":"7.1 Error Handling Strategy","text":"<pre><code>flowchart TB\n    subgraph \"Functional Core\"\n        DERIVER[Deriver Function]\n        DERIVER --&gt; RESULT{Result Type}\n        RESULT --&gt; SUCCESS[Success + Event]\n        RESULT --&gt; FAILURE[Failure + Reason]\n    end\n\n    subgraph \"Imperative Shell\"\n        CTRL[Controller]\n        SUCCESS --&gt; PERSIST[Persist Changes]\n        PERSIST --&gt; PUBLISH[Publish Event]\n        PUBLISH --&gt; UI_SUCCESS[Update UI - Success]\n\n        FAILURE --&gt; LOG[Log Failure]\n        LOG --&gt; UI_FAILURE[Update UI - Error]\n    end</code></pre> <p>Failure Reason Types:</p> Context Failure Reasons Coding <code>CodeNotFound</code>, <code>SourceNotFound</code>, <code>InvalidPosition</code>, <code>DuplicateName</code>, <code>CyclicHierarchy</code> Source <code>InvalidFormat</code>, <code>FileTooLarge</code>, <code>FileNotFound</code>, <code>ExtractionFailed</code> Case <code>CaseNotFound</code>, <code>DuplicateName</code>, <code>InvalidAttribute</code> Project <code>DatabaseCorrupted</code>, <code>VersionMismatch</code>, <code>LockConflict</code> Collaboration <code>MergeConflict</code>, <code>IncompatibleVersions</code>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#72-audit-trail","title":"7.2 Audit Trail","text":"<p>Every state change is tracked through events, enabling:</p> <pre><code>flowchart LR\n    subgraph \"Event Store\"\n        E1[Event 1] --&gt; E2[Event 2] --&gt; E3[Event 3] --&gt; E4[Event N]\n    end\n\n    subgraph \"Capabilities\"\n        AUDIT[Audit Log]\n        UNDO[Undo/Redo]\n        REPLAY[State Replay]\n        DEBUG[Debugging]\n    end\n\n    E4 --&gt; AUDIT\n    E4 --&gt; UNDO\n    E4 --&gt; REPLAY\n    E4 --&gt; DEBUG</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#73-validation-layers","title":"7.3 Validation Layers","text":"<pre><code>flowchart TB\n    INPUT[User Input]\n\n    subgraph \"Layer 1: Structural Validation\"\n        PYDANTIC[Pydantic Models]\n        INPUT --&gt; PYDANTIC\n        PYDANTIC --&gt;|Invalid| REJECT1[Reject: Invalid Format]\n        PYDANTIC --&gt;|Valid| LAYER2\n    end\n\n    subgraph \"Layer 2: Domain Invariants\"\n        LAYER2[Invariant Functions]\n        LAYER2 --&gt;|Violated| REJECT2[Reject: Business Rule]\n        LAYER2 --&gt;|Passed| LAYER3\n    end\n\n    subgraph \"Layer 3: Cross-Aggregate Rules\"\n        LAYER3[Deriver Logic]\n        LAYER3 --&gt;|Failed| REJECT3[Reject: Consistency]\n        LAYER3 --&gt;|Passed| ACCEPT[Accept: Create Event]\n    end</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#8-data-flow-architecture","title":"8. Data Flow Architecture","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#81-complete-request-flow","title":"8.1 Complete Request Flow","text":"<pre><code>flowchart TB\n    subgraph \"Presentation Layer\"\n        UI[PyQt6 Dialog]\n        UI --&gt; |User Action| CMD[Command DTO]\n    end\n\n    subgraph \"Application Layer\"\n        CTRL[Controller]\n        CMD --&gt; CTRL\n        CTRL --&gt; |Fetch State| REPO\n        CTRL --&gt; |Call| DERIVER\n    end\n\n    subgraph \"Domain Layer - Functional Core\"\n        DERIVER[Deriver]\n        INV[Invariants]\n        ENT[Entities]\n        EVT[Domain Event]\n\n        DERIVER --&gt; INV\n        DERIVER --&gt; ENT\n        DERIVER --&gt; |Return| EVT\n    end\n\n    subgraph \"Infrastructure Layer\"\n        REPO[Repository]\n        DB[(SQLite)]\n        BUS[Event Bus]\n\n        REPO --&gt; DB\n        CTRL --&gt; |Persist| REPO\n        CTRL --&gt; |Publish| BUS\n    end\n\n    BUS --&gt; |Notify| POLICY[Policies]\n    POLICY --&gt; |Trigger| CTRL\n\n    CTRL --&gt; |Response| UI</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#82-read-vs-write-paths-cqrs-lite","title":"8.2 Read vs Write Paths (CQRS-lite)","text":"<pre><code>flowchart LR\n    subgraph \"Write Path\"\n        W_CMD[Command] --&gt; W_CTRL[Controller]\n        W_CTRL --&gt; W_DER[Deriver]\n        W_DER --&gt; W_EVT[Event]\n        W_EVT --&gt; W_REPO[Repository]\n        W_REPO --&gt; W_DB[(Write DB)]\n    end\n\n    subgraph \"Read Path\"\n        R_QUERY[Query] --&gt; R_REPO[Query Repository]\n        R_REPO --&gt; R_DB[(Read Views)]\n        R_DB --&gt; R_DTO[Read DTO]\n    end\n\n    W_DB -.-&gt; |Sync| R_DB</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#9-migration-strategy","title":"9. Migration Strategy","text":""},{"location":"design/FUNCTIONAL_DDD_DESIGN/#91-phased-approach","title":"9.1 Phased Approach","text":"<pre><code>gantt\n    title Functional DDD Migration Phases\n    dateFormat  YYYY-MM-DD\n    section Phase 1\n    Define Entities &amp; Value Objects    :p1, 2024-01-01, 30d\n    Implement Invariants               :p2, after p1, 20d\n    section Phase 2\n    Build Derivers                     :p3, after p2, 40d\n    Create Event Types                 :p4, after p2, 20d\n    section Phase 3\n    Refactor Controllers               :p5, after p3, 30d\n    Implement Event Bus                :p6, after p4, 20d\n    section Phase 4\n    Add Policies                       :p7, after p5, 20d\n    Integration Testing                :p8, after p7, 30d\n    section Phase 5\n    UI Integration                     :p9, after p8, 40d\n    Performance Optimization           :p10, after p9, 20d</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#92-migration-by-context-priority","title":"9.2 Migration by Context Priority","text":"Priority Context Rationale 1 Coding Core domain, highest complexity, most business rules 2 Source Management Foundation for coding, relatively isolated 3 Case Depends on coding, moderate complexity 4 Project Cross-cutting but stable 5 Analysis Read-heavy, can use existing data layer 6 Collaboration Complex but infrequent usage 7 AI Services Already somewhat isolated"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#93-strangler-fig-pattern","title":"9.3 Strangler Fig Pattern","text":"<pre><code>flowchart TB\n    subgraph \"Current System\"\n        OLD_UI[Existing PyQt6 UI]\n        OLD_LOGIC[Monolithic Logic]\n        OLD_DB[(SQLite)]\n    end\n\n    subgraph \"New fDDD System\"\n        NEW_CTRL[New Controllers]\n        NEW_CORE[Functional Core]\n        NEW_REPO[New Repositories]\n    end\n\n    subgraph \"Facade\"\n        ROUTER{Feature Router}\n    end\n\n    OLD_UI --&gt; ROUTER\n    ROUTER --&gt;|Legacy Features| OLD_LOGIC\n    ROUTER --&gt;|Migrated Features| NEW_CTRL\n\n    OLD_LOGIC --&gt; OLD_DB\n    NEW_CTRL --&gt; NEW_CORE\n    NEW_CTRL --&gt; NEW_REPO\n    NEW_REPO --&gt; OLD_DB\n\n    style NEW_CTRL fill:#90EE90\n    style NEW_CORE fill:#90EE90\n    style NEW_REPO fill:#90EE90</code></pre>"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#appendix-a-glossary","title":"Appendix A: Glossary","text":"Term Definition Aggregate Cluster of entities treated as a unit for data changes Bounded Context Explicit boundary within which a domain model applies Command Request to change state (imperative: \"CreateCode\") Controller Imperative shell component coordinating I/O and derivers Deriver Pure function that derives an event from command + state Domain Event Record of something significant that happened in the domain Entity Object with identity that persists over time Invariant Business rule that must always be true Policy Reactive handler triggered by domain events Repository Abstraction for retrieving and storing aggregates Value Object Immutable object defined by its attributes, no identity"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#appendix-b-technology-choices","title":"Appendix B: Technology Choices","text":"Concern Technology Rationale Type Definitions Pydantic v2 Runtime validation, frozen models, JSON schema Immutability <code>@dataclass(frozen=True)</code> Native Python, Pydantic compatible Result Types <code>returns</code> library or custom Explicit success/failure handling Event Bus <code>blinker</code> or custom Lightweight, synchronous for desktop app Database SQLite (existing) Maintain compatibility UI PyQt6 (existing) Maintain compatibility"},{"location":"design/FUNCTIONAL_DDD_DESIGN/#appendix-c-file-structure","title":"Appendix C: File Structure","text":"<pre><code>qualcoder/\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 coding/\n\u2502   \u2502   \u251c\u2500\u2500 entities.py          # Code, Segment, Category\n\u2502   \u2502   \u251c\u2500\u2500 value_objects.py     # Color, TextPosition, etc.\n\u2502   \u2502   \u251c\u2500\u2500 invariants.py        # is_code_name_unique, etc.\n\u2502   \u2502   \u251c\u2500\u2500 derivers.py          # derive_create_code_event, etc.\n\u2502   \u2502   \u251c\u2500\u2500 events.py            # CodeCreated, SegmentCoded, etc.\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 sources/\n\u2502   \u2502   \u251c\u2500\u2500 entities.py\n\u2502   \u2502   \u251c\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 cases/\n\u2502   \u251c\u2500\u2500 projects/\n\u2502   \u251c\u2500\u2500 analysis/\n\u2502   \u251c\u2500\u2500 collaboration/\n\u2502   \u251c\u2500\u2500 ai_services/\n\u2502   \u2514\u2500\u2500 shared/\n\u2502       \u251c\u2500\u2500 result.py            # Result[T, E] type\n\u2502       \u251c\u2500\u2500 events.py            # Base event types\n\u2502       \u2514\u2500\u2500 identifiers.py       # Typed IDs\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 controllers/\n\u2502   \u2502   \u251c\u2500\u2500 coding_controller.py\n\u2502   \u2502   \u251c\u2500\u2500 source_controller.py\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 policies/\n\u2502   \u2502   \u251c\u2500\u2500 coding_policies.py\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 event_bus.py\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 repositories/\n\u2502   \u2502   \u251c\u2500\u2500 code_repository.py\n\u2502   \u2502   \u251c\u2500\u2500 source_repository.py\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 database/\n\u2502   \u2502   \u251c\u2500\u2500 connection.py\n\u2502   \u2502   \u2514\u2500\u2500 migrations/\n\u2502   \u2514\u2500\u2500 external/\n\u2502       \u251c\u2500\u2500 openai_client.py\n\u2502       \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 presentation/\n\u2502   \u251c\u2500\u2500 dialogs/\n\u2502   \u2502   \u251c\u2500\u2500 code_text.py         # Existing UI, calls controllers\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 view_models/\n\u2514\u2500\u2500 main.py\n</code></pre> <p>Document Version: 1.0 Last Updated: 2026-01-29 Author: Generated for QualCoder fDDD Architecture</p>"},{"location":"test-reports/","title":"Test Reports","text":"<p>QualCoder v2 uses Allure for comprehensive test reporting with traceability to user stories.</p>"},{"location":"test-reports/#live-reports","title":"Live Reports","text":"<ul> <li>Allure Test Report - Interactive test results with history, trends, and detailed failure analysis.</li> <li>Coverage Matrix - Documentation coverage tracking which features have docs and screenshots.</li> </ul>"},{"location":"test-reports/#report-features","title":"Report Features","text":""},{"location":"test-reports/#story-traceability","title":"Story Traceability","text":"<p>All E2E tests are tagged with <code>@allure.story(\"QC-XXX.YY Description\")</code> decorators that map directly to backlog tasks:</p> <pre><code>@allure.story(\"QC-028.03 Rename and Recolor Codes\")\nclass TestColorPickerDialog:\n    @allure.title(\"AC #3.1: Dialog shows preset color grid\")\n    def test_dialog_shows_preset_colors(self):\n        ...\n</code></pre>"},{"location":"test-reports/#whats-in-the-report","title":"What's in the Report","text":"Section Description Overview Pass/fail summary, duration, environment info Suites Tests organized by module Graphs Trend charts showing test stability over time Timeline Parallel execution visualization Behaviors Tests grouped by <code>@allure.story</code> tags Categories Failure classification (product defects vs test issues)"},{"location":"test-reports/#history-trends","title":"History &amp; Trends","text":"<p>The Allure report maintains history across CI runs, showing:</p> <ul> <li>Test stability trends (flaky test detection)</li> <li>Duration changes over time</li> <li>Regression identification</li> </ul>"},{"location":"test-reports/#running-tests-locally","title":"Running Tests Locally","text":"<p>Generate Allure results locally:</p> <pre><code># Run tests with Allure output\nQT_QPA_PLATFORM=offscreen uv run pytest -v --alluredir=allure-results\n\n# Serve report locally (requires allure CLI)\nallure serve allure-results\n</code></pre> <p>Install Allure CLI:</p> <p>macOS: <pre><code>brew install allure\n</code></pre></p> <p>Linux: <pre><code>sudo apt-get install allure\n</code></pre></p> <p>Windows: <pre><code>scoop install allure\n</code></pre></p>"},{"location":"test-reports/#cicd-integration","title":"CI/CD Integration","text":"<p>Allure reports are automatically generated and deployed on every push to <code>main</code>:</p> <ol> <li>CI runs tests with <code>--alluredir=allure-results</code></li> <li>Allure action generates HTML report with history</li> <li>GitHub Pages deploys to <code>/allure/</code> path</li> </ol> <p>See <code>.github/workflows/ci.yml</code> for the workflow configuration.</p>"},{"location":"tutorials/","title":"Onboarding Tutorial: QualCoder v2 fDDD Architecture","text":"<p>Welcome to the QualCoder v2 architecture tutorial! This hands-on guide teaches you the Functional Domain-Driven Design (fDDD) patterns through a practical example: adding a \"priority\" field to Codes.</p>"},{"location":"tutorials/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+ familiarity</li> <li>Basic understanding of classes and dataclasses</li> <li>No prior DDD or functional programming experience required</li> </ul>"},{"location":"tutorials/#learning-path","title":"Learning Path","text":"<p>Work through these parts in order. Each builds on the previous.</p> Part Topic What You'll Learn Part 0 The Big Picture Why this architecture exists Part 1 Your First Invariant Write a pure validation function Part 2 Your First Deriver Compose invariants into events Part 3 The Result Type Why <code>Success \\| Failure</code> beats exceptions Part 4 Events Flow Through Trace events from domain to UI Part 5 SignalBridge Payloads Connect domain to PySide6 Part 6 Testing Without Mocks Appreciate pure function testability Part 7 Complete Flow Reference Full diagram of Code creation"},{"location":"tutorials/#appendices","title":"Appendices","text":"Appendix Topic Appendix A Common Patterns &amp; Recipes Appendix B When to Create New Patterns"},{"location":"tutorials/#the-toy-example-adding-priority-to-codes","title":"The Toy Example: Adding Priority to Codes","text":"<p>Throughout this tutorial, we use one consistent example: adding an optional \"priority\" field (1-5) to Codes. This simple feature touches every layer of the architecture:</p> <pre><code>Priority: Optional[int]  # 1 (low) to 5 (high), or None\n</code></pre> <p>You'll learn: - How to validate priority with a pure Invariant - How to integrate validation into a Deriver - How events carry the new field through the system - How the UI receives updates via SignalBridge</p>"},{"location":"tutorials/#how-to-use-this-tutorial","title":"How to Use This Tutorial","text":"<ol> <li>Read with the codebase open - Reference the actual files as you go</li> <li>Follow along - The code snippets show patterns, not copy-paste solutions</li> <li>Experiment - Try modifying examples to solidify understanding</li> </ol>"},{"location":"tutorials/#architecture-overview","title":"Architecture Overview","text":"<pre><code>graph LR\n    subgraph Domain [\"Domain (Pure)\"]\n        I[Invariants] --&gt; D[Derivers]\n        D --&gt; E[Events]\n    end\n\n    subgraph App [\"Application\"]\n        EB[EventBus]\n        SB[SignalBridge]\n    end\n\n    subgraph UI [\"Presentation\"]\n        W[Qt Widgets]\n    end\n\n    E --&gt; EB --&gt; SB --&gt; W</code></pre>"},{"location":"tutorials/#key-files-reference","title":"Key Files Reference","text":"<p>As you work through the tutorial, you'll reference these files:</p> <pre><code>src/contexts/coding/core/\n\u251c\u2500\u2500 invariants.py     # Pure validation functions\n\u251c\u2500\u2500 derivers.py       # Event derivation logic\n\u251c\u2500\u2500 events.py         # Domain event definitions\n\u251c\u2500\u2500 failure_events.py # Failure event types\n\u251c\u2500\u2500 entities.py       # Code, Category, Segment entities\n\u2514\u2500\u2500 tests/\n    \u251c\u2500\u2500 test_invariants.py\n    \u2514\u2500\u2500 test_derivers.py\n\nsrc/shared/common/\n\u251c\u2500\u2500 types.py          # DomainEvent base, typed IDs\n\u2514\u2500\u2500 operation_result.py # Success/Failure result pattern\n\nsrc/shared/core/\n\u2514\u2500\u2500 validation.py     # Shared validation helpers\n\nsrc/shared/infra/\n\u251c\u2500\u2500 event_bus.py      # Pub/sub for domain events\n\u2514\u2500\u2500 signal_bridge/\n    \u251c\u2500\u2500 base.py       # BaseSignalBridge\n    \u2514\u2500\u2500 payloads.py   # UI-friendly DTOs\n</code></pre>"},{"location":"tutorials/#after-the-tutorial","title":"After the Tutorial","text":"<p>You should be able to:</p> <ol> <li>Explain why invariants are pure functions</li> <li>Write a new invariant and its tests</li> <li>Modify a deriver to use new invariants</li> <li>Trace an event from deriver to UI</li> <li>Know where to look when adding new features</li> </ol> <p>Ready? Start with Part 0: The Big Picture.</p>"},{"location":"tutorials/00-big-picture/","title":"Part 0: The Big Picture","text":"<p>Before diving into code, let's understand why QualCoder v2 uses this architecture.</p>"},{"location":"tutorials/00-big-picture/#the-problem-why-traditional-approaches-fail","title":"The Problem: Why Traditional Approaches Fail","text":"<p>QualCoder is a qualitative data analysis tool with complex requirements:</p>"},{"location":"tutorials/00-big-picture/#1-complex-validation-rules","title":"1. Complex Validation Rules","text":"<p>Consider creating a new Code: - Name can't be empty - Name must be unique (case-insensitive) - If assigning to a category, that category must exist - Color must have valid RGB values</p> <p>These rules interact. Testing them in a traditional <code>Code.create()</code> method means: - Mocking the database for uniqueness checks - Setting up category fixtures - Testing each combination of valid/invalid inputs</p>"},{"location":"tutorials/00-big-picture/#2-real-time-ui-updates","title":"2. Real-Time UI Updates","text":"<p>When an AI agent creates a Code in a background thread: - The codebook tree must update immediately - The activity feed must show what happened - Other views might need to refresh</p> <p>Traditional approaches scatter this logic: - Observer patterns couple components - Signals/slots become spaghetti - Race conditions lurk in threading</p>"},{"location":"tutorials/00-big-picture/#3-testing-is-painful","title":"3. Testing is Painful","text":"<p>To test \"creating a code with a duplicate name fails\":</p> <p>Traditional approach: <pre><code>def test_duplicate_name_rejected():\n    # Setup database connection\n    db = setup_test_database()\n    # Create existing code\n    repo = CodeRepository(db)\n    repo.save(Code(name=\"Theme A\", ...))\n    # Create service with dependencies\n    service = CodeService(repo, event_bus, ...)\n    # Finally test\n    with pytest.raises(DuplicateNameError):\n        service.create_code(\"Theme A\", ...)\n</code></pre></p> <p>With fDDD: <pre><code>def test_duplicate_name_rejected():\n    state = CodingState(existing_codes=(Code(name=\"Theme A\", ...),))\n    result = derive_create_code(\"Theme A\", ..., state=state)\n    assert isinstance(result, CodeNotCreated)\n    assert result.reason == \"DUPLICATE_NAME\"\n</code></pre></p> <p>No database. No mocks. Just data in, data out.</p>"},{"location":"tutorials/00-big-picture/#the-solution-functional-core-imperative-shell","title":"The Solution: Functional Core / Imperative Shell","text":"<p>The architecture separates pure logic from side effects:</p> <pre><code>graph TB\n    subgraph Presentation [\"Presentation Layer (PySide6 Widgets)\"]\n        UI[UI Widgets]\n        UI_DESC[\"\u2022 Receives SignalPayloads&lt;br/&gt;\u2022 Renders UI&lt;br/&gt;\u2022 Captures user input\"]\n    end\n\n    subgraph Application [\"Application Layer (EventBus, SignalBridge)\"]\n        APP[Controllers &amp; Bridges]\n        APP_DESC[\"\u2022 Routes domain events&lt;br/&gt;\u2022 Converts events \u2192 UI payloads&lt;br/&gt;\u2022 Handles threading\"]\n    end\n\n    subgraph Domain [\"Domain Layer (Pure Functions)\"]\n        DOM[Invariants, Derivers, Events]\n        DOM_DESC[\"\u2022 PURE FUNCTIONS - no I/O&lt;br/&gt;\u2022 All business rules live here&lt;br/&gt;\u2022 Fully testable in isolation\"]\n    end\n\n    subgraph Infrastructure [\"Infrastructure Layer (Repositories)\"]\n        INFRA[Repositories &amp; Adapters]\n        INFRA_DESC[\"\u2022 Database access&lt;br/&gt;\u2022 File I/O&lt;br/&gt;\u2022 External services\"]\n    end\n\n    INFRA --&gt;|Data| Domain\n    Domain --&gt;|Domain Events| Application\n    Application --&gt;|Qt Signals| Presentation</code></pre> <p>Key insight: The Domain Layer is a \"pure functional core\" - given the same inputs, it always produces the same outputs. Side effects (database writes, UI updates) happen at the edges.</p>"},{"location":"tutorials/00-big-picture/#the-5-building-blocks","title":"The 5 Building Blocks","text":"<pre><code>graph LR\n    subgraph \"Domain Layer\"\n        INV[Invariants]\n        DER[Derivers]\n        EVT[Events]\n    end\n\n    subgraph \"Application Layer\"\n        BUS[EventBus]\n        BRG[SignalBridge]\n    end\n\n    INV --&gt;|validate| DER\n    DER --&gt;|produce| EVT\n    EVT --&gt;|publish to| BUS\n    BUS --&gt;|route to| BRG\n    BRG --&gt;|emit| SIG[Qt Signals]</code></pre>"},{"location":"tutorials/00-big-picture/#1-invariants","title":"1. Invariants","text":"<p>Pure predicate functions that validate business rules.</p> <pre><code>def is_valid_code_name(name: str) -&gt; bool:\n    \"\"\"Name must be non-empty and &lt;= 100 chars.\"\"\"\n    return is_non_empty_string(name) and is_within_length(name, 1, 100)\n</code></pre> <p>Properties: - Take data, return <code>bool</code> - No side effects - Named <code>is_*</code> or <code>can_*</code></p>"},{"location":"tutorials/00-big-picture/#2-derivers","title":"2. Derivers","text":"<p>Pure functions that compose invariants and derive events.</p> <pre><code>def derive_create_code(name, color, state) -&gt; CodeCreated | CodeNotCreated:\n    if not is_valid_code_name(name):\n        return CodeNotCreated.empty_name()\n    if not is_code_name_unique(name, state.existing_codes):\n        return CodeNotCreated.duplicate_name(name)\n    return CodeCreated.create(name=name, color=color, ...)\n</code></pre> <p>Properties: - Take command + state, return success event or failure event - Compose multiple invariants - Pattern: <code>(command, state) -&gt; SuccessEvent | FailureEvent</code></p>"},{"location":"tutorials/00-big-picture/#3-events","title":"3. Events","text":"<p>Immutable records of things that happened.</p> <pre><code>@dataclass(frozen=True)\nclass CodeCreated(DomainEvent):\n    code_id: CodeId\n    name: str\n    color: Color\n</code></pre> <p>Properties: - Past tense naming (<code>CodeCreated</code>, not <code>CreateCode</code>) - Immutable (frozen dataclass) - Carry all data needed by subscribers</p>"},{"location":"tutorials/00-big-picture/#4-eventbus","title":"4. EventBus","text":"<p>Pub/sub infrastructure for domain events.</p> <pre><code># Subscribe\nbus.subscribe(\"coding.code_created\", handle_code_created)\n\n# Publish\nbus.publish(CodeCreated(...))\n</code></pre> <p>Properties: - Decouples publishers from subscribers - Type-based or string-based subscription - Thread-safe</p>"},{"location":"tutorials/00-big-picture/#5-signalbridge","title":"5. SignalBridge","text":"<p>Converts domain events to Qt signals.</p> <pre><code>class CodingSignalBridge(BaseSignalBridge):\n    code_created = Signal(object)  # Emits CodeCreatedPayload\n\n    def _register_converters(self):\n        self.register_converter(\n            \"coding.code_created\",\n            CodeCreatedConverter(),\n            \"code_created\"\n        )\n</code></pre> <p>Properties: - Bridges background threads to Qt main thread - Converts domain events to UI-friendly payloads - One bridge per bounded context</p>"},{"location":"tutorials/00-big-picture/#how-they-work-together","title":"How They Work Together","text":"<p>When a user clicks \"Create Code\":</p> <pre><code>sequenceDiagram\n    participant UI as UI Widget\n    participant C as Controller\n    participant D as Deriver\n    participant R as Repository\n    participant EB as EventBus\n    participant SB as SignalBridge\n    participant TV as TreeView\n\n    UI-&gt;&gt;C: create_code(\"Theme A\", color)\n    C-&gt;&gt;R: get_all()\n    R--&gt;&gt;C: existing_codes\n    C-&gt;&gt;D: derive_create_code(name, color, state)\n\n    Note over D: Validates using invariants:&lt;br/&gt;is_valid_code_name() \u2713&lt;br/&gt;is_code_name_unique() \u2713\n\n    D--&gt;&gt;C: CodeCreated event\n    C-&gt;&gt;R: save(event)\n    C-&gt;&gt;EB: publish(event)\n    EB-&gt;&gt;SB: _on_code_created(event)\n\n    Note over SB: Convert to payload\n\n    SB-&gt;&gt;TV: code_created.emit(payload)\n    TV-&gt;&gt;TV: Update tree view</code></pre>"},{"location":"tutorials/00-big-picture/#next-steps","title":"Next Steps","text":"<p>Now that you understand the big picture, let's write your first invariant.</p> <p>Next: Part 1: Your First Invariant</p>"},{"location":"tutorials/01-first-invariant/","title":"Part 1: Your First Invariant","text":"<p>Let's write a pure validation function for our \"priority\" feature.</p>"},{"location":"tutorials/01-first-invariant/#what-is-an-invariant","title":"What is an Invariant?","text":"<p>An invariant is a pure predicate function that validates a business rule. It:</p> <ul> <li>Takes data as input</li> <li>Returns <code>True</code> (valid) or <code>False</code> (invalid)</li> <li>Has no side effects - doesn't modify anything, doesn't call external services</li> <li>Is named with <code>is_*</code> or <code>can_*</code> prefix</li> </ul>"},{"location":"tutorials/01-first-invariant/#the-priority-rule","title":"The Priority Rule","text":"<p>For our toy example, we're adding an optional priority field to Codes:</p> <p>Rule: Priority must be 1-5 (inclusive), or <code>None</code> (no priority set).</p> <p>Let's encode this as an invariant.</p>"},{"location":"tutorials/01-first-invariant/#writing-the-invariant","title":"Writing the Invariant","text":"<p>Open <code>src/contexts/coding/core/invariants.py</code>. You'll see existing invariants like:</p> <pre><code>def is_valid_code_name(name: str) -&gt; bool:\n    \"\"\"\n    Check that a code name is valid.\n\n    Rules:\n    - Not empty or whitespace-only\n    - Between 1 and 100 characters\n    \"\"\"\n    return is_non_empty_string(name) and is_within_length(name, 1, 100)\n</code></pre> <p>Notice the pattern: 1. Clear docstring stating the rule 2. Pure logic using helper predicates 3. Returns <code>bool</code></p> <p>Now let's write our priority invariant:</p> <pre><code>def is_valid_priority(priority: Optional[int]) -&gt; bool:\n    \"\"\"\n    Check that a priority value is valid.\n\n    Rules:\n    - None is allowed (no priority)\n    - If set, must be 1-5 (inclusive)\n    \"\"\"\n    if priority is None:\n        return True\n    return 1 &lt;= priority &lt;= 5\n</code></pre> <p>That's it! A few lines of pure logic.</p>"},{"location":"tutorials/01-first-invariant/#why-this-is-powerful","title":"Why This is Powerful","text":"<p>This tiny function is:</p> <ol> <li>Trivial to test - no setup, no mocks</li> <li>Easy to understand - the rule is right there</li> <li>Reusable - any code that needs to validate priority calls this</li> <li>Composable - derivers combine this with other invariants</li> </ol>"},{"location":"tutorials/01-first-invariant/#writing-tests","title":"Writing Tests","text":"<p>Open <code>src/contexts/coding/core/tests/test_invariants.py</code>. You'll see test classes for each invariant group. Let's add tests for priority:</p> <pre><code>class TestPriorityInvariants:\n    \"\"\"Tests for priority validation.\"\"\"\n\n    def test_none_priority_is_valid(self):\n        \"\"\"None (no priority) should be valid.\"\"\"\n        assert is_valid_priority(None) is True\n\n    def test_valid_priority_values(self):\n        \"\"\"Priority 1-5 should be valid.\"\"\"\n        assert is_valid_priority(1) is True\n        assert is_valid_priority(3) is True\n        assert is_valid_priority(5) is True\n\n    def test_priority_below_range_invalid(self):\n        \"\"\"Priority below 1 should be invalid.\"\"\"\n        assert is_valid_priority(0) is False\n        assert is_valid_priority(-1) is False\n\n    def test_priority_above_range_invalid(self):\n        \"\"\"Priority above 5 should be invalid.\"\"\"\n        assert is_valid_priority(6) is False\n        assert is_valid_priority(100) is False\n</code></pre> <p>Run the tests:</p> <pre><code>pytest src/contexts/coding/core/tests/test_invariants.py::TestPriorityInvariants -v\n</code></pre>"},{"location":"tutorials/01-first-invariant/#anatomy-of-an-invariant-test","title":"Anatomy of an Invariant Test","text":"<p>Notice how simple these tests are:</p> <pre><code>def test_valid_priority_values(self):\n    assert is_valid_priority(1) is True\n</code></pre> <p>Compare to testing validation in a traditional service:</p> <pre><code>def test_valid_priority_values(self):\n    # Setup database\n    db = create_test_db()\n    # Setup repository\n    repo = CodeRepository(db)\n    # Setup service\n    service = CodeService(repo, event_bus, logger)\n    # Create test code with priority\n    code = service.create_code(\"Test\", color, priority=1)\n    # Assert no exception was raised\n    assert code.priority == 1\n</code></pre> <p>The pure function test is: - Faster - no I/O - Simpler - no fixtures - Focused - tests exactly one rule</p>"},{"location":"tutorials/01-first-invariant/#edge-cases-to-consider","title":"Edge Cases to Consider","text":"<p>When writing invariants, think about:</p> <ol> <li>Boundary values: 1 and 5 are edges of our range</li> <li>None/empty: Is <code>None</code> valid? (Yes, for optional fields)</li> <li>Type boundaries: What about <code>0</code>? Negative numbers?</li> </ol> <p>Our tests cover these.</p>"},{"location":"tutorials/01-first-invariant/#invariants-vs-validation-methods","title":"Invariants vs Validation Methods","text":"<p>You might ask: \"Why not put this in the <code>Code</code> entity?\"</p> <pre><code># Don't do this\n@dataclass\nclass Code:\n    priority: Optional[int] = None\n\n    def __post_init__(self):\n        if self.priority is not None and not (1 &lt;= self.priority &lt;= 5):\n            raise ValueError(\"Priority must be 1-5\")\n</code></pre> <p>Problems: 1. Couples validation to entity - can't reuse the rule 2. Throws exceptions - forces try/except control flow 3. Hard to test - must create full entity to test one rule</p> <p>With invariants: 1. Decoupled - rule lives independently 2. Returns bool - caller decides what to do 3. Easy to test - just call the function</p>"},{"location":"tutorials/01-first-invariant/#summary","title":"Summary","text":"<p>You've learned:</p> <ul> <li>Invariants are pure predicate functions</li> <li>They validate one business rule</li> <li>Testing them requires no setup</li> <li>The pattern: <code>is_*(value) -&gt; bool</code></li> </ul> <p>In the actual codebase, you'd add <code>is_valid_priority</code> to <code>src/contexts/coding/core/invariants.py</code> and the tests to <code>src/contexts/coding/core/tests/test_invariants.py</code>. The snippets here show the pattern.</p>"},{"location":"tutorials/01-first-invariant/#next-steps","title":"Next Steps","text":"<p>Now let's use this invariant in a deriver to produce domain events.</p> <p>Next: Part 2: Your First Deriver</p>"},{"location":"tutorials/02-first-deriver/","title":"Part 2: Your First Deriver","text":"<p>Now let's compose invariants into event derivation.</p>"},{"location":"tutorials/02-first-deriver/#what-is-a-deriver","title":"What is a Deriver?","text":"<p>A deriver is a pure function that:</p> <ol> <li>Takes a command (what the user wants to do) and state (current system state)</li> <li>Validates using invariants</li> <li>Returns either a success event or a failure</li> </ol> <p>The pattern:</p> <pre><code>(command, state) -&gt; SuccessEvent | Failure\n</code></pre>"},{"location":"tutorials/02-first-deriver/#examining-derive_create_code","title":"Examining <code>derive_create_code</code>","text":"<p>Open <code>src/contexts/coding/core/derivers.py</code> and find <code>derive_create_code</code>:</p> <pre><code>def derive_create_code(\n    name: str,\n    color: Color,\n    memo: str | None,\n    category_id: CategoryId | None,\n    owner: str | None,\n    state: CodingState,\n) -&gt; CodeCreated | CodeNotCreated:\n    \"\"\"\n    Derive a CodeCreated event or failure event.\n    \"\"\"\n    # Validate name\n    if not is_valid_code_name(name):\n        return CodeNotCreated.empty_name()\n\n    # Check uniqueness\n    if not is_code_name_unique(name, state.existing_codes):\n        return CodeNotCreated.duplicate_name(name)\n\n    # Validate category exists if specified\n    if category_id is not None:\n        if not does_category_exist(category_id, state.existing_categories):\n            return CodeNotCreated.category_not_found(category_id)\n\n    # Generate new ID and create event\n    new_id = CodeId.new()\n\n    return CodeCreated.create(\n        code_id=new_id,\n        name=name,\n        color=color,\n        memo=memo,\n        category_id=category_id,\n        owner=owner,\n    )\n</code></pre> <p>Notice the pattern: 1. Validate using invariants, return a failure event early if invalid 2. Compute any derived values (like generating an ID) 3. Return the success event</p>"},{"location":"tutorials/02-first-deriver/#adding-priority-validation","title":"Adding Priority Validation","text":"<p>Let's extend this deriver to validate priority. First, we need a failure event type. In QualCoder v2, failure events are defined in <code>src/contexts/coding/core/failure_events.py</code>:</p> <pre><code># In failure_events.py\n@dataclass(frozen=True)\nclass CodeNotCreated(FailureEvent):\n    \"\"\"Code creation failed.\"\"\"\n\n    reason: str\n    name: str | None = None\n    category_id: CategoryId | None = None\n\n    @classmethod\n    def invalid_priority(cls, value: int) -&gt; \"CodeNotCreated\":\n        return cls(\n            event_id=cls._generate_id(),\n            occurred_at=cls._now(),\n            reason=f\"Priority must be between 1 and 5, got {value}\",\n        )\n</code></pre> <p>Now modify the deriver:</p> <pre><code>def derive_create_code(\n    name: str,\n    color: Color,\n    memo: str | None,\n    category_id: CategoryId | None,\n    priority: int | None,  # NEW parameter\n    owner: str | None,\n    state: CodingState,\n) -&gt; CodeCreated | CodeNotCreated:\n    \"\"\"\n    Derive a CodeCreated event or failure event.\n    \"\"\"\n    # Validate name\n    if not is_valid_code_name(name):\n        return CodeNotCreated.empty_name()\n\n    # Check uniqueness\n    if not is_code_name_unique(name, state.existing_codes):\n        return CodeNotCreated.duplicate_name(name)\n\n    # Validate category exists if specified\n    if category_id is not None:\n        if not does_category_exist(category_id, state.existing_categories):\n            return CodeNotCreated.category_not_found(category_id)\n\n    # NEW: Validate priority\n    if not is_valid_priority(priority):\n        return CodeNotCreated.invalid_priority(priority)\n\n    # Generate new ID and create event\n    new_id = CodeId.new()\n\n    return CodeCreated.create(\n        code_id=new_id,\n        name=name,\n        color=color,\n        memo=memo,\n        category_id=category_id,\n        priority=priority,  # NEW field in event\n        owner=owner,\n    )\n</code></pre> <p>We also need to update the event (see below).</p>"},{"location":"tutorials/02-first-deriver/#updating-the-event","title":"Updating the Event","text":"<p>Open <code>src/contexts/coding/core/events.py</code> and find <code>CodeCreated</code>:</p> <pre><code>@dataclass(frozen=True)\nclass CodeCreated(DomainEvent):\n    \"\"\"A new code was created in the codebook\"\"\"\n    code_id: CodeId\n    name: str\n    color: Color\n    memo: Optional[str] = None\n    category_id: Optional[CategoryId] = None\n    priority: Optional[int] = None  # NEW field\n    owner: Optional[str] = None\n</code></pre> <p>And update its factory method:</p> <pre><code>@classmethod\ndef create(\n    cls,\n    code_id: CodeId,\n    name: str,\n    color: Color,\n    memo: Optional[str] = None,\n    category_id: Optional[CategoryId] = None,\n    priority: Optional[int] = None,  # NEW\n    owner: Optional[str] = None\n) -&gt; 'CodeCreated':\n    return cls(\n        event_id=cls._generate_id(),\n        occurred_at=cls._now(),\n        code_id=code_id,\n        name=name,\n        color=color,\n        memo=memo,\n        category_id=category_id,\n        priority=priority,  # NEW\n        owner=owner\n    )\n</code></pre>"},{"location":"tutorials/02-first-deriver/#testing-the-deriver","title":"Testing the Deriver","text":"<p>Open <code>src/contexts/coding/core/tests/test_derivers.py</code>. Add tests for priority:</p> <pre><code>class TestDeriveCreateCodePriority:\n    \"\"\"Tests for priority validation in derive_create_code.\"\"\"\n\n    def test_creates_code_with_valid_priority(self, empty_state: CodingState):\n        \"\"\"Should create code with priority 1-5.\"\"\"\n        result = derive_create_code(\n            name=\"High Priority Theme\",\n            color=Color(red=100, green=150, blue=200),\n            memo=None,\n            category_id=None,\n            priority=5,\n            owner=\"user1\",\n            state=empty_state,\n        )\n\n        assert isinstance(result, CodeCreated)\n        assert result.priority == 5\n\n    def test_creates_code_with_no_priority(self, empty_state: CodingState):\n        \"\"\"Should create code without priority (None).\"\"\"\n        result = derive_create_code(\n            name=\"No Priority Theme\",\n            color=Color(red=100, green=150, blue=200),\n            memo=None,\n            category_id=None,\n            priority=None,\n            owner=\"user1\",\n            state=empty_state,\n        )\n\n        assert isinstance(result, CodeCreated)\n        assert result.priority is None\n\n    def test_fails_with_invalid_priority(self, empty_state: CodingState):\n        \"\"\"Should return failure event with priority outside 1-5.\"\"\"\n        result = derive_create_code(\n            name=\"Bad Priority Theme\",\n            color=Color(red=100, green=150, blue=200),\n            memo=None,\n            category_id=None,\n            priority=10,\n            owner=\"user1\",\n            state=empty_state,\n        )\n\n        assert isinstance(result, CodeNotCreated)\n        assert \"Priority must be between 1 and 5\" in result.reason\n</code></pre>"},{"location":"tutorials/02-first-deriver/#the-codingstate-container","title":"The CodingState Container","text":"<p>Notice we pass <code>state: CodingState</code> to derivers. Look at its definition:</p> <pre><code>@dataclass(frozen=True)\nclass CodingState:\n    \"\"\"\n    State container for coding context derivers.\n    Contains all the context needed to validate operations.\n    \"\"\"\n    existing_codes: tuple[Code, ...] = ()\n    existing_categories: tuple[Category, ...] = ()\n    existing_segments: tuple[Segment, ...] = ()\n    source_length: Optional[int] = None\n    source_exists: bool = True\n</code></pre> <p>Key points: - Immutable (frozen dataclass with tuples) - Contains everything needed for validation - Passed in - the deriver doesn't fetch data</p> <p>This is crucial: the deriver is pure because all inputs are explicit. No hidden database calls.</p>"},{"location":"tutorials/02-first-deriver/#why-return-failure-events-instead-of-raising-exceptions","title":"Why Return Failure Events Instead of Raising Exceptions?","text":"<p>You might ask: \"Why not just raise an exception?\"</p> <pre><code># Traditional approach\ndef create_code(name, ...):\n    if not is_valid_code_name(name):\n        raise ValueError(\"Invalid name\")\n    ...\n</code></pre> <p>Problems: 1. Hidden control flow - caller must know what exceptions to catch 2. No type safety - can't express \"returns X or these errors\" in types 3. Forces try/except - clutters calling code</p> <p>With explicit failure events: 1. Visible in signature - <code>-&gt; CodeCreated | CodeNotCreated</code> 2. Pattern matchable - <code>if isinstance(result, CodeNotCreated): ...</code> 3. Composable - can chain operations that might fail 4. Rich error data - failure events carry context (reason, related IDs, etc.)</p>"},{"location":"tutorials/02-first-deriver/#summary","title":"Summary","text":"<p>You've learned:</p> <ul> <li>Derivers compose invariants into event derivation</li> <li>Pattern: <code>(command, state) -&gt; SuccessEvent | Failure</code></li> <li>State is passed in, making derivers pure</li> <li>Failures are returned, not raised</li> </ul>"},{"location":"tutorials/02-first-deriver/#next-steps","title":"Next Steps","text":"<p>Let's dive deeper into why <code>Success | Failure</code> beats exceptions.</p> <p>Next: Part 3: Understanding the Result Type</p>"},{"location":"tutorials/03-result-type/","title":"Part 3: Understanding Failure Events and the Result Type","text":"<p>Why do we use explicit failure events instead of exceptions?</p>"},{"location":"tutorials/03-result-type/#the-problem-with-exceptions","title":"The Problem with Exceptions","text":"<p>Consider this traditional approach:</p> <pre><code>def create_code(name: str, color: Color) -&gt; Code:\n    \"\"\"Create a new code. Raises ValueError on invalid input.\"\"\"\n    if not name:\n        raise ValueError(\"Name cannot be empty\")\n    if not is_unique(name):\n        raise DuplicateNameError(f\"Name '{name}' already exists\")\n    if not is_valid_color(color):\n        raise ValueError(\"Invalid color\")\n    return Code(name=name, color=color)\n</code></pre> <p>Problems:</p>"},{"location":"tutorials/03-result-type/#1-hidden-control-flow","title":"1. Hidden Control Flow","text":"<p>The function signature says <code>-&gt; Code</code>, but it might not return a <code>Code</code> at all! The caller must know (somehow) what exceptions to catch:</p> <pre><code>try:\n    code = create_code(name, color)\nexcept ValueError as e:\n    # Was it the name? The color? Something else?\n    show_error(str(e))\nexcept DuplicateNameError as e:\n    show_error(\"Name taken\")\n</code></pre>"},{"location":"tutorials/03-result-type/#2-no-type-safety","title":"2. No Type Safety","text":"<p>Python's type system can't express \"returns Code or raises these specific exceptions.\" The caller has no compile-time help.</p>"},{"location":"tutorials/03-result-type/#3-exception-proliferation","title":"3. Exception Proliferation","text":"<p>Each failure type needs its own exception class:</p> <pre><code>class EmptyNameError(ValueError): pass\nclass DuplicateNameError(ValueError): pass\nclass InvalidColorError(ValueError): pass\nclass InvalidPriorityError(ValueError): pass\n# ... and on it goes\n</code></pre>"},{"location":"tutorials/03-result-type/#4-composition-is-awkward","title":"4. Composition is Awkward","text":"<p>Chaining operations that might fail requires nested try/except:</p> <pre><code>try:\n    code = create_code(name, color)\n    try:\n        segment = apply_code(code.id, source_id, position)\n    except CodeNotFoundError:\n        ...\n    except InvalidPositionError:\n        ...\nexcept DuplicateNameError:\n    ...\n</code></pre>"},{"location":"tutorials/03-result-type/#the-failure-events-solution","title":"The Failure Events Solution","text":"<p>QualCoder v2 uses failure events - domain events that represent failed operations. These are defined in <code>src/contexts/{context}/core/failure_events.py</code>:</p> <pre><code>@dataclass(frozen=True)\nclass CodeNotCreated(FailureEvent):\n    \"\"\"Failure event: Code creation failed.\"\"\"\n\n    name: str | None = None\n    category_id: CategoryId | None = None\n\n    @classmethod\n    def empty_name(cls) -&gt; CodeNotCreated:\n        return cls(\n            event_id=cls._generate_id(),\n            occurred_at=cls._now(),\n            event_type=\"CODE_NOT_CREATED/EMPTY_NAME\",\n        )\n\n    @classmethod\n    def duplicate_name(cls, name: str) -&gt; CodeNotCreated:\n        return cls(\n            event_id=cls._generate_id(),\n            occurred_at=cls._now(),\n            event_type=\"CODE_NOT_CREATED/DUPLICATE_NAME\",\n            name=name,\n        )\n</code></pre> <p>Now our function signature is honest:</p> <pre><code>def derive_create_code(...) -&gt; CodeCreated | CodeNotCreated:\n</code></pre> <p>The return type tells you: \"You'll get a <code>CodeCreated</code> success event OR a <code>CodeNotCreated</code> failure event.\"</p> <p>Note: The codebase also re-exports the <code>returns</code> library's <code>Success</code>/<code>Failure</code> types from <code>src/contexts/shared/core/types.py</code> for use in other scenarios.</p>"},{"location":"tutorials/03-result-type/#benefits","title":"Benefits","text":""},{"location":"tutorials/03-result-type/#1-explicit-error-handling","title":"1. Explicit Error Handling","text":"<p>The caller must handle both cases:</p> <pre><code>result = derive_create_code(name, color, state)\n\nif isinstance(result, CodeNotCreated):\n    # Handle error - can't accidentally ignore it\n    return handle_error(result)\n\n# result is CodeCreated here\nsave_and_publish(result)\n</code></pre>"},{"location":"tutorials/03-result-type/#2-pattern-matching-on-failure-events","title":"2. Pattern Matching on Failure Events","text":"<p>Failure events have a <code>reason</code> property extracted from their <code>event_type</code>:</p> <pre><code>result = derive_create_code(name, color, state)\n\nif isinstance(result, CodeNotCreated):\n    match result.reason:\n        case \"EMPTY_NAME\":\n            show_error(\"Please enter a name\")\n        case \"DUPLICATE_NAME\":\n            show_error(f\"'{result.name}' already exists\")\n        case \"CATEGORY_NOT_FOUND\":\n            show_error(f\"Category not found\")\n        case _:\n            show_error(result.message)  # Fallback to human-readable message\n</code></pre>"},{"location":"tutorials/03-result-type/#3-failure-events-are-data","title":"3. Failure Events are Data","text":"<p>Failure events carry context as data:</p> <pre><code>@dataclass(frozen=True)\nclass CodeNotCreated(FailureEvent):\n    name: str | None = None\n    category_id: CategoryId | None = None\n\n    @property\n    def message(self) -&gt; str:\n        match self.reason:\n            case \"EMPTY_NAME\":\n                return \"Code name cannot be empty\"\n            case \"DUPLICATE_NAME\":\n                return f\"Code name '{self.name}' already exists\"\n            case _:\n                return super().message\n</code></pre> <p>You can: - Access <code>result.name</code> for the conflicting name - Access <code>result.message</code> for user-friendly text - Access <code>result.reason</code> for programmatic handling - Publish failure events to the EventBus for policies to react</p>"},{"location":"tutorials/03-result-type/#4-no-hidden-control-flow","title":"4. No Hidden Control Flow","text":"<p>The function signature tells the whole story. No surprise exceptions.</p>"},{"location":"tutorials/03-result-type/#5-composition-with-explicit-checking","title":"5. Composition with Explicit Checking","text":"<p>For chaining operations, explicit checking works well:</p> <pre><code>def create_and_apply(name, color, source_id, position, state):\n    # First operation\n    code_result = derive_create_code(name, color, state)\n    if isinstance(code_result, CodeNotCreated):\n        return code_result  # Pass through the failure event\n\n    # Second operation\n    segment_result = derive_apply_code_to_text(\n        code_id=code_result.code_id,\n        source_id=source_id,\n        start=position.start,\n        end=position.end,\n        selected_text=\"...\",\n        memo=None,\n        importance=0,\n        owner=None,\n        state=state,\n    )\n\n    return segment_result  # Could be SegmentCoded or SegmentNotCoded\n</code></pre> <p>Note: The <code>returns</code> library (<code>Success</code>/<code>Failure</code>/<code>Result</code>) is also available from <code>src/contexts/shared/core/types.py</code> for scenarios where you need monadic composition.</p>"},{"location":"tutorials/03-result-type/#failure-events-in-qualcoder","title":"Failure Events in QualCoder","text":"<p>Look at the failure events in <code>src/contexts/coding/core/failure_events.py</code>:</p> <pre><code>@dataclass(frozen=True)\nclass CodeNotCreated(FailureEvent):\n    \"\"\"Failure event: Code creation failed.\"\"\"\n    name: str | None = None\n    category_id: CategoryId | None = None\n\n    @classmethod\n    def empty_name(cls) -&gt; CodeNotCreated:\n        return cls(event_type=\"CODE_NOT_CREATED/EMPTY_NAME\", ...)\n\n    @classmethod\n    def duplicate_name(cls, name: str) -&gt; CodeNotCreated:\n        return cls(event_type=\"CODE_NOT_CREATED/DUPLICATE_NAME\", name=name, ...)\n\n@dataclass(frozen=True)\nclass CodeNotDeleted(FailureEvent):\n    \"\"\"Failure event: Code deletion failed.\"\"\"\n    code_id: CodeId | None = None\n    reference_count: int = 0\n\n    @classmethod\n    def not_found(cls, code_id: CodeId) -&gt; CodeNotDeleted:\n        return cls(event_type=\"CODE_NOT_DELETED/NOT_FOUND\", code_id=code_id, ...)\n\n    @classmethod\n    def has_references(cls, code_id: CodeId, count: int) -&gt; CodeNotDeleted:\n        return cls(event_type=\"CODE_NOT_DELETED/HAS_REFERENCES\", code_id=code_id, reference_count=count, ...)\n</code></pre> <p>Each failure event: - Inherits from <code>FailureEvent</code> base class - Is a frozen dataclass (immutable) - Has factory methods for each failure reason - Carries relevant context (IDs, names, counts) - Has a <code>message</code> property for human-readable output - Has a <code>reason</code> property extracted from <code>event_type</code> - Can be published to the EventBus for policies to react</p>"},{"location":"tutorials/03-result-type/#when-to-use-each","title":"When to Use Each","text":"<p>Use failure events for: - Business rule violations (duplicate name, invalid priority) - Missing entities (code not found, category not found) - Invalid state transitions - Any failure that policies or UI might need to react to</p> <p>Use exceptions for: - Programming errors (should never happen in production) - Infrastructure failures (database down, network error) - System-level issues (out of memory)</p> <p>The domain layer returns failure events. The infrastructure/application layers handle exceptions.</p>"},{"location":"tutorials/03-result-type/#summary","title":"Summary","text":"<p>Failure events (<code>CodeCreated | CodeNotCreated</code>) provide:</p> <ul> <li>Explicit error handling - can't forget to check</li> <li>Type-safe - errors are data, not exceptions</li> <li>Pattern matchable - easy to handle different reasons</li> <li>Publishable - failure events can be published to EventBus for policies</li> <li>Rich context - carry IDs, names, and human-readable messages</li> <li>No hidden control flow - signature tells all</li> </ul>"},{"location":"tutorials/03-result-type/#next-steps","title":"Next Steps","text":"<p>Now let's trace how events flow from the domain to the UI.</p> <p>Next: Part 4: Events Flow Through the System</p>"},{"location":"tutorials/04-event-flow/","title":"Part 4: Events Flow Through the System","text":"<p>Let's trace how a <code>CodeCreated</code> event travels from the deriver to the UI.</p>"},{"location":"tutorials/04-event-flow/#the-journey","title":"The Journey","text":"<p>When a user creates a Code, the event travels through four layers:</p> <pre><code>graph LR\n    A[Controller&lt;br/&gt;&lt;i&gt;deriver&lt;/i&gt;] --&gt;|Domain Event| B[EventBus&lt;br/&gt;&lt;i&gt;pub/sub&lt;/i&gt;]\n    B --&gt;|Subscribe| C[SignalBridge&lt;br/&gt;&lt;i&gt;Qt signals&lt;/i&gt;]\n    C --&gt;|Emit| D[UI&lt;br/&gt;&lt;i&gt;widgets&lt;/i&gt;]</code></pre> <p>Let's trace each step.</p>"},{"location":"tutorials/04-event-flow/#step-1-controller-calls-deriver","title":"Step 1: Controller Calls Deriver","text":"<p>A Controller orchestrates the operation:</p> <pre><code># In a hypothetical CodingController\nclass CodingController:\n    def __init__(self, code_repo, event_bus):\n        self._code_repo = code_repo\n        self._event_bus = event_bus\n\n    def create_code(\n        self,\n        name: str,\n        color: Color,\n        priority: Optional[int] = None,\n    ) -&gt; CodeCreated | Failure:\n        # 1. Build state from repositories\n        state = CodingState(\n            existing_codes=tuple(self._code_repo.get_all()),\n            existing_categories=tuple(self._category_repo.get_all()),\n        )\n\n        # 2. Call the pure deriver\n        result = derive_create_code(\n            name=name,\n            color=color,\n            memo=None,\n            category_id=None,\n            priority=priority,\n            owner=\"local\",\n            state=state,\n        )\n\n        # 3. Handle failure\n        if isinstance(result, CodeNotCreated):\n            return result\n\n        # 4. Persist (side effect)\n        self._code_repo.save_from_event(result)\n\n        # 5. Publish event (side effect)\n        self._event_bus.publish(result)\n\n        return result\n</code></pre> <p>Key points: - The deriver is pure - it just computes - The controller handles side effects - persistence, publishing - State is built before calling the deriver</p>"},{"location":"tutorials/04-event-flow/#step-2-eventbus-receives-and-routes","title":"Step 2: EventBus Receives and Routes","text":"<p>Look at <code>src/application/event_bus.py</code>:</p> <pre><code>class EventBus:\n    def publish(self, event: Any) -&gt; None:\n        \"\"\"Publish an event to all matching subscribers.\"\"\"\n        event_type = self._get_event_type(event)\n\n        # Get handlers for this event type\n        type_handlers = list(self._handlers.get(event_type, []))\n\n        # Invoke each handler\n        for handler in type_handlers:\n            handler(event)\n</code></pre> <p>The EventBus: 1. Extracts the event type (e.g., <code>\"coding.code_created\"</code>) 2. Finds all subscribers for that type 3. Calls each handler synchronously</p> <p>Event type is derived from the class: - <code>CodeCreated</code> in module <code>src.domain.coding.events</code> - Becomes <code>\"coding.code_created\"</code></p>"},{"location":"tutorials/04-event-flow/#step-3-signalbridge-receives-event","title":"Step 3: SignalBridge Receives Event","text":"<p>The SignalBridge subscribes to domain events and converts them to Qt signals.</p> <p>From <code>src/application/signal_bridge/base.py</code>:</p> <pre><code>class BaseSignalBridge(QObject, ABC):\n    def start(self) -&gt; None:\n        \"\"\"Start listening to domain events.\"\"\"\n        for event_type in self._converters:\n            handler = self._make_handler(event_type)\n            self._event_bus.subscribe(event_type, handler)\n\n    def _dispatch_event(self, event_type: str, event: Any) -&gt; None:\n        \"\"\"Dispatch a domain event to the appropriate signal.\"\"\"\n        converter, signal_name = self._converters[event_type]\n\n        # Convert event to UI-friendly payload\n        payload = converter.convert(event)\n\n        # Get the signal\n        signal = self._signals.get(signal_name)\n\n        # Emit thread-safely\n        self._emit_threadsafe(signal, payload)\n</code></pre> <p>A context-specific bridge might look like:</p> <pre><code>class CodingSignalBridge(BaseSignalBridge):\n    # Define Qt signals\n    code_created = Signal(object)\n    code_deleted = Signal(object)\n    code_renamed = Signal(object)\n\n    def _get_context_name(self) -&gt; str:\n        return \"coding\"\n\n    def _register_converters(self) -&gt; None:\n        self.register_converter(\n            \"coding.code_created\",\n            CodeCreatedConverter(),\n            \"code_created\"  # Signal to emit\n        )\n</code></pre>"},{"location":"tutorials/04-event-flow/#step-4-converter-transforms-event-to-payload","title":"Step 4: Converter Transforms Event to Payload","text":"<p>The converter maps domain event fields to UI-friendly payload:</p> <pre><code>class CodeCreatedConverter:\n    def convert(self, event: CodeCreated) -&gt; CodeCreatedPayload:\n        return CodeCreatedPayload(\n            timestamp=event.occurred_at,\n            session_id=\"local\",\n            is_ai_action=False,\n            event_type=\"coding.code_created\",\n            code_id=event.code_id.value,\n            name=event.name,\n            color_hex=event.color.to_hex(),\n            priority=event.priority,  # Include new field\n            category_id=event.category_id.value if event.category_id else None,\n        )\n</code></pre> <p>Why convert? - Domain events use domain types (<code>CodeId</code>, <code>Color</code>) - UI needs primitive types (<code>int</code>, <code>str</code>, <code>#hex</code>) - Payloads are UI-optimized DTOs</p>"},{"location":"tutorials/04-event-flow/#step-5-qt-signal-emits-thread-safe","title":"Step 5: Qt Signal Emits (Thread-Safe)","text":"<p>The SignalBridge ensures emission happens on the Qt main thread:</p> <pre><code>def _emit_threadsafe(self, signal: Any, payload: Any) -&gt; None:\n    if is_main_thread():\n        # Already on main thread - emit directly\n        signal.emit(payload)\n    else:\n        # Queue for main thread\n        QMetaObject.invokeMethod(...)\n</code></pre> <p>This is critical: - Domain events might come from background threads (AI agent) - Qt widgets can only be updated from the main thread - SignalBridge handles the threading automatically</p>"},{"location":"tutorials/04-event-flow/#step-6-ui-widget-receives-payload","title":"Step 6: UI Widget Receives Payload","text":"<p>A Qt widget connects to the signal:</p> <pre><code>class CodebookTreeView(QTreeView):\n    def __init__(self, signal_bridge: CodingSignalBridge):\n        super().__init__()\n        # Connect to signal\n        signal_bridge.code_created.connect(self._on_code_created)\n\n    def _on_code_created(self, payload: CodeCreatedPayload):\n        \"\"\"Handle new code creation.\"\"\"\n        # Add to tree model\n        item = QStandardItem(payload.name)\n        item.setData(payload.code_id, Qt.ItemDataRole.UserRole)\n        item.setForeground(QColor(payload.color_hex))\n        self.model().appendRow(item)\n</code></pre>"},{"location":"tutorials/04-event-flow/#tracing-the-full-flow","title":"Tracing the Full Flow","text":"<p>Let's trace \"Create Code with priority=3\":</p> <pre><code>sequenceDiagram\n    participant User\n    participant Button as Create Button\n    participant Ctrl as Controller\n    participant Repo as Repository\n    participant Der as Deriver\n    participant EB as EventBus\n    participant SB as SignalBridge\n    participant Tree as TreeView\n    participant Activity as ActivityPanel\n\n    User-&gt;&gt;Button: Click \"Create Code\"\n    Button-&gt;&gt;Ctrl: create_code(\"Theme A\", color, priority=3)\n\n    Note over Ctrl,Repo: Build State\n    Ctrl-&gt;&gt;Repo: get_all()\n    Repo--&gt;&gt;Ctrl: existing_codes\n\n    Note over Ctrl,Der: Pure Domain Logic\n    Ctrl-&gt;&gt;Der: derive_create_code(...)\n    Note over Der: is_valid_code_name() \u2713&lt;br/&gt;is_code_name_unique() \u2713&lt;br/&gt;is_valid_priority(3) \u2713\n    Der--&gt;&gt;Ctrl: CodeCreated event\n\n    Note over Ctrl,Repo: Persist\n    Ctrl-&gt;&gt;Repo: save_from_event(result)\n\n    Note over Ctrl,Activity: Publish &amp; React\n    Ctrl-&gt;&gt;EB: publish(CodeCreated)\n    EB-&gt;&gt;SB: handler(event)\n    Note over SB: Convert to payload\n    SB-&gt;&gt;Tree: code_created.emit(payload)\n    SB-&gt;&gt;Activity: activity_logged.emit(...)\n\n    Tree-&gt;&gt;Tree: Add \"Theme A\" with priority icon\n    Activity-&gt;&gt;Activity: Log \"Code created\"</code></pre>"},{"location":"tutorials/04-event-flow/#observing-the-flow","title":"Observing the Flow","text":"<p>To observe this in practice, you could:</p> <ol> <li>Add logging to each step</li> <li>Use EventBus history (<code>EventBus(history_size=100)</code>)</li> <li>Set breakpoints in deriver, controller, bridge, widget</li> </ol>"},{"location":"tutorials/04-event-flow/#why-this-architecture","title":"Why This Architecture?","text":"<ol> <li>Separation of concerns - Each layer has one job</li> <li>Testability - Deriver tests don't need UI, UI tests don't need domain</li> <li>Decoupling - UI doesn't know about derivers, just payloads</li> <li>Threading - SignalBridge handles cross-thread communication</li> <li>Reactivity - UI automatically updates when events flow</li> </ol>"},{"location":"tutorials/04-event-flow/#summary","title":"Summary","text":"<p>Events flow through:</p> <ol> <li>Controller calls pure deriver, handles side effects</li> <li>EventBus routes events to subscribers</li> <li>SignalBridge converts events to UI payloads</li> <li>Qt Signals emit payloads thread-safely</li> <li>UI Widgets update from payloads</li> </ol> <p>Each step is isolated and testable.</p>"},{"location":"tutorials/04-event-flow/#next-steps","title":"Next Steps","text":"<p>Let's look at how to update the SignalBridge for our new priority field.</p> <p>Next: Part 5: Adding a SignalBridge Payload</p>"},{"location":"tutorials/05-signal-bridge/","title":"Part 5: Adding a SignalBridge Payload","text":"<p>Now let's update the UI integration for our new priority field.</p>"},{"location":"tutorials/05-signal-bridge/#what-are-payloads","title":"What are Payloads?","text":"<p>Payloads are UI-friendly DTOs (Data Transfer Objects) that carry event data to Qt widgets. They:</p> <ul> <li>Use primitive types (no domain objects)</li> <li>Are immutable (frozen dataclasses)</li> <li>Carry metadata for UI rendering (timestamps, session info)</li> </ul> <p>Look at <code>src/application/signal_bridge/payloads.py</code>:</p> <pre><code>@dataclass(frozen=True)\nclass SignalPayload:\n    \"\"\"Base type for all signal payloads.\"\"\"\n    timestamp: datetime\n    session_id: str\n    is_ai_action: bool\n    event_type: str\n</code></pre> <p>All payloads inherit from this base.</p>"},{"location":"tutorials/05-signal-bridge/#creating-a-codecreatedpayload","title":"Creating a CodeCreatedPayload","text":"<p>For our <code>CodeCreated</code> event, we need a payload:</p> <pre><code>@dataclass(frozen=True)\nclass CodeCreatedPayload(SignalPayload):\n    \"\"\"Payload for code creation events.\"\"\"\n    code_id: int           # Primitive, not CodeId\n    name: str\n    color_hex: str         # \"#ff0000\", not Color\n    memo: Optional[str]\n    category_id: Optional[int]\n    priority: Optional[int]  # NEW field\n    owner: Optional[str]\n</code></pre> <p>Notice: - <code>CodeId</code> becomes <code>int</code> - <code>Color</code> becomes <code>str</code> (hex) - Domain types \u2192 primitive types</p>"},{"location":"tutorials/05-signal-bridge/#the-converter-pattern","title":"The Converter Pattern","text":"<p>A converter transforms domain events to payloads:</p> <pre><code>from src.application.signal_bridge.protocols import EventConverter\n\nclass CodeCreatedConverter(EventConverter):\n    \"\"\"Converts CodeCreated events to CodeCreatedPayload.\"\"\"\n\n    def convert(self, event: CodeCreated) -&gt; CodeCreatedPayload:\n        return CodeCreatedPayload(\n            timestamp=event.occurred_at,\n            session_id=getattr(event, 'session_id', 'local'),\n            is_ai_action=getattr(event, 'session_id', 'local') != 'local',\n            event_type=\"coding.code_created\",\n            code_id=event.code_id.value,\n            name=event.name,\n            color_hex=event.color.to_hex(),\n            memo=event.memo,\n            category_id=event.category_id.value if event.category_id else None,\n            priority=event.priority,  # Pass through new field\n            owner=event.owner,\n        )\n</code></pre> <p>The converter: 1. Receives the domain event 2. Extracts and transforms fields 3. Returns a UI-friendly payload</p>"},{"location":"tutorials/05-signal-bridge/#registering-the-converter","title":"Registering the Converter","text":"<p>In a context-specific SignalBridge:</p> <pre><code>class CodingSignalBridge(BaseSignalBridge):\n    # Define the Qt signal\n    code_created = Signal(object)\n\n    def _register_converters(self) -&gt; None:\n        self.register_converter(\n            \"coding.code_created\",       # Event type to listen for\n            CodeCreatedConverter(),       # Converter instance\n            \"code_created\"               # Signal name to emit\n        )\n</code></pre> <p>When <code>CodeCreated</code> is published: 1. EventBus routes to SignalBridge 2. SignalBridge calls <code>CodeCreatedConverter.convert(event)</code> 3. SignalBridge emits <code>code_created</code> signal with the payload</p>"},{"location":"tutorials/05-signal-bridge/#why-convert","title":"Why Convert?","text":"<p>You might ask: \"Why not just emit the domain event directly?\"</p>"},{"location":"tutorials/05-signal-bridge/#1-type-isolation","title":"1. Type Isolation","text":"<p>The UI shouldn't depend on domain types:</p> <pre><code># Bad: UI depends on domain\nfrom src.domain.coding.entities import Code, Color\nfrom src.domain.shared.types import CodeId\n\nclass TreeView(QWidget):\n    def on_code_created(self, event: CodeCreated):\n        color = event.color  # Type: Color\n        # Must import Color, know its API\n</code></pre> <pre><code># Good: UI depends only on primitives\nclass TreeView(QWidget):\n    def on_code_created(self, payload: CodeCreatedPayload):\n        color = payload.color_hex  # Type: str\n        # Just a string, no domain knowledge needed\n</code></pre>"},{"location":"tutorials/05-signal-bridge/#2-serialization","title":"2. Serialization","text":"<p>Payloads with primitives are easy to: - Log to files - Send over network (for remote collaboration) - Store in activity history</p>"},{"location":"tutorials/05-signal-bridge/#3-api-stability","title":"3. API Stability","text":"<p>Domain events might evolve (add fields, rename things). Payloads provide a stable UI contract.</p>"},{"location":"tutorials/05-signal-bridge/#thread-safety","title":"Thread Safety","text":"<p>The SignalBridge handles thread-safe emission:</p> <pre><code>def _emit_threadsafe(self, signal: Any, payload: Any) -&gt; None:\n    if is_main_thread():\n        signal.emit(payload)\n    else:\n        # Queue for main thread via Qt's mechanism\n        QMetaObject.invokeMethod(\n            self,\n            \"_do_emit\",\n            Qt.ConnectionType.QueuedConnection,\n            payload,\n        )\n</code></pre> <p>This is crucial because: - AI agents might create Codes from background threads - Qt widgets can only be updated from the main thread - The SignalBridge bridges this gap automatically</p>"},{"location":"tutorials/05-signal-bridge/#activity-feed-integration","title":"Activity Feed Integration","text":"<p>The base SignalBridge also emits to the activity feed:</p> <pre><code>def _dispatch_event(self, event_type: str, event: Any) -&gt; None:\n    # ... convert and emit to specific signal ...\n\n    # Also emit to activity feed\n    activity = self._create_activity_item(event, payload)\n    if activity:\n        self._emit_threadsafe(self.activity_logged, activity)\n</code></pre> <p>This means every domain event automatically appears in the activity panel.</p>"},{"location":"tutorials/05-signal-bridge/#using-payloads-in-ui","title":"Using Payloads in UI","text":"<p>A Qt widget connects to the signal:</p> <pre><code>class CodebookTreeView(QTreeView):\n    def __init__(self, signal_bridge: CodingSignalBridge):\n        super().__init__()\n        signal_bridge.code_created.connect(self._on_code_created)\n\n    def _on_code_created(self, payload: CodeCreatedPayload):\n        \"\"\"Add new code to tree.\"\"\"\n        item = QStandardItem(payload.name)\n        item.setData(payload.code_id, Qt.ItemDataRole.UserRole)\n        item.setForeground(QColor(payload.color_hex))\n\n        # NEW: Show priority indicator\n        if payload.priority:\n            item.setIcon(self._priority_icon(payload.priority))\n\n        self.model().appendRow(item)\n\n    def _priority_icon(self, priority: int) -&gt; QIcon:\n        # Return icon based on priority 1-5\n        ...\n</code></pre> <p>The widget: - Receives the payload (not the domain event) - Uses primitive types directly - Has no dependency on domain layer</p>"},{"location":"tutorials/05-signal-bridge/#summary","title":"Summary","text":"<p>Payloads and converters:</p> <ol> <li>Payloads are UI-friendly DTOs with primitive types</li> <li>Converters transform domain events to payloads</li> <li>Registration connects event types to signals</li> <li>Thread safety is handled automatically</li> <li>UI isolation - widgets don't depend on domain</li> </ol> <p>To add our priority field: 1. Add <code>priority</code> to <code>CodeCreatedPayload</code> 2. Map <code>event.priority</code> in the converter 3. Use <code>payload.priority</code> in UI widgets</p>"},{"location":"tutorials/05-signal-bridge/#next-steps","title":"Next Steps","text":"<p>Let's see how easy it is to test all of this.</p> <p>Next: Part 6: Testing Without Mocks</p>"},{"location":"tutorials/06-testing/","title":"Part 6: Testing Without Mocks","text":"<p>One of the biggest benefits of fDDD is testability. Let's see how easy it is to test each layer.</p>"},{"location":"tutorials/06-testing/#the-traditional-testing-problem","title":"The Traditional Testing Problem","text":"<p>In a traditional architecture, testing business logic requires:</p> <pre><code># Traditional test - lots of setup\ndef test_create_code_fails_with_duplicate_name():\n    # Setup database\n    db = sqlite3.connect(\":memory:\")\n    create_tables(db)\n\n    # Setup repositories\n    code_repo = CodeRepository(db)\n    category_repo = CategoryRepository(db)\n\n    # Create existing code\n    existing = Code(name=\"Theme A\", ...)\n    code_repo.save(existing)\n\n    # Setup event bus (mock or real)\n    event_bus = Mock()\n\n    # Setup service with all dependencies\n    service = CodeService(code_repo, category_repo, event_bus)\n\n    # Finally, the actual test\n    with pytest.raises(DuplicateNameError):\n        service.create_code(\"Theme A\", color)\n</code></pre> <p>Problems: - Slow: Database setup takes time - Brittle: Schema changes break tests - Complex: Many dependencies to wire up - Unclear: Hard to see what's actually being tested</p>"},{"location":"tutorials/06-testing/#testing-invariants-pure-functions","title":"Testing Invariants: Pure Functions","text":"<p>Invariants are trivially testable:</p> <pre><code>def test_valid_priority_values():\n    \"\"\"Priority 1-5 should be valid.\"\"\"\n    assert is_valid_priority(1) is True\n    assert is_valid_priority(3) is True\n    assert is_valid_priority(5) is True\n\ndef test_invalid_priority_values():\n    \"\"\"Priority outside 1-5 should be invalid.\"\"\"\n    assert is_valid_priority(0) is False\n    assert is_valid_priority(6) is False\n\ndef test_none_priority_is_valid():\n    \"\"\"None (no priority) should be valid.\"\"\"\n    assert is_valid_priority(None) is True\n</code></pre> <p>Notice: - No setup - just call the function - No mocks - pure data in, data out - Fast - microseconds per test - Clear - obvious what's being tested</p>"},{"location":"tutorials/06-testing/#testing-derivers-data-in-data-out","title":"Testing Derivers: Data In, Data Out","text":"<p>Derivers take state and return events or failures. Test them with data fixtures:</p> <pre><code># conftest.py - pytest fixtures\n@pytest.fixture\ndef empty_state() -&gt; CodingState:\n    return CodingState()\n\n@pytest.fixture\ndef populated_state(sample_codes, sample_categories) -&gt; CodingState:\n    return CodingState(\n        existing_codes=tuple(sample_codes),\n        existing_categories=tuple(sample_categories),\n        source_length=1000,\n        source_exists=True,\n    )\n</code></pre> <p>Now test the deriver:</p> <pre><code>class TestDeriveCreateCodePriority:\n    \"\"\"Tests for priority validation in derive_create_code.\"\"\"\n\n    def test_creates_code_with_valid_priority(self, empty_state):\n        result = derive_create_code(\n            name=\"High Priority\",\n            color=Color(red=100, green=150, blue=200),\n            memo=None,\n            category_id=None,\n            priority=5,\n            owner=\"user1\",\n            state=empty_state,\n        )\n\n        assert isinstance(result, CodeCreated)\n        assert result.priority == 5\n\n    def test_fails_with_invalid_priority(self, empty_state):\n        result = derive_create_code(\n            name=\"Bad Priority\",\n            color=Color(red=100, green=150, blue=200),\n            memo=None,\n            category_id=None,\n            priority=10,  # Invalid!\n            owner=\"user1\",\n            state=empty_state,\n        )\n\n        assert isinstance(result, CodeNotCreated)\n        assert \"Priority\" in result.message\n</code></pre> <p>Notice: - State is just data - no database required - Result is just data - assert on the returned event - No mocks - pure function, pure test - Fast - no I/O</p>"},{"location":"tutorials/06-testing/#testing-failure-cases","title":"Testing Failure Cases","text":"<p>Testing error conditions is equally simple:</p> <pre><code>def test_fails_with_duplicate_name(self, populated_state):\n    \"\"\"Duplicate name should return CodeNotCreated failure event.\"\"\"\n    result = derive_create_code(\n        name=\"Theme A\",  # Already exists in sample_codes\n        color=Color(red=100, green=100, blue=100),\n        memo=None,\n        category_id=None,\n        priority=3,\n        owner=\"user1\",\n        state=populated_state,\n    )\n\n    assert isinstance(result, CodeNotCreated)\n    assert result.reason == \"DUPLICATE_NAME\"\n    assert result.name == \"Theme A\"\n</code></pre> <p>Compare to traditional:</p> <pre><code># Traditional - awkward exception testing\ndef test_fails_with_duplicate_name(self, service):\n    with pytest.raises(DuplicateNameError) as exc_info:\n        service.create_code(\"Theme A\", color)\n    assert \"Theme A\" in str(exc_info.value)\n</code></pre> <p>The fDDD version is cleaner: just check the returned data.</p>"},{"location":"tutorials/06-testing/#testing-multiple-validation-rules","title":"Testing Multiple Validation Rules","text":"<p>Test that validations happen in order:</p> <pre><code>def test_validates_name_before_priority(self, empty_state):\n    \"\"\"Empty name should fail before priority is checked.\"\"\"\n    result = derive_create_code(\n        name=\"\",           # Invalid name\n        color=Color(red=100, green=100, blue=100),\n        memo=None,\n        category_id=None,\n        priority=100,      # Also invalid priority\n        owner=\"user1\",\n        state=empty_state,\n    )\n\n    # Name is checked first\n    assert isinstance(result, CodeNotCreated)\n    assert result.reason == \"EMPTY_NAME\"\n    # Priority error never reached\n</code></pre>"},{"location":"tutorials/06-testing/#testing-converters","title":"Testing Converters","text":"<p>Converters are also pure functions:</p> <pre><code>def test_converter_maps_all_fields():\n    event = CodeCreated(\n        event_id=\"123\",\n        occurred_at=datetime(2024, 1, 1),\n        code_id=CodeId(value=42),\n        name=\"Test Code\",\n        color=Color(red=255, green=128, blue=0),\n        priority=3,\n        memo=\"Test memo\",\n        category_id=None,\n        owner=\"user1\",\n    )\n\n    converter = CodeCreatedConverter()\n    payload = converter.convert(event)\n\n    assert payload.code_id == 42\n    assert payload.name == \"Test Code\"\n    assert payload.color_hex == \"#ff8000\"\n    assert payload.priority == 3\n</code></pre> <p>No Qt required. Just data transformation.</p>"},{"location":"tutorials/06-testing/#testing-the-full-flow","title":"Testing the Full Flow","text":"<p>Even integration tests can be clean:</p> <pre><code>def test_code_creation_flow():\n    \"\"\"Test the full flow: deriver -&gt; event_bus -&gt; signal_bridge.\"\"\"\n    # Setup\n    event_bus = EventBus()\n    received_payloads = []\n\n    # Mock signal bridge (just capture payloads)\n    def capture_payload(payload):\n        received_payloads.append(payload)\n\n    event_bus.subscribe(\"coding.code_created\", lambda e: capture_payload(\n        CodeCreatedConverter().convert(e)\n    ))\n\n    # Execute\n    state = CodingState()\n    result = derive_create_code(\n        name=\"Test\",\n        color=Color(100, 100, 100),\n        memo=None,\n        category_id=None,\n        priority=3,\n        owner=\"user1\",\n        state=state,\n    )\n\n    if isinstance(result, CodeCreated):\n        event_bus.publish(result)\n\n    # Verify\n    assert len(received_payloads) == 1\n    assert received_payloads[0].name == \"Test\"\n    assert received_payloads[0].priority == 3\n</code></pre> <p>No database. No Qt. Just the core logic.</p>"},{"location":"tutorials/06-testing/#test-organization","title":"Test Organization","text":"<p>Organize tests to mirror the architecture:</p> <pre><code>src/contexts/coding/core/tests/\n\u251c\u2500\u2500 conftest.py           # Shared fixtures (sample_codes, states)\n\u251c\u2500\u2500 test_invariants.py    # Pure predicate tests\n\u2514\u2500\u2500 test_derivers.py      # Event derivation tests\n\nsrc/application/tests/\n\u251c\u2500\u2500 test_event_bus.py     # Pub/sub tests\n\u2514\u2500\u2500 test_converters.py    # Payload conversion tests\n\nsrc/application/signal_bridge/tests/\n\u251c\u2500\u2500 test_base.py          # SignalBridge tests\n\u2514\u2500\u2500 test_payloads.py      # Payload tests\n</code></pre> <p>Each layer tested in isolation.</p>"},{"location":"tutorials/06-testing/#running-tests","title":"Running Tests","text":"<p>Fast, focused test runs:</p> <pre><code># Test just invariants (milliseconds)\npytest src/contexts/coding/core/tests/test_invariants.py -v\n\n# Test just derivers (still fast)\npytest src/contexts/coding/core/tests/test_derivers.py -v\n\n# Test specific feature\npytest -k \"priority\" -v\n</code></pre>"},{"location":"tutorials/06-testing/#summary","title":"Summary","text":"<p>Testing in fDDD is easy because:</p> <ol> <li>Invariants are pure functions - trivial to test</li> <li>Derivers are pure functions - just data in, data out</li> <li>No database needed for domain tests</li> <li>No mocks needed for pure functions</li> <li>Fast tests encourage thorough coverage</li> </ol> <p>The architecture pushes complexity to the edges, leaving the core logic simple and testable.</p>"},{"location":"tutorials/06-testing/#next-steps","title":"Next Steps","text":"<p>Let's put it all together with a complete reference diagram.</p> <p>Next: Part 7: Complete Flow Reference</p>"},{"location":"tutorials/07-complete-flow/","title":"Part 7: Complete Flow Reference","text":"<p>This is your reference for the complete Code creation flow with priority.</p>"},{"location":"tutorials/07-complete-flow/#the-full-diagram","title":"The Full Diagram","text":"<pre><code>flowchart TB\n    subgraph User [\"User Action\"]\n        UA[User clicks 'Create Code' button]\n    end\n\n    subgraph Presentation [\"Presentation Layer\"]\n        Dialog[CreateCodeDialog]\n        TreeView[CodebookTreeView]\n        ActivityPanel[ActivityPanel]\n    end\n\n    subgraph Controller [\"Controller (Application)\"]\n        Ctrl[CodingController.create_code]\n        BuildState[\"Build CodingState from repos\"]\n        Persist[\"repo.save_from_event()\"]\n        Publish[\"event_bus.publish()\"]\n    end\n\n    subgraph Domain [\"Domain Layer (Pure)\"]\n        Deriver[derive_create_code]\n        Inv1{is_valid_code_name?}\n        Inv2{is_code_name_unique?}\n        Inv3{is_valid_priority?}\n        Event[CodeCreated Event]\n        Fail[Failure]\n    end\n\n    subgraph EventBus [\"EventBus\"]\n        EB[Route to subscribers]\n    end\n\n    subgraph SignalBridge [\"SignalBridge\"]\n        SB[CodingSignalBridge]\n        Convert[Convert event \u2192 payload]\n        Emit[Thread-safe emit]\n    end\n\n    UA --&gt; Dialog\n    Dialog --&gt; Ctrl\n    Ctrl --&gt; BuildState\n    BuildState --&gt; Deriver\n\n    Deriver --&gt; Inv1\n    Inv1 --&gt;|No| Fail\n    Inv1 --&gt;|Yes| Inv2\n    Inv2 --&gt;|No| Fail\n    Inv2 --&gt;|Yes| Inv3\n    Inv3 --&gt;|No| Fail\n    Inv3 --&gt;|Yes| Event\n\n    Event --&gt; Persist\n    Persist --&gt; Publish\n    Publish --&gt; EB\n    EB --&gt; SB\n    SB --&gt; Convert\n    Convert --&gt; Emit\n    Emit --&gt; TreeView\n    Emit --&gt; ActivityPanel\n\n    Fail -.-&gt;|Return to UI| Dialog</code></pre>"},{"location":"tutorials/07-complete-flow/#layer-summary","title":"Layer Summary","text":"Layer Responsibility Pure? Side Effects Presentation User input, rendering No UI events Controller Orchestration No Read/write repos, publish Domain Business logic Yes None EventBus Message routing No Handler invocation SignalBridge Event\u2192Signal conversion No Thread marshaling UI Widgets Display updates No Qt rendering"},{"location":"tutorials/07-complete-flow/#key-files","title":"Key Files","text":"<pre><code>src/contexts/coding/core/\n\u251c\u2500\u2500 invariants.py          # is_valid_priority()\n\u251c\u2500\u2500 derivers.py            # derive_create_code()\n\u251c\u2500\u2500 events.py              # CodeCreated (with priority)\n\u251c\u2500\u2500 failure_events.py      # CodeNotCreated, CodeNotDeleted, etc.\n\u2514\u2500\u2500 entities.py            # Code entity\n\nsrc/contexts/shared/core/\n\u251c\u2500\u2500 types.py               # DomainEvent, typed IDs\n\u2514\u2500\u2500 failure_events.py      # FailureEvent base class\n\nsrc/application/\n\u251c\u2500\u2500 event_bus.py           # EventBus\n\u2514\u2500\u2500 signal_bridge/\n    \u251c\u2500\u2500 base.py            # BaseSignalBridge\n    \u2514\u2500\u2500 payloads.py        # CodeCreatedPayload (with priority)\n</code></pre>"},{"location":"tutorials/07-complete-flow/#detailed-sequence","title":"Detailed Sequence","text":"<pre><code>sequenceDiagram\n    autonumber\n    participant U as User\n    participant D as Dialog\n    participant C as Controller\n    participant R as Repository\n    participant DV as Deriver\n    participant EB as EventBus\n    participant SB as SignalBridge\n    participant TV as TreeView\n    participant AP as ActivityPanel\n\n    U-&gt;&gt;D: Click \"Create Code\"\n    D-&gt;&gt;C: create_code(name, color, priority)\n\n    Note over C: Build state from repositories\n    C-&gt;&gt;R: get_all_codes()\n    R--&gt;&gt;C: existing_codes\n    C-&gt;&gt;R: get_all_categories()\n    R--&gt;&gt;C: existing_categories\n\n    Note over C,DV: Call pure deriver\n    C-&gt;&gt;DV: derive_create_code(name, color, priority, state)\n\n    Note over DV: Validate with invariants\n    DV-&gt;&gt;DV: is_valid_code_name(name)\n    DV-&gt;&gt;DV: is_code_name_unique(name, codes)\n    DV-&gt;&gt;DV: is_valid_priority(priority)\n\n    alt All validations pass\n        DV--&gt;&gt;C: CodeCreated event\n        Note over C: Persist change\n        C-&gt;&gt;R: save_from_event(event)\n\n        Note over C: Publish event\n        C-&gt;&gt;EB: publish(CodeCreated)\n\n        Note over EB: Route to subscribers\n        EB-&gt;&gt;SB: handler(event)\n\n        Note over SB: Convert and emit\n        SB-&gt;&gt;SB: converter.convert(event)\n        SB-&gt;&gt;TV: code_created.emit(payload)\n        SB-&gt;&gt;AP: activity_logged.emit(activity)\n\n        TV-&gt;&gt;TV: Add code to tree\n        AP-&gt;&gt;AP: Show \"Code created\"\n    else Validation fails\n        DV--&gt;&gt;C: FailureEvent(reason)\n        C--&gt;&gt;D: Failure\n        D-&gt;&gt;D: Show error message\n    end</code></pre>"},{"location":"tutorials/07-complete-flow/#testing-at-each-layer","title":"Testing at Each Layer","text":"<pre><code>graph TB\n    subgraph INV [\"Invariants (src/contexts/coding/core/tests/test_invariants.py)\"]\n        INV_TEST[\"def test_valid_priority():&lt;br/&gt;    assert is_valid_priority(3) is True&lt;br/&gt;    assert is_valid_priority(10) is False\"]\n        INV_PROPS[\"\u2713 No setup&lt;br/&gt;\u2713 No mocks&lt;br/&gt;\u2713 Microseconds\"]\n    end\n\n    subgraph DER [\"Derivers (src/contexts/coding/core/tests/test_derivers.py)\"]\n        DER_TEST[\"def test_create_code_with_priority(empty_state):&lt;br/&gt;    result = derive_create_code(..., priority=3, state=empty_state)&lt;br/&gt;    assert isinstance(result, CodeCreated)&lt;br/&gt;    assert result.priority == 3\"]\n        DER_PROPS[\"\u2713 Data fixtures&lt;br/&gt;\u2713 No database&lt;br/&gt;\u2713 Fast\"]\n    end\n\n    subgraph CONV [\"Converters (src/application/signal_bridge/tests/test_payloads.py)\"]\n        CONV_TEST[\"def test_converter_includes_priority():&lt;br/&gt;    event = CodeCreated(..., priority=3)&lt;br/&gt;    payload = converter.convert(event)&lt;br/&gt;    assert payload.priority == 3\"]\n        CONV_PROPS[\"\u2713 Pure transformation&lt;br/&gt;\u2713 No Qt required\"]\n    end\n\n    subgraph INT [\"Integration (test_integration.py)\"]\n        INT_TEST[\"def test_full_flow():&lt;br/&gt;    event_bus = EventBus()&lt;br/&gt;    # Subscribe, derive, publish, verify\"]\n        INT_PROPS[\"\u2713 No database&lt;br/&gt;\u2713 No Qt&lt;br/&gt;\u2713 Core logic only\"]\n    end\n\n    INV --&gt; DER --&gt; CONV --&gt; INT</code></pre>"},{"location":"tutorials/07-complete-flow/#quick-reference-adding-a-new-field","title":"Quick Reference: Adding a New Field","text":"<p>To add a new field (like <code>priority</code>) to an existing flow:</p> <pre><code>flowchart LR\n    subgraph Step1 [\"1. Invariant\"]\n        I[\"core/invariants.py&lt;br/&gt;is_valid_priority()\"]\n    end\n\n    subgraph Step2 [\"2. Failure Event\"]\n        F[\"core/failure_events.py&lt;br/&gt;CodeNotCreated.invalid_priority()\"]\n    end\n\n    subgraph Step3 [\"3. Deriver\"]\n        D[\"core/derivers.py&lt;br/&gt;Add parameter&lt;br/&gt;Add validation\"]\n    end\n\n    subgraph Step4 [\"4. Event\"]\n        E[\"core/events.py&lt;br/&gt;Add field to CodeCreated\"]\n    end\n\n    subgraph Step5 [\"5. Payload\"]\n        P[\"signal_bridge/payloads.py&lt;br/&gt;Add field to payload\"]\n    end\n\n    subgraph Step6 [\"6. Converter\"]\n        C[\"Map event.priority&lt;br/&gt;to payload.priority\"]\n    end\n\n    subgraph Step7 [\"7. Tests\"]\n        T[\"core/tests/test_invariants.py&lt;br/&gt;core/tests/test_derivers.py\"]\n    end\n\n    Step1 --&gt; Step2 --&gt; Step3 --&gt; Step4 --&gt; Step5 --&gt; Step6 --&gt; Step7</code></pre>"},{"location":"tutorials/07-complete-flow/#checklist","title":"Checklist","text":"<ol> <li>Invariant (<code>src/contexts/coding/core/invariants.py</code>)</li> <li> <p>[ ] Add <code>is_valid_&lt;field&gt;()</code> pure predicate</p> </li> <li> <p>Failure Event (<code>src/contexts/coding/core/failure_events.py</code>)</p> </li> <li> <p>[ ] Add factory method to existing failure event class (e.g., <code>CodeNotCreated.invalid_priority()</code>)</p> </li> <li> <p>Deriver (<code>src/contexts/coding/core/derivers.py</code>)</p> </li> <li>[ ] Add parameter to function signature</li> <li>[ ] Add validation call</li> <li> <p>[ ] Return failure event if invalid (e.g., <code>CodeNotCreated.invalid_priority(value)</code>)</p> </li> <li> <p>Event (<code>src/contexts/coding/core/events.py</code>)</p> </li> <li>[ ] Add field to event dataclass</li> <li> <p>[ ] Add to <code>create()</code> factory method</p> </li> <li> <p>Payload (<code>src/application/signal_bridge/payloads.py</code>)</p> </li> <li> <p>[ ] Add field to payload dataclass</p> </li> <li> <p>Converter (context-specific)</p> </li> <li> <p>[ ] Map <code>event.&lt;field&gt;</code> to <code>payload.&lt;field&gt;</code></p> </li> <li> <p>Tests</p> </li> <li>[ ] <code>src/contexts/coding/core/tests/test_invariants.py</code>: Test the predicate</li> <li>[ ] <code>src/contexts/coding/core/tests/test_derivers.py</code>: Test valid/invalid cases</li> </ol>"},{"location":"tutorials/07-complete-flow/#youre-ready","title":"You're Ready!","text":"<p>You now understand the complete fDDD architecture:</p> <ul> <li>Invariants validate business rules (pure)</li> <li>Derivers compose invariants and produce events (pure)</li> <li>Events are immutable records of what happened</li> <li>EventBus routes events to subscribers</li> <li>SignalBridge converts events to UI payloads</li> <li>Payloads carry data to Qt widgets</li> </ul> <p>For common patterns and recipes, see the appendices.</p> <p>Appendices: - Appendix A: Common Patterns &amp; Recipes - Appendix B: When to Create New Patterns</p>"},{"location":"tutorials/appendices/A-common-patterns/","title":"Appendix A: Common Patterns &amp; Recipes","text":"<p>This appendix provides recipes for common scenarios you'll encounter.</p>"},{"location":"tutorials/appendices/A-common-patterns/#patterns-overview","title":"Patterns Overview","text":"<pre><code>graph TB\n    subgraph Validation [\"Validation Patterns\"]\n        P1[1. Multiple Errors]\n        P7[7. Failure Recovery]\n    end\n\n    subgraph EventPatterns [\"Event Patterns\"]\n        P2[2. Cross-Context]\n        P3[3. Cascading Ops]\n        P8[8. Audit Trail]\n    end\n\n    subgraph UIPatterns [\"UI Patterns\"]\n        P4[4. Optimistic Updates]\n    end\n\n    subgraph StatePatterns [\"State Patterns\"]\n        P5[5. State Composition]\n        P6[6. Event Replay]\n    end</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#pattern-1-handling-multiple-validation-errors","title":"Pattern 1: Handling Multiple Validation Errors","text":"<p>Sometimes you want to collect all validation errors, not just the first one.</p>"},{"location":"tutorials/appendices/A-common-patterns/#the-problem","title":"The Problem","text":"<p>Default derivers return on first failure:</p> <pre><code>def derive_create_code(name, color, priority, state):\n    if not is_valid_code_name(name):\n        return CodeNotCreated.empty_name()  # Stops here\n    if not is_valid_priority(priority):\n        return CodeNotCreated.invalid_priority(priority)  # Never reached\n</code></pre> <p>User sees one error, fixes it, sees another, fixes it... frustrating!</p>"},{"location":"tutorials/appendices/A-common-patterns/#the-solution-collect-errors","title":"The Solution: Collect Errors","text":"<pre><code>from dataclasses import dataclass\nfrom typing import List\n\n@dataclass(frozen=True)\nclass CodeNotCreatedBatch(FailureEvent):\n    \"\"\"Multiple validation errors for code creation.\"\"\"\n    errors: tuple[str, ...] = ()\n\n    @property\n    def message(self) -&gt; str:\n        return \"; \".join(self.errors)\n\n\ndef derive_create_code_with_all_errors(name, color, priority, state):\n    errors: List[str] = []\n\n    if not is_valid_code_name(name):\n        errors.append(\"Code name cannot be empty\")\n\n    if not is_code_name_unique(name, state.existing_codes):\n        errors.append(f\"Code name '{name}' already exists\")\n\n    if not is_valid_priority(priority):\n        errors.append(f\"Priority must be 1-5, got {priority}\")\n\n    if errors:\n        return CodeNotCreatedBatch(\n            event_id=...,\n            occurred_at=...,\n            event_type=\"CODE_NOT_CREATED/VALIDATION_ERRORS\",\n            errors=tuple(errors),\n        )\n\n    return CodeCreated.create(...)\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#in-ui","title":"In UI","text":"<pre><code>if isinstance(result, CodeNotCreated):\n    # Check if it's a validation batch error\n    if hasattr(result, 'errors') and result.errors:\n        for error in result.errors:\n            self.show_field_error(error)\n    else:\n        self.show_error(result.message)\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#pattern-2-cross-context-event-subscription","title":"Pattern 2: Cross-Context Event Subscription","text":"<p>Bounded contexts can react to each other's events.</p> <pre><code>sequenceDiagram\n    participant Coding as Coding Context\n    participant EB as EventBus\n    participant Reports as Reports Context\n\n    Coding-&gt;&gt;EB: publish(CodeDeleted)\n    EB-&gt;&gt;Reports: _on_code_deleted(event)\n    Reports-&gt;&gt;Reports: Mark affected reports stale</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#scenario","title":"Scenario","text":"<p>When a Code is deleted in the Coding context, the Reports context needs to update any reports using that code.</p>"},{"location":"tutorials/appendices/A-common-patterns/#implementation","title":"Implementation","text":"<pre><code># In ReportsSignalBridge or a policy handler\nclass ReportUpdatePolicy:\n    def __init__(self, event_bus, report_repo):\n        self._report_repo = report_repo\n        event_bus.subscribe(\"coding.code_deleted\", self._on_code_deleted)\n\n    def _on_code_deleted(self, event: CodeDeleted):\n        # Find reports using this code\n        affected_reports = self._report_repo.find_by_code(event.code_id)\n\n        for report in affected_reports:\n            # Update or invalidate the report\n            self._report_repo.mark_stale(report.id)\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#key-points","title":"Key Points","text":"<ul> <li>Subscribe by event type string</li> <li>Handler receives the domain event</li> <li>Keep handlers focused (single responsibility)</li> </ul>"},{"location":"tutorials/appendices/A-common-patterns/#pattern-3-cascading-operations","title":"Pattern 3: Cascading Operations","text":"<p>One operation triggers others (e.g., deleting a category orphans its codes).</p> <pre><code>flowchart LR\n    subgraph Deriver\n        D[derive_delete_category_cascade]\n    end\n\n    subgraph Events [\"Returns Multiple Events\"]\n        E1[CategoryDeleted]\n        E2[CodeMovedToCategory]\n        E3[CodeMovedToCategory]\n    end\n\n    subgraph Controller\n        C[Publish each event]\n    end\n\n    D --&gt; E1\n    D --&gt; E2\n    D --&gt; E3\n    E1 --&gt; C\n    E2 --&gt; C\n    E3 --&gt; C</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#the-problem_1","title":"The Problem","text":"<p>When deleting a category with codes: 1. Category must be deleted 2. Codes must be moved or deleted 3. UI must update for both</p>"},{"location":"tutorials/appendices/A-common-patterns/#solution-deriver-returns-multiple-events","title":"Solution: Deriver Returns Multiple Events","text":"<pre><code>from typing import List\n\n@dataclass(frozen=True)\nclass CategoryDeletedWithOrphans:\n    \"\"\"Batch event for category deletion.\"\"\"\n    category_deleted: CategoryDeleted\n    codes_moved: tuple[CodeMovedToCategory, ...]\n\n\ndef derive_delete_category_cascade(\n    category_id: CategoryId,\n    orphan_strategy: str,\n    state: CodingState,\n) -&gt; CategoryDeletedWithOrphans | Failure:\n    # ... validation ...\n\n    # Find affected codes\n    affected_codes = [c for c in state.existing_codes\n                      if c.category_id == category_id]\n\n    # Create move events\n    code_moves = tuple(\n        CodeMovedToCategory.create(\n            code_id=code.id,\n            old_category_id=category_id,\n            new_category_id=None,  # Move to uncategorized\n        )\n        for code in affected_codes\n    )\n\n    category_event = CategoryDeleted.create(category_id=category_id, ...)\n\n    return CategoryDeletedWithOrphans(\n        category_deleted=category_event,\n        codes_moved=code_moves,\n    )\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#controller-publishes-all","title":"Controller Publishes All","text":"<pre><code>def delete_category(self, category_id, strategy):\n    result = derive_delete_category_cascade(category_id, strategy, state)\n\n    if isinstance(result, CategoryNotDeleted):\n        return result\n\n    # Publish each event\n    self._event_bus.publish(result.category_deleted)\n    for move_event in result.codes_moved:\n        self._event_bus.publish(move_event)\n\n    return result\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#pattern-4-optimistic-ui-updates","title":"Pattern 4: Optimistic UI Updates","text":"<p>Update the UI immediately, then confirm with server/domain.</p> <pre><code>sequenceDiagram\n    participant U as User\n    participant UI as TreeView\n    participant C as Controller\n\n    U-&gt;&gt;UI: Rename to \"New Name\"\n    UI-&gt;&gt;UI: 1. Show \"New Name\" immediately\n    UI-&gt;&gt;C: rename_code(id, \"New Name\")\n\n    alt Success\n        C--&gt;&gt;UI: CodeRenamed event\n        UI-&gt;&gt;UI: Keep new name\n    else Failure\n        C--&gt;&gt;UI: FailureEvent(reason)\n        UI-&gt;&gt;UI: 3. Rollback to old name\n        UI-&gt;&gt;U: Show error\n    end</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#scenario_1","title":"Scenario","text":"<p>User renames a code. Show the new name immediately, but validate asynchronously.</p>"},{"location":"tutorials/appendices/A-common-patterns/#implementation_1","title":"Implementation","text":"<pre><code>class CodebookTreeView:\n    def on_code_rename_requested(self, code_id: int, new_name: str):\n        # 1. Optimistic update\n        item = self.find_item(code_id)\n        old_name = item.text()\n        item.setText(new_name)\n\n        # 2. Send to controller (might be async)\n        result = self.controller.rename_code(code_id, new_name)\n\n        # 3. Rollback if failed\n        if isinstance(result, CodeNotRenamed):\n            item.setText(old_name)\n            self.show_error(result.message)\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#pattern-5-state-composition-for-complex-validation","title":"Pattern 5: State Composition for Complex Validation","text":"<p>Build state incrementally for complex operations.</p>"},{"location":"tutorials/appendices/A-common-patterns/#scenario_2","title":"Scenario","text":"<p>Applying a code to text requires: - Code must exist - Source must exist - Position must be valid for source length</p>"},{"location":"tutorials/appendices/A-common-patterns/#solution-layered-state-building","title":"Solution: Layered State Building","text":"<pre><code>def apply_code_to_text(self, code_id, source_id, start, end, text):\n    # Layer 1: Basic state\n    codes = tuple(self._code_repo.get_all())\n\n    # Layer 2: Source-specific state\n    source = self._source_repo.get_by_id(source_id)\n    source_length = len(source.content) if source else None\n    source_exists = source is not None\n\n    # Layer 3: Segment context\n    segments = tuple(self._segment_repo.get_by_source(source_id))\n\n    # Compose state\n    state = CodingState(\n        existing_codes=codes,\n        existing_segments=segments,\n        source_length=source_length,\n        source_exists=source_exists,\n    )\n\n    return derive_apply_code_to_text(..., state=state)\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#pattern-6-event-replay-for-testing","title":"Pattern 6: Event Replay for Testing","text":"<p>Replay events to reconstruct state.</p>"},{"location":"tutorials/appendices/A-common-patterns/#use-case","title":"Use Case","text":"<p>Test that a sequence of operations produces expected final state.</p> <pre><code>def test_complex_scenario():\n    \"\"\"Create codes, merge them, verify final state.\"\"\"\n    event_bus = EventBus(history_size=100)\n\n    # Execute operations\n    code1 = derive_create_code(\"Theme A\", ..., empty_state)\n    event_bus.publish(code1)\n\n    code2 = derive_create_code(\"Theme B\", ..., state_with(code1))\n    event_bus.publish(code2)\n\n    merge = derive_merge_codes(code1.code_id, code2.code_id, state_with(code1, code2))\n    event_bus.publish(merge)\n\n    # Inspect history\n    history = event_bus.get_history()\n    assert len(history) == 3\n    assert isinstance(history[2].event, CodesMerged)\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#pattern-7-failure-recovery","title":"Pattern 7: Failure Recovery","text":"<p>Provide suggestions with failures.</p>"},{"location":"tutorials/appendices/A-common-patterns/#enhanced-failure-event-with-suggestions","title":"Enhanced Failure Event with Suggestions","text":"<pre><code>@dataclass(frozen=True)\nclass CodeNotCreated(FailureEvent):\n    name: str | None = None\n    existing_code_id: CodeId | None = None\n    suggestions: tuple[str, ...] = ()\n\n    @classmethod\n    def duplicate_name_with_suggestions(\n        cls, name: str, existing_id: CodeId, suggestions: tuple[str, ...]\n    ) -&gt; \"CodeNotCreated\":\n        return cls(\n            event_id=cls._generate_id(),\n            occurred_at=cls._now(),\n            event_type=\"CODE_NOT_CREATED/DUPLICATE_NAME\",\n            name=name,\n            existing_code_id=existing_id,\n            suggestions=suggestions,\n        )\n\n    @property\n    def message(self) -&gt; str:\n        msg = f\"Code name '{self.name}' already exists\"\n        if self.suggestions:\n            msg += f\". Try: {', '.join(self.suggestions)}\"\n        return msg\n\n\ndef derive_create_code(...):\n    if not is_code_name_unique(name, state.existing_codes):\n        existing = next(c for c in state.existing_codes\n                       if c.name.lower() == name.lower())\n        suggestions = generate_name_suggestions(name, state.existing_codes)\n        return CodeNotCreated.duplicate_name_with_suggestions(\n            name=name,\n            existing_id=existing.id,\n            suggestions=tuple(suggestions),\n        )\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#in-ui_1","title":"In UI","text":"<pre><code>if isinstance(result, CodeNotCreated) and result.reason == \"DUPLICATE_NAME\":\n    self.show_error(result.message)\n    if result.suggestions:\n        self.show_suggestions(result.suggestions)\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#pattern-8-audit-trail","title":"Pattern 8: Audit Trail","text":"<p>Events naturally form an audit trail.</p> <pre><code>flowchart LR\n    subgraph Sources [\"Event Sources\"]\n        S1[CodeCreated]\n        S2[CodeDeleted]\n        S3[SegmentCoded]\n    end\n\n    subgraph Bus [\"EventBus\"]\n        EB[subscribe_all]\n    end\n\n    subgraph Logger [\"AuditLogger\"]\n        AL[_log_event]\n        DB[(AuditLog DB)]\n    end\n\n    S1 --&gt; EB\n    S2 --&gt; EB\n    S3 --&gt; EB\n    EB --&gt; AL --&gt; DB</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#subscribe-to-all-events","title":"Subscribe to All Events","text":"<pre><code>class AuditLogger:\n    def __init__(self, event_bus, log_repo):\n        event_bus.subscribe_all(self._log_event)\n\n    def _log_event(self, event):\n        self._log_repo.save(AuditEntry(\n            timestamp=event.occurred_at,\n            event_type=type(event).__name__,\n            event_id=event.event_id,\n            data=asdict(event),  # Serialize event\n        ))\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#query-audit-trail","title":"Query Audit Trail","text":"<pre><code>def get_code_history(code_id: CodeId) -&gt; List[AuditEntry]:\n    return audit_repo.find_by_entity(\"code\", code_id.value)\n</code></pre>"},{"location":"tutorials/appendices/A-common-patterns/#summary","title":"Summary","text":"<p>These patterns help you:</p> <ol> <li>Multiple errors - Collect all validation issues</li> <li>Cross-context - React to events from other contexts</li> <li>Cascading - Handle related operations together</li> <li>Optimistic UI - Update immediately, rollback on failure</li> <li>State composition - Build validation state incrementally</li> <li>Event replay - Test complex scenarios</li> <li>Recovery suggestions - Help users fix errors</li> <li>Audit trail - Track all changes automatically</li> </ol> <p>Each pattern leverages the fDDD architecture's strengths: pure functions, explicit data, and event-driven communication.</p>"},{"location":"tutorials/appendices/B-when-to-create/","title":"Appendix B: When to Create New Patterns","text":"<p>This appendix helps you decide when to create new entities, contexts, or event types.</p>"},{"location":"tutorials/appendices/B-when-to-create/#decision-1-new-entity-vs-new-field","title":"Decision 1: New Entity vs. New Field","text":"<p>Question: Should I add a field to an existing entity, or create a new entity?</p> <pre><code>flowchart TD\n    Q1{Does it need its&lt;br/&gt;own identity?}\n    Q2{Different lifecycle&lt;br/&gt;from parent?}\n    Q3{Relates to multiple&lt;br/&gt;other entities?}\n    Q4{Complex validation&lt;br/&gt;rules of its own?}\n\n    FIELD[Add FIELD to&lt;br/&gt;existing entity]\n    ENTITY[Create new ENTITY]\n\n    Q1 --&gt;|Yes| ENTITY\n    Q1 --&gt;|No| Q2\n    Q2 --&gt;|Yes| ENTITY\n    Q2 --&gt;|No| Q3\n    Q3 --&gt;|Yes| ENTITY\n    Q3 --&gt;|No| Q4\n    Q4 --&gt;|Yes| ENTITY\n    Q4 --&gt;|No| FIELD</code></pre>"},{"location":"tutorials/appendices/B-when-to-create/#add-a-field-when","title":"Add a Field When:","text":"<ul> <li>The data belongs to the same aggregate root</li> <li>It shares the same lifecycle (created/deleted together)</li> <li>Validation rules are related to existing rules</li> <li>It doesn't introduce a new identity</li> </ul> <p>Example: Adding <code>priority</code> to Code</p> <pre><code># Good: Priority is an attribute of Code\n@dataclass(frozen=True)\nclass Code:\n    id: CodeId\n    name: str\n    color: Color\n    priority: Optional[int] = None  # Just add the field\n</code></pre>"},{"location":"tutorials/appendices/B-when-to-create/#create-a-new-entity-when","title":"Create a New Entity When:","text":"<ul> <li>It has its own identity (needs its own ID)</li> <li>It has a different lifecycle</li> <li>It relates to multiple other entities</li> <li>It has complex validation rules of its own</li> </ul> <p>Example: Tags (many-to-many with Codes)</p> <pre><code># Good: Tag is its own entity\n@dataclass(frozen=True)\nclass Tag:\n    id: TagId          # Own identity\n    name: str\n    color: Color\n\n@dataclass(frozen=True)\nclass CodeTag:         # Junction entity\n    code_id: CodeId\n    tag_id: TagId\n</code></pre> <p>Not just a field on Code, because: - Tags can exist independently - One Tag can be on multiple Codes - Tags have their own CRUD operations</p>"},{"location":"tutorials/appendices/B-when-to-create/#decision-2-new-bounded-context-vs-extending-existing","title":"Decision 2: New Bounded Context vs. Extending Existing","text":"<p>Question: Should this feature be a new bounded context, or part of an existing one?</p> <pre><code>flowchart TD\n    Q1{Uses same&lt;br/&gt;core entities?}\n    Q2{Same ubiquitous&lt;br/&gt;language?}\n    Q3{Same team&lt;br/&gt;works on it?}\n    Q4{Changes coordinated&lt;br/&gt;together?}\n\n    EXTEND[Extend existing&lt;br/&gt;context]\n    NEW[Create new&lt;br/&gt;bounded context]\n\n    Q1 --&gt;|No| NEW\n    Q1 --&gt;|Yes| Q2\n    Q2 --&gt;|No| NEW\n    Q2 --&gt;|Yes| Q3\n    Q3 --&gt;|No| NEW\n    Q3 --&gt;|Yes| Q4\n    Q4 --&gt;|No| NEW\n    Q4 --&gt;|Yes| EXTEND</code></pre>"},{"location":"tutorials/appendices/B-when-to-create/#extend-existing-context-when","title":"Extend Existing Context When:","text":"<ul> <li>The new feature uses the same core entities</li> <li>It shares the same ubiquitous language</li> <li>Changes would be coordinated together</li> <li>The team working on it is the same</li> </ul> <p>Example: Adding priority to Coding context</p> <p>Priority is part of how researchers organize codes. It uses Code entities and the same language (\"high priority codes\").</p>"},{"location":"tutorials/appendices/B-when-to-create/#create-new-context-when","title":"Create New Context When:","text":"<ul> <li>It has distinct entities and language</li> <li>Different teams might work on it</li> <li>It could be deployed/scaled independently</li> <li>It only needs to react to other contexts' events</li> </ul> <p>Example: Reports context</p> <pre><code>graph LR\n    subgraph Coding [\"Coding Context\"]\n        Code[Code]\n        Segment[Segment]\n        Category[Category]\n    end\n\n    subgraph Reports [\"Reports Context\"]\n        Report[Report]\n        Chart[Chart]\n        Template[ReportTemplate]\n    end\n\n    Coding --&gt;|events| Reports</code></pre> <p>Reports: - Has its own entities (Report, ReportTemplate, Chart) - Uses different language (\"generate report\", \"export PDF\") - Can be developed independently - Just subscribes to Coding events</p>"},{"location":"tutorials/appendices/B-when-to-create/#decision-3-new-event-type-vs-reusing-existing","title":"Decision 3: New Event Type vs. Reusing Existing","text":"<p>Question: Should I create a new event type, or can I reuse/extend an existing one?</p> <pre><code>flowchart TD\n    Q1{Distinct business&lt;br/&gt;action?}\n    Q2{Subscribers handle&lt;br/&gt;differently?}\n    Q3{Different required&lt;br/&gt;fields?}\n\n    EXTEND[Extend existing&lt;br/&gt;event with optional field]\n    NEW[Create new&lt;br/&gt;event type]\n\n    Q1 --&gt;|Yes| NEW\n    Q1 --&gt;|No| Q2\n    Q2 --&gt;|Yes| NEW\n    Q2 --&gt;|No| Q3\n    Q3 --&gt;|Yes| NEW\n    Q3 --&gt;|No| EXTEND</code></pre>"},{"location":"tutorials/appendices/B-when-to-create/#reuseextend-when","title":"Reuse/Extend When:","text":"<ul> <li>It's a variation of the same business action</li> <li>Subscribers would handle it the same way</li> <li>The extra data is optional</li> </ul> <p>Example: Adding priority to CodeCreated</p> <pre><code># Good: Just add the field\n@dataclass(frozen=True)\nclass CodeCreated(DomainEvent):\n    code_id: CodeId\n    name: str\n    color: Color\n    priority: Optional[int] = None  # Optional, backwards compatible\n</code></pre> <p>Existing subscribers still work (they ignore <code>priority</code>).</p>"},{"location":"tutorials/appendices/B-when-to-create/#create-new-event-when","title":"Create New Event When:","text":"<ul> <li>It represents a distinct business action</li> <li>Subscribers need to handle it differently</li> <li>It has different required fields</li> </ul> <p>Example: CodePriorityChanged</p> <pre><code># Good: Distinct action, distinct event\n@dataclass(frozen=True)\nclass CodePriorityChanged(DomainEvent):\n    code_id: CodeId\n    old_priority: Optional[int]\n    new_priority: Optional[int]\n</code></pre> <p>This is a separate action from creating a code. UI might: - Show \"Priority changed\" in activity feed - Update priority indicator without full refresh - Trigger priority-based notifications</p>"},{"location":"tutorials/appendices/B-when-to-create/#decision-4-new-invariant-vs-inline-check","title":"Decision 4: New Invariant vs. Inline Check","text":"<p>Question: Should I create a named invariant, or just check inline?</p> <pre><code>flowchart TD\n    Q1{Rule reused in&lt;br/&gt;multiple places?}\n    Q2{Has business meaning&lt;br/&gt;worth naming?}\n    Q3{Should be tested&lt;br/&gt;independently?}\n\n    INLINE[Inline check&lt;br/&gt;is fine]\n    NAMED[Create named&lt;br/&gt;invariant]\n\n    Q1 --&gt;|Yes| NAMED\n    Q1 --&gt;|No| Q2\n    Q2 --&gt;|Yes| NAMED\n    Q2 --&gt;|No| Q3\n    Q3 --&gt;|Yes| NAMED\n    Q3 --&gt;|No| INLINE</code></pre>"},{"location":"tutorials/appendices/B-when-to-create/#create-named-invariant-when","title":"Create Named Invariant When:","text":"<ul> <li>The rule is reused in multiple places</li> <li>The rule has business meaning worth naming</li> <li>It helps documentation/understanding</li> <li>It should be tested independently</li> </ul> <p>Example: <code>is_valid_priority</code></p> <pre><code># Good: Named, reusable, testable\ndef is_valid_priority(priority: Optional[int]) -&gt; bool:\n    \"\"\"Priority must be 1-5, or None.\"\"\"\n    if priority is None:\n        return True\n    return 1 &lt;= priority &lt;= 5\n</code></pre> <p>Used in: - <code>derive_create_code</code> - <code>derive_update_code_priority</code> - Potentially in UI validation</p>"},{"location":"tutorials/appendices/B-when-to-create/#inline-check-when","title":"Inline Check When:","text":"<ul> <li>It's a one-off, context-specific check</li> <li>The logic is trivial and obvious</li> <li>It would clutter the invariants module</li> </ul> <p>Example: Simple null check</p> <pre><code># Fine: Inline for obvious checks\nif category_id is not None:\n    if not does_category_exist(category_id, state.existing_categories):\n        return CodeNotCreated.category_not_found(category_id)\n</code></pre> <p>The <code>category_id is not None</code> check doesn't need a named invariant.</p>"},{"location":"tutorials/appendices/B-when-to-create/#decision-5-new-failure-event-reason-vs-reusing-existing","title":"Decision 5: New Failure Event Reason vs. Reusing Existing","text":"<p>Question: Should I create a new failure event reason, or reuse an existing one?</p> <pre><code>flowchart TD\n    Q1{Error has specific&lt;br/&gt;context to capture?}\n    Q2{UI needs to handle&lt;br/&gt;it differently?}\n    Q3{Message needs&lt;br/&gt;specific field values?}\n\n    GENERIC[Reuse generic&lt;br/&gt;failure type]\n    SPECIFIC[Create new&lt;br/&gt;failure type]\n\n    Q1 --&gt;|Yes| SPECIFIC\n    Q1 --&gt;|No| Q2\n    Q2 --&gt;|Yes| SPECIFIC\n    Q2 --&gt;|No| Q3\n    Q3 --&gt;|Yes| SPECIFIC\n    Q3 --&gt;|No| GENERIC</code></pre>"},{"location":"tutorials/appendices/B-when-to-create/#create-new-failure-event-reason-when","title":"Create New Failure Event Reason When:","text":"<ul> <li>The error has specific context to capture</li> <li>UI needs to handle it differently</li> <li>It helps debugging/logging</li> <li>The message needs specific field values</li> </ul> <p>Example: <code>CodeNotCreated.invalid_priority()</code></p> <pre><code>@dataclass(frozen=True)\nclass CodeNotCreated(FailureEvent):\n    priority_value: int | None = None  # Capture the bad value\n\n    @classmethod\n    def invalid_priority(cls, value: int) -&gt; \"CodeNotCreated\":\n        return cls(\n            event_type=\"CODE_NOT_CREATED/INVALID_PRIORITY\",\n            priority_value=value,\n            ...\n        )\n\n    @property\n    def message(self) -&gt; str:\n        if self.reason == \"INVALID_PRIORITY\":\n            return f\"Priority must be 1-5, got {self.priority_value}\"\n        ...\n</code></pre> <p>UI can show: \"Priority must be 1-5, got 10\" with the actual bad value.</p>"},{"location":"tutorials/appendices/B-when-to-create/#reuse-existing-failure-event-reason-when","title":"Reuse Existing Failure Event Reason When:","text":"<ul> <li>The error is truly generic</li> <li>No specific context helps</li> <li>It's a rare edge case</li> </ul> <p>Example: Generic validation error</p> <pre><code># Sometimes fine for rare cases - use a generic reason\nreturn CodeNotCreated(\n    event_type=\"CODE_NOT_CREATED/VALIDATION_ERROR\",\n    ...\n)\n</code></pre> <p>But usually, a specific reason is better for debugging and UI handling.</p>"},{"location":"tutorials/appendices/B-when-to-create/#master-decision-tree","title":"Master Decision Tree","text":"<pre><code>flowchart TD\n    START[Adding new&lt;br/&gt;functionality?]\n\n    START --&gt; Q1{Needs own&lt;br/&gt;identity/lifecycle?}\n    Q1 --&gt;|Yes| ENTITY[Create new&lt;br/&gt;ENTITY]\n    Q1 --&gt;|No| FIELD[Add FIELD to&lt;br/&gt;existing entity]\n\n    START --&gt; Q2{Distinct language&lt;br/&gt;and entities?}\n    Q2 --&gt;|Yes| CONTEXT[Create new&lt;br/&gt;BOUNDED CONTEXT]\n    Q2 --&gt;|No| EXTEND_CTX[Extend existing&lt;br/&gt;context]\n\n    START --&gt; Q3{Distinct business&lt;br/&gt;action?}\n    Q3 --&gt;|Yes| EVENT[Create new&lt;br/&gt;EVENT TYPE]\n    Q3 --&gt;|No| EXTEND_EVT[Add optional field&lt;br/&gt;to existing event]\n\n    START --&gt; Q4{Validation rule&lt;br/&gt;reused?}\n    Q4 --&gt;|Yes| INVARIANT[Create named&lt;br/&gt;INVARIANT]\n    Q4 --&gt;|No| INLINE[Inline check&lt;br/&gt;is fine]\n\n    START --&gt; Q5{Error has&lt;br/&gt;specific context?}\n    Q5 --&gt;|Yes| FAILURE[Create new&lt;br/&gt;FAILURE TYPE]\n    Q5 --&gt;|No| GENERIC[Reuse generic&lt;br/&gt;failure]</code></pre>"},{"location":"tutorials/appendices/B-when-to-create/#practical-examples","title":"Practical Examples","text":""},{"location":"tutorials/appendices/B-when-to-create/#example-1-adding-due-date-to-codes","title":"Example 1: Adding \"Due Date\" to Codes","text":"<p>Analysis: - Due date is an attribute of Code (same lifecycle) \u2192 Add field - Still Coding context (organizing codes) \u2192 Extend existing - Setting due date is distinct from creating \u2192 New event (<code>CodeDueDateSet</code>) - Due date validation is reusable \u2192 New invariant (<code>is_valid_due_date</code>) - Invalid date has specific info \u2192 New failure (<code>InvalidDueDate</code>)</p>"},{"location":"tutorials/appendices/B-when-to-create/#example-2-adding-user-permissions","title":"Example 2: Adding User Permissions","text":"<p>Analysis: - Users have own identity and lifecycle \u2192 New entity (<code>User</code>, <code>Permission</code>) - Permissions are cross-cutting, own language \u2192 New context (<code>Auth</code>) - Each permission action is distinct \u2192 New events (<code>PermissionGranted</code>, etc.) - Permission rules are complex \u2192 New invariants - Permission errors need context \u2192 New failures</p>"},{"location":"tutorials/appendices/B-when-to-create/#example-3-adding-code-description","title":"Example 3: Adding Code Description","text":"<p>Analysis: - Description is an attribute of Code \u2192 Add field - Same context \u2192 Extend existing - Updating description is like memo \u2192 Extend <code>CodeMemoUpdated</code> or rename to <code>CodeDescriptionUpdated</code> - Validation is simple (max length) \u2192 New invariant (<code>is_valid_description</code>) - Empty/too long have context \u2192 New failures (<code>DescriptionTooLong</code>)</p>"},{"location":"tutorials/appendices/B-when-to-create/#summary","title":"Summary","text":"<p>When in doubt:</p> <ol> <li>Start simple - Add a field before creating an entity</li> <li>Keep contexts focused - Don't merge unrelated concerns</li> <li>Name things explicitly - New event types are cheap</li> <li>Test drives design - If hard to test, probably wrong structure</li> <li>Ask the domain expert - Does this match how they think about it?</li> </ol> <p>The fDDD architecture is flexible. You can always refactor as understanding grows.</p>"},{"location":"user-manual/","title":"User Manual","text":"<p>Welcome to QualCoder v2 - a qualitative data analysis (QDA) application for coding and analyzing text, images, audio, and video.</p> <p>Info: AI-Agent Ready</p> <p>QualCoder v2 supports both human researchers and AI agents working together. All features are accessible via the UI and through MCP tools.</p>"},{"location":"user-manual/#what-is-qualcoder","title":"What is QualCoder?","text":"<p>QualCoder is a free, open-source qualitative data analysis tool that helps researchers:</p> <ul> <li>Code text, images, audio, and video data</li> <li>Organize codes into categories and hierarchies</li> <li>Analyze patterns and themes in your data</li> <li>Collaborate with AI agents for assisted coding</li> </ul>"},{"location":"user-manual/#quick-start","title":"Quick Start","text":"<ol> <li> <p>Create a Project \u2014 Start by creating a new project to organize your research data.</p> </li> <li> <p>Import Sources \u2014 Add your documents, images, or media files to analyze.</p> </li> <li> <p>Create Codes \u2014 Build your coding scheme with codes and categories.</p> </li> <li> <p>Apply Codes \u2014 Select text and apply codes to build your analysis.</p> </li> </ol>"},{"location":"user-manual/#features-overview","title":"Features Overview","text":"Feature Human AI Agent Create/edit codes \u2713 \u2713 Apply codes to text \u2713 \u2713 Suggest new codes - \u2713 Detect duplicates - \u2713 Auto-code patterns \u2713 \u2713 Organize categories \u2713 \u2713"},{"location":"user-manual/#system-requirements","title":"System Requirements","text":"<ul> <li>Python 3.12 or higher</li> <li>4GB RAM minimum (8GB recommended)</li> <li>500MB disk space for application</li> <li>macOS, Windows, or Linux</li> </ul>"},{"location":"user-manual/ai-features/","title":"AI-Assisted Features","text":"<p>QualCoder v2 includes AI-powered features to accelerate your qualitative analysis while keeping you in control.</p> <p>Info: Human-in-the-Loop</p> <p>All AI features are designed as suggestions. You always review and approve before changes are made to your data.</p>"},{"location":"user-manual/ai-features/#code-suggestions","title":"Code Suggestions","text":"<p>The AI analyzes your documents and suggests new codes based on patterns it detects.</p>"},{"location":"user-manual/ai-features/#getting-suggestions","title":"Getting Suggestions","text":"<ol> <li>Click AI &gt; Suggest Codes from the menu</li> <li>The AI analyzes your document content</li> <li>Review the suggestions (each shows name, description, and confidence level)</li> <li>Approve to add, Reject to dismiss, or Edit to modify before approving</li> </ol>"},{"location":"user-manual/ai-features/#duplicate-detection","title":"Duplicate Detection","text":"<p>Over time, you may create similar or redundant codes. The duplicate detector identifies potential matches.</p>"},{"location":"user-manual/ai-features/#finding-duplicates","title":"Finding Duplicates","text":"<ol> <li>Click AI &gt; Find Duplicates</li> <li>The AI compares all codes using semantic similarity</li> <li>Review candidate pairs (each shows code names, similarity %, and segment counts)</li> <li>Merge A \u2192 B to combine codes, or Dismiss if they're not duplicates</li> </ol> <p>Tip: Similarity Threshold - 90%+ - Very likely duplicates - 70-90% - Possibly related, review carefully - Below 70% - Probably distinct concepts</p>"},{"location":"user-manual/ai-features/#auto-code","title":"Auto-Code","text":"<p>Automatically apply codes to text matching a pattern.</p>"},{"location":"user-manual/ai-features/#pattern-based-auto-coding","title":"Pattern-Based Auto-Coding","text":"<ol> <li>Click AI &gt; Auto-Code</li> <li>Enter a search pattern:</li> <li>Plain text: <code>\"interview\"</code></li> <li>Regex: <code>\"participant\\s+\\d+\"</code></li> <li>Select the code to apply</li> <li>Click Preview to see matches</li> <li>Click Apply All to code all matches</li> </ol> <p>The Auto-Code dialog showing pattern entry and match options.</p> <p></p> <p>Preview of matches before applying the code.</p>"},{"location":"user-manual/ai-features/#auto-code-by-speaker","title":"Auto-Code by Speaker","text":"<p>For transcripts with speaker labels:</p> <ol> <li>Click AI &gt; Auto-Code by Speaker</li> <li>Select a speaker (e.g., \"Interviewer\", \"P01\")</li> <li>Select the code to apply</li> <li>All text by that speaker is coded</li> </ol>"},{"location":"user-manual/ai-features/#find-similar","title":"Find Similar","text":"<p>Find passages similar to a coded segment.</p>"},{"location":"user-manual/ai-features/#using-find-similar","title":"Using Find Similar","text":"<ol> <li>Select a coded segment</li> <li>Click AI &gt; Find Similar</li> <li>Review passages with similar meaning</li> <li>Apply the same code to matches</li> </ol> <p>Tip: Semantic Search</p> <p>This uses semantic similarity, not just keyword matching. It finds passages with similar meaning even if they use different words.</p>"},{"location":"user-manual/ai-features/#ai-agent-integration","title":"AI Agent Integration","text":"<p>QualCoder v2 supports AI agents (like Claude Code) working alongside human researchers via the MCP protocol.</p> <p>See MCP Setup Guide for configuration and available tools.</p>"},{"location":"user-manual/ai-features/#best-practices","title":"Best Practices","text":"<p>Review All Suggestions - Never blindly accept AI suggestions - Check if suggested codes fit your conceptual framework - Consider if distinctions are meaningful for your research</p> <p>Iterative Refinement - Start with AI suggestions as a first pass - Refine and merge codes as understanding develops - Use duplicate detection periodically</p> <p>Document Decisions - Add memos explaining why you accepted/rejected suggestions - Note merge decisions in code memos - Keep an audit trail of AI-assisted changes</p>"},{"location":"user-manual/codes/","title":"Managing Codes","text":"<p>Codes are labels you apply to segments of your data. They help categorize and analyze patterns in your research.</p>"},{"location":"user-manual/codes/#understanding-codes","title":"Understanding Codes","text":"<p>A code represents a concept, theme, or category in your data. Each code has:</p> <ul> <li>Name - A descriptive label (e.g., \"Positive Experience\")</li> <li>Color - Visual identifier for highlighting</li> <li>Memo - Optional notes about the code's meaning</li> </ul>"},{"location":"user-manual/codes/#creating-codes","title":"Creating Codes","text":""},{"location":"user-manual/codes/#create-a-new-code","title":"Create a New Code","text":"<ol> <li>In the Coding screen, press <code>N</code> (or click the + button)</li> <li>Enter a code name</li> <li>Select a color from the palette or enter a custom hex color</li> <li>Optionally add a description</li> <li>Click Create Code</li> </ol> <p>Tip: Hex Colors</p> <p>Hex colors start with <code>#</code> followed by 6 characters (e.g., <code>#FF5733</code>).</p>"},{"location":"user-manual/codes/#organizing-codes","title":"Organizing Codes","text":""},{"location":"user-manual/codes/#create-categories","title":"Create Categories","text":"<p>Categories group related codes into a hierarchy:</p> <ol> <li>Click Create Category</li> <li>Enter a category name</li> <li>Optionally select a parent category for nesting</li> <li>Add an optional memo to describe the category</li> <li>Click Create</li> </ol> <p></p>"},{"location":"user-manual/codes/#hierarchy-example","title":"Hierarchy Example","text":"<pre><code>Emotions (category)\n\u251c\u2500\u2500 Positive (code)\n\u2502   \u251c\u2500\u2500 Joy (code)\n\u2502   \u2514\u2500\u2500 Gratitude (code)\n\u2514\u2500\u2500 Negative (code)\n    \u251c\u2500\u2500 Frustration (code)\n    \u2514\u2500\u2500 Disappointment (code)\n</code></pre>"},{"location":"user-manual/codes/#editing-codes","title":"Editing Codes","text":""},{"location":"user-manual/codes/#rename-or-recolor","title":"Rename or Recolor","text":"<ol> <li>Right-click a code in the code list</li> <li>Select Edit</li> <li>Modify the name, color, or memo</li> <li>Click Save</li> </ol>"},{"location":"user-manual/codes/#add-a-memo","title":"Add a Memo","text":"<p>Memos help document what a code means and when to use it:</p> <ol> <li>Right-click a code</li> <li>Select Edit Memo</li> <li>Enter your description</li> <li>Click Save</li> </ol> <p>Tip: Good Memo Practice</p> <p>Include: - Definition of the code - Examples of when to apply it - Boundaries (what it doesn't include)</p>"},{"location":"user-manual/codes/#deleting-codes","title":"Deleting Codes","text":"<ol> <li>Right-click a code and select Delete</li> <li>If the code has coded segments, you'll see a warning with options:</li> <li>Delete code only - Removes the code but keeps segments (they become orphaned)</li> <li>Delete code and segments - Removes both</li> <li>Click Delete to confirm</li> </ol>"},{"location":"user-manual/codes/#ai-assisted-code-management","title":"AI-Assisted Code Management","text":""},{"location":"user-manual/codes/#suggest-new-codes","title":"Suggest New Codes","text":"<p>The AI can analyze your data and suggest new codes:</p> <ol> <li>Click AI &gt; Suggest Codes</li> <li>Review the suggestions (each shows name, description, and confidence level)</li> <li>Click Approve to add a code, or Reject to dismiss</li> </ol> <p></p>"},{"location":"user-manual/codes/#detect-duplicate-codes","title":"Detect Duplicate Codes","text":"<p>Over time, similar codes may accumulate. The duplicate detector helps clean up:</p> <ol> <li>Click AI &gt; Find Duplicates</li> <li>Review candidate pairs (each shows code names, similarity percentage, and segment counts)</li> <li>Click Merge A \u2192 B to combine codes, or Dismiss if they're not duplicates</li> </ol> <p></p>"},{"location":"user-manual/codes/#best-practices","title":"Best Practices","text":"<p>Code Naming - Use clear, descriptive names - Be consistent with verb tense (\"Expressing\" vs \"Expressed\") - Avoid overly long names</p> <p>Color Usage - Use similar colors for related codes - Reserve bright colors for important codes - Consider colorblind-friendly palettes</p> <p>Categories - Don't over-categorize early - Let categories emerge from your data - Reorganize as your understanding grows</p>"},{"location":"user-manual/codes/#next-steps","title":"Next Steps","text":"<p>With your coding scheme ready:</p> <ol> <li>Start coding your text</li> <li>Use auto-code for patterns</li> </ol>"},{"location":"user-manual/coding/","title":"Coding Text","text":"<p>Coding is the process of applying codes to segments of your data. This is the core activity in qualitative analysis.</p>"},{"location":"user-manual/coding/#the-coding-workflow","title":"The Coding Workflow","text":"<pre><code>graph LR\n    A[Select Text] --&gt; B[Choose Code]\n    B --&gt; C[Apply Code]\n    C --&gt; D[Segment Created]\n    D --&gt; E[Visible Highlight]</code></pre>"},{"location":"user-manual/coding/#the-coding-screen","title":"The Coding Screen","text":"<p>The coding screen has a streamlined toolbar with:</p> <ul> <li>Media Type Tabs - Switch between Text, A/V, Image, and PDF sources</li> <li>Search Box - Search within the current transcript</li> <li>Show Details - Toggle the details panel to view segment information</li> </ul>"},{"location":"user-manual/coding/#opening-a-source","title":"Opening a Source","text":"<ol> <li>Navigate to the Coding screen</li> <li>Select a source from the source list</li> <li>The document opens in the main viewer</li> </ol>"},{"location":"user-manual/coding/#selecting-text","title":"Selecting Text","text":""},{"location":"user-manual/coding/#basic-selection","title":"Basic Selection","text":"<ol> <li>Click at the start of your desired text</li> <li>Drag to the end of the selection</li> <li>Release the mouse button</li> </ol> <p>The selected text is highlighted.</p>"},{"location":"user-manual/coding/#selection-tips","title":"Selection Tips","text":"<p>Tip: Precise Selections - Double-click to select a word - Triple-click to select a paragraph - Hold <code>Shift</code> and click to extend selection</p> <p></p> <p>The coding screen with document viewer and code panel.</p>"},{"location":"user-manual/coding/#applying-codes","title":"Applying Codes","text":""},{"location":"user-manual/coding/#method-1-quick-mark-recommended","title":"Method 1: Quick Mark (Recommended)","text":"<p>The fastest way to code:</p> <ol> <li>Select a code from the code list (it becomes \"active\")</li> <li>Select text in the document</li> <li>Press <code>Q</code> to apply the code</li> </ol> <p>Info: Quick Mark</p> <p>The <code>Q</code> key instantly applies the currently active code to your selection. This is the most efficient way to code.</p>"},{"location":"user-manual/coding/#method-2-right-click-menu","title":"Method 2: Right-Click Menu","text":"<ol> <li>Select text in the document</li> <li>Right-click the selection</li> <li>Choose Apply Code</li> <li>Select a code from the submenu</li> </ol>"},{"location":"user-manual/coding/#method-3-code-panel","title":"Method 3: Code Panel","text":"<ol> <li>Select text in the document</li> <li>Click a code in the code panel</li> <li>The code is applied</li> </ol>"},{"location":"user-manual/coding/#viewing-coded-segments","title":"Viewing Coded Segments","text":""},{"location":"user-manual/coding/#highlights","title":"Highlights","text":"<p>Coded segments appear as colored highlights matching the code's color:</p> <ul> <li>Hover over a highlight to see the code name</li> <li>Overlapping codes show as mixed colors</li> <li>Click a highlight to select that segment</li> </ul>"},{"location":"user-manual/coding/#segment-list","title":"Segment List","text":"<p>View all segments for the current source:</p> <ol> <li>Click Show Details in the toolbar to reveal the details panel</li> <li>See a list of all coded segments for the selected code</li> <li>Click a segment to jump to it in the document</li> </ol>"},{"location":"user-manual/coding/#removing-codes","title":"Removing Codes","text":""},{"location":"user-manual/coding/#remove-from-segment","title":"Remove from Segment","text":"<ol> <li>Click on a coded segment</li> <li>Right-click and select Remove Code</li> <li>Choose which code to remove (if multiple)</li> </ol>"},{"location":"user-manual/coding/#remove-all-from-selection","title":"Remove All from Selection","text":"<ol> <li>Select the coded text</li> <li>Press <code>Delete</code> or <code>Backspace</code></li> <li>Confirm the removal</li> </ol>"},{"location":"user-manual/coding/#multiple-codes","title":"Multiple Codes","text":"<p>You can apply multiple codes to the same text:</p> <ol> <li>Code a segment with the first code</li> <li>Select the same (or overlapping) text</li> <li>Apply a second code</li> </ol> <p>The segment will show a combined color and list all applied codes on hover.</p> <p></p> <p>A text segment with multiple codes applied, showing combined highlighting.</p>"},{"location":"user-manual/coding/#creating-codes-while-coding","title":"Creating Codes While Coding","text":"<p>You can create new codes without leaving the coding screen:</p> <ol> <li>Press <code>N</code> to open the Create Code dialog</li> <li>Enter a code name</li> <li>Select a color from the palette</li> <li>Optionally add a description</li> <li>Click Create Code</li> </ol> <p></p> <p>The Create Code dialog opened via the N key shortcut.</p> <p>The new code is immediately available for use and can be applied to your current selection.</p> <p>Tip: In-Vivo Coding</p> <p>Press <code>V</code> to create a code from your selected text. The selection becomes the code name automatically.</p>"},{"location":"user-manual/coding/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"Action Shortcut Quick Mark <code>Q</code> New Code <code>N</code> In-Vivo Code <code>V</code> Unmark <code>U</code> Undo <code>Cmd+Z</code> / <code>Ctrl+Z</code> Redo <code>Cmd+Shift+Z</code> / <code>Ctrl+Y</code> Remove Code <code>Delete</code>"},{"location":"user-manual/coding/#segment-memos","title":"Segment Memos","text":"<p>Add notes to coded segments:</p> <ol> <li>Right-click on a coded segment</li> <li>Select Add Memo</li> <li>Enter your notes about this segment</li> <li>Click Save</li> </ol> <p>View all memos in the Memos Panel:</p> <p></p> <p>The Memos Panel showing all segment memos for the current source.</p>"},{"location":"user-manual/coding/#best-practices","title":"Best Practices","text":"<p>Consistent Boundaries - Include complete phrases or sentences - Avoid cutting words in half - Be consistent with punctuation inclusion</p> <p>Granularity - Code meaningful units of meaning - Don't code too large (entire paragraphs) - Don't code too small (single words) unless meaningful</p> <p>Overlap Strategy - Decide early if codes can overlap - Document your overlap rules - Be consistent throughout</p>"},{"location":"user-manual/coding/#next-steps","title":"Next Steps","text":"<ul> <li>Use AI features to accelerate coding</li> <li>Manage your codes as your scheme evolves</li> </ul>"},{"location":"user-manual/getting-started/","title":"Getting Started","text":"<p>This guide walks you through installing QualCoder v2 and creating your first project.</p>"},{"location":"user-manual/getting-started/#installation","title":"Installation","text":""},{"location":"user-manual/getting-started/#macos-linux","title":"macOS / Linux","text":"<pre><code># Clone the repository\ngit clone https://github.com/scope-impact/qualcoder-v2\ncd qualcoder-v2\n\n# Install dependencies\nuv sync\n\n# Run the application\nuv run python src/main.py\n</code></pre>"},{"location":"user-manual/getting-started/#windows","title":"Windows","text":"<pre><code># Clone the repository\ngit clone https://github.com/scope-impact/qualcoder-v2\ncd qualcoder-v2\n\n# Install dependencies\nuv sync\n\n# Run the application\nuv run python src/main.py\n</code></pre> <p>Tip: Using uv</p> <p>We recommend using uv for Python package management. It's fast and handles virtual environments automatically.</p>"},{"location":"user-manual/getting-started/#creating-a-project","title":"Creating a Project","text":"<p>A project is a container for all your research data: sources, codes, and annotations.</p>"},{"location":"user-manual/getting-started/#step-1-launch-qualcoder","title":"Step 1: Launch QualCoder","text":"<pre><code>uv run python src/main.py\n</code></pre> <p>The QualCoder main window on startup.</p>"},{"location":"user-manual/getting-started/#step-2-create-new-project","title":"Step 2: Create New Project","text":"<ol> <li>Click File &gt; New Project from the menu</li> <li>Enter a descriptive project name</li> <li>Choose a save location</li> <li>Click Create</li> </ol> <p>Info: Project Files</p> <p>QualCoder saves projects as <code>.qda</code> files (SQLite databases). All your data is stored in this single file, making it easy to backup and share.</p>"},{"location":"user-manual/getting-started/#step-3-open-an-existing-project","title":"Step 3: Open an Existing Project","text":"<ol> <li>Click File &gt; Open Project</li> <li>Navigate to your <code>.qda</code> file</li> <li>Click Open</li> </ol>"},{"location":"user-manual/getting-started/#project-structure","title":"Project Structure","text":"<p>Once your project is open, you'll see the main application shell with:</p> <ul> <li>Navigation Bar - A unified horizontal bar with QUALCODER logo, Project, Files, Coding, Reports, and AI sections. Click any item to switch screens.</li> <li>Toolbar - Context-specific actions for the current screen</li> <li>Content Area - The main workspace for the current screen</li> </ul> <p>The navigation bar provides quick access to all areas of the application. The currently active screen is highlighted.</p>"},{"location":"user-manual/getting-started/#next-steps","title":"Next Steps","text":"<p>Now that you have a project, you can:</p> <ol> <li>Import source documents to analyze</li> <li>Create codes for your coding scheme</li> <li>Start coding your data</li> </ol>"},{"location":"user-manual/mcp-setup/","title":"MCP Setup Guide","text":"<p>Connect AI assistants like Claude Code to QualCoder for AI-assisted qualitative analysis.</p>"},{"location":"user-manual/mcp-setup/#what-is-mcp","title":"What is MCP?","text":"<p>MCP (Model Context Protocol) allows AI assistants to interact with QualCoder in real-time. When connected, AI can:</p> <ul> <li>Read your documents and codes</li> <li>Apply codes to text segments</li> <li>Navigate to specific locations</li> <li>Suggest codes and patterns</li> </ul> <p>All AI actions appear immediately in the UI, so you always see what's happening.</p>"},{"location":"user-manual/mcp-setup/#quick-setup","title":"Quick Setup","text":""},{"location":"user-manual/mcp-setup/#step-1-start-qualcoder","title":"Step 1: Start QualCoder","text":"<pre><code>uv run python -m src.main\n</code></pre> <p>The MCP server starts automatically on <code>localhost:8765</code>.</p>"},{"location":"user-manual/mcp-setup/#step-2-open-a-project","title":"Step 2: Open a Project","text":"<p>Open or create a project in QualCoder. AI tools only work when a project is open.</p>"},{"location":"user-manual/mcp-setup/#step-3-connect-your-ai-assistant","title":"Step 3: Connect Your AI Assistant","text":"<p>Claude Code auto-connects via the <code>.mcp.json</code> file in the project.</p> <p>To verify: type <code>/mcp</code> in Claude Code - you should see <code>qualcoder</code> listed.</p>"},{"location":"user-manual/mcp-setup/#manual-configuration","title":"Manual Configuration","text":"<p>If your AI client doesn't auto-detect the configuration, add this to your MCP settings:</p> <pre><code>{\n  \"mcpServers\": {\n    \"qualcoder\": {\n      \"type\": \"http\",\n      \"url\": \"http://localhost:8765/mcp\"\n    }\n  }\n}\n</code></pre>"},{"location":"user-manual/mcp-setup/#claude-desktop","title":"Claude Desktop","text":"<p>Add to <code>claude_desktop_config.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"qualcoder\": {\n      \"type\": \"http\",\n      \"url\": \"http://localhost:8765/mcp\"\n    }\n  }\n}\n</code></pre>"},{"location":"user-manual/mcp-setup/#available-ai-tools","title":"Available AI Tools","text":"<p>Once connected, AI assistants can use these tools:</p> Tool What it does <code>get_project_context</code> See what project is open, list sources and cases <code>list_sources</code> Get all documents in the project <code>read_source_content</code> Read document text <code>list_codes</code> See all codes in your codebook <code>batch_apply_codes</code> Apply codes to text (you'll see it immediately) <code>navigate_to_segment</code> Jump to a specific location in the UI"},{"location":"user-manual/mcp-setup/#real-time-updates","title":"Real-Time Updates","text":"<p>When AI applies a code:</p> <ol> <li>You see the highlight appear immediately</li> <li>The codes panel updates</li> <li>You can undo or modify the AI's work</li> </ol> <p>This \"human-in-the-loop\" design means you stay in control.</p>"},{"location":"user-manual/mcp-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-manual/mcp-setup/#connection-refused","title":"\"Connection refused\"","text":"<ul> <li>Make sure QualCoder is running</li> <li>Check port 8765 is not blocked: <code>lsof -i :8765</code></li> </ul>"},{"location":"user-manual/mcp-setup/#no-project-open","title":"\"No project open\"","text":"<ul> <li>Open a project in QualCoder before using AI tools</li> </ul>"},{"location":"user-manual/mcp-setup/#ai-tools-not-appearing","title":"AI tools not appearing","text":"<ul> <li>Restart Claude Code after starting QualCoder</li> <li>Check <code>/mcp</code> shows the qualcoder server</li> </ul>"},{"location":"user-manual/mcp-setup/#security","title":"Security","text":"<ul> <li>The MCP server only accepts local connections (<code>localhost</code>)</li> <li>No data is sent externally through MCP</li> <li>AI actions are visible in the UI for your review</li> </ul>"},{"location":"user-manual/mcp-setup/#see-also","title":"See Also","text":"<ul> <li>AI Features - Built-in AI assistance</li> <li>MCP API Reference - Technical API details</li> </ul>"},{"location":"user-manual/settings/","title":"Settings and Preferences","text":"<p>Configure QualCoder to match your workflow and preferences.</p>"},{"location":"user-manual/settings/#opening-settings","title":"Opening Settings","text":"<p>Access settings from the menu bar:</p> <ol> <li>Click Settings in the menu bar (or press <code>Cmd+,</code> on macOS)</li> <li>The Settings dialog opens with a sidebar for navigation</li> </ol>"},{"location":"user-manual/settings/#appearance","title":"Appearance","text":""},{"location":"user-manual/settings/#theme","title":"Theme","text":"<p>Choose between light and dark themes:</p> <ol> <li>Go to Appearance in the sidebar</li> <li>Click Light or Dark theme button</li> <li>The UI updates immediately</li> </ol> <p>Tip: Eye Strain</p> <p>Use dark theme in low-light environments to reduce eye strain during extended coding sessions.</p>"},{"location":"user-manual/settings/#font-size","title":"Font Size","text":"<p>Adjust the application font size:</p> <ol> <li>In Appearance, find the Font Size slider</li> <li>Drag the slider between 10px and 24px</li> <li>The preview updates as you adjust</li> </ol>"},{"location":"user-manual/settings/#font-family","title":"Font Family","text":"<p>Choose your preferred font:</p> <ol> <li>In Appearance, find the Font Family dropdown</li> <li>Select from available fonts (Inter, Roboto, System Default)</li> <li>The change applies immediately</li> </ol>"},{"location":"user-manual/settings/#language","title":"Language","text":"<p>Select your preferred application language:</p> <ol> <li>Go to Language in the sidebar</li> <li>Choose from available languages:</li> <li>English</li> <li>Spanish</li> <li>German</li> <li>French</li> <li>Portuguese</li> <li>Some changes may require restart</li> </ol> <p>Note: Translation Coverage</p> <p>Not all languages have complete translations. Missing translations fall back to English.</p>"},{"location":"user-manual/settings/#backup-settings","title":"Backup Settings","text":"<p>Configure automatic project backups:</p>"},{"location":"user-manual/settings/#enable-backups","title":"Enable Backups","text":"<ol> <li>Go to Backup in the sidebar</li> <li>Check Enable automatic backups</li> </ol>"},{"location":"user-manual/settings/#backup-interval","title":"Backup Interval","text":"<p>Set how often backups are created:</p> <ol> <li>Enable backups first</li> <li>Set the interval (in minutes) using the spinbox</li> <li>Default is 30 minutes</li> </ol> <p>Warning: Backup Location</p> <p>Backups are stored alongside your project file. Ensure you have sufficient disk space.</p>"},{"location":"user-manual/settings/#av-coding-settings","title":"AV Coding Settings","text":"<p>Configure settings for audio/video coding:</p>"},{"location":"user-manual/settings/#timestamp-format","title":"Timestamp Format","text":"<p>Choose how timestamps are displayed:</p> <ol> <li>Go to AV Coding in the sidebar</li> <li>Select a timestamp format:</li> <li>HH:MM:SS - Hours, minutes, seconds (default)</li> <li>MM:SS - Minutes and seconds only</li> <li>SS.ms - Seconds with milliseconds</li> </ol>"},{"location":"user-manual/settings/#speaker-format","title":"Speaker Format","text":"<p>Customize how speaker names appear in transcripts:</p> <ol> <li>In AV Coding, find Speaker Format</li> <li>Enter your preferred format using <code>{n}</code> as a placeholder</li> <li>Examples:</li> <li><code>Speaker {n}</code> \u2192 Speaker 1, Speaker 2</li> <li><code>P{n}</code> \u2192 P1, P2</li> <li><code>Interviewee {n}</code> \u2192 Interviewee 1, Interviewee 2</li> </ol> <p>The preview shows how speaker names will appear.</p>"},{"location":"user-manual/settings/#saving-settings","title":"Saving Settings","text":"<p>Settings are saved automatically as you change them. There's no need to click Save.</p> <ul> <li>OK - Closes the dialog</li> <li>Cancel - Closes the dialog (changes are already saved)</li> </ul>"},{"location":"user-manual/settings/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"Action Shortcut Open Settings <code>Cmd+,</code> (macOS) / <code>Ctrl+,</code> (Windows/Linux)"},{"location":"user-manual/settings/#next-steps","title":"Next Steps","text":"<ul> <li>Start coding your text</li> <li>Manage your codes</li> <li>Import sources</li> </ul>"},{"location":"user-manual/sources/","title":"Managing Sources","text":"<p>Sources are the documents and media files you analyze. QualCoder supports text, PDF, images, audio, and video.</p>"},{"location":"user-manual/sources/#supported-file-types","title":"Supported File Types","text":"Type Extensions Features Text <code>.txt</code>, <code>.docx</code>, <code>.rtf</code> Full-text search, coding PDF <code>.pdf</code> Text extraction, region coding Images <code>.png</code>, <code>.jpg</code>, <code>.gif</code> Region selection, coding Audio <code>.mp3</code>, <code>.wav</code>, <code>.m4a</code> Timeline coding, transcription Video <code>.mp4</code>, <code>.mov</code>, <code>.avi</code> Timeline coding, frame extraction"},{"location":"user-manual/sources/#importing-sources","title":"Importing Sources","text":""},{"location":"user-manual/sources/#import-individual-files","title":"Import Individual Files","text":"<ol> <li>Navigate to the File Manager screen</li> <li>Click Import Files</li> <li>Select one or more files</li> <li>Click Open</li> </ol> <p>The File Manager showing imported source files with type statistics.</p> <p>Tip: Bulk Import</p> <p>You can select multiple files at once. Hold <code>Cmd</code> (macOS) or <code>Ctrl</code> (Windows) while clicking to select multiple files.</p>"},{"location":"user-manual/sources/#import-a-folder","title":"Import a Folder","text":"<p>To import all files from a folder:</p> <ol> <li>Click Import Folder</li> <li>Select the folder containing your files</li> <li>Choose file type filters (optional)</li> <li>Click Import</li> </ol>"},{"location":"user-manual/sources/#organizing-sources","title":"Organizing Sources","text":""},{"location":"user-manual/sources/#create-folders","title":"Create Folders","text":"<p>Organize sources into folders for better management:</p> <ol> <li>Click New Folder button</li> <li>Enter a folder name</li> <li>Click Create</li> </ol>"},{"location":"user-manual/sources/#move-sources","title":"Move Sources","text":"<p>Drag and drop sources into folders to organize them.</p>"},{"location":"user-manual/sources/#source-metadata","title":"Source Metadata","text":"<p>Each source has metadata you can view and edit:</p> <ol> <li>Right-click a source</li> <li>Select View Metadata</li> <li>Edit fields like:</li> <li>Author</li> <li>Date</li> <li>Description</li> <li>Custom attributes</li> </ol>"},{"location":"user-manual/sources/#viewing-sources","title":"Viewing Sources","text":""},{"location":"user-manual/sources/#text-documents","title":"Text Documents","text":"<p>Click a text source to open it in the document viewer. The text is displayed with:</p> <ul> <li>Line numbers</li> <li>Coding highlights</li> <li>Search functionality</li> </ul>"},{"location":"user-manual/sources/#pdf-documents","title":"PDF Documents","text":"<p>PDFs are displayed page-by-page with:</p> <ul> <li>Page navigation</li> <li>Zoom controls</li> <li>Text selection for coding</li> </ul>"},{"location":"user-manual/sources/#images","title":"Images","text":"<p>Images open in the image viewer with:</p> <ul> <li>Pan and zoom</li> <li>Region selection tools</li> <li>Overlay of coded regions</li> </ul> <p></p> <p>The Image Viewer displaying an imported image with zoom controls.</p>"},{"location":"user-manual/sources/#audiovideo","title":"Audio/Video","text":"<p>Media files open in the media player with:</p> <ul> <li>Playback controls</li> <li>Timeline visualization</li> <li>Segment marking tools</li> </ul> <p></p> <p>The Media Player with playback controls for audio/video files.</p>"},{"location":"user-manual/sources/#empty-state","title":"Empty State","text":"<p>When no sources have been imported yet:</p> <p></p> <p>The File Manager empty state with import options.</p>"},{"location":"user-manual/sources/#deleting-sources","title":"Deleting Sources","text":"<p>Warning: Caution</p> <p>Deleting a source also removes all coded segments associated with it.</p> <ol> <li>Right-click the source</li> <li>Select Delete</li> <li>Confirm the deletion</li> </ol>"},{"location":"user-manual/sources/#next-steps","title":"Next Steps","text":"<p>With your sources imported, you're ready to:</p> <ol> <li>Create a coding scheme</li> <li>Start coding your data</li> </ol>"}]}